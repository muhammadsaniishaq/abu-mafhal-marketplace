function h$(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var CC={exports:{}},p0={},TC={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=Symbol.for("react.element"),f$=Symbol.for("react.portal"),p$=Symbol.for("react.fragment"),m$=Symbol.for("react.strict_mode"),g$=Symbol.for("react.profiler"),y$=Symbol.for("react.provider"),v$=Symbol.for("react.context"),x$=Symbol.for("react.forward_ref"),b$=Symbol.for("react.suspense"),w$=Symbol.for("react.memo"),_$=Symbol.for("react.lazy"),R3=Symbol.iterator;function j$(t){return t===null||typeof t!="object"?null:(t=R3&&t[R3]||t["@@iterator"],typeof t=="function"?t:null)}var PC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OC=Object.assign,IC={};function zc(t,e,r){this.props=t,this.context=e,this.refs=IC,this.updater=r||PC}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RC(){}RC.prototype=zc.prototype;function g2(t,e,r){this.props=t,this.context=e,this.refs=IC,this.updater=r||PC}var y2=g2.prototype=new RC;y2.constructor=g2;OC(y2,zc.prototype);y2.isPureReactComponent=!0;var D3=Array.isArray,DC=Object.prototype.hasOwnProperty,v2={current:null},MC={key:!0,ref:!0,__self:!0,__source:!0};function $C(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)DC.call(e,n)&&!MC.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:tf,type:t,key:a,ref:o,props:s,_owner:v2.current}}function k$(t,e){return{$$typeof:tf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x2(t){return typeof t=="object"&&t!==null&&t.$$typeof===tf}function N$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var M3=/\/+/g;function yv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?N$(""+t.key):e.toString(36)}function Hp(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tf:case f$:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+yv(o,0):n,D3(s)?(r="",t!=null&&(r=t.replace(M3,"$&/")+"/"),Hp(s,e,r,"",function(u){return u})):s!=null&&(x2(s)&&(s=k$(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(M3,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",D3(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+yv(a,l);o+=Hp(a,e,r,c,s)}else if(c=j$(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+yv(a,l++),o+=Hp(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zf(t,e,r){if(t==null)return t;var n=[],s=0;return Hp(t,n,"","",function(a){return e.call(r,a,s++)}),n}function S$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zr={current:null},Kp={transition:null},E$={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:Kp,ReactCurrentOwner:v2};function LC(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:Zf,forEach:function(t,e,r){Zf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Zf(t,function(){e++}),e},toArray:function(t){return Zf(t,function(e){return e})||[]},only:function(t){if(!x2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=zc;Ue.Fragment=p$;Ue.Profiler=g$;Ue.PureComponent=g2;Ue.StrictMode=m$;Ue.Suspense=b$;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E$;Ue.act=LC;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=OC({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=v2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)DC.call(e,c)&&!MC.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:tf,type:t.type,key:s,ref:a,props:n,_owner:o}};Ue.createContext=function(t){return t={$$typeof:v$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y$,_context:t},t.Consumer=t};Ue.createElement=$C;Ue.createFactory=function(t){var e=$C.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:x$,render:t}};Ue.isValidElement=x2;Ue.lazy=function(t){return{$$typeof:_$,_payload:{_status:-1,_result:t},_init:S$}};Ue.memo=function(t,e){return{$$typeof:w$,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Kp.transition;Kp.transition={};try{t()}finally{Kp.transition=e}};Ue.unstable_act=LC;Ue.useCallback=function(t,e){return zr.current.useCallback(t,e)};Ue.useContext=function(t){return zr.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return zr.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return zr.current.useEffect(t,e)};Ue.useId=function(){return zr.current.useId()};Ue.useImperativeHandle=function(t,e,r){return zr.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return zr.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return zr.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return zr.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return zr.current.useReducer(t,e,r)};Ue.useRef=function(t){return zr.current.useRef(t)};Ue.useState=function(t){return zr.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return zr.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return zr.current.useTransition()};Ue.version="18.3.1";TC.exports=Ue;var T=TC.exports;const L=Ze(T),A$=h$({__proto__:null,default:L},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C$=T,T$=Symbol.for("react.element"),P$=Symbol.for("react.fragment"),O$=Object.prototype.hasOwnProperty,I$=C$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R$={key:!0,ref:!0,__self:!0,__source:!0};function FC(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)O$.call(e,n)&&!R$.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:T$,type:t,key:a,ref:o,props:s,_owner:I$.current}}p0.Fragment=P$;p0.jsx=FC;p0.jsxs=FC;CC.exports=p0;var i=CC.exports,nb={},UC={exports:{}},bn={},VC={exports:{}},BC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var $=F.length;F.push(H);e:for(;0<$;){var U=$-1>>>1,V=F[U];if(0<s(V,H))F[U]=H,F[$]=V,$=U;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var H=F[0],$=F.pop();if($!==H){F[0]=$;e:for(var U=0,V=F.length,Z=V>>>1;U<Z;){var ye=2*(U+1)-1,Y=F[ye],re=ye+1,Pe=F[re];if(0>s(Y,$))re<V&&0>s(Pe,Y)?(F[U]=Pe,F[re]=$,U=re):(F[U]=Y,F[ye]=$,U=ye);else if(re<V&&0>s(Pe,$))F[U]=Pe,F[re]=$,U=re;else break e}}return H}function s(F,H){var $=F.sortIndex-H.sortIndex;return $!==0?$:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,p=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=F)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function S(F){if(x=!1,_(F),!p)if(r(c)!==null)p=!0,G(j);else{var H=r(u);H!==null&&Q(S,H.startTime-F)}}function j(F,H){p=!1,x&&(x=!1,w(E),E=-1),g=!0;var $=f;try{for(_(H),h=r(c);h!==null&&(!(h.expirationTime>H)||F&&!O());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var V=U(h.expirationTime<=H);H=t.unstable_now(),typeof V=="function"?h.callback=V:h===r(c)&&n(c),_(H)}else n(c);h=r(c)}if(h!==null)var Z=!0;else{var ye=r(u);ye!==null&&Q(S,ye.startTime-H),Z=!1}return Z}finally{h=null,f=$,g=!1}}var k=!1,N=null,E=-1,A=5,P=-1;function O(){return!(t.unstable_now()-P<A)}function I(){if(N!==null){var F=t.unstable_now();P=F;var H=!0;try{H=N(!0,F)}finally{H?D():(k=!1,N=null)}}else k=!1}var D;if(typeof y=="function")D=function(){y(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=I,D=function(){z.postMessage(null)}}else D=function(){b(I,0)};function G(F){N=F,k||(k=!0,D())}function Q(F,H){E=b(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,G(j))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var $=f;f=H;try{return F()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=f;f=F;try{return H()}finally{f=$}},t.unstable_scheduleCallback=function(F,H,$){var U=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=$+V,F={id:d++,callback:H,priorityLevel:F,startTime:$,expirationTime:V,sortIndex:-1},$>U?(F.sortIndex=$,e(u,F),r(c)===null&&F===r(u)&&(x?(w(E),E=-1):x=!0,Q(S,$-U))):(F.sortIndex=V,e(c,F),p||g||(p=!0,G(j))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var H=f;return function(){var $=f;f=H;try{return F.apply(this,arguments)}finally{f=$}}}})(BC);VC.exports=BC;var D$=VC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M$=T,vn=D$;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zC=new Set,Rd={};function Vo(t,e){nc(t,e),nc(t+"Capture",e)}function nc(t,e){for(Rd[t]=e,t=0;t<e.length;t++)zC.add(e[t])}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sb=Object.prototype.hasOwnProperty,$$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$3={},L3={};function L$(t){return sb.call(L3,t)?!0:sb.call($3,t)?!1:$$.test(t)?L3[t]=!0:($3[t]=!0,!1)}function F$(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U$(t,e,r,n){if(e===null||typeof e>"u"||F$(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mr[t]=new qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mr[e]=new qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mr[t]=new qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mr[t]=new qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mr[t]=new qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mr[t]=new qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mr[t]=new qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mr[t]=new qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mr[t]=new qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var b2=/[\-:]([a-z])/g;function w2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(b2,w2);mr[e]=new qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(b2,w2);mr[e]=new qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(b2,w2);mr[e]=new qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mr[t]=new qr(t,1,!1,t.toLowerCase(),null,!1,!1)});mr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mr[t]=new qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function _2(t,e,r,n){var s=mr.hasOwnProperty(e)?mr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U$(e,r,s,n)&&(r=null),n||s===null?L$(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ja=M$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ep=Symbol.for("react.element"),kl=Symbol.for("react.portal"),Nl=Symbol.for("react.fragment"),j2=Symbol.for("react.strict_mode"),ab=Symbol.for("react.profiler"),qC=Symbol.for("react.provider"),WC=Symbol.for("react.context"),k2=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),ob=Symbol.for("react.suspense_list"),N2=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),HC=Symbol.for("react.offscreen"),F3=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=F3&&t[F3]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,vv;function Xu(t){if(vv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vv=e&&e[1]||""}return`
`+vv+t}var xv=!1;function bv(t,e){if(!t||xv)return"";xv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{xv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Xu(t):""}function V$(t){switch(t.tag){case 5:return Xu(t.type);case 16:return Xu("Lazy");case 13:return Xu("Suspense");case 19:return Xu("SuspenseList");case 0:case 2:case 15:return t=bv(t.type,!1),t;case 11:return t=bv(t.type.render,!1),t;case 1:return t=bv(t.type,!0),t;default:return""}}function lb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nl:return"Fragment";case kl:return"Portal";case ab:return"Profiler";case j2:return"StrictMode";case ib:return"Suspense";case ob:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WC:return(t.displayName||"Context")+".Consumer";case qC:return(t._context.displayName||"Context")+".Provider";case k2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N2:return e=t.displayName||null,e!==null?e:lb(t.type)||"Memo";case Fa:e=t._payload,t=t._init;try{return lb(t(e))}catch{}}return null}function B$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lb(e);case 8:return e===j2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z$(t){var e=KC(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tp(t){t._valueTracker||(t._valueTracker=z$(t))}function GC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=KC(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function mm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cb(t,e){var r=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function U3(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=gi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YC(t,e){e=e.checked,e!=null&&_2(t,"checked",e,!1)}function ub(t,e){YC(t,e);var r=gi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hb(t,e.type,r):e.hasOwnProperty("defaultValue")&&hb(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V3(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function hb(t,e,r){(e!=="number"||mm(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ju=Array.isArray;function Bl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+gi(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B3(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(Ju(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:gi(r)}}function QC(t,e){var r=gi(e.value),n=gi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function z3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rp,JC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rp=rp||document.createElement("div"),rp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q$=["Webkit","ms","Moz","O"];Object.keys(cd).forEach(function(t){q$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cd[e]=cd[t]})});function ZC(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cd.hasOwnProperty(t)&&cd[t]?(""+e).trim():e+"px"}function eT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ZC(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var W$=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mb(t,e){if(e){if(W$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function gb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yb=null;function S2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vb=null,zl=null,ql=null;function q3(t){if(t=sf(t)){if(typeof vb!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=x0(e),vb(t.stateNode,t.type,e))}}function tT(t){zl?ql?ql.push(t):ql=[t]:zl=t}function rT(){if(zl){var t=zl,e=ql;if(ql=zl=null,q3(t),e)for(t=0;t<e.length;t++)q3(e[t])}}function nT(t,e){return t(e)}function sT(){}var wv=!1;function aT(t,e,r){if(wv)return t(e,r);wv=!0;try{return nT(t,e,r)}finally{wv=!1,(zl!==null||ql!==null)&&(sT(),rT())}}function Md(t,e){var r=t.stateNode;if(r===null)return null;var n=x0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var xb=!1;if(da)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){xb=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{xb=!1}function H$(t,e,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ud=!1,gm=null,ym=!1,bb=null,K$={onError:function(t){ud=!0,gm=t}};function G$(t,e,r,n,s,a,o,l,c){ud=!1,gm=null,H$.apply(K$,arguments)}function Y$(t,e,r,n,s,a,o,l,c){if(G$.apply(this,arguments),ud){if(ud){var u=gm;ud=!1,gm=null}else throw Error(ne(198));ym||(ym=!0,bb=u)}}function Bo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function iT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W3(t){if(Bo(t)!==t)throw Error(ne(188))}function Q$(t){var e=t.alternate;if(!e){if(e=Bo(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return W3(s),t;if(a===n)return W3(s),e;a=a.sibling}throw Error(ne(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function oT(t){return t=Q$(t),t!==null?lT(t):null}function lT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lT(t);if(e!==null)return e;t=t.sibling}return null}var cT=vn.unstable_scheduleCallback,H3=vn.unstable_cancelCallback,X$=vn.unstable_shouldYield,J$=vn.unstable_requestPaint,Rt=vn.unstable_now,Z$=vn.unstable_getCurrentPriorityLevel,E2=vn.unstable_ImmediatePriority,uT=vn.unstable_UserBlockingPriority,vm=vn.unstable_NormalPriority,eL=vn.unstable_LowPriority,dT=vn.unstable_IdlePriority,m0=null,_s=null;function tL(t){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(m0,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:sL,rL=Math.log,nL=Math.LN2;function sL(t){return t>>>=0,t===0?32:31-(rL(t)/nL|0)|0}var np=64,sp=4194304;function Zu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xm(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Zu(l):(a&=o,a!==0&&(n=Zu(a)))}else o=r&~s,o!==0?n=Zu(o):a!==0&&(n=Zu(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-es(e),s=1<<r,n|=t[r],e&=~s;return n}function aL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iL(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-es(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=aL(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function wb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hT(){var t=np;return np<<=1,!(np&4194240)&&(np=64),t}function _v(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rf(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-es(e),t[e]=r}function oL(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-es(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function A2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-es(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Xe=0;function fT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pT,C2,mT,gT,yT,_b=!1,ap=[],ni=null,si=null,ai=null,$d=new Map,Ld=new Map,za=[],lL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K3(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":$d.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(e.pointerId)}}function Tu(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=sf(e),e!==null&&C2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cL(t,e,r,n,s){switch(e){case"focusin":return ni=Tu(ni,t,e,r,n,s),!0;case"dragenter":return si=Tu(si,t,e,r,n,s),!0;case"mouseover":return ai=Tu(ai,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return $d.set(a,Tu($d.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ld.set(a,Tu(Ld.get(a)||null,t,e,r,n,s)),!0}return!1}function vT(t){var e=ro(t.target);if(e!==null){var r=Bo(e);if(r!==null){if(e=r.tag,e===13){if(e=iT(r),e!==null){t.blockedOn=e,yT(t.priority,function(){mT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=jb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);yb=n,r.target.dispatchEvent(n),yb=null}else return e=sf(r),e!==null&&C2(e),t.blockedOn=r,!1;e.shift()}return!0}function G3(t,e,r){Gp(t)&&r.delete(e)}function uL(){_b=!1,ni!==null&&Gp(ni)&&(ni=null),si!==null&&Gp(si)&&(si=null),ai!==null&&Gp(ai)&&(ai=null),$d.forEach(G3),Ld.forEach(G3)}function Pu(t,e){t.blockedOn===e&&(t.blockedOn=null,_b||(_b=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,uL)))}function Fd(t){function e(s){return Pu(s,t)}if(0<ap.length){Pu(ap[0],t);for(var r=1;r<ap.length;r++){var n=ap[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ni!==null&&Pu(ni,t),si!==null&&Pu(si,t),ai!==null&&Pu(ai,t),$d.forEach(e),Ld.forEach(e),r=0;r<za.length;r++)n=za[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<za.length&&(r=za[0],r.blockedOn===null);)vT(r),r.blockedOn===null&&za.shift()}var Wl=ja.ReactCurrentBatchConfig,bm=!0;function dL(t,e,r,n){var s=Xe,a=Wl.transition;Wl.transition=null;try{Xe=1,T2(t,e,r,n)}finally{Xe=s,Wl.transition=a}}function hL(t,e,r,n){var s=Xe,a=Wl.transition;Wl.transition=null;try{Xe=4,T2(t,e,r,n)}finally{Xe=s,Wl.transition=a}}function T2(t,e,r,n){if(bm){var s=jb(t,e,r,n);if(s===null)Ov(t,e,n,wm,r),K3(t,n);else if(cL(s,t,e,r,n))n.stopPropagation();else if(K3(t,n),e&4&&-1<lL.indexOf(t)){for(;s!==null;){var a=sf(s);if(a!==null&&pT(a),a=jb(t,e,r,n),a===null&&Ov(t,e,n,wm,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Ov(t,e,n,null,r)}}var wm=null;function jb(t,e,r,n){if(wm=null,t=S2(n),t=ro(t),t!==null)if(e=Bo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=iT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wm=t,null}function xT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z$()){case E2:return 1;case uT:return 4;case vm:case eL:return 16;case dT:return 536870912;default:return 16}default:return 16}}var Ja=null,P2=null,Yp=null;function bT(){if(Yp)return Yp;var t,e=P2,r=e.length,n,s="value"in Ja?Ja.value:Ja.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Yp=s.slice(t,1<n?1-n:void 0)}function Qp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ip(){return!0}function Y3(){return!1}function wn(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ip:Y3,this.isPropagationStopped=Y3,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ip)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ip)},persist:function(){},isPersistent:ip}),e}var qc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O2=wn(qc),nf=jt({},qc,{view:0,detail:0}),fL=wn(nf),jv,kv,Ou,g0=jt({},nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ou&&(Ou&&t.type==="mousemove"?(jv=t.screenX-Ou.screenX,kv=t.screenY-Ou.screenY):kv=jv=0,Ou=t),jv)},movementY:function(t){return"movementY"in t?t.movementY:kv}}),Q3=wn(g0),pL=jt({},g0,{dataTransfer:0}),mL=wn(pL),gL=jt({},nf,{relatedTarget:0}),Nv=wn(gL),yL=jt({},qc,{animationName:0,elapsedTime:0,pseudoElement:0}),vL=wn(yL),xL=jt({},qc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bL=wn(xL),wL=jt({},qc,{data:0}),X3=wn(wL),_L={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kL[t])?!!e[t]:!1}function I2(){return NL}var SL=jt({},nf,{key:function(t){if(t.key){var e=_L[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I2,charCode:function(t){return t.type==="keypress"?Qp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EL=wn(SL),AL=jt({},g0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J3=wn(AL),CL=jt({},nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I2}),TL=wn(CL),PL=jt({},qc,{propertyName:0,elapsedTime:0,pseudoElement:0}),OL=wn(PL),IL=jt({},g0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RL=wn(IL),DL=[9,13,27,32],R2=da&&"CompositionEvent"in window,dd=null;da&&"documentMode"in document&&(dd=document.documentMode);var ML=da&&"TextEvent"in window&&!dd,wT=da&&(!R2||dd&&8<dd&&11>=dd),Z3=" ",ek=!1;function _T(t,e){switch(t){case"keyup":return DL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sl=!1;function $L(t,e){switch(t){case"compositionend":return jT(e);case"keypress":return e.which!==32?null:(ek=!0,Z3);case"textInput":return t=e.data,t===Z3&&ek?null:t;default:return null}}function LL(t,e){if(Sl)return t==="compositionend"||!R2&&_T(t,e)?(t=bT(),Yp=P2=Ja=null,Sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wT&&e.locale!=="ko"?null:e.data;default:return null}}var FL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FL[t.type]:e==="textarea"}function kT(t,e,r,n){tT(n),e=_m(e,"onChange"),0<e.length&&(r=new O2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hd=null,Ud=null;function UL(t){DT(t,0)}function y0(t){var e=Cl(t);if(GC(e))return t}function VL(t,e){if(t==="change")return e}var NT=!1;if(da){var Sv;if(da){var Ev="oninput"in document;if(!Ev){var rk=document.createElement("div");rk.setAttribute("oninput","return;"),Ev=typeof rk.oninput=="function"}Sv=Ev}else Sv=!1;NT=Sv&&(!document.documentMode||9<document.documentMode)}function nk(){hd&&(hd.detachEvent("onpropertychange",ST),Ud=hd=null)}function ST(t){if(t.propertyName==="value"&&y0(Ud)){var e=[];kT(e,Ud,t,S2(t)),aT(UL,e)}}function BL(t,e,r){t==="focusin"?(nk(),hd=e,Ud=r,hd.attachEvent("onpropertychange",ST)):t==="focusout"&&nk()}function zL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return y0(Ud)}function qL(t,e){if(t==="click")return y0(e)}function WL(t,e){if(t==="input"||t==="change")return y0(e)}function HL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var as=typeof Object.is=="function"?Object.is:HL;function Vd(t,e){if(as(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!sb.call(e,s)||!as(t[s],e[s]))return!1}return!0}function sk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ak(t,e){var r=sk(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sk(r)}}function ET(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ET(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AT(){for(var t=window,e=mm();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=mm(t.document)}return e}function D2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KL(t){var e=AT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ET(r.ownerDocument.documentElement,r)){if(n!==null&&D2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=ak(r,a);var o=ak(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GL=da&&"documentMode"in document&&11>=document.documentMode,El=null,kb=null,fd=null,Nb=!1;function ik(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nb||El==null||El!==mm(n)||(n=El,"selectionStart"in n&&D2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fd&&Vd(fd,n)||(fd=n,n=_m(kb,"onSelect"),0<n.length&&(e=new O2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=El)))}function op(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Al={animationend:op("Animation","AnimationEnd"),animationiteration:op("Animation","AnimationIteration"),animationstart:op("Animation","AnimationStart"),transitionend:op("Transition","TransitionEnd")},Av={},CT={};da&&(CT=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function v0(t){if(Av[t])return Av[t];if(!Al[t])return t;var e=Al[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in CT)return Av[t]=e[r];return t}var TT=v0("animationend"),PT=v0("animationiteration"),OT=v0("animationstart"),IT=v0("transitionend"),RT=new Map,ok="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){RT.set(t,e),Vo(e,[t])}for(var Cv=0;Cv<ok.length;Cv++){var Tv=ok[Cv],YL=Tv.toLowerCase(),QL=Tv[0].toUpperCase()+Tv.slice(1);ki(YL,"on"+QL)}ki(TT,"onAnimationEnd");ki(PT,"onAnimationIteration");ki(OT,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(IT,"onTransitionEnd");nc("onMouseEnter",["mouseout","mouseover"]);nc("onMouseLeave",["mouseout","mouseover"]);nc("onPointerEnter",["pointerout","pointerover"]);nc("onPointerLeave",["pointerout","pointerover"]);Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function lk(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Y$(n,e,void 0,t),t.currentTarget=null}function DT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;lk(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;lk(s,l,u),a=c}}}if(ym)throw t=bb,ym=!1,bb=null,t}function ht(t,e){var r=e[Tb];r===void 0&&(r=e[Tb]=new Set);var n=t+"__bubble";r.has(n)||(MT(e,t,2,!1),r.add(n))}function Pv(t,e,r){var n=0;e&&(n|=4),MT(r,t,n,e)}var lp="_reactListening"+Math.random().toString(36).slice(2);function Bd(t){if(!t[lp]){t[lp]=!0,zC.forEach(function(r){r!=="selectionchange"&&(XL.has(r)||Pv(r,!1,t),Pv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lp]||(e[lp]=!0,Pv("selectionchange",!1,e))}}function MT(t,e,r,n){switch(xT(e)){case 1:var s=dL;break;case 4:s=hL;break;default:s=T2}r=s.bind(null,e,r,t),s=void 0,!xb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ov(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ro(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}aT(function(){var u=a,d=S2(r),h=[];e:{var f=RT.get(t);if(f!==void 0){var g=O2,p=t;switch(t){case"keypress":if(Qp(r)===0)break e;case"keydown":case"keyup":g=EL;break;case"focusin":p="focus",g=Nv;break;case"focusout":p="blur",g=Nv;break;case"beforeblur":case"afterblur":g=Nv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Q3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=TL;break;case TT:case PT:case OT:g=vL;break;case IT:g=OL;break;case"scroll":g=fL;break;case"wheel":g=RL;break;case"copy":case"cut":case"paste":g=bL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=J3}var x=(e&4)!==0,b=!x&&t==="scroll",w=x?f!==null?f+"Capture":null:f;x=[];for(var y=u,_;y!==null;){_=y;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,w!==null&&(S=Md(y,w),S!=null&&x.push(zd(y,S,_)))),b)break;y=y.return}0<x.length&&(f=new g(f,p,null,r,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&r!==yb&&(p=r.relatedTarget||r.fromElement)&&(ro(p)||p[ha]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=r.relatedTarget||r.toElement,g=u,p=p?ro(p):null,p!==null&&(b=Bo(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(x=Q3,S="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=J3,S="onPointerLeave",w="onPointerEnter",y="pointer"),b=g==null?f:Cl(g),_=p==null?f:Cl(p),f=new x(S,y+"leave",g,r,d),f.target=b,f.relatedTarget=_,S=null,ro(d)===u&&(x=new x(w,y+"enter",p,r,d),x.target=_,x.relatedTarget=b,S=x),b=S,g&&p)t:{for(x=g,w=p,y=0,_=x;_;_=al(_))y++;for(_=0,S=w;S;S=al(S))_++;for(;0<y-_;)x=al(x),y--;for(;0<_-y;)w=al(w),_--;for(;y--;){if(x===w||w!==null&&x===w.alternate)break t;x=al(x),w=al(w)}x=null}else x=null;g!==null&&ck(h,f,g,x,!1),p!==null&&b!==null&&ck(h,b,p,x,!0)}}e:{if(f=u?Cl(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=VL;else if(tk(f))if(NT)j=WL;else{j=zL;var k=BL}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=qL);if(j&&(j=j(t,u))){kT(h,j,r,d);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&hb(f,"number",f.value)}switch(k=u?Cl(u):window,t){case"focusin":(tk(k)||k.contentEditable==="true")&&(El=k,kb=u,fd=null);break;case"focusout":fd=kb=El=null;break;case"mousedown":Nb=!0;break;case"contextmenu":case"mouseup":case"dragend":Nb=!1,ik(h,r,d);break;case"selectionchange":if(GL)break;case"keydown":case"keyup":ik(h,r,d)}var N;if(R2)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Sl?_T(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(wT&&r.locale!=="ko"&&(Sl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Sl&&(N=bT()):(Ja=d,P2="value"in Ja?Ja.value:Ja.textContent,Sl=!0)),k=_m(u,E),0<k.length&&(E=new X3(E,t,null,r,d),h.push({event:E,listeners:k}),N?E.data=N:(N=jT(r),N!==null&&(E.data=N)))),(N=ML?$L(t,r):LL(t,r))&&(u=_m(u,"onBeforeInput"),0<u.length&&(d=new X3("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}DT(h,e)})}function zd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _m(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Md(t,r),a!=null&&n.unshift(zd(t,a,s)),a=Md(t,e),a!=null&&n.push(zd(t,a,s))),t=t.return}return n}function al(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ck(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Md(r,a),c!=null&&o.unshift(zd(r,c,l))):s||(c=Md(r,a),c!=null&&o.push(zd(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var JL=/\r\n?/g,ZL=/\u0000|\uFFFD/g;function uk(t){return(typeof t=="string"?t:""+t).replace(JL,`
`).replace(ZL,"")}function cp(t,e,r){if(e=uk(e),uk(t)!==e&&r)throw Error(ne(425))}function jm(){}var Sb=null,Eb=null;function Ab(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cb=typeof setTimeout=="function"?setTimeout:void 0,eF=typeof clearTimeout=="function"?clearTimeout:void 0,dk=typeof Promise=="function"?Promise:void 0,tF=typeof queueMicrotask=="function"?queueMicrotask:typeof dk<"u"?function(t){return dk.resolve(null).then(t).catch(rF)}:Cb;function rF(t){setTimeout(function(){throw t})}function Iv(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Fd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Fd(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),xs="__reactFiber$"+Wc,qd="__reactProps$"+Wc,ha="__reactContainer$"+Wc,Tb="__reactEvents$"+Wc,nF="__reactListeners$"+Wc,sF="__reactHandles$"+Wc;function ro(t){var e=t[xs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ha]||r[xs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=hk(t);t!==null;){if(r=t[xs])return r;t=hk(t)}return e}t=r,r=t.parentNode}return null}function sf(t){return t=t[xs]||t[ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function x0(t){return t[qd]||null}var Pb=[],Tl=-1;function Ni(t){return{current:t}}function gt(t){0>Tl||(t.current=Pb[Tl],Pb[Tl]=null,Tl--)}function ct(t,e){Tl++,Pb[Tl]=t.current,t.current=e}var yi={},Pr=Ni(yi),Qr=Ni(!1),bo=yi;function sc(t,e){var r=t.type.contextTypes;if(!r)return yi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xr(t){return t=t.childContextTypes,t!=null}function km(){gt(Qr),gt(Pr)}function fk(t,e,r){if(Pr.current!==yi)throw Error(ne(168));ct(Pr,e),ct(Qr,r)}function $T(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ne(108,B$(t)||"Unknown",s));return jt({},r,n)}function Nm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,bo=Pr.current,ct(Pr,t),ct(Qr,Qr.current),!0}function pk(t,e,r){var n=t.stateNode;if(!n)throw Error(ne(169));r?(t=$T(t,e,bo),n.__reactInternalMemoizedMergedChildContext=t,gt(Qr),gt(Pr),ct(Pr,t)):gt(Qr),ct(Qr,r)}var Hs=null,b0=!1,Rv=!1;function LT(t){Hs===null?Hs=[t]:Hs.push(t)}function aF(t){b0=!0,LT(t)}function Si(){if(!Rv&&Hs!==null){Rv=!0;var t=0,e=Xe;try{var r=Hs;for(Xe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Hs=null,b0=!1}catch(s){throw Hs!==null&&(Hs=Hs.slice(t+1)),cT(E2,Si),s}finally{Xe=e,Rv=!1}}return null}var Pl=[],Ol=0,Sm=null,Em=0,Sn=[],En=0,wo=null,Ys=1,Qs="";function Wi(t,e){Pl[Ol++]=Em,Pl[Ol++]=Sm,Sm=t,Em=e}function FT(t,e,r){Sn[En++]=Ys,Sn[En++]=Qs,Sn[En++]=wo,wo=t;var n=Ys;t=Qs;var s=32-es(n)-1;n&=~(1<<s),r+=1;var a=32-es(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ys=1<<32-es(e)+s|r<<s|n,Qs=a+t}else Ys=1<<a|r<<s|n,Qs=t}function M2(t){t.return!==null&&(Wi(t,1),FT(t,1,0))}function $2(t){for(;t===Sm;)Sm=Pl[--Ol],Pl[Ol]=null,Em=Pl[--Ol],Pl[Ol]=null;for(;t===wo;)wo=Sn[--En],Sn[En]=null,Qs=Sn[--En],Sn[En]=null,Ys=Sn[--En],Sn[En]=null}var mn=null,hn=null,yt=!1,Xn=null;function UT(t,e){var r=Cn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function mk(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,hn=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=wo!==null?{id:Ys,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Cn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mn=t,hn=null,!0):!1;default:return!1}}function Ob(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ib(t){if(yt){var e=hn;if(e){var r=e;if(!mk(t,e)){if(Ob(t))throw Error(ne(418));e=ii(r.nextSibling);var n=mn;e&&mk(t,e)?UT(n,r):(t.flags=t.flags&-4097|2,yt=!1,mn=t)}}else{if(Ob(t))throw Error(ne(418));t.flags=t.flags&-4097|2,yt=!1,mn=t}}}function gk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function up(t){if(t!==mn)return!1;if(!yt)return gk(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ab(t.type,t.memoizedProps)),e&&(e=hn)){if(Ob(t))throw VT(),Error(ne(418));for(;e;)UT(t,e),e=ii(e.nextSibling)}if(gk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){hn=ii(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=mn?ii(t.stateNode.nextSibling):null;return!0}function VT(){for(var t=hn;t;)t=ii(t.nextSibling)}function ac(){hn=mn=null,yt=!1}function L2(t){Xn===null?Xn=[t]:Xn.push(t)}var iF=ja.ReactCurrentBatchConfig;function Iu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function dp(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yk(t){var e=t._init;return e(t._payload)}function BT(t){function e(w,y){if(t){var _=w.deletions;_===null?(w.deletions=[y],w.flags|=16):_.push(y)}}function r(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function n(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=ui(w,y),w.index=0,w.sibling=null,w}function a(w,y,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<y?(w.flags|=2,y):_):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,y,_,S){return y===null||y.tag!==6?(y=Vv(_,w.mode,S),y.return=w,y):(y=s(y,_),y.return=w,y)}function c(w,y,_,S){var j=_.type;return j===Nl?d(w,y,_.props.children,S,_.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Fa&&yk(j)===y.type)?(S=s(y,_.props),S.ref=Iu(w,y,_),S.return=w,S):(S=nm(_.type,_.key,_.props,null,w.mode,S),S.ref=Iu(w,y,_),S.return=w,S)}function u(w,y,_,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Bv(_,w.mode,S),y.return=w,y):(y=s(y,_.children||[]),y.return=w,y)}function d(w,y,_,S,j){return y===null||y.tag!==7?(y=mo(_,w.mode,S,j),y.return=w,y):(y=s(y,_),y.return=w,y)}function h(w,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vv(""+y,w.mode,_),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ep:return _=nm(y.type,y.key,y.props,null,w.mode,_),_.ref=Iu(w,null,y),_.return=w,_;case kl:return y=Bv(y,w.mode,_),y.return=w,y;case Fa:var S=y._init;return h(w,S(y._payload),_)}if(Ju(y)||Au(y))return y=mo(y,w.mode,_,null),y.return=w,y;dp(w,y)}return null}function f(w,y,_,S){var j=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(w,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:return _.key===j?c(w,y,_,S):null;case kl:return _.key===j?u(w,y,_,S):null;case Fa:return j=_._init,f(w,y,j(_._payload),S)}if(Ju(_)||Au(_))return j!==null?null:d(w,y,_,S,null);dp(w,_)}return null}function g(w,y,_,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(_)||null,l(y,w,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ep:return w=w.get(S.key===null?_:S.key)||null,c(y,w,S,j);case kl:return w=w.get(S.key===null?_:S.key)||null,u(y,w,S,j);case Fa:var k=S._init;return g(w,y,_,k(S._payload),j)}if(Ju(S)||Au(S))return w=w.get(_)||null,d(y,w,S,j,null);dp(y,S)}return null}function p(w,y,_,S){for(var j=null,k=null,N=y,E=y=0,A=null;N!==null&&E<_.length;E++){N.index>E?(A=N,N=null):A=N.sibling;var P=f(w,N,_[E],S);if(P===null){N===null&&(N=A);break}t&&N&&P.alternate===null&&e(w,N),y=a(P,y,E),k===null?j=P:k.sibling=P,k=P,N=A}if(E===_.length)return r(w,N),yt&&Wi(w,E),j;if(N===null){for(;E<_.length;E++)N=h(w,_[E],S),N!==null&&(y=a(N,y,E),k===null?j=N:k.sibling=N,k=N);return yt&&Wi(w,E),j}for(N=n(w,N);E<_.length;E++)A=g(N,w,E,_[E],S),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?E:A.key),y=a(A,y,E),k===null?j=A:k.sibling=A,k=A);return t&&N.forEach(function(O){return e(w,O)}),yt&&Wi(w,E),j}function x(w,y,_,S){var j=Au(_);if(typeof j!="function")throw Error(ne(150));if(_=j.call(_),_==null)throw Error(ne(151));for(var k=j=null,N=y,E=y=0,A=null,P=_.next();N!==null&&!P.done;E++,P=_.next()){N.index>E?(A=N,N=null):A=N.sibling;var O=f(w,N,P.value,S);if(O===null){N===null&&(N=A);break}t&&N&&O.alternate===null&&e(w,N),y=a(O,y,E),k===null?j=O:k.sibling=O,k=O,N=A}if(P.done)return r(w,N),yt&&Wi(w,E),j;if(N===null){for(;!P.done;E++,P=_.next())P=h(w,P.value,S),P!==null&&(y=a(P,y,E),k===null?j=P:k.sibling=P,k=P);return yt&&Wi(w,E),j}for(N=n(w,N);!P.done;E++,P=_.next())P=g(N,w,E,P.value,S),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?E:P.key),y=a(P,y,E),k===null?j=P:k.sibling=P,k=P);return t&&N.forEach(function(I){return e(w,I)}),yt&&Wi(w,E),j}function b(w,y,_,S){if(typeof _=="object"&&_!==null&&_.type===Nl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:e:{for(var j=_.key,k=y;k!==null;){if(k.key===j){if(j=_.type,j===Nl){if(k.tag===7){r(w,k.sibling),y=s(k,_.props.children),y.return=w,w=y;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Fa&&yk(j)===k.type){r(w,k.sibling),y=s(k,_.props),y.ref=Iu(w,k,_),y.return=w,w=y;break e}r(w,k);break}else e(w,k);k=k.sibling}_.type===Nl?(y=mo(_.props.children,w.mode,S,_.key),y.return=w,w=y):(S=nm(_.type,_.key,_.props,null,w.mode,S),S.ref=Iu(w,y,_),S.return=w,w=S)}return o(w);case kl:e:{for(k=_.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){r(w,y.sibling),y=s(y,_.children||[]),y.return=w,w=y;break e}else{r(w,y);break}else e(w,y);y=y.sibling}y=Bv(_,w.mode,S),y.return=w,w=y}return o(w);case Fa:return k=_._init,b(w,y,k(_._payload),S)}if(Ju(_))return p(w,y,_,S);if(Au(_))return x(w,y,_,S);dp(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(r(w,y.sibling),y=s(y,_),y.return=w,w=y):(r(w,y),y=Vv(_,w.mode,S),y.return=w,w=y),o(w)):r(w,y)}return b}var ic=BT(!0),zT=BT(!1),Am=Ni(null),Cm=null,Il=null,F2=null;function U2(){F2=Il=Cm=null}function V2(t){var e=Am.current;gt(Am),t._currentValue=e}function Rb(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Hl(t,e){Cm=t,F2=Il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gr=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(F2!==t)if(t={context:t,memoizedValue:e,next:null},Il===null){if(Cm===null)throw Error(ne(308));Il=t,Cm.dependencies={lanes:0,firstContext:t}}else Il=Il.next=t;return e}var no=null;function B2(t){no===null?no=[t]:no.push(t)}function qT(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,B2(e)):(r.next=s.next,s.next=r),e.interleaved=r,fa(t,n)}function fa(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ua=!1;function z2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,qe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,fa(t,r)}return s=n.interleaved,s===null?(e.next=e,B2(n)):(e.next=s.next,s.next=e),n.interleaved=e,fa(t,r)}function Xp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,A2(t,r)}}function vk(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Tm(t,e,r,n){var s=t.updateQueue;Ua=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,g=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,x=l;switch(f=e,g=r,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(g,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(g,h,f):p,f==null)break e;h=jt({},h,f);break e;case 2:Ua=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);jo|=o,t.lanes=o,t.memoizedState=h}}function xk(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ne(191,s));s.call(n)}}}var af={},js=Ni(af),Wd=Ni(af),Hd=Ni(af);function so(t){if(t===af)throw Error(ne(174));return t}function q2(t,e){switch(ct(Hd,e),ct(Wd,t),ct(js,af),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pb(e,t)}gt(js),ct(js,e)}function oc(){gt(js),gt(Wd),gt(Hd)}function HT(t){so(Hd.current);var e=so(js.current),r=pb(e,t.type);e!==r&&(ct(Wd,t),ct(js,r))}function W2(t){Wd.current===t&&(gt(js),gt(Wd))}var wt=Ni(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dv=[];function H2(){for(var t=0;t<Dv.length;t++)Dv[t]._workInProgressVersionPrimary=null;Dv.length=0}var Jp=ja.ReactCurrentDispatcher,Mv=ja.ReactCurrentBatchConfig,_o=0,_t=null,Kt=null,rr=null,Om=!1,pd=!1,Kd=0,oF=0;function wr(){throw Error(ne(321))}function K2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!as(t[r],e[r]))return!1;return!0}function G2(t,e,r,n,s,a){if(_o=a,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jp.current=t===null||t.memoizedState===null?dF:hF,t=r(n,s),pd){a=0;do{if(pd=!1,Kd=0,25<=a)throw Error(ne(301));a+=1,rr=Kt=null,e.updateQueue=null,Jp.current=fF,t=r(n,s)}while(pd)}if(Jp.current=Im,e=Kt!==null&&Kt.next!==null,_o=0,rr=Kt=_t=null,Om=!1,e)throw Error(ne(300));return t}function Y2(){var t=Kd!==0;return Kd=0,t}function ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?_t.memoizedState=rr=t:rr=rr.next=t,rr}function Rn(){if(Kt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=rr===null?_t.memoizedState:rr.next;if(e!==null)rr=e,Kt=t;else{if(t===null)throw Error(ne(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},rr===null?_t.memoizedState=rr=t:rr=rr.next=t}return rr}function Gd(t,e){return typeof e=="function"?e(t):e}function $v(t){var e=Rn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=Kt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((_o&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,_t.lanes|=d,jo|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,as(n,e.memoizedState)||(Gr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,_t.lanes|=a,jo|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Lv(t){var e=Rn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);as(a,e.memoizedState)||(Gr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function KT(){}function GT(t,e){var r=_t,n=Rn(),s=e(),a=!as(n.memoizedState,s);if(a&&(n.memoizedState=s,Gr=!0),n=n.queue,Q2(XT.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,Yd(9,QT.bind(null,r,n,s,e),void 0,null),sr===null)throw Error(ne(349));_o&30||YT(r,e,s)}return s}function YT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function QT(t,e,r,n){e.value=r,e.getSnapshot=n,JT(e)&&ZT(t)}function XT(t,e,r){return r(function(){JT(e)&&ZT(t)})}function JT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!as(t,r)}catch{return!0}}function ZT(t){var e=fa(t,1);e!==null&&ts(e,t,1,-1)}function bk(t){var e=ys();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},e.queue=t,t=t.dispatch=uF.bind(null,_t,t),[e.memoizedState,t]}function Yd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function eP(){return Rn().memoizedState}function Zp(t,e,r,n){var s=ys();_t.flags|=t,s.memoizedState=Yd(1|e,r,void 0,n===void 0?null:n)}function w0(t,e,r,n){var s=Rn();n=n===void 0?null:n;var a=void 0;if(Kt!==null){var o=Kt.memoizedState;if(a=o.destroy,n!==null&&K2(n,o.deps)){s.memoizedState=Yd(e,r,a,n);return}}_t.flags|=t,s.memoizedState=Yd(1|e,r,a,n)}function wk(t,e){return Zp(8390656,8,t,e)}function Q2(t,e){return w0(2048,8,t,e)}function tP(t,e){return w0(4,2,t,e)}function rP(t,e){return w0(4,4,t,e)}function nP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sP(t,e,r){return r=r!=null?r.concat([t]):null,w0(4,4,nP.bind(null,e,t),r)}function X2(){}function aP(t,e){var r=Rn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&K2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function iP(t,e){var r=Rn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&K2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function oP(t,e,r){return _o&21?(as(r,e)||(r=hT(),_t.lanes|=r,jo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gr=!0),t.memoizedState=r)}function lF(t,e){var r=Xe;Xe=r!==0&&4>r?r:4,t(!0);var n=Mv.transition;Mv.transition={};try{t(!1),e()}finally{Xe=r,Mv.transition=n}}function lP(){return Rn().memoizedState}function cF(t,e,r){var n=ci(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cP(t))uP(e,r);else if(r=qT(t,e,r,n),r!==null){var s=Vr();ts(r,t,n,s),dP(r,e,n)}}function uF(t,e,r){var n=ci(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cP(t))uP(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,as(l,o)){var c=e.interleaved;c===null?(s.next=s,B2(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=qT(t,e,s,n),r!==null&&(s=Vr(),ts(r,t,n,s),dP(r,e,n))}}function cP(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function uP(t,e){pd=Om=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function dP(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,A2(t,r)}}var Im={readContext:In,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},dF={readContext:In,useCallback:function(t,e){return ys().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:wk,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Zp(4194308,4,nP.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Zp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zp(4,2,t,e)},useMemo:function(t,e){var r=ys();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ys();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=cF.bind(null,_t,t),[n.memoizedState,t]},useRef:function(t){var e=ys();return t={current:t},e.memoizedState=t},useState:bk,useDebugValue:X2,useDeferredValue:function(t){return ys().memoizedState=t},useTransition:function(){var t=bk(!1),e=t[0];return t=lF.bind(null,t[1]),ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=_t,s=ys();if(yt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),sr===null)throw Error(ne(349));_o&30||YT(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,wk(XT.bind(null,n,a,t),[t]),n.flags|=2048,Yd(9,QT.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=ys(),e=sr.identifierPrefix;if(yt){var r=Qs,n=Ys;r=(n&~(1<<32-es(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Kd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=oF++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hF={readContext:In,useCallback:aP,useContext:In,useEffect:Q2,useImperativeHandle:sP,useInsertionEffect:tP,useLayoutEffect:rP,useMemo:iP,useReducer:$v,useRef:eP,useState:function(){return $v(Gd)},useDebugValue:X2,useDeferredValue:function(t){var e=Rn();return oP(e,Kt.memoizedState,t)},useTransition:function(){var t=$v(Gd)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:KT,useSyncExternalStore:GT,useId:lP,unstable_isNewReconciler:!1},fF={readContext:In,useCallback:aP,useContext:In,useEffect:Q2,useImperativeHandle:sP,useInsertionEffect:tP,useLayoutEffect:rP,useMemo:iP,useReducer:Lv,useRef:eP,useState:function(){return Lv(Gd)},useDebugValue:X2,useDeferredValue:function(t){var e=Rn();return Kt===null?e.memoizedState=t:oP(e,Kt.memoizedState,t)},useTransition:function(){var t=Lv(Gd)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:KT,useSyncExternalStore:GT,useId:lP,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Db(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:jt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var _0={isMounted:function(t){return(t=t._reactInternals)?Bo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Vr(),s=ci(t),a=na(n,s);a.payload=e,r!=null&&(a.callback=r),e=oi(t,a,s),e!==null&&(ts(e,t,s,n),Xp(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Vr(),s=ci(t),a=na(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=oi(t,a,s),e!==null&&(ts(e,t,s,n),Xp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Vr(),n=ci(t),s=na(r,n);s.tag=2,e!=null&&(s.callback=e),e=oi(t,s,n),e!==null&&(ts(e,t,n,r),Xp(e,t,n))}};function _k(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Vd(r,n)||!Vd(s,a):!0}function hP(t,e,r){var n=!1,s=yi,a=e.contextType;return typeof a=="object"&&a!==null?a=In(a):(s=Xr(e)?bo:Pr.current,n=e.contextTypes,a=(n=n!=null)?sc(t,s):yi),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function jk(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&_0.enqueueReplaceState(e,e.state,null)}function Mb(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},z2(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=In(a):(a=Xr(e)?bo:Pr.current,s.context=sc(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Db(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_0.enqueueReplaceState(s,s.state,null),Tm(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lc(t,e){try{var r="",n=e;do r+=V$(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Fv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function $b(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var pF=typeof WeakMap=="function"?WeakMap:Map;function fP(t,e,r){r=na(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Dm||(Dm=!0,Kb=n),$b(t,e)},r}function pP(t,e,r){r=na(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){$b(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){$b(t,e),typeof n!="function"&&(li===null?li=new Set([this]):li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function kk(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new pF;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=AF.bind(null,t,e,r),e.then(t,t))}function Nk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sk(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=na(-1,1),e.tag=2,oi(r,e,1))),r.lanes|=1),t)}var mF=ja.ReactCurrentOwner,Gr=!1;function Mr(t,e,r,n){e.child=t===null?zT(e,null,r,n):ic(e,t.child,r,n)}function Ek(t,e,r,n,s){r=r.render;var a=e.ref;return Hl(e,s),n=G2(t,e,r,n,a,s),r=Y2(),t!==null&&!Gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pa(t,e,s)):(yt&&r&&M2(e),e.flags|=1,Mr(t,e,n,s),e.child)}function Ak(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!a_(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,mP(t,e,a,n,s)):(t=nm(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Vd,r(o,n)&&t.ref===e.ref)return pa(t,e,s)}return e.flags|=1,t=ui(a,n),t.ref=e.ref,t.return=e,e.child=t}function mP(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Vd(a,n)&&t.ref===e.ref)if(Gr=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Gr=!0);else return e.lanes=t.lanes,pa(t,e,s)}return Lb(t,e,r,n,s)}function gP(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Dl,on),on|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(Dl,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,ct(Dl,on),on|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,ct(Dl,on),on|=n;return Mr(t,e,s,r),e.child}function yP(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Lb(t,e,r,n,s){var a=Xr(r)?bo:Pr.current;return a=sc(e,a),Hl(e,s),r=G2(t,e,r,n,a,s),n=Y2(),t!==null&&!Gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pa(t,e,s)):(yt&&n&&M2(e),e.flags|=1,Mr(t,e,r,s),e.child)}function Ck(t,e,r,n,s){if(Xr(r)){var a=!0;Nm(e)}else a=!1;if(Hl(e,s),e.stateNode===null)em(t,e),hP(e,r,n),Mb(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=In(u):(u=Xr(r)?bo:Pr.current,u=sc(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&jk(e,o,n,u),Ua=!1;var f=e.memoizedState;o.state=f,Tm(e,n,o,s),c=e.memoizedState,l!==n||f!==c||Qr.current||Ua?(typeof d=="function"&&(Db(e,r,d,n),c=e.memoizedState),(l=Ua||_k(e,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,WT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Wn(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=In(c):(c=Xr(r)?bo:Pr.current,c=sc(e,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&jk(e,o,n,c),Ua=!1,f=e.memoizedState,o.state=f,Tm(e,n,o,s);var p=e.memoizedState;l!==h||f!==p||Qr.current||Ua?(typeof g=="function"&&(Db(e,r,g,n),p=e.memoizedState),(u=Ua||_k(e,r,u,n,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Fb(t,e,r,n,a,s)}function Fb(t,e,r,n,s,a){yP(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&pk(e,r,!1),pa(t,e,a);n=e.stateNode,mF.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ic(e,t.child,null,a),e.child=ic(e,null,l,a)):Mr(t,e,l,a),e.memoizedState=n.state,s&&pk(e,r,!0),e.child}function vP(t){var e=t.stateNode;e.pendingContext?fk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fk(t,e.context,!1),q2(t,e.containerInfo)}function Tk(t,e,r,n,s){return ac(),L2(s),e.flags|=256,Mr(t,e,r,n),e.child}var Ub={dehydrated:null,treeContext:null,retryLane:0};function Vb(t){return{baseLanes:t,cachePool:null,transitions:null}}function xP(t,e,r){var n=e.pendingProps,s=wt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ct(wt,s&1),t===null)return Ib(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=N0(o,n,0,null),t=mo(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Vb(r),e.memoizedState=Ub,t):J2(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gF(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ui(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ui(l,a):(a=mo(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Vb(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Ub,n}return a=t.child,t=a.sibling,n=ui(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function J2(t,e){return e=N0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hp(t,e,r,n){return n!==null&&L2(n),ic(e,t.child,null,r),t=J2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gF(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Fv(Error(ne(422))),hp(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=N0({mode:"visible",children:n.children},s,0,null),a=mo(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&ic(e,t.child,null,o),e.child.memoizedState=Vb(o),e.memoizedState=Ub,a);if(!(e.mode&1))return hp(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ne(419)),n=Fv(a,n,void 0),hp(t,e,o,n)}if(l=(o&t.childLanes)!==0,Gr||l){if(n=sr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,fa(t,s),ts(n,t,s,-1))}return s_(),n=Fv(Error(ne(421))),hp(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CF.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,hn=ii(s.nextSibling),mn=e,yt=!0,Xn=null,t!==null&&(Sn[En++]=Ys,Sn[En++]=Qs,Sn[En++]=wo,Ys=t.id,Qs=t.overflow,wo=e),e=J2(e,n.children),e.flags|=4096,e)}function Pk(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Rb(t.return,e,r)}function Uv(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function bP(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Mr(t,e,n.children,r),n=wt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pk(t,r,e);else if(t.tag===19)Pk(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ct(wt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Pm(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Uv(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pm(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Uv(e,!0,r,null,a);break;case"together":Uv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function em(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),jo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=ui(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ui(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function yF(t,e,r){switch(e.tag){case 3:vP(e),ac();break;case 5:HT(e);break;case 1:Xr(e.type)&&Nm(e);break;case 4:q2(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ct(Am,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ct(wt,wt.current&1),e.flags|=128,null):r&e.child.childLanes?xP(t,e,r):(ct(wt,wt.current&1),t=pa(t,e,r),t!==null?t.sibling:null);ct(wt,wt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return bP(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ct(wt,wt.current),n)break;return null;case 22:case 23:return e.lanes=0,gP(t,e,r)}return pa(t,e,r)}var wP,Bb,_P,jP;wP=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bb=function(){};_P=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,so(js.current);var a=null;switch(r){case"input":s=cb(t,s),n=cb(t,n),a=[];break;case"select":s=jt({},s,{value:void 0}),n=jt({},n,{value:void 0}),a=[];break;case"textarea":s=fb(t,s),n=fb(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=jm)}mb(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rd.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ht("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};jP=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ru(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function vF(t,e,r){var n=e.pendingProps;switch($2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return Xr(e.type)&&km(),_r(e),null;case 3:return n=e.stateNode,oc(),gt(Qr),gt(Pr),H2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(up(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Qb(Xn),Xn=null))),Bb(t,e),_r(e),null;case 5:W2(e);var s=so(Hd.current);if(r=e.type,t!==null&&e.stateNode!=null)_P(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ne(166));return _r(e),null}if(t=so(js.current),up(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[xs]=e,n[qd]=a,t=(e.mode&1)!==0,r){case"dialog":ht("cancel",n),ht("close",n);break;case"iframe":case"object":case"embed":ht("load",n);break;case"video":case"audio":for(s=0;s<ed.length;s++)ht(ed[s],n);break;case"source":ht("error",n);break;case"img":case"image":case"link":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"input":U3(n,a),ht("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ht("invalid",n);break;case"textarea":B3(n,a),ht("invalid",n)}mb(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&cp(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&cp(n.textContent,l,t),s=["children",""+l]):Rd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ht("scroll",n)}switch(r){case"input":tp(n),V3(n,a,!0);break;case"textarea":tp(n),z3(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=jm)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XC(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[xs]=e,t[qd]=n,wP(t,e,!1,!1),e.stateNode=t;e:{switch(o=gb(r,n),r){case"dialog":ht("cancel",t),ht("close",t),s=n;break;case"iframe":case"object":case"embed":ht("load",t),s=n;break;case"video":case"audio":for(s=0;s<ed.length;s++)ht(ed[s],t);s=n;break;case"source":ht("error",t),s=n;break;case"img":case"image":case"link":ht("error",t),ht("load",t),s=n;break;case"details":ht("toggle",t),s=n;break;case"input":U3(t,n),s=cb(t,n),ht("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=jt({},n,{value:void 0}),ht("invalid",t);break;case"textarea":B3(t,n),s=fb(t,n),ht("invalid",t);break;default:s=n}mb(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?eT(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JC(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Dd(t,c):typeof c=="number"&&Dd(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Rd.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ht("scroll",t):c!=null&&_2(t,a,c,o))}switch(r){case"input":tp(t),V3(t,n,!1);break;case"textarea":tp(t),z3(t);break;case"option":n.value!=null&&t.setAttribute("value",""+gi(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Bl(t,!!n.multiple,a,!1):n.defaultValue!=null&&Bl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)jP(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ne(166));if(r=so(Hd.current),so(js.current),up(e)){if(n=e.stateNode,r=e.memoizedProps,n[xs]=e,(a=n.nodeValue!==r)&&(t=mn,t!==null))switch(t.tag){case 3:cp(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cp(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xs]=e,e.stateNode=n}return _r(e),null;case 13:if(gt(wt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&hn!==null&&e.mode&1&&!(e.flags&128))VT(),ac(),e.flags|=98560,a=!1;else if(a=up(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ne(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[xs]=e}else ac(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),a=!1}else Xn!==null&&(Qb(Xn),Xn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||wt.current&1?Yt===0&&(Yt=3):s_())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return oc(),Bb(t,e),t===null&&Bd(e.stateNode.containerInfo),_r(e),null;case 10:return V2(e.type._context),_r(e),null;case 17:return Xr(e.type)&&km(),_r(e),null;case 19:if(gt(wt),a=e.memoizedState,a===null)return _r(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Ru(a,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pm(t),o!==null){for(e.flags|=128,Ru(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ct(wt,wt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Rt()>cc&&(e.flags|=128,n=!0,Ru(a,!1),e.lanes=4194304)}else{if(!n)if(t=Pm(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ru(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!yt)return _r(e),null}else 2*Rt()-a.renderingStartTime>cc&&r!==1073741824&&(e.flags|=128,n=!0,Ru(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Rt(),e.sibling=null,r=wt.current,ct(wt,n?r&1|2:r&1),e):(_r(e),null);case 22:case 23:return n_(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?on&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function xF(t,e){switch($2(e),e.tag){case 1:return Xr(e.type)&&km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oc(),gt(Qr),gt(Pr),H2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return W2(e),null;case 13:if(gt(wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));ac()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(wt),null;case 4:return oc(),null;case 10:return V2(e.type._context),null;case 22:case 23:return n_(),null;case 24:return null;default:return null}}var fp=!1,Sr=!1,bF=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Rl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){At(t,e,n)}else r.current=null}function zb(t,e,r){try{r()}catch(n){At(t,e,n)}}var Ok=!1;function wF(t,e){if(Sb=bm,t=AT(),D2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===r&&++u===s&&(l=o),f===a&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Eb={focusedElem:t,selectionRange:r},bm=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,b=p.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:Wn(e.type,x),b);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(S){At(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return p=Ok,Ok=!1,p}function md(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&zb(e,r,a)}s=s.next}while(s!==n)}}function j0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function qb(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function kP(t){var e=t.alternate;e!==null&&(t.alternate=null,kP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xs],delete e[qd],delete e[Tb],delete e[nF],delete e[sF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NP(t){return t.tag===5||t.tag===3||t.tag===4}function Ik(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=jm));else if(n!==4&&(t=t.child,t!==null))for(Wb(t,e,r),t=t.sibling;t!==null;)Wb(t,e,r),t=t.sibling}function Hb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Hb(t,e,r),t=t.sibling;t!==null;)Hb(t,e,r),t=t.sibling}var ur=null,Kn=!1;function Da(t,e,r){for(r=r.child;r!==null;)SP(t,e,r),r=r.sibling}function SP(t,e,r){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(m0,r)}catch{}switch(r.tag){case 5:Sr||Rl(r,e);case 6:var n=ur,s=Kn;ur=null,Da(t,e,r),ur=n,Kn=s,ur!==null&&(Kn?(t=ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ur.removeChild(r.stateNode));break;case 18:ur!==null&&(Kn?(t=ur,r=r.stateNode,t.nodeType===8?Iv(t.parentNode,r):t.nodeType===1&&Iv(t,r),Fd(t)):Iv(ur,r.stateNode));break;case 4:n=ur,s=Kn,ur=r.stateNode.containerInfo,Kn=!0,Da(t,e,r),ur=n,Kn=s;break;case 0:case 11:case 14:case 15:if(!Sr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&zb(r,e,o),s=s.next}while(s!==n)}Da(t,e,r);break;case 1:if(!Sr&&(Rl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){At(r,e,l)}Da(t,e,r);break;case 21:Da(t,e,r);break;case 22:r.mode&1?(Sr=(n=Sr)||r.memoizedState!==null,Da(t,e,r),Sr=n):Da(t,e,r);break;default:Da(t,e,r)}}function Rk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new bF),e.forEach(function(n){var s=TF.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Bn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ur=l.stateNode,Kn=!1;break e;case 3:ur=l.stateNode.containerInfo,Kn=!0;break e;case 4:ur=l.stateNode.containerInfo,Kn=!0;break e}l=l.return}if(ur===null)throw Error(ne(160));SP(a,o,s),ur=null,Kn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){At(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EP(e,t),e=e.sibling}function EP(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),gs(t),n&4){try{md(3,t,t.return),j0(3,t)}catch(x){At(t,t.return,x)}try{md(5,t,t.return)}catch(x){At(t,t.return,x)}}break;case 1:Bn(e,t),gs(t),n&512&&r!==null&&Rl(r,r.return);break;case 5:if(Bn(e,t),gs(t),n&512&&r!==null&&Rl(r,r.return),t.flags&32){var s=t.stateNode;try{Dd(s,"")}catch(x){At(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&YC(s,a),gb(l,o);var u=gb(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?eT(s,h):d==="dangerouslySetInnerHTML"?JC(s,h):d==="children"?Dd(s,h):_2(s,d,h,u)}switch(l){case"input":ub(s,a);break;case"textarea":QC(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Bl(s,!!a.multiple,g,!1):f!==!!a.multiple&&(a.defaultValue!=null?Bl(s,!!a.multiple,a.defaultValue,!0):Bl(s,!!a.multiple,a.multiple?[]:"",!1))}s[qd]=a}catch(x){At(t,t.return,x)}}break;case 6:if(Bn(e,t),gs(t),n&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(x){At(t,t.return,x)}}break;case 3:if(Bn(e,t),gs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Fd(e.containerInfo)}catch(x){At(t,t.return,x)}break;case 4:Bn(e,t),gs(t);break;case 13:Bn(e,t),gs(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(t_=Rt())),n&4&&Rk(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Sr=(u=Sr)||d,Bn(e,t),Sr=u):Bn(e,t),gs(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ue=t,d=t.child;d!==null;){for(h=ue=d;ue!==null;){switch(f=ue,g=f.child,f.tag){case 0:case 11:case 14:case 15:md(4,f,f.return);break;case 1:Rl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(x){At(n,r,x)}}break;case 5:Rl(f,f.return);break;case 22:if(f.memoizedState!==null){Mk(h);continue}}g!==null?(g.return=f,ue=g):Mk(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ZC("display",o))}catch(x){At(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){At(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bn(e,t),gs(t),n&4&&Rk(t);break;case 21:break;default:Bn(e,t),gs(t)}}function gs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(NP(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Dd(s,""),n.flags&=-33);var a=Ik(t);Hb(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ik(t);Wb(t,l,o);break;default:throw Error(ne(161))}}catch(c){At(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _F(t,e,r){ue=t,AP(t)}function AP(t,e,r){for(var n=(t.mode&1)!==0;ue!==null;){var s=ue,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||fp;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Sr;l=fp;var u=Sr;if(fp=o,(Sr=c)&&!u)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?$k(s):c!==null?(c.return=o,ue=c):$k(s);for(;a!==null;)ue=a,AP(a),a=a.sibling;ue=s,fp=l,Sr=u}Dk(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ue=a):Dk(t)}}function Dk(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sr||j0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Sr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Wn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&xk(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}xk(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Sr||e.flags&512&&qb(e)}catch(f){At(e,e.return,f)}}if(e===t){ue=null;break}if(r=e.sibling,r!==null){r.return=e.return,ue=r;break}ue=e.return}}function Mk(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ue=r;break}ue=e.return}}function $k(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{j0(4,e)}catch(c){At(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){At(e,s,c)}}var a=e.return;try{qb(e)}catch(c){At(e,a,c)}break;case 5:var o=e.return;try{qb(e)}catch(c){At(e,o,c)}}}catch(c){At(e,e.return,c)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var jF=Math.ceil,Rm=ja.ReactCurrentDispatcher,Z2=ja.ReactCurrentOwner,Pn=ja.ReactCurrentBatchConfig,qe=0,sr=null,Ut=null,fr=0,on=0,Dl=Ni(0),Yt=0,Qd=null,jo=0,k0=0,e_=0,gd=null,Hr=null,t_=0,cc=1/0,Bs=null,Dm=!1,Kb=null,li=null,pp=!1,Za=null,Mm=0,yd=0,Gb=null,tm=-1,rm=0;function Vr(){return qe&6?Rt():tm!==-1?tm:tm=Rt()}function ci(t){return t.mode&1?qe&2&&fr!==0?fr&-fr:iF.transition!==null?(rm===0&&(rm=hT()),rm):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:xT(t.type)),t):1}function ts(t,e,r,n){if(50<yd)throw yd=0,Gb=null,Error(ne(185));rf(t,r,n),(!(qe&2)||t!==sr)&&(t===sr&&(!(qe&2)&&(k0|=r),Yt===4&&qa(t,fr)),Jr(t,n),r===1&&qe===0&&!(e.mode&1)&&(cc=Rt()+500,b0&&Si()))}function Jr(t,e){var r=t.callbackNode;iL(t,e);var n=xm(t,t===sr?fr:0);if(n===0)r!==null&&H3(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&H3(r),e===1)t.tag===0?aF(Lk.bind(null,t)):LT(Lk.bind(null,t)),tF(function(){!(qe&6)&&Si()}),r=null;else{switch(fT(n)){case 1:r=E2;break;case 4:r=uT;break;case 16:r=vm;break;case 536870912:r=dT;break;default:r=vm}r=MP(r,CP.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function CP(t,e){if(tm=-1,rm=0,qe&6)throw Error(ne(327));var r=t.callbackNode;if(Kl()&&t.callbackNode!==r)return null;var n=xm(t,t===sr?fr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=$m(t,n);else{e=n;var s=qe;qe|=2;var a=PP();(sr!==t||fr!==e)&&(Bs=null,cc=Rt()+500,po(t,e));do try{SF();break}catch(l){TP(t,l)}while(!0);U2(),Rm.current=a,qe=s,Ut!==null?e=0:(sr=null,fr=0,e=Yt)}if(e!==0){if(e===2&&(s=wb(t),s!==0&&(n=s,e=Yb(t,s))),e===1)throw r=Qd,po(t,0),qa(t,n),Jr(t,Rt()),r;if(e===6)qa(t,n);else{if(s=t.current.alternate,!(n&30)&&!kF(s)&&(e=$m(t,n),e===2&&(a=wb(t),a!==0&&(n=a,e=Yb(t,a))),e===1))throw r=Qd,po(t,0),qa(t,n),Jr(t,Rt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ne(345));case 2:Hi(t,Hr,Bs);break;case 3:if(qa(t,n),(n&130023424)===n&&(e=t_+500-Rt(),10<e)){if(xm(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Vr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Cb(Hi.bind(null,t,Hr,Bs),e);break}Hi(t,Hr,Bs);break;case 4:if(qa(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-es(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=Rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jF(n/1960))-n,10<n){t.timeoutHandle=Cb(Hi.bind(null,t,Hr,Bs),n);break}Hi(t,Hr,Bs);break;case 5:Hi(t,Hr,Bs);break;default:throw Error(ne(329))}}}return Jr(t,Rt()),t.callbackNode===r?CP.bind(null,t):null}function Yb(t,e){var r=gd;return t.current.memoizedState.isDehydrated&&(po(t,e).flags|=256),t=$m(t,e),t!==2&&(e=Hr,Hr=r,e!==null&&Qb(e)),t}function Qb(t){Hr===null?Hr=t:Hr.push.apply(Hr,t)}function kF(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!as(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qa(t,e){for(e&=~e_,e&=~k0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-es(e),n=1<<r;t[r]=-1,e&=~n}}function Lk(t){if(qe&6)throw Error(ne(327));Kl();var e=xm(t,0);if(!(e&1))return Jr(t,Rt()),null;var r=$m(t,e);if(t.tag!==0&&r===2){var n=wb(t);n!==0&&(e=n,r=Yb(t,n))}if(r===1)throw r=Qd,po(t,0),qa(t,e),Jr(t,Rt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,Hr,Bs),Jr(t,Rt()),null}function r_(t,e){var r=qe;qe|=1;try{return t(e)}finally{qe=r,qe===0&&(cc=Rt()+500,b0&&Si())}}function ko(t){Za!==null&&Za.tag===0&&!(qe&6)&&Kl();var e=qe;qe|=1;var r=Pn.transition,n=Xe;try{if(Pn.transition=null,Xe=1,t)return t()}finally{Xe=n,Pn.transition=r,qe=e,!(qe&6)&&Si()}}function n_(){on=Dl.current,gt(Dl)}function po(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,eF(r)),Ut!==null)for(r=Ut.return;r!==null;){var n=r;switch($2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&km();break;case 3:oc(),gt(Qr),gt(Pr),H2();break;case 5:W2(n);break;case 4:oc();break;case 13:gt(wt);break;case 19:gt(wt);break;case 10:V2(n.type._context);break;case 22:case 23:n_()}r=r.return}if(sr=t,Ut=t=ui(t.current,null),fr=on=e,Yt=0,Qd=null,e_=k0=jo=0,Hr=gd=null,no!==null){for(e=0;e<no.length;e++)if(r=no[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}no=null}return t}function TP(t,e){do{var r=Ut;try{if(U2(),Jp.current=Im,Om){for(var n=_t.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Om=!1}if(_o=0,rr=Kt=_t=null,pd=!1,Kd=0,Z2.current=null,r===null||r.return===null){Yt=1,Qd=e,Ut=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=fr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Nk(o);if(g!==null){g.flags&=-257,Sk(g,o,l,a,e),g.mode&1&&kk(a,u,e),e=g,c=u;var p=e.updateQueue;if(p===null){var x=new Set;x.add(c),e.updateQueue=x}else p.add(c);break e}else{if(!(e&1)){kk(a,u,e),s_();break e}c=Error(ne(426))}}else if(yt&&l.mode&1){var b=Nk(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Sk(b,o,l,a,e),L2(lc(c,l));break e}}a=c=lc(c,l),Yt!==4&&(Yt=2),gd===null?gd=[a]:gd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=fP(a,c,e);vk(a,w);break e;case 1:l=c;var y=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(li===null||!li.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=pP(a,l,e);vk(a,S);break e}}a=a.return}while(a!==null)}IP(r)}catch(j){e=j,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(!0)}function PP(){var t=Rm.current;return Rm.current=Im,t===null?Im:t}function s_(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),sr===null||!(jo&268435455)&&!(k0&268435455)||qa(sr,fr)}function $m(t,e){var r=qe;qe|=2;var n=PP();(sr!==t||fr!==e)&&(Bs=null,po(t,e));do try{NF();break}catch(s){TP(t,s)}while(!0);if(U2(),qe=r,Rm.current=n,Ut!==null)throw Error(ne(261));return sr=null,fr=0,Yt}function NF(){for(;Ut!==null;)OP(Ut)}function SF(){for(;Ut!==null&&!X$();)OP(Ut)}function OP(t){var e=DP(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?IP(t):Ut=e,Z2.current=null}function IP(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=xF(r,e),r!==null){r.flags&=32767,Ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Ut=null;return}}else if(r=vF(r,e,on),r!==null){Ut=r;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Yt===0&&(Yt=5)}function Hi(t,e,r){var n=Xe,s=Pn.transition;try{Pn.transition=null,Xe=1,EF(t,e,r,n)}finally{Pn.transition=s,Xe=n}return null}function EF(t,e,r,n){do Kl();while(Za!==null);if(qe&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(oL(t,a),t===sr&&(Ut=sr=null,fr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pp||(pp=!0,MP(vm,function(){return Kl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var o=Xe;Xe=1;var l=qe;qe|=4,Z2.current=null,wF(t,r),EP(r,t),KL(Eb),bm=!!Sb,Eb=Sb=null,t.current=r,_F(r),J$(),qe=l,Xe=o,Pn.transition=a}else t.current=r;if(pp&&(pp=!1,Za=t,Mm=s),a=t.pendingLanes,a===0&&(li=null),tL(r.stateNode),Jr(t,Rt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Dm)throw Dm=!1,t=Kb,Kb=null,t;return Mm&1&&t.tag!==0&&Kl(),a=t.pendingLanes,a&1?t===Gb?yd++:(yd=0,Gb=t):yd=0,Si(),null}function Kl(){if(Za!==null){var t=fT(Mm),e=Pn.transition,r=Xe;try{if(Pn.transition=null,Xe=16>t?16:t,Za===null)var n=!1;else{if(t=Za,Za=null,Mm=0,qe&6)throw Error(ne(331));var s=qe;for(qe|=4,ue=t.current;ue!==null;){var a=ue,o=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:md(8,d,a)}var h=d.child;if(h!==null)h.return=d,ue=h;else for(;ue!==null;){d=ue;var f=d.sibling,g=d.return;if(kP(d),d===u){ue=null;break}if(f!==null){f.return=g,ue=f;break}ue=g}}}var p=a.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}ue=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ue=o;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:md(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,ue=w;break e}ue=a.return}}var y=t.current;for(ue=y;ue!==null;){o=ue;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ue=_;else e:for(o=y;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:j0(9,l)}}catch(j){At(l,l.return,j)}if(l===o){ue=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ue=S;break e}ue=l.return}}if(qe=s,Si(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(m0,t)}catch{}n=!0}return n}finally{Xe=r,Pn.transition=e}}return!1}function Fk(t,e,r){e=lc(r,e),e=fP(t,e,1),t=oi(t,e,1),e=Vr(),t!==null&&(rf(t,1,e),Jr(t,e))}function At(t,e,r){if(t.tag===3)Fk(t,t,r);else for(;e!==null;){if(e.tag===3){Fk(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(li===null||!li.has(n))){t=lc(r,t),t=pP(e,t,1),e=oi(e,t,1),t=Vr(),e!==null&&(rf(e,1,t),Jr(e,t));break}}e=e.return}}function AF(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Vr(),t.pingedLanes|=t.suspendedLanes&r,sr===t&&(fr&r)===r&&(Yt===4||Yt===3&&(fr&130023424)===fr&&500>Rt()-t_?po(t,0):e_|=r),Jr(t,e)}function RP(t,e){e===0&&(t.mode&1?(e=sp,sp<<=1,!(sp&130023424)&&(sp=4194304)):e=1);var r=Vr();t=fa(t,e),t!==null&&(rf(t,e,r),Jr(t,r))}function CF(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),RP(t,r)}function TF(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(e),RP(t,r)}var DP;DP=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qr.current)Gr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gr=!1,yF(t,e,r);Gr=!!(t.flags&131072)}else Gr=!1,yt&&e.flags&1048576&&FT(e,Em,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;em(t,e),t=e.pendingProps;var s=sc(e,Pr.current);Hl(e,r),s=G2(null,e,n,t,s,r);var a=Y2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xr(n)?(a=!0,Nm(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,z2(e),s.updater=_0,e.stateNode=s,s._reactInternals=e,Mb(e,n,t,r),e=Fb(null,e,n,!0,a,r)):(e.tag=0,yt&&a&&M2(e),Mr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(em(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=OF(n),t=Wn(n,t),s){case 0:e=Lb(null,e,n,t,r);break e;case 1:e=Ck(null,e,n,t,r);break e;case 11:e=Ek(null,e,n,t,r);break e;case 14:e=Ak(null,e,n,Wn(n.type,t),r);break e}throw Error(ne(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Wn(n,s),Lb(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Wn(n,s),Ck(t,e,n,s,r);case 3:e:{if(vP(e),t===null)throw Error(ne(387));n=e.pendingProps,a=e.memoizedState,s=a.element,WT(t,e),Tm(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=lc(Error(ne(423)),e),e=Tk(t,e,n,r,s);break e}else if(n!==s){s=lc(Error(ne(424)),e),e=Tk(t,e,n,r,s);break e}else for(hn=ii(e.stateNode.containerInfo.firstChild),mn=e,yt=!0,Xn=null,r=zT(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ac(),n===s){e=pa(t,e,r);break e}Mr(t,e,n,r)}e=e.child}return e;case 5:return HT(e),t===null&&Ib(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Ab(n,s)?o=null:a!==null&&Ab(n,a)&&(e.flags|=32),yP(t,e),Mr(t,e,o,r),e.child;case 6:return t===null&&Ib(e),null;case 13:return xP(t,e,r);case 4:return q2(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ic(e,null,n,r):Mr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Wn(n,s),Ek(t,e,n,s,r);case 7:return Mr(t,e,e.pendingProps,r),e.child;case 8:return Mr(t,e,e.pendingProps.children,r),e.child;case 12:return Mr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ct(Am,n._currentValue),n._currentValue=o,a!==null)if(as(a.value,o)){if(a.children===s.children&&!Qr.current){e=pa(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=na(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Rb(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ne(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Rb(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Mr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Hl(e,r),s=In(s),n=n(s),e.flags|=1,Mr(t,e,n,r),e.child;case 14:return n=e.type,s=Wn(n,e.pendingProps),s=Wn(n.type,s),Ak(t,e,n,s,r);case 15:return mP(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Wn(n,s),em(t,e),e.tag=1,Xr(n)?(t=!0,Nm(e)):t=!1,Hl(e,r),hP(e,n,s),Mb(e,n,s,r),Fb(null,e,n,!0,t,r);case 19:return bP(t,e,r);case 22:return gP(t,e,r)}throw Error(ne(156,e.tag))};function MP(t,e){return cT(t,e)}function PF(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,r,n){return new PF(t,e,r,n)}function a_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OF(t){if(typeof t=="function")return a_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===k2)return 11;if(t===N2)return 14}return 2}function ui(t,e){var r=t.alternate;return r===null?(r=Cn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function nm(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")a_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Nl:return mo(r.children,s,a,e);case j2:o=8,s|=8;break;case ab:return t=Cn(12,r,e,s|2),t.elementType=ab,t.lanes=a,t;case ib:return t=Cn(13,r,e,s),t.elementType=ib,t.lanes=a,t;case ob:return t=Cn(19,r,e,s),t.elementType=ob,t.lanes=a,t;case HC:return N0(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qC:o=10;break e;case WC:o=9;break e;case k2:o=11;break e;case N2:o=14;break e;case Fa:o=16,n=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Cn(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function mo(t,e,r,n){return t=Cn(7,t,n,e),t.lanes=r,t}function N0(t,e,r,n){return t=Cn(22,t,n,e),t.elementType=HC,t.lanes=r,t.stateNode={isHidden:!1},t}function Vv(t,e,r){return t=Cn(6,t,null,e),t.lanes=r,t}function Bv(t,e,r){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IF(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_v(0),this.expirationTimes=_v(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_v(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function i_(t,e,r,n,s,a,o,l,c){return t=new IF(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Cn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},z2(a),t}function RF(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $P(t){if(!t)return yi;t=t._reactInternals;e:{if(Bo(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(Xr(r))return $T(t,r,e)}return e}function LP(t,e,r,n,s,a,o,l,c){return t=i_(r,n,!0,t,s,a,o,l,c),t.context=$P(null),r=t.current,n=Vr(),s=ci(r),a=na(n,s),a.callback=e??null,oi(r,a,s),t.current.lanes=s,rf(t,s,n),Jr(t,n),t}function S0(t,e,r,n){var s=e.current,a=Vr(),o=ci(s);return r=$P(r),e.context===null?e.context=r:e.pendingContext=r,e=na(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=oi(s,e,o),t!==null&&(ts(t,s,o,a),Xp(t,s,o)),o}function Lm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function o_(t,e){Uk(t,e),(t=t.alternate)&&Uk(t,e)}function DF(){return null}var FP=typeof reportError=="function"?reportError:function(t){console.error(t)};function l_(t){this._internalRoot=t}E0.prototype.render=l_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));S0(t,e,null,null)};E0.prototype.unmount=l_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ko(function(){S0(null,t,null,null)}),e[ha]=null}};function E0(t){this._internalRoot=t}E0.prototype.unstable_scheduleHydration=function(t){if(t){var e=gT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<za.length&&e!==0&&e<za[r].priority;r++);za.splice(r,0,t),r===0&&vT(t)}};function c_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function A0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vk(){}function MF(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Lm(o);a.call(u)}}var o=LP(e,n,t,0,null,!1,!1,"",Vk);return t._reactRootContainer=o,t[ha]=o.current,Bd(t.nodeType===8?t.parentNode:t),ko(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Lm(c);l.call(u)}}var c=i_(t,0,!1,null,null,!1,!1,"",Vk);return t._reactRootContainer=c,t[ha]=c.current,Bd(t.nodeType===8?t.parentNode:t),ko(function(){S0(e,c,r,n)}),c}function C0(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Lm(o);l.call(c)}}S0(e,o,t,s)}else o=MF(r,e,t,s,n);return Lm(o)}pT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Zu(e.pendingLanes);r!==0&&(A2(e,r|1),Jr(e,Rt()),!(qe&6)&&(cc=Rt()+500,Si()))}break;case 13:ko(function(){var n=fa(t,1);if(n!==null){var s=Vr();ts(n,t,1,s)}}),o_(t,1)}};C2=function(t){if(t.tag===13){var e=fa(t,134217728);if(e!==null){var r=Vr();ts(e,t,134217728,r)}o_(t,134217728)}};mT=function(t){if(t.tag===13){var e=ci(t),r=fa(t,e);if(r!==null){var n=Vr();ts(r,t,e,n)}o_(t,e)}};gT=function(){return Xe};yT=function(t,e){var r=Xe;try{return Xe=t,e()}finally{Xe=r}};vb=function(t,e,r){switch(e){case"input":if(ub(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=x0(n);if(!s)throw Error(ne(90));GC(n),ub(n,s)}}}break;case"textarea":QC(t,r);break;case"select":e=r.value,e!=null&&Bl(t,!!r.multiple,e,!1)}};nT=r_;sT=ko;var $F={usingClientEntryPoint:!1,Events:[sf,Cl,x0,tT,rT,r_]},Du={findFiberByHostInstance:ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LF={bundleType:Du.bundleType,version:Du.version,rendererPackageName:Du.rendererPackageName,rendererConfig:Du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oT(t),t===null?null:t.stateNode},findFiberByHostInstance:Du.findFiberByHostInstance||DF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{m0=mp.inject(LF),_s=mp}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$F;bn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c_(e))throw Error(ne(200));return RF(t,e,null,r)};bn.createRoot=function(t,e){if(!c_(t))throw Error(ne(299));var r=!1,n="",s=FP;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=i_(t,1,!1,null,null,r,!1,n,s),t[ha]=e.current,Bd(t.nodeType===8?t.parentNode:t),new l_(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=oT(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return ko(t)};bn.hydrate=function(t,e,r){if(!A0(e))throw Error(ne(200));return C0(null,t,e,!0,r)};bn.hydrateRoot=function(t,e,r){if(!c_(t))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=FP;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=LP(e,null,t,1,r??null,s,!1,a,o),t[ha]=e.current,Bd(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new E0(e)};bn.render=function(t,e,r){if(!A0(e))throw Error(ne(200));return C0(null,t,e,!1,r)};bn.unmountComponentAtNode=function(t){if(!A0(t))throw Error(ne(40));return t._reactRootContainer?(ko(function(){C0(null,null,t,!1,function(){t._reactRootContainer=null,t[ha]=null})}),!0):!1};bn.unstable_batchedUpdates=r_;bn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!A0(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return C0(t,e,r,!1,n)};bn.version="18.3.1-next-f1338f8080-20240426";function UP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UP)}catch(t){console.error(t)}}UP(),UC.exports=bn;var FF=UC.exports,Bk=FF;nb.createRoot=Bk.createRoot,nb.hydrateRoot=Bk.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xd.apply(this,arguments)}var ei;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ei||(ei={}));const zk="popstate";function UF(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:o,hash:l}=n.location;return Xb("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Fm(s)}return BF(e,r,null,t)}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VF(){return Math.random().toString(36).substr(2,8)}function qk(t,e){return{usr:t.state,key:t.key,idx:e}}function Xb(t,e,r,n){return r===void 0&&(r=null),Xd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hc(e):e,{state:r,key:e&&e.key||n||VF()})}function Fm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Hc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function BF(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=ei.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Xd({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ei.Pop;let b=d(),w=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:w})}function f(b,w){l=ei.Push;let y=Xb(x.location,b,w);u=d()+1;let _=qk(y,u),S=x.createHref(y);try{o.pushState(_,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}a&&c&&c({action:l,location:x.location,delta:1})}function g(b,w){l=ei.Replace;let y=Xb(x.location,b,w);u=d();let _=qk(y,u),S=x.createHref(y);o.replaceState(_,"",S),a&&c&&c({action:l,location:x.location,delta:0})}function p(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:Fm(b);return y=y.replace(/ $/,"%20"),Dt(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let x={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(zk,h),c=b,()=>{s.removeEventListener(zk,h),c=null}},createHref(b){return e(s,b)},createURL:p,encodeLocation(b){let w=p(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:g,go(b){return o.go(b)}};return x}var Wk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wk||(Wk={}));function zF(t,e,r){return r===void 0&&(r="/"),qF(t,e,r)}function qF(t,e,r,n){let s=typeof e=="string"?Hc(e):e,a=d_(s.pathname||"/",r);if(a==null)return null;let o=VP(t);WF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=nU(a);l=eU(o[c],u)}return l}function VP(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Dt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=di([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(Dt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),VP(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:JF(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of BP(a.path))s(a,o,c)}),e}function BP(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=BP(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function WF(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ZF(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const HF=/^:[\w-]+$/,KF=3,GF=2,YF=1,QF=10,XF=-2,Hk=t=>t==="*";function JF(t,e){let r=t.split("/"),n=r.length;return r.some(Hk)&&(n+=XF),e&&(n+=GF),r.filter(s=>!Hk(s)).reduce((s,a)=>s+(HF.test(a)?KF:a===""?YF:QF),n)}function ZF(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function eU(t,e,r){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=tU({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:di([a,h.pathname]),pathnameBase:lU(di([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=di([a,h.pathnameBase]))}return o}function tU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=rU(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let x=l[h]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const p=l[h];return g&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function rU(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),u_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function nU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return u_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function d_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const sU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aU=t=>sU.test(t);function iU(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Hc(t):t,a;if(r)if(aU(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),u_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=Kk(r.substring(1),"/"):a=Kk(r,e)}else a=e;return{pathname:a,search:cU(n),hash:uU(s)}}function Kk(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function zv(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oU(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function h_(t,e){let r=oU(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function f_(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Hc(t):(s=Xd({},t),Dt(!s.pathname||!s.pathname.includes("?"),zv("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),zv("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),zv("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=iU(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const di=t=>t.join("/").replace(/\/\/+/g,"/"),lU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zP=["post","put","patch","delete"];new Set(zP);const hU=["get",...zP];new Set(hU);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jd(){return Jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jd.apply(this,arguments)}const p_=T.createContext(null),fU=T.createContext(null),Ei=T.createContext(null),T0=T.createContext(null),Is=T.createContext({outlet:null,matches:[],isDataRoute:!1}),qP=T.createContext(null);function pU(t,e){let{relative:r}=e===void 0?{}:e;Kc()||Dt(!1);let{basename:n,navigator:s}=T.useContext(Ei),{hash:a,pathname:o,search:l}=HP(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:di([n,o])),s.createHref({pathname:c,search:l,hash:a})}function Kc(){return T.useContext(T0)!=null}function Gc(){return Kc()||Dt(!1),T.useContext(T0).location}function WP(t){T.useContext(Ei).static||T.useLayoutEffect(t)}function Jt(){let{isDataRoute:t}=T.useContext(Is);return t?CU():mU()}function mU(){Kc()||Dt(!1);let t=T.useContext(p_),{basename:e,future:r,navigator:n}=T.useContext(Ei),{matches:s}=T.useContext(Is),{pathname:a}=Gc(),o=JSON.stringify(h_(s,r.v7_relativeSplatPath)),l=T.useRef(!1);return WP(()=>{l.current=!0}),T.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=f_(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:di([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,a,t])}const gU=T.createContext(null);function yU(t){let e=T.useContext(Is).outlet;return e&&T.createElement(gU.Provider,{value:t},e)}function P0(){let{matches:t}=T.useContext(Is),e=t[t.length-1];return e?e.params:{}}function HP(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Ei),{matches:s}=T.useContext(Is),{pathname:a}=Gc(),o=JSON.stringify(h_(s,n.v7_relativeSplatPath));return T.useMemo(()=>f_(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function vU(t,e){return xU(t,e)}function xU(t,e,r,n){Kc()||Dt(!1);let{navigator:s}=T.useContext(Ei),{matches:a}=T.useContext(Is),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Gc(),d;if(e){var h;let b=typeof e=="string"?Hc(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Dt(!1),d=b}else d=u;let f=d.pathname||"/",g=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=zF(t,{pathname:g}),x=kU(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:di([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:di([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return e&&x?T.createElement(T0.Provider,{value:{location:Jd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ei.Pop}},x):x}function bU(){let t=AU(),e=dU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:s},r):null,null)}const wU=T.createElement(bU,null);class _U extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Is.Provider,{value:this.props.routeContext},T.createElement(qP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jU(t){let{routeContext:e,match:r,children:n}=t,s=T.useContext(p_);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Is.Provider,{value:e},n)}function kU(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Dt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=r,p=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,p=!1,x=null,b=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||wU,c&&(u<0&&f===0?(TU("route-fallback"),p=!0,b=null):u===f&&(p=!0,b=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),y=()=>{let _;return g?_=x:p?_=b:h.route.Component?_=T.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,T.createElement(jU,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(_U,{location:r.location,revalidation:r.revalidation,component:x,error:g,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var KP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KP||{}),GP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(GP||{});function NU(t){let e=T.useContext(p_);return e||Dt(!1),e}function SU(t){let e=T.useContext(fU);return e||Dt(!1),e}function EU(t){let e=T.useContext(Is);return e||Dt(!1),e}function YP(t){let e=EU(),r=e.matches[e.matches.length-1];return r.route.id||Dt(!1),r.route.id}function AU(){var t;let e=T.useContext(qP),r=SU(),n=YP();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function CU(){let{router:t}=NU(KP.UseNavigateStable),e=YP(GP.UseNavigateStable),r=T.useRef(!1);return WP(()=>{r.current=!0}),T.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Jd({fromRouteId:e},a)))},[t,e])}const Gk={};function TU(t,e,r){Gk[t]||(Gk[t]=!0)}function PU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wa(t){let{to:e,replace:r,state:n,relative:s}=t;Kc()||Dt(!1);let{future:a,static:o}=T.useContext(Ei),{matches:l}=T.useContext(Is),{pathname:c}=Gc(),u=Jt(),d=f_(e,h_(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return T.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function m_(t){return yU(t.context)}function fe(t){Dt(!1)}function OU(t){let{basename:e="/",children:r=null,location:n,navigationType:s=ei.Pop,navigator:a,static:o=!1,future:l}=t;Kc()&&Dt(!1);let c=e.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:a,static:o,future:Jd({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Hc(n));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:p="default"}=n,x=T.useMemo(()=>{let b=d_(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:g,key:p},navigationType:s}},[c,d,h,f,g,p,s]);return x==null?null:T.createElement(Ei.Provider,{value:u},T.createElement(T0.Provider,{children:r,value:x}))}function IU(t){let{children:e,location:r}=t;return vU(Jb(e),r)}new Promise(()=>{});function Jb(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,s)=>{if(!T.isValidElement(n))return;let a=[...e,s];if(n.type===T.Fragment){r.push.apply(r,Jb(n.props.children,a));return}n.type!==fe&&Dt(!1),!n.props.index||!n.props.children||Dt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Jb(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zb(){return Zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zb.apply(this,arguments)}function RU(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function DU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MU(t,e){return t.button===0&&(!e||e==="_self")&&!DU(t)}function e1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function $U(t,e){let r=e1(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}const LU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FU="6";try{window.__reactRouterVersion=FU}catch{}const UU="startTransition",Yk=A$[UU];function VU(t){let{basename:e,children:r,future:n,window:s}=t,a=T.useRef();a.current==null&&(a.current=UF({window:s,v5Compat:!0}));let o=a.current,[l,c]=T.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=T.useCallback(h=>{u&&Yk?Yk(()=>c(h)):c(h)},[c,u]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>PU(n),[n]),T.createElement(OU,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const BU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=T.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=RU(e,LU),{basename:g}=T.useContext(Ei),p,x=!1;if(typeof u=="string"&&zU.test(u)&&(p=u,BU))try{let _=new URL(window.location.href),S=u.startsWith("//")?new URL(_.protocol+u):new URL(u),j=d_(S.pathname,g);S.origin===_.origin&&j!=null?u=j+S.search+S.hash:x=!0}catch{}let b=pU(u,{relative:s}),w=qU(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(_){n&&n(_),_.defaultPrevented||w(_)}return T.createElement("a",Zb({},f,{href:p||b,onClick:x||a?n:y,ref:r,target:c}))});var Qk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qk||(Qk={}));var Xk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xk||(Xk={}));function qU(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Jt(),u=Gc(),d=HP(t,{relative:o});return T.useCallback(h=>{if(MU(h,r)){h.preventDefault();let f=n!==void 0?n:Fm(u)===Fm(d);c(t,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,s,r,t,a,o,l])}function WU(t){let e=T.useRef(e1(t)),r=T.useRef(!1),n=Gc(),s=T.useMemo(()=>$U(n.search,r.current?null:e.current),[n.search]),a=Jt(),o=T.useCallback((l,c)=>{const u=e1(typeof l=="function"?l(s):l);r.current=!0,a("?"+u,c)},[a,s]);return[s,o]}var Jk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},HU=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},XP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(f=64)),n.push(r[d],r[h],r[f],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new KU;const f=a<<2|l>>4;if(n.push(f),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const p=u<<6&192|h;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GU=function(t){const e=QP(t);return XP.encodeByteArray(e,!0)},Um=function(t){return GU(t).replace(/\./g,"")},JP=function(t){try{return XP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=()=>YU().__FIREBASE_DEFAULTS__,XU=()=>{if(typeof process>"u"||typeof Jk>"u")return;const t=Jk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JP(t[1]);return e&&JSON.parse(e)},O0=()=>{try{return QU()||XU()||JU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZP=t=>{var e,r;return(r=(e=O0())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},g_=t=>{const e=ZP(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},e8=()=>{var t;return(t=O0())===null||t===void 0?void 0:t.config},t8=t=>{var e;return(e=O0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZU=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Um(JSON.stringify(r)),Um(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Or())}function tV(){var t;const e=(t=O0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aV(){const t=Or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iV(){return!tV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n8(){try{return typeof indexedDB=="object"}catch{return!1}}function s8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function oV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="FirebaseError";class ds extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=lV,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?cV(a,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ds(s,l,n)}}function cV(t,e){return t.replace(uV,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const uV=/\{\$([^}]+)}/g;function dV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],o=e[s];if(Zk(a)&&Zk(o)){if(!Vm(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Zk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function td(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function rd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function hV(t,e){const r=new fV(t,e);return r.subscribe.bind(r)}class fV{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");pV(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=qv),s.error===void 0&&(s.error=qv),s.complete===void 0&&(s.complete=qv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pV(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function qv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class xn{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new ZU;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yV(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:gV(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gV(t){return t===Ki?void 0:t}function yV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new mV(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const xV={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},bV=Be.INFO,wV={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},_V=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=wV[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=bV,this._logHandler=_V,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const jV=(t,e)=>e.some(r=>t instanceof r);let eN,tN;function kV(){return eN||(eN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NV(){return tN||(tN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a8=new WeakMap,t1=new WeakMap,i8=new WeakMap,Wv=new WeakMap,v_=new WeakMap;function SV(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(sa(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&a8.set(r,t)}).catch(()=>{}),v_.set(e,t),e}function EV(t){if(t1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});t1.set(t,e)}let r1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return t1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||i8.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sa(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AV(t){r1=t(r1)}function CV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Hv(this),e,...r);return i8.set(n,e.sort?e.sort():[e]),sa(n)}:NV().includes(t)?function(...e){return t.apply(Hv(this),e),sa(a8.get(this))}:function(...e){return sa(t.apply(Hv(this),e))}}function TV(t){return typeof t=="function"?CV(t):(t instanceof IDBTransaction&&EV(t),jV(t,kV())?new Proxy(t,r1):t)}function sa(t){if(t instanceof IDBRequest)return SV(t);if(Wv.has(t))return Wv.get(t);const e=TV(t);return e!==t&&(Wv.set(t,e),v_.set(e,t)),e}const Hv=t=>v_.get(t);function I0(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=sa(o);return n&&o.addEventListener("upgradeneeded",c=>{n(sa(o.result),c.oldVersion,c.newVersion,sa(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}function Kv(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),sa(r).then(()=>{})}const PV=["get","getKey","getAll","getAllKeys","count"],OV=["put","add","delete","clear"],Gv=new Map;function rN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gv.get(e))return Gv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=OV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||PV.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Gv.set(e,a),a}AV(t=>({...t,get:(e,r,n)=>rN(e,r)||t.get(e,r,n),has:(e,r)=>!!rN(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(RV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function RV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const n1="@firebase/app",nN="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new y_("@firebase/app"),DV="@firebase/app-compat",MV="@firebase/analytics-compat",$V="@firebase/analytics",LV="@firebase/app-check-compat",FV="@firebase/app-check",UV="@firebase/auth",VV="@firebase/auth-compat",BV="@firebase/database",zV="@firebase/data-connect",qV="@firebase/database-compat",WV="@firebase/functions",HV="@firebase/functions-compat",KV="@firebase/installations",GV="@firebase/installations-compat",YV="@firebase/messaging",QV="@firebase/messaging-compat",XV="@firebase/performance",JV="@firebase/performance-compat",ZV="@firebase/remote-config",eB="@firebase/remote-config-compat",tB="@firebase/storage",rB="@firebase/storage-compat",nB="@firebase/firestore",sB="@firebase/vertexai-preview",aB="@firebase/firestore-compat",iB="firebase",oB="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="[DEFAULT]",lB={[n1]:"fire-core",[DV]:"fire-core-compat",[$V]:"fire-analytics",[MV]:"fire-analytics-compat",[FV]:"fire-app-check",[LV]:"fire-app-check-compat",[UV]:"fire-auth",[VV]:"fire-auth-compat",[BV]:"fire-rtdb",[zV]:"fire-data-connect",[qV]:"fire-rtdb-compat",[WV]:"fire-fn",[HV]:"fire-fn-compat",[KV]:"fire-iid",[GV]:"fire-iid-compat",[YV]:"fire-fcm",[QV]:"fire-fcm-compat",[XV]:"fire-perf",[JV]:"fire-perf-compat",[ZV]:"fire-rc",[eB]:"fire-rc-compat",[tB]:"fire-gcs",[rB]:"fire-gcs-compat",[nB]:"fire-fst",[aB]:"fire-fst-compat",[sB]:"fire-vertex","fire-js":"fire-js",[iB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map,cB=new Map,a1=new Map;function sN(t,e){try{t.container.addComponent(e)}catch(r){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Dn(t){const e=t.name;if(a1.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;a1.set(e,t);for(const r of Bm.values())sN(r,t);for(const r of cB.values())sN(r,t);return!0}function Ai(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new zo("app","Firebase",uB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=oB;function o8(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:s1,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw hi.create("bad-app-name",{appName:String(s)});if(r||(r=e8()),!r)throw hi.create("no-options");const a=Bm.get(s);if(a){if(Vm(r,a.options)&&Vm(n,a.config))return a;throw hi.create("duplicate-app",{appName:s})}const o=new vV(s);for(const c of a1.values())o.addComponent(c);const l=new dB(r,n,o);return Bm.set(s,l),l}function lf(t=s1){const e=Bm.get(t);if(!e&&t===s1&&e8())return o8();if(!e)throw hi.create("no-app",{appName:t});return e}function Cr(t,e,r){var n;let s=(n=lB[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(l.join(" "));return}Dn(new xn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB="firebase-heartbeat-database",fB=1,Zd="firebase-heartbeat-store";let Yv=null;function l8(){return Yv||(Yv=I0(hB,fB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zd)}catch(r){console.warn(r)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),Yv}async function pB(t){try{const r=(await l8()).transaction(Zd),n=await r.objectStore(Zd).get(c8(t));return await r.done,n}catch(e){if(e instanceof ds)ma.warn(e.message);else{const r=hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(r.message)}}}async function aN(t,e){try{const n=(await l8()).transaction(Zd,"readwrite");await n.objectStore(Zd).put(e,c8(t)),await n.done}catch(r){if(r instanceof ds)ma.warn(r.message);else{const n=hi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ma.warn(n.message)}}}function c8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=1024,gB=30*24*60*60*1e3;class yB{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new xB(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=iN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=gB}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ma.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=iN(),{heartbeatsToSend:n,unsentEntries:s}=vB(this._heartbeatsCache.heartbeats),a=Um(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return ma.warn(r),""}}}function iN(){return new Date().toISOString().substring(0,10)}function vB(t,e=mB){const r=[];let n=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),oN(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),oN(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class xB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n8()?s8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await pB(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return aN(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return aN(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oN(t){return Um(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){Dn(new xn("platform-logger",e=>new IV(e),"PRIVATE")),Dn(new xn("heartbeat",e=>new yB(e),"PRIVATE")),Cr(n1,nN,t),Cr(n1,nN,"esm2017"),Cr("fire-js","")}bB("");function Wo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function wB(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function u8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _B=u8,d8=new zo("auth","Firebase",u8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new y_("@firebase/auth");function jB(t,...e){zm.logLevel<=Be.WARN&&zm.warn(`Auth (${qo}): ${t}`,...e)}function sm(t,...e){zm.logLevel<=Be.ERROR&&zm.error(`Auth (${qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw b_(t,...e)}function rs(t,...e){return b_(t,...e)}function x_(t,e,r){const n=Object.assign(Object.assign({},_B()),{[e]:r});return new zo("auth","Firebase",n).create(e,{appName:t.name})}function aa(t){return x_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kB(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Mn(t,"argument-error"),x_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return d8.create(t,...e)}function Ee(t,e,...r){if(!t)throw b_(e,...r)}function Xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sm(e),new Error(e)}function ga(t,e){t||Xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NB(){return lN()==="http:"||lN()==="https:"}function lN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NB()||nV()||"connection"in navigator)?navigator.onLine:!0}function EB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,r){this.shortDelay=e,this.longDelay=r,ga(r>e,"Short delay should be less than long delay!"),this.isMobile=eV()||sV()}get(){return SB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){ga(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new cf(3e4,6e4);function ka(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hs(t,e,r,n,s={}){return f8(t,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=of(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return rV()||(u.referrerPolicy="no-referrer"),h8.fetch()(p8(t,t.config.apiHost,r,l),u)})}async function f8(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},AB),e);try{const s=new PB(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw gp(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw gp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw gp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw gp(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x_(t,d,u);Mn(t,d)}}catch(s){if(s instanceof ds)throw s;Mn(t,"network-request-failed",{message:String(s)})}}async function uf(t,e,r,n,s={}){const a=await hs(t,e,r,n,s);return"mfaPendingCredential"in a&&Mn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function p8(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?w_(t.config,s):`${t.config.apiScheme}://${s}`}function TB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(rs(this.auth,"network-request-failed")),CB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gp(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=rs(t,e,n);return s.customData._tokenResponse=r,s}function cN(t){return t!==void 0&&t.enterprise!==void 0}class OB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return TB(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IB(t,e){return hs(t,"GET","/v2/recaptchaConfig",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e){return hs(t,"POST","/v1/accounts:delete",e)}async function m8(t,e){return hs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DB(t,e=!1){const r=rt(t),n=await r.getIdToken(e),s=__(n);Ee(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:vd(Qv(s.auth_time)),issuedAtTime:vd(Qv(s.iat)),expirationTime:vd(Qv(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Qv(t){return Number(t)*1e3}function __(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return sm("JWT malformed, contained fewer than 3 sections"),null;try{const s=JP(r);return s?JSON.parse(s):(sm("Failed to decode base64 JWT payload"),null)}catch(s){return sm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uN(t){const e=__(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ds&&MB(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function MB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=vd(this.lastLoginAt),this.creationTime=vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){var e;const r=t.auth,n=await t.getIdToken(),s=await No(t,m8(r,{idToken:n}));Ee(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?g8(a.providerUserInfo):[],l=FB(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new o1(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function LB(t){const e=rt(t);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FB(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function g8(t){return t.map(e=>{var{providerId:r}=e,n=Wo(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e){const r=await f8(t,{},async()=>{const n=of({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=p8(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",h8.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function VB(t,e){return hs(t,"POST","/v2/accounts:revokeToken",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const r=uN(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await UB(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,o=new Gl;return n&&(Ee(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ee(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Js{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,a=Wo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $B(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new o1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await No(this,this.stsTokenManager.getToken(this.auth,e));return Ee(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return DB(this,e)}reload(){return LB(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Js(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await qm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(aa(this.auth));const e=await this.getIdToken();return await No(this,RB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,a,o,l,c,u,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,p=(o=r.photoURL)!==null&&o!==void 0?o:void 0,x=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,w=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:S,isAnonymous:j,providerData:k,stsTokenManager:N}=r;Ee(_&&N,e,"internal-error");const E=Gl.fromJSON(this.name,N);Ee(typeof _=="string",e,"internal-error"),Ma(h,e.name),Ma(f,e.name),Ee(typeof S=="boolean",e,"internal-error"),Ee(typeof j=="boolean",e,"internal-error"),Ma(g,e.name),Ma(p,e.name),Ma(x,e.name),Ma(b,e.name),Ma(w,e.name),Ma(y,e.name);const A=new Js({uid:_,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:j,photoURL:p,phoneNumber:g,tenantId:x,stsTokenManager:E,createdAt:w,lastLoginAt:y});return k&&Array.isArray(k)&&(A.providerData=k.map(P=>Object.assign({},P))),b&&(A._redirectEventId=b),A}static async _fromIdTokenResponse(e,r,n=!1){const s=new Gl;s.updateFromServerResponse(r);const a=new Js({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await qm(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ee(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?g8(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Gl;l.updateFromIdToken(n);const c=new Js({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new o1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new Map;function Zs(t){ga(t instanceof Function,"Expected a class definition");let e=dN.get(t);return e?(ga(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}y8.type="NONE";const hN=y8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e,r){return`firebase:${t}:${e}:${r}`}class Yl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=am(this.userKey,s.apiKey,a),this.fullPersistenceKey=am("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Js._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Yl(Zs(hN),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||Zs(hN);const o=am(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const h=Js._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Yl(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new Yl(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j8(e))return"Blackberry";if(k8(e))return"Webos";if(x8(e))return"Safari";if((e.includes("chrome/")||b8(e))&&!e.includes("edge/"))return"Chrome";if(_8(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function v8(t=Or()){return/firefox\//i.test(t)}function x8(t=Or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b8(t=Or()){return/crios\//i.test(t)}function w8(t=Or()){return/iemobile/i.test(t)}function _8(t=Or()){return/android/i.test(t)}function j8(t=Or()){return/blackberry/i.test(t)}function k8(t=Or()){return/webos/i.test(t)}function j_(t=Or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BB(t=Or()){var e;return j_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zB(){return aV()&&document.documentMode===10}function N8(t=Or()){return j_(t)||_8(t)||k8(t)||j8(t)||/windows phone/i.test(t)||w8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t,e=[]){let r;switch(t){case"Browser":r=fN(Or());break;case"Worker":r=`${fN(Or())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${qo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e={}){return hs(t,"GET","/v2/passwordPolicy",ka(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=6;class KB{constructor(e){var r,n,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:HB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pN(this),this.idTokenSubscription=new pN(this),this.beforeStateQueue=new qB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Zs(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await m8(this,{idToken:e}),n=await Js._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(aa(this));const r=e?rt(e):null;return r&&Ee(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WB(this),r=new KB(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await VB(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Zs(e)||this._popupRedirectResolver;Ee(r,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[Zs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&jB(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Na(t){return rt(t)}class pN{constructor(e){this.auth=e,this.observer=null,this.addObserver=hV(r=>this.observer=r)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YB(t){R0=t}function E8(t){return R0.loadJS(t)}function QB(){return R0.recaptchaEnterpriseScript}function XB(){return R0.gapiScript}function JB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZB="recaptcha-enterprise",ez="NO_RECAPTCHA";class tz{constructor(e){this.type=ZB,this.auth=Na(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{IB(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new OB(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;cN(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(ez)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&cN(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=QB();c.length!==0&&(c+=l),E8(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function mN(t,e,r,n=!1){const s=new tz(t);let a;try{a=await s.verify(r)}catch{a=await s.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Wm(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await mN(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await mN(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t,e){const r=Ai(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(Vm(a,e??{}))return s;Mn(s,"already-initialized")}return r.initialize({options:e})}function nz(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Zs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function sz(t,e,r){const n=Na(t);Ee(n._canInitEmulator,n,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=A8(e),{host:o,port:l}=az(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),iz()}function A8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function az(t){const e=A8(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:gN(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:gN(o)}}}function gN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,r){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}async function oz(t,e){return hs(t,"POST","/v1/accounts:update",e)}async function lz(t,e){return hs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e){return uf(t,"POST","/v1/accounts:signInWithPassword",ka(t,e))}async function uz(t,e){return hs(t,"POST","/v1/accounts:sendOobCode",ka(t,e))}async function dz(t,e){return uz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(t,e){return uf(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}async function fz(t,e){return uf(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends k_{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new eh(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new eh(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wm(e,r,"signInWithPassword",cz);case"emailLink":return hz(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wm(e,n,"signUpPassword",lz);case"emailLink":return fz(e,{idToken:r,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t,e){return uf(t,"POST","/v1/accounts:signInWithIdp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz="http://localhost";class So extends k_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Mn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,a=Wo(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new So(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ql(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ql(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ql(e,r)}buildRequest(){const e={requestUri:pz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=of(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gz(t){const e=td(rd(t)).link,r=e?td(rd(e)).deep_link_id:null,n=td(rd(t)).deep_link_id;return(n?td(rd(n)).link:null)||n||r||e||t}class N_{constructor(e){var r,n,s,a,o,l;const c=td(rd(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,h=mz((s=c.mode)!==null&&s!==void 0?s:null);Ee(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=gz(e);try{return new N_(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.providerId=Yc.PROVIDER_ID}static credential(e,r){return eh._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=N_.parseLink(r);return Ee(n,"argument-error"),eh._fromEmailAndCode(e,n.code,n.tenantId)}}Yc.PROVIDER_ID="password";Yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends df{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends df{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return So._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ks.credential(r,n)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends df{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ka.credential(e.oauthAccessToken)}catch{return null}}}Ka.GITHUB_SIGN_IN_METHOD="github.com";Ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends df{constructor(){super("twitter.com")}static credential(e,r){return So._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ga.credential(r,n)}catch{return null}}}Ga.TWITTER_SIGN_IN_METHOD="twitter.com";Ga.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(t,e){return uf(t,"POST","/v1/accounts:signUp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Js._fromIdTokenResponse(e,n,s),o=yN(n);return new Eo({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=yN(n);return new Eo({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function yN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends ds{constructor(e,r,n,s){var a;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Hm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Hm(e,r,n,s)}}function C8(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hm._fromErrorAndOperation(t,a,e,n):a})}async function vz(t,e,r=!1){const n=await No(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Eo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xz(t,e,r=!1){const{auth:n}=t;if(Zn(n.app))return Promise.reject(aa(n));const s="reauthenticate";try{const a=await No(t,C8(n,s,e,t),r);Ee(a.idToken,n,"internal-error");const o=__(a.idToken);Ee(o,n,"internal-error");const{sub:l}=o;return Ee(t.uid===l,n,"user-mismatch"),Eo._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Mn(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(t,e,r=!1){if(Zn(t.app))return Promise.reject(aa(t));const n="signIn",s=await C8(t,n,e),a=await Eo._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function bz(t,e){return T8(Na(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(t){const e=Na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function O8(t,e,r){const n=Na(t);await Wm(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dz)}async function I8(t,e,r){if(Zn(t.app))return Promise.reject(aa(t));const n=Na(t),o=await Wm(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yz).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&P8(t),c}),l=await Eo._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function wz(t,e,r){return Zn(t.app)?Promise.reject(aa(t)):bz(rt(t),Yc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&P8(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(t,e){return hs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=rt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await No(n,_z(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function R8(t,e){return kz(rt(t),null,e)}async function kz(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(a.password=r);const o=await No(t,oz(n,a));await t._updateTokensIfNecessary(o,!0)}function Nz(t,e,r,n){return rt(t).onIdTokenChanged(e,r,n)}function Sz(t,e,r){return rt(t).beforeAuthStateChanged(e,r)}function Ez(t,e,r,n){return rt(t).onAuthStateChanged(e,r,n)}function Az(t){return rt(t).signOut()}const Km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Km,"1"),this.storage.removeItem(Km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=1e3,Tz=10;class M8 extends D8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);zB()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Tz):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Cz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}M8.type="LOCAL";const Pz=M8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8 extends D8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}$8.type="SESSION";const L8=$8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new D0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async u=>u(r.origin,a)),c=await Oz(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=E_("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function Rz(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function Dz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $z(){return F8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8="firebaseLocalStorageDb",Lz=1,Gm="firebaseLocalStorage",V8="fbase_key";class hf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function M0(t,e){return t.transaction([Gm],e?"readwrite":"readonly").objectStore(Gm)}function Fz(){const t=indexedDB.deleteDatabase(U8);return new hf(t).toPromise()}function l1(){const t=indexedDB.open(U8,Lz);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Gm,{keyPath:V8})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Gm)?e(n):(n.close(),await Fz(),e(await l1()))})})}async function vN(t,e,r){const n=M0(t,!0).put({[V8]:e,value:r});return new hf(n).toPromise()}async function Uz(t,e){const r=M0(t,!1).get(e),n=await new hf(r).toPromise();return n===void 0?null:n.value}function xN(t,e){const r=M0(t,!0).delete(e);return new hf(r).toPromise()}const Vz=800,Bz=3;class B8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l1(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Bz)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D0._getInstance($z()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Dz(),!this.activeServiceWorker)return;this.sender=new Iz(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l1();return await vN(e,Km,"1"),await xN(e,Km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>vN(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Uz(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>xN(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=M0(s,!1).getAll();return new hf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B8.type="LOCAL";const zz=B8;new cf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e){return e?Zs(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends k_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ql(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function qz(t){return T8(t.auth,new A_(t),t.bypassAuthState)}function Wz(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),xz(r,new A_(t),t.bypassAuthState)}async function Hz(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),vz(r,new A_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qz;case"linkViaPopup":case"linkViaRedirect":return Hz;case"reauthViaPopup":case"reauthViaRedirect":return Wz;default:Mn(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=new cf(2e3,1e4);async function Gz(t,e,r){if(Zn(t.app))return Promise.reject(rs(t,"operation-not-supported-in-this-environment"));const n=Na(t);kB(t,e,S_);const s=z8(n,r);return new ao(n,"signInViaPopup",e,s).executeNotNull()}class ao extends q8{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=E_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kz.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="pendingRedirect",im=new Map;class Qz extends q8{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=im.get(this.auth._key());if(!e){try{const n=await Xz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}im.set(this.auth._key(),e)}return this.bypassAuthState||im.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xz(t,e){const r=eq(e),n=Zz(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function Jz(t,e){im.set(t._key(),e)}function Zz(t){return Zs(t._redirectPersistence)}function eq(t){return am(Yz,t.config.apiKey,t.name)}async function tq(t,e,r=!1){if(Zn(t.app))return Promise.reject(aa(t));const n=Na(t),s=z8(n,e),o=await new Qz(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=10*60*1e3;class nq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sq(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!W8(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(rs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rq&&this.cachedEventUids.clear(),this.cachedEventUids.has(bN(e))}saveEventToCache(e){this.cachedEventUids.add(bN(e)),this.lastProcessedEventTime=Date.now()}}function bN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function W8({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W8(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aq(t,e={}){return hs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oq=/^https?/;async function lq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aq(t);for(const r of e)try{if(cq(r))return}catch{}Mn(t,"unauthorized-domain")}function cq(t){const e=i1(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!oq.test(r))return!1;if(iq.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq=new cf(3e4,6e4);function wN(){const t=ks().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function dq(t){return new Promise((e,r)=>{var n,s,a;function o(){wN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wN(),r(rs(t,"network-request-failed"))},timeout:uq.get()})}if(!((s=(n=ks().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ks().gapi)===null||a===void 0)&&a.load)o();else{const l=JB("iframefcb");return ks()[l]=()=>{gapi.load?o():r(rs(t,"network-request-failed"))},E8(`${XB()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw om=null,e})}let om=null;function hq(t){return om=om||dq(t),om}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=new cf(5e3,15e3),pq="__/auth/iframe",mq="emulator/auth/iframe",gq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vq(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?w_(e,mq):`https://${t.config.authDomain}/${pq}`,n={apiKey:e.apiKey,appName:t.name,v:qo},s=yq.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${of(n).slice(1)}`}async function xq(t){const e=await hq(t),r=ks().gapi;return Ee(r,t,"internal-error"),e.open({where:document.body,url:vq(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gq,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=rs(t,"network-request-failed"),l=ks().setTimeout(()=>{a(o)},fq.get());function c(){ks().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wq=500,_q=600,jq="_blank",kq="http://localhost";class _N{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nq(t,e,r,n=wq,s=_q){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},bq),{width:n.toString(),height:s.toString(),top:a,left:o}),u=Or().toLowerCase();r&&(l=b8(u)?jq:r),v8(u)&&(e=e||kq,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,p])=>`${f}${g}=${p},`,"");if(BB(u)&&l!=="_self")return Sq(e||"",l),new _N(null);const h=window.open(e||"",l,d);Ee(h,t,"popup-blocked");try{h.focus()}catch{}return new _N(h)}function Sq(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq="__/auth/handler",Aq="emulator/auth/handler",Cq=encodeURIComponent("fac");async function jN(t,e,r,n,s,a){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:qo,eventId:s};if(e instanceof S_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof df){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${Cq}=${encodeURIComponent(c)}`:"";return`${Tq(t)}?${of(l).slice(1)}${u}`}function Tq({config:t}){return t.emulator?w_(t,Aq):`https://${t.authDomain}/${Eq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="webStorageSupport";class Pq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L8,this._completeRedirectFn=tq,this._overrideRedirectResult=Jz}async _openPopup(e,r,n,s){var a;ga((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await jN(e,r,n,i1(),s);return Nq(e,o,E_())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await jN(e,r,n,i1(),s);return Rz(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(ga(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await xq(e),n=new nq(e);return r.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Xv,{type:Xv},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Xv];o!==void 0&&r(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=lq(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return N8()||x8()||j_()}}const Oq=Pq;var kN="@firebase/auth",NN="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dq(t){Dn(new xn("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S8(t)},u=new GB(n,s,a,c);return nz(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Dn(new xn("auth-internal",e=>{const r=Na(e.getProvider("auth").getImmediate());return(n=>new Iq(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(kN,NN,Rq(t)),Cr(kN,NN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=5*60,$q=t8("authIdTokenMaxAge")||Mq;let SN=null;const Lq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>$q)return;const s=r==null?void 0:r.token;SN!==s&&(SN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Fq(t=lf()){const e=Ai(t,"auth");if(e.isInitialized())return e.getImmediate();const r=rz(t,{popupRedirectResolver:Oq,persistence:[zz,Pz,L8]}),n=t8("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=Lq(a.toString());Sz(r,o,()=>o(r.currentUser)),Nz(r,l=>o(l))}}const s=ZP("auth");return s&&sz(r,`http://${s}`),r}function Uq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YB({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=rs("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",Uq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dq("Browser");var EN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var go,H8;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function A(){}A.prototype=E.prototype,N.D=E.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(P,O,I){for(var D=Array(arguments.length-2),B=2;B<arguments.length;B++)D[B-2]=arguments[B];return E.prototype[O].apply(P,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,E,A){A||(A=0);var P=Array(16);if(typeof E=="string")for(var O=0;16>O;++O)P[O]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(O=0;16>O;++O)P[O]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=N.g[0],A=N.g[1],O=N.g[2];var I=N.g[3],D=E+(I^A&(O^I))+P[0]+3614090360&4294967295;E=A+(D<<7&4294967295|D>>>25),D=I+(O^E&(A^O))+P[1]+3905402710&4294967295,I=E+(D<<12&4294967295|D>>>20),D=O+(A^I&(E^A))+P[2]+606105819&4294967295,O=I+(D<<17&4294967295|D>>>15),D=A+(E^O&(I^E))+P[3]+3250441966&4294967295,A=O+(D<<22&4294967295|D>>>10),D=E+(I^A&(O^I))+P[4]+4118548399&4294967295,E=A+(D<<7&4294967295|D>>>25),D=I+(O^E&(A^O))+P[5]+1200080426&4294967295,I=E+(D<<12&4294967295|D>>>20),D=O+(A^I&(E^A))+P[6]+2821735955&4294967295,O=I+(D<<17&4294967295|D>>>15),D=A+(E^O&(I^E))+P[7]+4249261313&4294967295,A=O+(D<<22&4294967295|D>>>10),D=E+(I^A&(O^I))+P[8]+1770035416&4294967295,E=A+(D<<7&4294967295|D>>>25),D=I+(O^E&(A^O))+P[9]+2336552879&4294967295,I=E+(D<<12&4294967295|D>>>20),D=O+(A^I&(E^A))+P[10]+4294925233&4294967295,O=I+(D<<17&4294967295|D>>>15),D=A+(E^O&(I^E))+P[11]+2304563134&4294967295,A=O+(D<<22&4294967295|D>>>10),D=E+(I^A&(O^I))+P[12]+1804603682&4294967295,E=A+(D<<7&4294967295|D>>>25),D=I+(O^E&(A^O))+P[13]+4254626195&4294967295,I=E+(D<<12&4294967295|D>>>20),D=O+(A^I&(E^A))+P[14]+2792965006&4294967295,O=I+(D<<17&4294967295|D>>>15),D=A+(E^O&(I^E))+P[15]+1236535329&4294967295,A=O+(D<<22&4294967295|D>>>10),D=E+(O^I&(A^O))+P[1]+4129170786&4294967295,E=A+(D<<5&4294967295|D>>>27),D=I+(A^O&(E^A))+P[6]+3225465664&4294967295,I=E+(D<<9&4294967295|D>>>23),D=O+(E^A&(I^E))+P[11]+643717713&4294967295,O=I+(D<<14&4294967295|D>>>18),D=A+(I^E&(O^I))+P[0]+3921069994&4294967295,A=O+(D<<20&4294967295|D>>>12),D=E+(O^I&(A^O))+P[5]+3593408605&4294967295,E=A+(D<<5&4294967295|D>>>27),D=I+(A^O&(E^A))+P[10]+38016083&4294967295,I=E+(D<<9&4294967295|D>>>23),D=O+(E^A&(I^E))+P[15]+3634488961&4294967295,O=I+(D<<14&4294967295|D>>>18),D=A+(I^E&(O^I))+P[4]+3889429448&4294967295,A=O+(D<<20&4294967295|D>>>12),D=E+(O^I&(A^O))+P[9]+568446438&4294967295,E=A+(D<<5&4294967295|D>>>27),D=I+(A^O&(E^A))+P[14]+3275163606&4294967295,I=E+(D<<9&4294967295|D>>>23),D=O+(E^A&(I^E))+P[3]+4107603335&4294967295,O=I+(D<<14&4294967295|D>>>18),D=A+(I^E&(O^I))+P[8]+1163531501&4294967295,A=O+(D<<20&4294967295|D>>>12),D=E+(O^I&(A^O))+P[13]+2850285829&4294967295,E=A+(D<<5&4294967295|D>>>27),D=I+(A^O&(E^A))+P[2]+4243563512&4294967295,I=E+(D<<9&4294967295|D>>>23),D=O+(E^A&(I^E))+P[7]+1735328473&4294967295,O=I+(D<<14&4294967295|D>>>18),D=A+(I^E&(O^I))+P[12]+2368359562&4294967295,A=O+(D<<20&4294967295|D>>>12),D=E+(A^O^I)+P[5]+4294588738&4294967295,E=A+(D<<4&4294967295|D>>>28),D=I+(E^A^O)+P[8]+2272392833&4294967295,I=E+(D<<11&4294967295|D>>>21),D=O+(I^E^A)+P[11]+1839030562&4294967295,O=I+(D<<16&4294967295|D>>>16),D=A+(O^I^E)+P[14]+4259657740&4294967295,A=O+(D<<23&4294967295|D>>>9),D=E+(A^O^I)+P[1]+2763975236&4294967295,E=A+(D<<4&4294967295|D>>>28),D=I+(E^A^O)+P[4]+1272893353&4294967295,I=E+(D<<11&4294967295|D>>>21),D=O+(I^E^A)+P[7]+4139469664&4294967295,O=I+(D<<16&4294967295|D>>>16),D=A+(O^I^E)+P[10]+3200236656&4294967295,A=O+(D<<23&4294967295|D>>>9),D=E+(A^O^I)+P[13]+681279174&4294967295,E=A+(D<<4&4294967295|D>>>28),D=I+(E^A^O)+P[0]+3936430074&4294967295,I=E+(D<<11&4294967295|D>>>21),D=O+(I^E^A)+P[3]+3572445317&4294967295,O=I+(D<<16&4294967295|D>>>16),D=A+(O^I^E)+P[6]+76029189&4294967295,A=O+(D<<23&4294967295|D>>>9),D=E+(A^O^I)+P[9]+3654602809&4294967295,E=A+(D<<4&4294967295|D>>>28),D=I+(E^A^O)+P[12]+3873151461&4294967295,I=E+(D<<11&4294967295|D>>>21),D=O+(I^E^A)+P[15]+530742520&4294967295,O=I+(D<<16&4294967295|D>>>16),D=A+(O^I^E)+P[2]+3299628645&4294967295,A=O+(D<<23&4294967295|D>>>9),D=E+(O^(A|~I))+P[0]+4096336452&4294967295,E=A+(D<<6&4294967295|D>>>26),D=I+(A^(E|~O))+P[7]+1126891415&4294967295,I=E+(D<<10&4294967295|D>>>22),D=O+(E^(I|~A))+P[14]+2878612391&4294967295,O=I+(D<<15&4294967295|D>>>17),D=A+(I^(O|~E))+P[5]+4237533241&4294967295,A=O+(D<<21&4294967295|D>>>11),D=E+(O^(A|~I))+P[12]+1700485571&4294967295,E=A+(D<<6&4294967295|D>>>26),D=I+(A^(E|~O))+P[3]+2399980690&4294967295,I=E+(D<<10&4294967295|D>>>22),D=O+(E^(I|~A))+P[10]+4293915773&4294967295,O=I+(D<<15&4294967295|D>>>17),D=A+(I^(O|~E))+P[1]+2240044497&4294967295,A=O+(D<<21&4294967295|D>>>11),D=E+(O^(A|~I))+P[8]+1873313359&4294967295,E=A+(D<<6&4294967295|D>>>26),D=I+(A^(E|~O))+P[15]+4264355552&4294967295,I=E+(D<<10&4294967295|D>>>22),D=O+(E^(I|~A))+P[6]+2734768916&4294967295,O=I+(D<<15&4294967295|D>>>17),D=A+(I^(O|~E))+P[13]+1309151649&4294967295,A=O+(D<<21&4294967295|D>>>11),D=E+(O^(A|~I))+P[4]+4149444226&4294967295,E=A+(D<<6&4294967295|D>>>26),D=I+(A^(E|~O))+P[11]+3174756917&4294967295,I=E+(D<<10&4294967295|D>>>22),D=O+(E^(I|~A))+P[2]+718787259&4294967295,O=I+(D<<15&4294967295|D>>>17),D=A+(I^(O|~E))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+I&4294967295}n.prototype.u=function(N,E){E===void 0&&(E=N.length);for(var A=E-this.blockSize,P=this.B,O=this.h,I=0;I<E;){if(O==0)for(;I<=A;)s(this,N,I),I+=this.blockSize;if(typeof N=="string"){for(;I<E;)if(P[O++]=N.charCodeAt(I++),O==this.blockSize){s(this,P),O=0;break}}else for(;I<E;)if(P[O++]=N[I++],O==this.blockSize){s(this,P),O=0;break}}this.h=O,this.o+=E},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;var A=8*this.o;for(E=N.length-8;E<N.length;++E)N[E]=A&255,A/=256;for(this.u(N),N=Array(16),E=A=0;4>E;++E)for(var P=0;32>P;P+=8)N[A++]=this.g[E]>>>P&255;return N};function a(N,E){var A=l;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=E(N)}function o(N,E){this.h=E;for(var A=[],P=!0,O=N.length-1;0<=O;O--){var I=N[O]|0;P&&I==E||(A[O]=I,P=!1)}this.g=A}var l={};function c(N){return-128<=N&&128>N?a(N,function(E){return new o([E|0],0>E?-1:0)}):new o([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return h;if(0>N)return b(u(-N));for(var E=[],A=1,P=0;N>=A;P++)E[P]=N/A|0,A*=4294967296;return new o(E,0)}function d(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return b(d(N.substring(1),E));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(E,8)),P=h,O=0;O<N.length;O+=8){var I=Math.min(8,N.length-O),D=parseInt(N.substring(O,O+I),E);8>I?(I=u(Math.pow(E,I)),P=P.j(I).add(u(D))):(P=P.j(A),P=P.add(u(D)))}return P}var h=c(0),f=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();for(var N=0,E=1,A=0;A<this.g.length;A++){var P=this.i(A);N+=(0<=P?P:4294967296+P)*E,E*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(p(this))return"0";if(x(this))return"-"+b(this).toString(N);for(var E=u(Math.pow(N,6)),A=this,P="";;){var O=S(A,E).g;A=w(A,O.j(E));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=O,p(A))return I+P;for(;6>I.length;)I="0"+I;P=I+P}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function p(N){if(N.h!=0)return!1;for(var E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function x(N){return N.h==-1}t.l=function(N){return N=w(this,N),x(N)?-1:p(N)?0:1};function b(N){for(var E=N.g.length,A=[],P=0;P<E;P++)A[P]=~N.g[P];return new o(A,~N.h).add(f)}t.abs=function(){return x(this)?b(this):this},t.add=function(N){for(var E=Math.max(this.g.length,N.g.length),A=[],P=0,O=0;O<=E;O++){var I=P+(this.i(O)&65535)+(N.i(O)&65535),D=(I>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);P=D>>>16,I&=65535,D&=65535,A[O]=D<<16|I}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(N,E){return N.add(b(E))}t.j=function(N){if(p(this)||p(N))return h;if(x(this))return x(N)?b(this).j(b(N)):b(b(this).j(N));if(x(N))return b(this.j(b(N)));if(0>this.l(g)&&0>N.l(g))return u(this.m()*N.m());for(var E=this.g.length+N.g.length,A=[],P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<N.g.length;O++){var I=this.i(P)>>>16,D=this.i(P)&65535,B=N.i(O)>>>16,z=N.i(O)&65535;A[2*P+2*O]+=D*z,y(A,2*P+2*O),A[2*P+2*O+1]+=I*z,y(A,2*P+2*O+1),A[2*P+2*O+1]+=D*B,y(A,2*P+2*O+1),A[2*P+2*O+2]+=I*B,y(A,2*P+2*O+2)}for(P=0;P<E;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=E;P<2*E;P++)A[P]=0;return new o(A,0)};function y(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function _(N,E){this.g=N,this.h=E}function S(N,E){if(p(E))throw Error("division by zero");if(p(N))return new _(h,h);if(x(N))return E=S(b(N),E),new _(b(E.g),b(E.h));if(x(E))return E=S(N,b(E)),new _(b(E.g),E.h);if(30<N.g.length){if(x(N)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var A=f,P=E;0>=P.l(N);)A=j(A),P=j(P);var O=k(A,1),I=k(P,1);for(P=k(P,2),A=k(A,2);!p(P);){var D=I.add(P);0>=D.l(N)&&(O=O.add(A),I=D),P=k(P,1),A=k(A,1)}return E=w(N,O.j(E)),new _(O,E)}for(O=h;0<=N.l(E);){for(A=Math.max(1,Math.floor(N.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),I=u(A),D=I.j(E);x(D)||0<D.l(N);)A-=P,I=u(A),D=I.j(E);p(I)&&(I=f),O=O.add(I),N=w(N,D)}return new _(O,N)}t.A=function(N){return S(this,N).h},t.and=function(N){for(var E=Math.max(this.g.length,N.g.length),A=[],P=0;P<E;P++)A[P]=this.i(P)&N.i(P);return new o(A,this.h&N.h)},t.or=function(N){for(var E=Math.max(this.g.length,N.g.length),A=[],P=0;P<E;P++)A[P]=this.i(P)|N.i(P);return new o(A,this.h|N.h)},t.xor=function(N){for(var E=Math.max(this.g.length,N.g.length),A=[],P=0;P<E;P++)A[P]=this.i(P)^N.i(P);return new o(A,this.h^N.h)};function j(N){for(var E=N.g.length+1,A=[],P=0;P<E;P++)A[P]=N.i(P)<<1|N.i(P-1)>>>31;return new o(A,N.h)}function k(N,E){var A=E>>5;E%=32;for(var P=N.g.length-A,O=[],I=0;I<P;I++)O[I]=0<E?N.i(I+A)>>>E|N.i(I+A+1)<<32-E:N.i(I+A);return new o(O,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,H8=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,go=o}).apply(typeof EN<"u"?EN:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var K8,nd,G8,lm,c1,Y8,Q8,X8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,R){return m==Array.prototype||m==Object.prototype||(m[C]=R.value),m};function r(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var C=0;C<m.length;++C){var R=m[C];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=r(this);function s(m,C){if(C)e:{var R=n;m=m.split(".");for(var M=0;M<m.length-1;M++){var W=m[M];if(!(W in R))break e;R=R[W]}m=m[m.length-1],M=R[m],C=C(M),C!=M&&C!=null&&e(R,m,{configurable:!0,writable:!0,value:C})}}function a(m,C){m instanceof String&&(m+="");var R=0,M=!1,W={next:function(){if(!M&&R<m.length){var K=R++;return{value:C(K,m[K]),done:!1}}return M=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(m){return m||function(){return a(this,function(C,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function u(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function d(m,C,R){return m.call.apply(m.bind,arguments)}function h(m,C,R){if(!m)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,M),m.apply(C,W)}}return function(){return m.apply(C,arguments)}}function f(m,C,R){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(m,C){var R=Array.prototype.slice.call(arguments,1);return function(){var M=R.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function p(m,C){function R(){}R.prototype=C.prototype,m.aa=C.prototype,m.prototype=new R,m.prototype.constructor=m,m.Qb=function(M,W,K){for(var oe=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)oe[nt-2]=arguments[nt];return C.prototype[W].apply(M,oe)}}function x(m){const C=m.length;if(0<C){const R=Array(C);for(let M=0;M<C;M++)R[M]=m[M];return R}return[]}function b(m,C){for(let R=1;R<arguments.length;R++){const M=arguments[R];if(c(M)){const W=m.length||0,K=M.length||0;m.length=W+K;for(let oe=0;oe<K;oe++)m[W+oe]=M[oe]}else m.push(M)}}class w{constructor(C,R){this.i=C,this.j=R,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=l.navigator;return m&&(m=m.userAgent)?m:""}function S(m){return S[" "](m),m}S[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function k(m,C,R){for(const M in m)C.call(R,m[M],M,m)}function N(m,C){for(const R in m)C.call(void 0,m[R],R,m)}function E(m){const C={};for(const R in m)C[R]=m[R];return C}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,C){let R,M;for(let W=1;W<arguments.length;W++){M=arguments[W];for(R in M)m[R]=M[R];for(let K=0;K<A.length;K++)R=A[K],Object.prototype.hasOwnProperty.call(M,R)&&(m[R]=M[R])}}function O(m){var C=1;m=m.split(":");const R=[];for(;0<C&&m.length;)R.push(m.shift()),C--;return m.length&&R.push(m.join(":")),R}function I(m){l.setTimeout(()=>{throw m},0)}function D(){var m=H;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class B{constructor(){this.h=this.g=null}add(C,R){const M=z.get();M.set(C,R),this.h?this.h.next=M:this.g=M,this.h=M}}var z=new w(()=>new G,m=>m.reset());class G{constructor(){this.next=this.g=this.h=null}set(C,R){this.h=C,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,F=!1,H=new B,$=()=>{const m=l.Promise.resolve(void 0);Q=()=>{m.then(U)}};var U=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(R){I(R)}var C=z;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}F=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};l.addEventListener("test",R,C),l.removeEventListener("test",R,C)}catch{}return m}();function Y(m,C){if(Z.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var R=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(j){e:{try{S(C.nodeName);var W=!0;break e}catch{}W=!1}W||(C=null)}}else R=="mouseover"?C=m.fromElement:R=="mouseout"&&(C=m.toElement);this.relatedTarget=C,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:re[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Y.aa.h.call(this)}}p(Y,Z);var re={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function le(m,C,R,M,W){this.listener=m,this.proxy=null,this.src=C,this.type=R,this.capture=!!M,this.ha=W,this.key=++Ne,this.da=this.fa=!1}function Se(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Oe(m){this.src=m,this.g={},this.h=0}Oe.prototype.add=function(m,C,R,M,W){var K=m.toString();m=this.g[K],m||(m=this.g[K]=[],this.h++);var oe=at(m,C,M,W);return-1<oe?(C=m[oe],R||(C.fa=!1)):(C=new le(C,this.src,K,!!M,W),C.fa=R,m.push(C)),C};function ee(m,C){var R=C.type;if(R in m.g){var M=m.g[R],W=Array.prototype.indexOf.call(M,C,void 0),K;(K=0<=W)&&Array.prototype.splice.call(M,W,1),K&&(Se(C),m.g[R].length==0&&(delete m.g[R],m.h--))}}function at(m,C,R,M){for(var W=0;W<m.length;++W){var K=m[W];if(!K.da&&K.listener==C&&K.capture==!!R&&K.ha==M)return W}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),xt={};function Nt(m,C,R,M,W){if(Array.isArray(C)){for(var K=0;K<C.length;K++)Nt(m,C[K],R,M,W);return null}return R=pu(R),m&&m[Pe]?m.K(C,R,u(M)?!!M.capture:!1,W):yr(m,C,R,!1,M,W)}function yr(m,C,R,M,W,K){if(!C)throw Error("Invalid event type");var oe=u(W)?!!W.capture:!!W,nt=Ri(m);if(nt||(m[Fe]=nt=new Oe(m)),R=nt.add(C,R,M,oe,K),R.proxy)return R;if(M=ps(),R.proxy=M,M.src=m,M.listener=R,m.addEventListener)ye||(W=oe),W===void 0&&(W=!1),m.addEventListener(C.toString(),M,W);else if(m.attachEvent)m.attachEvent(ms(C.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return R}function ps(){function m(R){return C.call(m.src,m.listener,R)}const C=Ls;return m}function $s(m,C,R,M,W){if(Array.isArray(C))for(var K=0;K<C.length;K++)$s(m,C[K],R,M,W);else M=u(M)?!!M.capture:!!M,R=pu(R),m&&m[Pe]?(m=m.i,C=String(C).toString(),C in m.g&&(K=m.g[C],R=at(K,R,M,W),-1<R&&(Se(K[R]),Array.prototype.splice.call(K,R,1),K.length==0&&(delete m.g[C],m.h--)))):m&&(m=Ri(m))&&(C=m.g[C.toString()],m=-1,C&&(m=at(C,R,M,W)),(R=-1<m?C[m]:null)&&Pa(R))}function Pa(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[Pe])ee(C.i,m);else{var R=m.type,M=m.proxy;C.removeEventListener?C.removeEventListener(R,M,m.capture):C.detachEvent?C.detachEvent(ms(R),M):C.addListener&&C.removeListener&&C.removeListener(M),(R=Ri(C))?(ee(R,m),R.h==0&&(R.src=null,C[Fe]=null)):Se(m)}}}function ms(m){return m in xt?xt[m]:xt[m]="on"+m}function Ls(m,C){if(m.da)m=!0;else{C=new Y(C,this);var R=m.listener,M=m.ha||m.src;m.fa&&Pa(m),m=R.call(M,C)}return m}function Ri(m){return m=m[Fe],m instanceof Oe?m:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function pu(m){return typeof m=="function"?m:(m[el]||(m[el]=function(C){return m.handleEvent(C)}),m[el])}function vr(){V.call(this),this.i=new Oe(this),this.M=this,this.F=null}p(vr,V),vr.prototype[Pe]=!0,vr.prototype.removeEventListener=function(m,C,R,M){$s(this,m,C,R,M)};function Ir(m,C){var R,M=m.F;if(M)for(R=[];M;M=M.F)R.push(M);if(m=m.M,M=C.type||C,typeof C=="string")C=new Z(C,m);else if(C instanceof Z)C.target=C.target||m;else{var W=C;C=new Z(M,m),P(C,W)}if(W=!0,R)for(var K=R.length-1;0<=K;K--){var oe=C.g=R[K];W=Mf(oe,M,!0,C)&&W}if(oe=C.g=m,W=Mf(oe,M,!0,C)&&W,W=Mf(oe,M,!1,C)&&W,R)for(K=0;K<R.length;K++)oe=C.g=R[K],W=Mf(oe,M,!1,C)&&W}vr.prototype.N=function(){if(vr.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var R=m.g[C],M=0;M<R.length;M++)Se(R[M]);delete m.g[C],m.h--}}this.F=null},vr.prototype.K=function(m,C,R,M){return this.i.add(String(m),C,!1,R,M)},vr.prototype.L=function(m,C,R,M){return this.i.add(String(m),C,!0,R,M)};function Mf(m,C,R,M){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var W=!0,K=0;K<C.length;++K){var oe=C[K];if(oe&&!oe.da&&oe.capture==R){var nt=oe.listener,ir=oe.ha||oe.src;oe.fa&&ee(m.i,oe),W=nt.call(ir,M)!==!1&&W}}return W&&!M.defaultPrevented}function Fj(m,C,R){if(typeof m=="function")R&&(m=f(m,R));else if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(m,C||0)}function Uj(m){m.g=Fj(()=>{m.g=null,m.i&&(m.i=!1,Uj(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class UM extends V{constructor(C,R){super(),this.m=C,this.l=R,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Uj(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mu(m){V.call(this),this.h=m,this.g={}}p(mu,V);var Vj=[];function Bj(m){k(m.g,function(C,R){this.g.hasOwnProperty(R)&&Pa(C)},m),m.g={}}mu.prototype.N=function(){mu.aa.N.call(this),Bj(this)},mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tv=l.JSON.stringify,VM=l.JSON.parse,BM=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function rv(){}rv.prototype.h=null;function zj(m){return m.h||(m.h=m.i())}function qj(){}var gu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nv(){Z.call(this,"d")}p(nv,Z);function sv(){Z.call(this,"c")}p(sv,Z);var Di={},Wj=null;function $f(){return Wj=Wj||new vr}Di.La="serverreachability";function Hj(m){Z.call(this,Di.La,m)}p(Hj,Z);function yu(m){const C=$f();Ir(C,new Hj(C))}Di.STAT_EVENT="statevent";function Kj(m,C){Z.call(this,Di.STAT_EVENT,m),this.stat=C}p(Kj,Z);function Rr(m){const C=$f();Ir(C,new Kj(C,m))}Di.Ma="timingevent";function Gj(m,C){Z.call(this,Di.Ma,m),this.size=C}p(Gj,Z);function vu(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},C)}function xu(){this.g=!0}xu.prototype.xa=function(){this.g=!1};function zM(m,C,R,M,W,K){m.info(function(){if(m.g)if(K)for(var oe="",nt=K.split("&"),ir=0;ir<nt.length;ir++){var We=nt[ir].split("=");if(1<We.length){var xr=We[0];We=We[1];var br=xr.split("_");oe=2<=br.length&&br[1]=="type"?oe+(xr+"="+We+"&"):oe+(xr+"=redacted&")}}else oe=null;else oe=K;return"XMLHTTP REQ ("+M+") [attempt "+W+"]: "+C+`
`+R+`
`+oe})}function qM(m,C,R,M,W,K,oe){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+W+"]: "+C+`
`+R+`
`+K+" "+oe})}function tl(m,C,R,M){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+HM(m,R)+(M?" "+M:"")})}function WM(m,C){m.info(function(){return"TIMEOUT: "+C})}xu.prototype.info=function(){};function HM(m,C){if(!m.g)return C;if(!C)return null;try{var R=JSON.parse(C);if(R){for(m=0;m<R.length;m++)if(Array.isArray(R[m])){var M=R[m];if(!(2>M.length)){var W=M[1];if(Array.isArray(W)&&!(1>W.length)){var K=W[0];if(K!="noop"&&K!="stop"&&K!="close")for(var oe=1;oe<W.length;oe++)W[oe]=""}}}}return tv(R)}catch{return C}}var Lf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yj={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},av;function Ff(){}p(Ff,rv),Ff.prototype.g=function(){return new XMLHttpRequest},Ff.prototype.i=function(){return{}},av=new Ff;function Oa(m,C,R,M){this.j=m,this.i=C,this.l=R,this.R=M||1,this.U=new mu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qj}function Qj(){this.i=null,this.g="",this.h=!1}var Xj={},iv={};function ov(m,C,R){m.L=1,m.v=zf(Fs(C)),m.m=R,m.P=!0,Jj(m,null)}function Jj(m,C){m.F=Date.now(),Uf(m),m.A=Fs(m.v);var R=m.A,M=m.R;Array.isArray(M)||(M=[String(M)]),h3(R.i,"t",M),m.C=0,R=m.j.J,m.h=new Qj,m.g=T3(m.j,R?C:null,!m.m),0<m.O&&(m.M=new UM(f(m.Y,m,m.g),m.O)),C=m.U,R=m.g,M=m.ca;var W="readystatechange";Array.isArray(W)||(W&&(Vj[0]=W.toString()),W=Vj);for(var K=0;K<W.length;K++){var oe=Nt(R,W[K],M||C.handleEvent,!1,C.h||C);if(!oe)break;C.g[oe.key]=oe}C=m.H?E(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),yu(),zM(m.i,m.u,m.A,m.l,m.R,m.m)}Oa.prototype.ca=function(m){m=m.target;const C=this.M;C&&Us(m)==3?C.j():this.Y(m)},Oa.prototype.Y=function(m){try{if(m==this.g)e:{const br=Us(this.g);var C=this.g.Ba();const sl=this.g.Z();if(!(3>br)&&(br!=3||this.g&&(this.h.h||this.g.oa()||x3(this.g)))){this.J||br!=4||C==7||(C==8||0>=sl?yu(3):yu(2)),lv(this);var R=this.g.Z();this.X=R;t:if(Zj(this)){var M=x3(this.g);m="";var W=M.length,K=Us(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),bu(this);var oe="";break t}this.h.i=new l.TextDecoder}for(C=0;C<W;C++)this.h.h=!0,m+=this.h.i.decode(M[C],{stream:!(K&&C==W-1)});M.length=0,this.h.g+=m,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=R==200,qM(this.i,this.u,this.A,this.l,this.R,br,R),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,ir=this.g;if((nt=ir.g?ir.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(nt)){var We=nt;break t}}We=null}if(R=We)tl(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cv(this,R);else{this.o=!1,this.s=3,Rr(12),Mi(this),bu(this);break e}}if(this.P){R=!0;let Vn;for(;!this.J&&this.C<oe.length;)if(Vn=KM(this,oe),Vn==iv){br==4&&(this.s=4,Rr(14),R=!1),tl(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Xj){this.s=4,Rr(15),tl(this.i,this.l,oe,"[Invalid Chunk]"),R=!1;break}else tl(this.i,this.l,Vn,null),cv(this,Vn);if(Zj(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),br!=4||oe.length!=0||this.h.h||(this.s=1,Rr(16),R=!1),this.o=this.o&&R,!R)tl(this.i,this.l,oe,"[Invalid Chunked Response]"),Mi(this),bu(this);else if(0<oe.length&&!this.W){this.W=!0;var xr=this.j;xr.g==this&&xr.ba&&!xr.M&&(xr.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),mv(xr),xr.M=!0,Rr(11))}}else tl(this.i,this.l,oe,null),cv(this,oe);br==4&&Mi(this),this.o&&!this.J&&(br==4?S3(this.j,this):(this.o=!1,Uf(this)))}else u$(this.g),R==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Rr(12)):(this.s=0,Rr(13)),Mi(this),bu(this)}}}catch{}finally{}};function Zj(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function KM(m,C){var R=m.C,M=C.indexOf(`
`,R);return M==-1?iv:(R=Number(C.substring(R,M)),isNaN(R)?Xj:(M+=1,M+R>C.length?iv:(C=C.slice(M,M+R),m.C=M+R,C)))}Oa.prototype.cancel=function(){this.J=!0,Mi(this)};function Uf(m){m.S=Date.now()+m.I,e3(m,m.I)}function e3(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=vu(f(m.ba,m),C)}function lv(m){m.B&&(l.clearTimeout(m.B),m.B=null)}Oa.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(WM(this.i,this.A),this.L!=2&&(yu(),Rr(17)),Mi(this),this.s=2,bu(this)):e3(this,this.S-m)};function bu(m){m.j.G==0||m.J||S3(m.j,m)}function Mi(m){lv(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,Bj(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function cv(m,C){try{var R=m.j;if(R.G!=0&&(R.g==m||uv(R.h,m))){if(!m.K&&uv(R.h,m)&&R.G==3){try{var M=R.Da.g.parse(C)}catch{M=null}if(Array.isArray(M)&&M.length==3){var W=M;if(W[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<m.F)Yf(R),Kf(R);else break e;pv(R),Rr(18)}}else R.za=W[1],0<R.za-R.T&&37500>W[2]&&R.F&&R.v==0&&!R.C&&(R.C=vu(f(R.Za,R),6e3));if(1>=n3(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Li(R,11)}else if((m.K||R.g==m)&&Yf(R),!y(C))for(W=R.Da.g.parse(C),C=0;C<W.length;C++){let We=W[C];if(R.T=We[0],We=We[1],R.G==2)if(We[0]=="c"){R.K=We[1],R.ia=We[2];const xr=We[3];xr!=null&&(R.la=xr,R.j.info("VER="+R.la));const br=We[4];br!=null&&(R.Aa=br,R.j.info("SVER="+R.Aa));const sl=We[5];sl!=null&&typeof sl=="number"&&0<sl&&(M=1.5*sl,R.L=M,R.j.info("backChannelRequestTimeoutMs_="+M)),M=R;const Vn=m.g;if(Vn){const Xf=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xf){var K=M.h;K.g||Xf.indexOf("spdy")==-1&&Xf.indexOf("quic")==-1&&Xf.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(dv(K,K.h),K.h=null))}if(M.D){const gv=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;gv&&(M.ya=gv,dt(M.I,M.D,gv))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-m.F,R.j.info("Handshake RTT: "+R.R+"ms")),M=R;var oe=m;if(M.qa=C3(M,M.J?M.ia:null,M.W),oe.K){s3(M.h,oe);var nt=oe,ir=M.L;ir&&(nt.I=ir),nt.B&&(lv(nt),Uf(nt)),M.g=oe}else k3(M);0<R.i.length&&Gf(R)}else We[0]!="stop"&&We[0]!="close"||Li(R,7);else R.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Li(R,7):fv(R):We[0]!="noop"&&R.l&&R.l.ta(We),R.v=0)}}yu(4)}catch{}}var GM=class{constructor(m,C){this.g=m,this.map=C}};function t3(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r3(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function n3(m){return m.h?1:m.g?m.g.size:0}function uv(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function dv(m,C){m.g?m.g.add(C):m.h=C}function s3(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}t3.prototype.cancel=function(){if(this.i=a3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function a3(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const R of m.g.values())C=C.concat(R.D);return C}return x(m.i)}function YM(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var C=[],R=m.length,M=0;M<R;M++)C.push(m[M]);return C}C=[],R=0;for(M in m)C[R++]=m[M];return C}function QM(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var C=[];m=m.length;for(var R=0;R<m;R++)C.push(R);return C}C=[],R=0;for(const M in m)C[R++]=M;return C}}}function i3(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var R=QM(m),M=YM(m),W=M.length,K=0;K<W;K++)C.call(void 0,M[K],R&&R[K],m)}var o3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XM(m,C){if(m){m=m.split("&");for(var R=0;R<m.length;R++){var M=m[R].indexOf("="),W=null;if(0<=M){var K=m[R].substring(0,M);W=m[R].substring(M+1)}else K=m[R];C(K,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function $i(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof $i){this.h=m.h,Vf(this,m.j),this.o=m.o,this.g=m.g,Bf(this,m.s),this.l=m.l;var C=m.i,R=new ju;R.i=C.i,C.g&&(R.g=new Map(C.g),R.h=C.h),l3(this,R),this.m=m.m}else m&&(C=String(m).match(o3))?(this.h=!1,Vf(this,C[1]||"",!0),this.o=wu(C[2]||""),this.g=wu(C[3]||"",!0),Bf(this,C[4]),this.l=wu(C[5]||"",!0),l3(this,C[6]||"",!0),this.m=wu(C[7]||"")):(this.h=!1,this.i=new ju(null,this.h))}$i.prototype.toString=function(){var m=[],C=this.j;C&&m.push(_u(C,c3,!0),":");var R=this.g;return(R||C=="file")&&(m.push("//"),(C=this.o)&&m.push(_u(C,c3,!0),"@"),m.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&m.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(_u(R,R.charAt(0)=="/"?e$:ZM,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",_u(R,r$)),m.join("")};function Fs(m){return new $i(m)}function Vf(m,C,R){m.j=R?wu(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Bf(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function l3(m,C,R){C instanceof ju?(m.i=C,n$(m.i,m.h)):(R||(C=_u(C,t$)),m.i=new ju(C,m.h))}function dt(m,C,R){m.i.set(C,R)}function zf(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function wu(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function _u(m,C,R){return typeof m=="string"?(m=encodeURI(m).replace(C,JM),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function JM(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var c3=/[#\/\?@]/g,ZM=/[#\?:]/g,e$=/[#\?]/g,t$=/[#\?@]/g,r$=/#/g;function ju(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function Ia(m){m.g||(m.g=new Map,m.h=0,m.i&&XM(m.i,function(C,R){m.add(decodeURIComponent(C.replace(/\+/g," ")),R)}))}t=ju.prototype,t.add=function(m,C){Ia(this),this.i=null,m=rl(this,m);var R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(C),this.h+=1,this};function u3(m,C){Ia(m),C=rl(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function d3(m,C){return Ia(m),C=rl(m,C),m.g.has(C)}t.forEach=function(m,C){Ia(this),this.g.forEach(function(R,M){R.forEach(function(W){m.call(C,W,M,this)},this)},this)},t.na=function(){Ia(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),R=[];for(let M=0;M<C.length;M++){const W=m[M];for(let K=0;K<W.length;K++)R.push(C[M])}return R},t.V=function(m){Ia(this);let C=[];if(typeof m=="string")d3(this,m)&&(C=C.concat(this.g.get(rl(this,m))));else{m=Array.from(this.g.values());for(let R=0;R<m.length;R++)C=C.concat(m[R])}return C},t.set=function(m,C){return Ia(this),this.i=null,m=rl(this,m),d3(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function h3(m,C,R){u3(m,C),0<R.length&&(m.i=null,m.g.set(rl(m,C),x(R)),m.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var R=0;R<C.length;R++){var M=C[R];const K=encodeURIComponent(String(M)),oe=this.V(M);for(M=0;M<oe.length;M++){var W=K;oe[M]!==""&&(W+="="+encodeURIComponent(String(oe[M]))),m.push(W)}}return this.i=m.join("&")};function rl(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function n$(m,C){C&&!m.j&&(Ia(m),m.i=null,m.g.forEach(function(R,M){var W=M.toLowerCase();M!=W&&(u3(this,M),h3(this,W,R))},m)),m.j=C}function s$(m,C){const R=new xu;if(l.Image){const M=new Image;M.onload=g(Ra,R,"TestLoadImage: loaded",!0,C,M),M.onerror=g(Ra,R,"TestLoadImage: error",!1,C,M),M.onabort=g(Ra,R,"TestLoadImage: abort",!1,C,M),M.ontimeout=g(Ra,R,"TestLoadImage: timeout",!1,C,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else C(!1)}function a$(m,C){const R=new xu,M=new AbortController,W=setTimeout(()=>{M.abort(),Ra(R,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:M.signal}).then(K=>{clearTimeout(W),K.ok?Ra(R,"TestPingServer: ok",!0,C):Ra(R,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(W),Ra(R,"TestPingServer: error",!1,C)})}function Ra(m,C,R,M,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),M(R)}catch{}}function i$(){this.g=new BM}function o$(m,C,R){const M=R||"";try{i3(m,function(W,K){let oe=W;u(W)&&(oe=tv(W)),C.push(M+K+"="+encodeURIComponent(oe))})}catch(W){throw C.push(M+"type="+encodeURIComponent("_badmap")),W}}function qf(m){this.l=m.Ub||null,this.j=m.eb||!1}p(qf,rv),qf.prototype.g=function(){return new Wf(this.l,this.j)},qf.prototype.i=function(m){return function(){return m}}({});function Wf(m,C){vr.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Wf,vr),t=Wf.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,Nu(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ku(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Nu(this)),this.g&&(this.readyState=3,Nu(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f3(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function f3(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?ku(this):Nu(this),this.readyState==3&&f3(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,ku(this))},t.Qa=function(m){this.g&&(this.response=m,ku(this))},t.ga=function(){this.g&&ku(this)};function ku(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Nu(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var R=C.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=C.next();return m.join(`\r
`)};function Nu(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function p3(m){let C="";return k(m,function(R,M){C+=M,C+=":",C+=R,C+=`\r
`}),C}function hv(m,C,R){e:{for(M in R){var M=!1;break e}M=!0}M||(R=p3(R),typeof m=="string"?R!=null&&encodeURIComponent(String(R)):dt(m,C,R))}function St(m){vr.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(St,vr);var l$=/^https?$/i,c$=["POST","PUT"];t=St.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,R,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():av.g(),this.v=this.o?zj(this.o):zj(av),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(K){m3(this,K);return}if(m=R||"",R=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var W in M)R.set(W,M[W]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const K of M.keys())R.set(K,M.get(K));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(R.keys()).find(K=>K.toLowerCase()=="content-type"),W=l.FormData&&m instanceof l.FormData,!(0<=Array.prototype.indexOf.call(c$,C,void 0))||M||W||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of R)this.g.setRequestHeader(K,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v3(this),this.u=!0,this.g.send(m),this.u=!1}catch(K){m3(this,K)}};function m3(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,g3(m),Hf(m)}function g3(m){m.A||(m.A=!0,Ir(m,"complete"),Ir(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ir(this,"complete"),Ir(this,"abort"),Hf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hf(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y3(this):this.bb())},t.bb=function(){y3(this)};function y3(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Us(m)!=4||m.Z()!=2)){if(m.u&&Us(m)==4)Fj(m.Ea,0,m);else if(Ir(m,"readystatechange"),Us(m)==4){m.h=!1;try{const oe=m.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var R;if(!(R=C)){var M;if(M=oe===0){var W=String(m.D).match(o3)[1]||null;!W&&l.self&&l.self.location&&(W=l.self.location.protocol.slice(0,-1)),M=!l$.test(W?W.toLowerCase():"")}R=M}if(R)Ir(m,"complete"),Ir(m,"success");else{m.m=6;try{var K=2<Us(m)?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.Z()+"]",g3(m)}}finally{Hf(m)}}}}function Hf(m,C){if(m.g){v3(m);const R=m.g,M=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||Ir(m,"ready");try{R.onreadystatechange=M}catch{}}}function v3(m){m.I&&(l.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Us(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Us(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),VM(C)}};function x3(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function u$(m){const C={};m=(m.g&&2<=Us(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(y(m[M]))continue;var R=O(m[M]);const W=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const K=C[W]||[];C[W]=K,K.push(R)}N(C,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Su(m,C,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||C}function b3(m){this.Aa=0,this.i=[],this.j=new xu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Su("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Su("baseRetryDelayMs",5e3,m),this.cb=Su("retryDelaySeedMs",1e4,m),this.Wa=Su("forwardChannelMaxRetries",2,m),this.wa=Su("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new t3(m&&m.concurrentRequestLimit),this.Da=new i$,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=b3.prototype,t.la=8,t.G=1,t.connect=function(m,C,R,M){Rr(0),this.W=m,this.H=C||{},R&&M!==void 0&&(this.H.OSID=R,this.H.OAID=M),this.F=this.X,this.I=C3(this,null,this.W),Gf(this)};function fv(m){if(w3(m),m.G==3){var C=m.U++,R=Fs(m.I);if(dt(R,"SID",m.K),dt(R,"RID",C),dt(R,"TYPE","terminate"),Eu(m,R),C=new Oa(m,m.j,C),C.L=2,C.v=zf(Fs(R)),R=!1,l.navigator&&l.navigator.sendBeacon)try{R=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!R&&l.Image&&(new Image().src=C.v,R=!0),R||(C.g=T3(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Uf(C)}A3(m)}function Kf(m){m.g&&(mv(m),m.g.cancel(),m.g=null)}function w3(m){Kf(m),m.u&&(l.clearTimeout(m.u),m.u=null),Yf(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&l.clearTimeout(m.s),m.s=null)}function Gf(m){if(!r3(m.h)&&!m.s){m.s=!0;var C=m.Ga;Q||$(),F||(Q(),F=!0),H.add(C,m),m.B=0}}function d$(m,C){return n3(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=vu(f(m.Ga,m,C),E3(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const W=new Oa(this,this.j,m);let K=this.o;if(this.S&&(K?(K=E(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(W.H=K,K=null),this.P)e:{for(var C=0,R=0;R<this.i.length;R++){t:{var M=this.i[R];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(C+=M,4096<C){C=R;break e}if(C===4096||R===this.i.length-1){C=R+1;break e}}C=1e3}else C=1e3;C=j3(this,W,C),R=Fs(this.I),dt(R,"RID",m),dt(R,"CVER",22),this.D&&dt(R,"X-HTTP-Session-Id",this.D),Eu(this,R),K&&(this.O?C="headers="+encodeURIComponent(String(p3(K)))+"&"+C:this.m&&hv(R,this.m,K)),dv(this.h,W),this.Ua&&dt(R,"TYPE","init"),this.P?(dt(R,"$req",C),dt(R,"SID","null"),W.T=!0,ov(W,R,null)):ov(W,R,C),this.G=2}}else this.G==3&&(m?_3(this,m):this.i.length==0||r3(this.h)||_3(this))};function _3(m,C){var R;C?R=C.l:R=m.U++;const M=Fs(m.I);dt(M,"SID",m.K),dt(M,"RID",R),dt(M,"AID",m.T),Eu(m,M),m.m&&m.o&&hv(M,m.m,m.o),R=new Oa(m,m.j,R,m.B+1),m.m===null&&(R.H=m.o),C&&(m.i=C.D.concat(m.i)),C=j3(m,R,1e3),R.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),dv(m.h,R),ov(R,M,C)}function Eu(m,C){m.H&&k(m.H,function(R,M){dt(C,M,R)}),m.l&&i3({},function(R,M){dt(C,M,R)})}function j3(m,C,R){R=Math.min(m.i.length,R);var M=m.l?f(m.l.Na,m.l,m):null;e:{var W=m.i;let K=-1;for(;;){const oe=["count="+R];K==-1?0<R?(K=W[0].g,oe.push("ofs="+K)):K=0:oe.push("ofs="+K);let nt=!0;for(let ir=0;ir<R;ir++){let We=W[ir].g;const xr=W[ir].map;if(We-=K,0>We)K=Math.max(0,W[ir].g-100),nt=!1;else try{o$(xr,oe,"req"+We+"_")}catch{M&&M(xr)}}if(nt){M=oe.join("&");break e}}}return m=m.i.splice(0,R),C.D=m,M}function k3(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;Q||$(),F||(Q(),F=!0),H.add(C,m),m.v=0}}function pv(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=vu(f(m.Fa,m),E3(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,N3(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=vu(f(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rr(10),Kf(this),N3(this))};function mv(m){m.A!=null&&(l.clearTimeout(m.A),m.A=null)}function N3(m){m.g=new Oa(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Fs(m.qa);dt(C,"RID","rpc"),dt(C,"SID",m.K),dt(C,"AID",m.T),dt(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(C,"TO",m.ja),dt(C,"TYPE","xmlhttp"),Eu(m,C),m.m&&m.o&&hv(C,m.m,m.o),m.L&&(m.g.I=m.L);var R=m.g;m=m.ia,R.L=1,R.v=zf(Fs(C)),R.m=null,R.P=!0,Jj(R,m)}t.Za=function(){this.C!=null&&(this.C=null,Kf(this),pv(this),Rr(19))};function Yf(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function S3(m,C){var R=null;if(m.g==C){Yf(m),mv(m),m.g=null;var M=2}else if(uv(m.h,C))R=C.D,s3(m.h,C),M=1;else return;if(m.G!=0){if(C.o)if(M==1){R=C.m?C.m.length:0,C=Date.now()-C.F;var W=m.B;M=$f(),Ir(M,new Gj(M,R)),Gf(m)}else k3(m);else if(W=C.s,W==3||W==0&&0<C.X||!(M==1&&d$(m,C)||M==2&&pv(m)))switch(R&&0<R.length&&(C=m.h,C.i=C.i.concat(R)),W){case 1:Li(m,5);break;case 4:Li(m,10);break;case 3:Li(m,6);break;default:Li(m,2)}}}function E3(m,C){let R=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(R*=2),R*C}function Li(m,C){if(m.j.info("Error code "+C),C==2){var R=f(m.fb,m),M=m.Xa;const W=!M;M=new $i(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Vf(M,"https"),zf(M),W?s$(M.toString(),R):a$(M.toString(),R)}else Rr(2);m.G=0,m.l&&m.l.sa(C),A3(m),w3(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Rr(2)):(this.j.info("Failed to ping google.com"),Rr(1))};function A3(m){if(m.G=0,m.ka=[],m.l){const C=a3(m.h);(C.length!=0||m.i.length!=0)&&(b(m.ka,C),b(m.ka,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.ra()}}function C3(m,C,R){var M=R instanceof $i?Fs(R):new $i(R);if(M.g!="")C&&(M.g=C+"."+M.g),Bf(M,M.s);else{var W=l.location;M=W.protocol,C=C?C+"."+W.hostname:W.hostname,W=+W.port;var K=new $i(null);M&&Vf(K,M),C&&(K.g=C),W&&Bf(K,W),R&&(K.l=R),M=K}return R=m.D,C=m.ya,R&&C&&dt(M,R,C),dt(M,"VER",m.la),Eu(m,M),M}function T3(m,C,R){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new St(new qf({eb:R})):new St(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function P3(){}t=P3.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qf(){}Qf.prototype.g=function(m,C){return new rn(m,C)};function rn(m,C){vr.call(this),this.g=new b3(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!y(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new nl(this)}p(rn,vr),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){fv(this.g)},rn.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.u&&(R={},R.__data__=tv(m),m=R);C.i.push(new GM(C.Ya++,m)),C.G==3&&Gf(C)},rn.prototype.N=function(){this.g.l=null,delete this.j,fv(this.g),delete this.g,rn.aa.N.call(this)};function O3(m){nv.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const R in C){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}p(O3,nv);function I3(){sv.call(this),this.status=1}p(I3,sv);function nl(m){this.g=m}p(nl,P3),nl.prototype.ua=function(){Ir(this.g,"a")},nl.prototype.ta=function(m){Ir(this.g,new O3(m))},nl.prototype.sa=function(m){Ir(this.g,new I3)},nl.prototype.ra=function(){Ir(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,X8=function(){return new Qf},Q8=function(){return $f()},Y8=Di,c1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lf.NO_ERROR=0,Lf.TIMEOUT=8,Lf.HTTP_ERROR=6,lm=Lf,Yj.COMPLETE="complete",G8=Yj,qj.EventType=gu,gu.OPEN="a",gu.CLOSE="b",gu.ERROR="c",gu.MESSAGE="d",vr.prototype.listen=vr.prototype.K,nd=qj,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,K8=St}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});const AN="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new y_("@firebase/firestore");function Mu(){return Ao.logLevel}function pe(t,...e){if(Ao.logLevel<=Be.DEBUG){const r=e.map(C_);Ao.debug(`Firestore (${Qc}): ${t}`,...r)}}function ya(t,...e){if(Ao.logLevel<=Be.ERROR){const r=e.map(C_);Ao.error(`Firestore (${Qc}): ${t}`,...r)}}function uc(t,...e){if(Ao.logLevel<=Be.WARN){const r=e.map(C_);Ao.warn(`Firestore (${Qc}): ${t}`,...r)}}function C_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: `+t;throw ya(e),new Error(e)}function Je(t,e){t||Te()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ds{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Nr.UNAUTHENTICATED))}shutdown(){}}class Bq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class zq{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Je(this.o===void 0);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ia,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ia)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Je(typeof n.accessToken=="string"),new J8(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new Nr(e)}}class qq{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wq{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new qq(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Je(this.o===void 0);const n=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Je(typeof r.token=="string"),this.R=r.token,new Hq(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=Gq(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%e.length))}return n}}function He(t,e){return t<e?-1:t>e?1:0}function dc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Xt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Xt(0,0))}static max(){return new Ie(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,r,n){r===void 0?r=0:r>e.length&&Te(),n===void 0?n=e.length-r:n>e.length-r&&Te(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return th.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof th?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=e.get(s),o=r.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class mt extends th{construct(e,r,n){return new mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new mt(r)}static emptyPath(){return new mt([])}}const Yq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends th{construct(e,r,n){return new hr(e,r,n)}static isValidIdentifier(e){return Yq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(a(),s++)}if(a(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(r)}static emptyPath(){return new hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(mt.fromString(e))}static fromName(e){return new ve(mt.fromString(e).popFirst(5))}static empty(){return new ve(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new mt(e.slice()))}}function Qq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(n===1e9?new Xt(r+1,0):new Xt(r,n));return new vi(s,ve.empty(),e)}function Xq(t){return new vi(t.readTime,t.key,-1)}class vi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new vi(Ie.min(),ve.empty(),-1)}static max(){return new vi(Ie.max(),ve.empty(),-1)}}function Jq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ve.comparator(t.documentKey,e.documentKey),r!==0?r:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==Zq)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new te((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof te?r:te.resolve(r)}catch(r){return te.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):te.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):te.reject(r)}static resolve(e){return new te((r,n)=>{r(e)})}static reject(e){return new te((r,n)=>{n(e)})}static waitFor(e){return new te((r,n)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},c=>n(c))}),o=!0,a===s&&r()})}static or(e){let r=te.resolve(!1);for(const n of e)r=r.next(s=>s?te.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new te((n,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===a&&n(o)},d=>s(d))}})}static doWhile(e,r){return new te((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function tW(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}T_.oe=-1;function $0(t){return t==null}function Ym(t){return t===0&&1/t==-1/0}function rW(t){return typeof t=="number"&&Number.isInteger(t)&&!Ym(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ho(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function e9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,r){this.comparator=e,this.root=r||dr.EMPTY}insert(e,r){return new kt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vp(this.root,e,this.comparator,!0)}}class vp{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??dr.RED,this.left=s??dr.EMPTY,this.right=a??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new dr(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return dr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1;dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,r,n,s,a){return this}insert(e,r,n){return new dr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new TN(this.data.getIterator())}getIteratorFrom(e){return new TN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new pr(this.comparator);return r.data=e,r}}class TN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new fn([])}unionWith(e){let r=new pr(hr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new fn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new t9("Invalid base64 string: "+a):a}}(e);return new gr(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new gr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const nW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(Je(!!t),typeof t=="string"){let e=0;const r=nW.exec(t);if(Je(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Co(t){return typeof t=="string"?gr.fromBase64String(t):gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function O_(t){const e=t.mapValue.fields.__previous_value__;return P_(e)?O_(e):e}function rh(t){const e=xi(t.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,r,n,s,a,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class nh{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new nh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp={mapValue:{}};function To(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?P_(t)?4:iW(t)?9007199254740991:aW(t)?10:11:Te()}function Cs(t,e){if(t===e)return!0;const r=To(t);if(r!==To(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rh(t).isEqual(rh(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=xi(s.timestampValue),l=xi(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Co(s.bytesValue).isEqual(Co(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return It(s.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return It(s.integerValue)===It(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=It(s.doubleValue),l=It(a.doubleValue);return o===l?Ym(o)===Ym(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return dc(t.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(CN(o)!==CN(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Cs(o[c],l[c])))return!1;return!0}(t,e);default:return Te()}}function sh(t,e){return(t.values||[]).find(r=>Cs(r,e))!==void 0}function hc(t,e){if(t===e)return 0;const r=To(t),n=To(e);if(r!==n)return He(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=It(a.integerValue||a.doubleValue),c=It(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return PN(t.timestampValue,e.timestampValue);case 4:return PN(rh(t),rh(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Co(a),c=Co(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=He(l[u],c[u]);if(d!==0)return d}return He(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=He(It(a.latitude),It(o.latitude));return l!==0?l:He(It(a.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ON(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const h=a.fields||{},f=o.fields||{},g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,p=(c=f.value)===null||c===void 0?void 0:c.arrayValue,x=He(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=p==null?void 0:p.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:ON(g,p)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===xp.mapValue&&o===xp.mapValue)return 0;if(a===xp.mapValue)return 1;if(o===xp.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=He(c[h],d[h]);if(f!==0)return f;const g=hc(l[c[h]],u[d[h]]);if(g!==0)return g}return He(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Te()}}function PN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const r=xi(t),n=xi(e),s=He(r.seconds,n.seconds);return s!==0?s:He(r.nanos,n.nanos)}function ON(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=hc(r[s],n[s]);if(a)return a}return He(r.length,n.length)}function fc(t){return u1(t)}function u1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=xi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Co(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=u1(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${u1(r.fields[o])}`;return s+"}"}(t.mapValue):Te()}function IN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d1(t){return!!t&&"integerValue"in t}function I_(t){return!!t&&"arrayValue"in t}function RN(t){return!!t&&"nullValue"in t}function DN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function aW(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function xd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=xd(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=xd(t.arrayValue.values[r]);return e}return Object.assign({},t)}function iW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!cm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xd(r)}setAll(e){let r=hr.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=xd(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());cm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];cm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Ho(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new Kr(xd(this.value))}}function r9(t){const e=[];return Ho(t.fields,(r,n)=>{const s=new hr([r]);if(cm(n)){const a=r9(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,r,n,s,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Er(e,0,Ie.min(),Ie.min(),Ie.min(),Kr.empty(),0)}static newFoundDocument(e,r,n,s){return new Er(e,1,r,Ie.min(),n,s,0)}static newNoDocument(e,r){return new Er(e,2,r,Ie.min(),Ie.min(),Kr.empty(),0)}static newUnknownDocument(e,r){return new Er(e,3,r,Ie.min(),Ie.min(),Kr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,r){this.position=e,this.inclusive=r}}function MN(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?n=ve.comparator(ve.fromName(o.referenceValue),r.key):n=hc(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function $N(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Cs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,r="asc"){this.field=e,this.dir=r}}function oW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{}class Vt extends n9{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new cW(e,r,n):r==="array-contains"?new hW(e,n):r==="in"?new fW(e,n):r==="not-in"?new pW(e,n):r==="array-contains-any"?new mW(e,n):new Vt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new uW(e,n):new dW(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(hc(r,this.value)):r!==null&&To(this.value)===To(r)&&this.matchesComparison(hc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class is extends n9{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new is(e,r)}matches(e){return s9(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function s9(t){return t.op==="and"}function a9(t){return lW(t)&&s9(t)}function lW(t){for(const e of t.filters)if(e instanceof is)return!1;return!0}function h1(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+fc(t.value);if(a9(t))return t.filters.map(e=>h1(e)).join(",");{const e=t.filters.map(r=>h1(r)).join(",");return`${t.op}(${e})`}}function i9(t,e){return t instanceof Vt?function(n,s){return s instanceof Vt&&n.op===s.op&&n.field.isEqual(s.field)&&Cs(n.value,s.value)}(t,e):t instanceof is?function(n,s){return s instanceof is&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,o,l)=>a&&i9(o,s.filters[l]),!0):!1}(t,e):void Te()}function o9(t){return t instanceof Vt?function(r){return`${r.field.canonicalString()} ${r.op} ${fc(r.value)}`}(t):t instanceof is?function(r){return r.op.toString()+" {"+r.getFilters().map(o9).join(" ,")+"}"}(t):"Filter"}class cW extends Vt{constructor(e,r,n){super(e,r,n),this.key=ve.fromName(n.referenceValue)}matches(e){const r=ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class uW extends Vt{constructor(e,r){super(e,"in",r),this.keys=l9("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class dW extends Vt{constructor(e,r){super(e,"not-in",r),this.keys=l9("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function l9(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ve.fromName(n.referenceValue))}class hW extends Vt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return I_(r)&&sh(r.arrayValue,this.value)}}class fW extends Vt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&sh(this.value.arrayValue,r)}}class pW extends Vt{constructor(e,r){super(e,"not-in",r)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!sh(this.value.arrayValue,r)}}class mW extends Vt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!I_(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>sh(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e,r=null,n=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function LN(t,e=null,r=[],n=[],s=null,a=null,o=null){return new gW(t,e,r,n,s,a,o)}function R_(t){const e=De(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>h1(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),$0(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>fc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>fc(n)).join(",")),e.ue=r}return e.ue}function D_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!oW(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!i9(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$N(t.startAt,e.startAt)&&$N(t.endAt,e.endAt)}function f1(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,r=null,n=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yW(t,e,r,n,s,a,o,l){return new Xc(t,e,r,n,s,a,o,l)}function L0(t){return new Xc(t)}function FN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c9(t){return t.collectionGroup!==null}function bd(t){const e=De(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pr(hr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new ah(a,n))}),r.has(hr.keyField().canonicalString())||e.ce.push(new ah(hr.keyField(),n))}return e.ce}function Ns(t){const e=De(t);return e.le||(e.le=vW(e,bd(t))),e.le}function vW(t,e){if(t.limitType==="F")return LN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new ah(s.field,a)});const r=t.endAt?new Qm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Qm(t.startAt.position,t.startAt.inclusive):null;return LN(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function p1(t,e){const r=t.filters.concat([e]);return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Xm(t,e,r){return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function F0(t,e){return D_(Ns(t),Ns(e))&&t.limitType===e.limitType}function u9(t){return`${R_(Ns(t))}|lt:${t.limitType}`}function yl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>o9(s)).join(", ")}]`),$0(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>fc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>fc(s)).join(",")),`Target(${n})`}(Ns(t))}; limitType=${t.limitType})`}function U0(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ve.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of bd(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const u=MN(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,bd(n),s)||n.endAt&&!function(o,l,c){const u=MN(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,bd(n),s))}(t,e)}function xW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d9(t){return(e,r)=>{let n=!1;for(const s of bd(t)){const a=bW(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function bW(t,e,r){const n=t.field.isKeyField()?ve.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?hc(c,u):Te()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return e9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW=new kt(ve.comparator);function va(){return wW}const h9=new kt(ve.comparator);function sd(...t){let e=h9;for(const r of t)e=e.insert(r.key,r);return e}function f9(t){let e=h9;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function io(){return wd()}function p9(){return wd()}function wd(){return new Jc(t=>t.toString(),(t,e)=>t.isEqual(e))}const _W=new kt(ve.comparator),jW=new pr(ve.comparator);function Ve(...t){let e=jW;for(const r of t)e=e.add(r);return e}const kW=new pr(He);function NW(){return kW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ym(e)?"-0":e}}function m9(t){return{integerValue:""+t}}function SW(t,e){return rW(e)?m9(e):M_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this._=void 0}}function EW(t,e,r){return t instanceof ih?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&P_(a)&&(a=O_(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof oh?y9(t,e):t instanceof lh?v9(t,e):function(s,a){const o=g9(s,a),l=UN(o)+UN(s.Pe);return d1(o)&&d1(s.Pe)?m9(l):M_(s.serializer,l)}(t,e)}function AW(t,e,r){return t instanceof oh?y9(t,e):t instanceof lh?v9(t,e):r}function g9(t,e){return t instanceof Jm?function(n){return d1(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class ih extends V0{}class oh extends V0{constructor(e){super(),this.elements=e}}function y9(t,e){const r=x9(e);for(const n of t.elements)r.some(s=>Cs(s,n))||r.push(n);return{arrayValue:{values:r}}}class lh extends V0{constructor(e){super(),this.elements=e}}function v9(t,e){let r=x9(e);for(const n of t.elements)r=r.filter(s=>!Cs(s,n));return{arrayValue:{values:r}}}class Jm extends V0{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function UN(t){return It(t.integerValue||t.doubleValue)}function x9(t){return I_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,r){this.field=e,this.transform=r}}function TW(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof oh&&s instanceof oh||n instanceof lh&&s instanceof lh?dc(n.elements,s.elements,Cs):n instanceof Jm&&s instanceof Jm?Cs(n.Pe,s.Pe):n instanceof ih&&s instanceof ih}(t.transform,e.transform)}class PW{constructor(e,r){this.version=e,this.transformResults=r}}class On{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class B0{}function b9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $_(t.key,On.none()):new mf(t.key,t.data,On.none());{const r=t.data,n=Kr.empty();let s=new pr(hr.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new Ci(t.key,n,new fn(s.toArray()),On.none())}}function OW(t,e,r){t instanceof mf?function(s,a,o){const l=s.value.clone(),c=BN(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ci?function(s,a,o){if(!um(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=BN(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(w9(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function _d(t,e,r,n){return t instanceof mf?function(a,o,l,c){if(!um(a.precondition,o))return l;const u=a.value.clone(),d=zN(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ci?function(a,o,l,c){if(!um(a.precondition,o))return l;const u=zN(a.fieldTransforms,c,o),d=o.data;return d.setAll(w9(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,o,l){return um(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function IW(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=g9(n.transform,s||null);a!=null&&(r===null&&(r=Kr.empty()),r.set(n.field,a))}return r||null}function VN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&dc(n,s,(a,o)=>TW(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mf extends B0{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ci extends B0{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function w9(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function BN(t,e,r){const n=new Map;Je(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);n.set(a.field,AW(o,l,r[s]))}return n}function zN(t,e,r){const n=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);n.set(s.field,EW(a,o,e))}return n}class $_ extends B0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RW extends B0{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&OW(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=_d(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=_d(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=p9();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const c=b9(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ie.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ve())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(r,n)=>VN(r,n))&&dc(this.baseMutations,e.baseMutations,(r,n)=>VN(r,n))}}class L_{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Je(e.mutations.length===n.length);let s=function(){return _W}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new L_(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,ze;function LW(t){switch(t){default:return Te();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function _9(t){if(t===void 0)return ya("GRPC error has no .code"),J.UNKNOWN;switch(t){case $t.OK:return J.OK;case $t.CANCELLED:return J.CANCELLED;case $t.UNKNOWN:return J.UNKNOWN;case $t.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case $t.INTERNAL:return J.INTERNAL;case $t.UNAVAILABLE:return J.UNAVAILABLE;case $t.UNAUTHENTICATED:return J.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case $t.NOT_FOUND:return J.NOT_FOUND;case $t.ALREADY_EXISTS:return J.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return J.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case $t.ABORTED:return J.ABORTED;case $t.OUT_OF_RANGE:return J.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return J.UNIMPLEMENTED;case $t.DATA_LOSS:return J.DATA_LOSS;default:return Te()}}(ze=$t||($t={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW=new go([4294967295,4294967295],0);function qN(t){const e=FW().encode(t),r=new H8;return r.update(e),new Uint8Array(r.digest())}function WN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new go([r,n],0),new go([s,a],0)]}class F_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ad(`Invalid padding: ${r}`);if(n<0)throw new ad(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ad(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ad(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=go.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(go.fromNumber(n)));return s.compare(UW)===1&&(s=new go([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=qN(e),[n,s]=WN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new F_(a,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=qN(e),[n,s]=WN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,gf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new z0(Ie.min(),s,new kt(He),va(),Ve())}}class gf{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new gf(n,r,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class j9{constructor(e,r){this.targetId=e,this.me=r}}class k9{constructor(e,r,n=gr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class HN{constructor(){this.fe=0,this.ge=GN(),this.pe=gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),r=Ve(),n=Ve();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Te()}}),new gf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=GN()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VW{constructor(e){this.Le=e,this.Be=new Map,this.ke=va(),this.qe=KN(),this.Qe=new kt(He)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const a=s.target;if(f1(a))if(n===0){const o=new ve(a.path);this.Ue(r,o,Er.newNoDocument(o,Ie.min()))}else Je(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=Co(n).toUint8Array()}catch(c){if(c instanceof t9)return uc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new F_(o,s,a)}catch(c){return uc(c instanceof ad?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&f1(l.target)){const c=new ve(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Er.newNoDocument(c,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=Ve();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new z0(e,r,this.Qe,this.ke,n);return this.ke=va(),this.qe=KN(),this.Qe=new kt(He),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new HN,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new pr(He),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new HN),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function KN(){return new kt(ve.comparator)}function GN(){return new kt(ve.comparator)}const BW={asc:"ASCENDING",desc:"DESCENDING"},zW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qW={and:"AND",or:"OR"};class WW{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function m1(t,e){return t.useProto3Json||$0(e)?e:{value:e}}function Zm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HW(t,e){return Zm(t,e.toTimestamp())}function Ss(t){return Je(!!t),Ie.fromTimestamp(function(r){const n=xi(r);return new Xt(n.seconds,n.nanos)}(t))}function U_(t,e){return g1(t,e).canonicalString()}function g1(t,e){const r=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function S9(t){const e=mt.fromString(t);return Je(P9(e)),e}function y1(t,e){return U_(t.databaseId,e.path)}function Jv(t,e){const r=S9(e);if(r.get(1)!==t.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ve(A9(r))}function E9(t,e){return U_(t.databaseId,e)}function KW(t){const e=S9(t);return e.length===4?mt.emptyPath():A9(e)}function v1(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function A9(t){return Je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YN(t,e,r){return{name:y1(t,e),fields:r.value.mapValue.fields}}function GW(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Je(d===void 0||typeof d=="string"),gr.fromBase64String(d||"")):(Je(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?J.UNKNOWN:_9(u.code);return new ce(d,u.message||"")}(o);r=new k9(n,s,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Jv(t,n.document.name),a=Ss(n.document.updateTime),o=n.document.createTime?Ss(n.document.createTime):Ie.min(),l=new Kr({mapValue:{fields:n.document.fields}}),c=Er.newFoundDocument(s,a,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new dm(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Jv(t,n.document),a=n.readTime?Ss(n.readTime):Ie.min(),o=Er.newNoDocument(s,a),l=n.removedTargetIds||[];r=new dm([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Jv(t,n.document),a=n.removedTargetIds||[];r=new dm([],a,s,null)}else{if(!("filter"in e))return Te();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new $W(s,a),l=n.targetId;r=new j9(l,o)}}return r}function YW(t,e){let r;if(e instanceof mf)r={update:YN(t,e.key,e.value)};else if(e instanceof $_)r={delete:y1(t,e.key)};else if(e instanceof Ci)r={update:YN(t,e.key,e.data),updateMask:sH(e.fieldMask)};else{if(!(e instanceof RW))return Te();r={verify:y1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof ih)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jm)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Te()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:HW(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te()}(t,e.precondition)),r}function QW(t,e){return t&&t.length>0?(Je(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Ss(s.updateTime):Ss(a);return o.isEqual(Ie.min())&&(o=Ss(a)),new PW(o,s.transformResults||[])}(r,e))):[]}function XW(t,e){return{documents:[E9(t,e.path)]}}function JW(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=E9(t,s);const a=function(u){if(u.length!==0)return T9(is.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:vl(f.field),direction:tH(f.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=m1(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:s}}function ZW(t){let e=KW(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Je(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const f=C9(h);return f instanceof is&&a9(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(f=>function(p){return new ah(xl(p.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,$0(f)?null:f}(r.limit));let c=null;r.startAt&&(c=function(h){const f=!!h.before,g=h.values||[];return new Qm(g,f)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const f=!h.before,g=h.values||[];return new Qm(g,f)}(r.endAt)),yW(e,s,o,a,l,"F",c,u)}function eH(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function C9(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=xl(r.unaryFilter.field);return Vt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=xl(r.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xl(r.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xl(r.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(r){return Vt.create(xl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return is.create(r.compositeFilter.filters.map(n=>C9(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te()}}(r.compositeFilter.op))}(t):Te()}function tH(t){return BW[t]}function rH(t){return zW[t]}function nH(t){return qW[t]}function vl(t){return{fieldPath:t.canonicalString()}}function xl(t){return hr.fromServerFormat(t.fieldPath)}function T9(t){return t instanceof Vt?function(r){if(r.op==="=="){if(DN(r.value))return{unaryFilter:{field:vl(r.field),op:"IS_NAN"}};if(RN(r.value))return{unaryFilter:{field:vl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(DN(r.value))return{unaryFilter:{field:vl(r.field),op:"IS_NOT_NAN"}};if(RN(r.value))return{unaryFilter:{field:vl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(r.field),op:rH(r.op),value:r.value}}}(t):t instanceof is?function(r){const n=r.getFilters().map(s=>T9(s));return n.length===1?n[0]:{compositeFilter:{op:nH(r.op),filters:n}}}(t):Te()}function sH(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function P9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,r,n,s,a=Ie.min(),o=Ie.min(),l=gr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.ct=e}}function iH(t){const e=ZW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(){this.un=new lH}addToCollectionParentIndex(e,r){return this.un.add(r),te.resolve()}getCollectionParents(e,r){return te.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return te.resolve()}deleteFieldIndex(e,r){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,r){return te.resolve()}getDocumentsMatchingTarget(e,r){return te.resolve(null)}getIndexType(e,r){return te.resolve(0)}getFieldIndexes(e,r){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,r){return te.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,r){return te.resolve(vi.min())}updateCollectionGroup(e,r,n){return te.resolve()}updateIndexEntries(e,r){return te.resolve()}}class lH{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new pr(mt.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new pr(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pc(0)}static kn(){return new pc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(){this.changes=new Jc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?te.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&_d(n.mutation,s,fn.empty(),Xt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ve()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ve()){const s=io();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let o=sd();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=io();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ve()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let a=va();const o=wd(),l=function(){return wd()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Ci)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),_d(d.mutation,u,d.mutation.getFieldMask(),Xt.now())):o.set(u.key,fn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var h;return l.set(u,new uH(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=wd();let s=new kt((o,l)=>o-l),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||fn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(s.get(l.batchId)||Ve()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=p9();d.forEach(f=>{if(!a.has(f)){const g=b9(r.get(f),n.get(f));g!==null&&h.set(f,g),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):c9(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):te.resolve(io());let l=-1,c=a;return o.next(u=>te.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?te.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Ve())).next(d=>({batchId:l,changes:f9(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ve(r)).next(n=>{let s=sd();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let o=sd();return this.indexManager.getCollectionParents(e,a).next(l=>te.forEach(l,c=>{const u=function(h,f){return new Xc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Er.newInvalidDocument(d)))});let l=sd();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&_d(d.mutation,u,fn.empty(),Xt.now()),U0(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return te.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ss(s.createTime)}}(r)),te.resolve()}getNamedQuery(e,r){return te.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:iH(s.bundledQuery),readTime:Ss(s.readTime)}}(r)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(){this.overlays=new kt(ve.comparator),this.Ir=new Map}getOverlay(e,r){return te.resolve(this.overlays.get(r))}getOverlays(e,r){const n=io();return te.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.ht(e,r,a)}),te.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),te.resolve()}getOverlaysForCollection(e,r,n){const s=io(),a=r.length+1,o=new ve(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>n&&s.set(c.getKey(),c)}return te.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new kt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=io(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=io(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return te.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new MW(r,n));let a=this.Ir.get(r);a===void 0&&(a=Ve(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.sessionToken=gr.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.Tr=new pr(er.Er),this.dr=new pr(er.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new er(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new er(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ve(new mt([])),n=new er(r,e),s=new er(r,e+1),a=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ve(new mt([])),n=new er(r,e),s=new er(r,e+1);let a=Ve();return this.dr.forEachInRange([n,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new er(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class er{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ve.comparator(e.key,r.key)||He(e.wr,r.wr)}static Ar(e,r){return He(e.wr,r.wr)||ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new pr(er.Er)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DW(a,r,n,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new er(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,r){return te.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new er(r,0),s=new er(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],o=>{const l=this.Dr(o.wr);a.push(l)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new pr(He);return r.forEach(s=>{const a=new er(s,0),o=new er(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),te.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;ve.isDocumentKey(a)||(a=a.child(""));const o=new er(new ve(a),0);let l=new pr(He);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.wr)),!0)},o),te.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Je(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return te.forEach(r.mutations,s=>{const a=new er(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new er(r,0),s=this.br.firstAfterOrEqual(n);return te.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e){this.Mr=e,this.docs=function(){return new kt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return te.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(r))}getEntries(e,r){let n=va();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Er.newInvalidDocument(s))}),te.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=va();const o=r.path,l=new ve(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Jq(Xq(d),n)<=0||(s.has(d.key)||U0(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,r,n,s){Te()}Or(e,r){return te.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new yH(this)}getSize(e){return te.resolve(this.size)}}class yH extends cH{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),te.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e){this.persistence=e,this.Nr=new Jc(r=>R_(r),D_),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new V_,this.targetCount=0,this.kr=pc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),te.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new pc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,te.resolve()}updateTargetData(e,r){return this.Kn(r),te.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),te.waitFor(a).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return te.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),te.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),te.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return te.resolve(n)}containsKey(e,r){return te.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e,r){this.qr={},this.overlays={},this.Qr=new T_(0),this.Kr=!1,this.Kr=!0,this.$r=new pH,this.referenceDelegate=e(this),this.Ur=new vH(this),this.indexManager=new oH,this.remoteDocumentCache=function(s){return new gH(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new aH(r),this.Gr=new hH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new fH,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new mH(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){pe("MemoryPersistence","Starting transaction:",e);const s=new bH(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,r){return te.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class bH extends eW{constructor(e){super(),this.currentSequenceNumber=e}}class B_{constructor(e){this.persistence=e,this.Jr=new V_,this.Yr=null}static Zr(e){return new B_(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),te.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),te.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Xr,n=>{const s=ve.fromPath(n);return this.ei(e,s).next(a=>{a||r.removeEntry(s,Ie.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return te.or([()=>te.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ve(),s=Ve();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new z_(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iV()?8:tW(Or())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,s,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new wH;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Mu()<=Be.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",yl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),te.resolve()):(Mu()<=Be.DEBUG&&pe("QueryEngine","Query:",yl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Mu()<=Be.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",yl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(r))):te.resolve())}Yi(e,r){if(FN(r))return te.resolve(null);let n=Ns(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Xm(r,null,"F"),n=Ns(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Ve(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,Xm(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,s){return FN(r)||s.isEqual(Ie.min())?te.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,s)?te.resolve(null):(Mu()<=Be.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(r)),this.rs(e,o,r,Qq(s,-1)).next(l=>l))})}ts(e,r){let n=new pr(d9(e));return r.forEach((s,a)=>{U0(e,a)&&(n=n.add(a))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,r,n){return Mu()<=Be.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",yl(r)),this.Ji.getDocumentsMatchingQuery(e,r,vi.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new kt(He),this._s=new Jc(a=>R_(a),D_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function kH(t,e,r,n){return new jH(t,e,r,n)}async function O9(t,e){const r=De(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=Ve();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function NH(t,e){const r=De(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let g=te.resolve();return f.forEach(p=>{g=g.next(()=>d.getEntry(c,p)).next(x=>{const b=u.docVersions.get(p);Je(b!==null),x.version.compareTo(b)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Ve();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function I9(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function SH(t,e){const r=De(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(a,d.addedDocuments,h)));let g=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(gr.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(h,g),function(x,b,w){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,d)&&l.push(r.Ur.updateTargetData(a,g))});let c=va(),u=Ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(EH(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Ie.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next(h=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(d)}return te.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(r.os=s,a))}function EH(t,e,r){let n=Ve(),s=Ve();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=va();return r.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function AH(t,e){const r=De(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function CH(t,e){const r=De(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(a=>a?(s=a,te.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new ti(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function x1(t,e,r){const n=De(t),s=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pf(o))throw o;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function QN(t,e,r){const n=De(t);let s=Ie.min(),a=Ve();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=De(c),f=h._s.get(d);return f!==void 0?te.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(n,o,Ns(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:Ie.min(),r?a:Ve())).next(l=>(TH(n,xW(e),l),{documents:l,Ts:a})))}function TH(t,e,r){let n=t.us.get(e)||Ie.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class XN{constructor(){this.activeTargetIds=NW()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PH{constructor(){this.so=new XN,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new XN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp=null;function Zv(){return bp===null?bp=function(){return 268435456+Math.round(2147483648*Math.random())}():bp++,"0x"+bp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="WebChannelConnection";class DH extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(r,n,s,a,o){const l=Zv(),c=this.xo(r,n.toUriEncodedString());pe("RestConnection",`Sending RPC '${r}' ${l}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(r,c,u,s).then(d=>(pe("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw uc("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(r,n,s,a,o,l){return this.Mo(r,n,s,a,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),s&&s.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const s=IH[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const a=Zv();return new Promise((o,l)=>{const c=new K8;c.setWithCredentials(!0),c.listenOnce(G8.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case lm.NO_ERROR:const d=c.getResponseJson();pe(jr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case lm.TIMEOUT:pe(jr,`RPC '${e}' ${a} timed out`),l(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case lm.HTTP_ERROR:const h=c.getStatus();if(pe(jr,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const p=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(w)>=0?w:J.UNKNOWN}(g.status);l(new ce(p,g.message))}else l(new ce(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{pe(jr,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(s);pe(jr,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const s=Zv(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=X8(),l=Q8(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");pe(jr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);let f=!1,g=!1;const p=new RH({Io:b=>{g?pe(jr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(pe(jr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),pe(jr,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},To:()=>h.close()}),x=(b,w,y)=>{b.listen(w,_=>{try{y(_)}catch(S){setTimeout(()=>{throw S},0)}})};return x(h,nd.EventType.OPEN,()=>{g||(pe(jr,`RPC '${e}' stream ${s} transport opened.`),p.yo())}),x(h,nd.EventType.CLOSE,()=>{g||(g=!0,pe(jr,`RPC '${e}' stream ${s} transport closed`),p.So())}),x(h,nd.EventType.ERROR,b=>{g||(g=!0,uc(jr,`RPC '${e}' stream ${s} transport errored:`,b),p.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),x(h,nd.EventType.MESSAGE,b=>{var w;if(!g){const y=b.data[0];Je(!!y);const _=y,S=_.error||((w=_[0])===null||w===void 0?void 0:w.error);if(S){pe(jr,`RPC '${e}' stream ${s} received error:`,S);const j=S.status;let k=function(A){const P=$t[A];if(P!==void 0)return _9(P)}(j),N=S.message;k===void 0&&(k=J.INTERNAL,N="Unknown error status: "+j+" with message "+S.message),g=!0,p.So(new ce(k,N)),h.close()}else pe(jr,`RPC '${e}' stream ${s} received:`,y),p.bo(y)}}),x(l,Y8.STAT_EVENT,b=>{b.stat===c1.PROXY?pe(jr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===c1.NOPROXY&&pe(jr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}function ex(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){return new WW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,r,n=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,r,n,s,a,o,l,c){this.ui=e,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R9(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===J.RESOURCE_EXHAUSTED?(ya(r.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ce(J.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MH extends D9{constructor(e,r,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=GW(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ie.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ie.min():o.readTime?Ss(o.readTime):Ie.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=v1(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=f1(c)?{documents:XW(a,c)}:{query:JW(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=N9(a,o.resumeToken);const u=m1(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ie.min())>0){l.readTime=Zm(a,o.snapshotVersion.toTimestamp());const u=m1(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=eH(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=v1(this.serializer),r.removeTarget=e,this.a_(r)}}class $H extends D9{constructor(e,r,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=QW(e.writeResults,e.commitTime),n=Ss(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=v1(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>YW(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,g1(r,n),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())})}Lo(e,r,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,g1(r,n),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class FH{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ya(r),this.D_=!1):pe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{Ko(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=De(c);u.L_.add(4),await yf(u),u.q_.set("Unknown"),u.L_.delete(4),await W0(u)}(this))})}),this.q_=new FH(n,s)}}async function W0(t){if(Ko(t))for(const e of t.B_)await e(!0)}async function yf(t){for(const e of t.B_)await e(!1)}function M9(t,e){const r=De(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),K_(r)?H_(r):Zc(r).r_()&&W_(r,e))}function q_(t,e){const r=De(t),n=Zc(r);r.N_.delete(e),n.r_()&&$9(r,e),r.N_.size===0&&(n.r_()?n.o_():Ko(r)&&r.q_.set("Unknown"))}function W_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Zc(t).A_(e)}function $9(t,e){t.Q_.xe(e),Zc(t).R_(e)}function H_(t){t.Q_=new VW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zc(t).start(),t.q_.v_()}function K_(t){return Ko(t)&&!Zc(t).n_()&&t.N_.size>0}function Ko(t){return De(t).L_.size===0}function L9(t){t.Q_=void 0}async function VH(t){t.q_.set("Online")}async function BH(t){t.N_.forEach((e,r)=>{W_(t,e)})}async function zH(t,e){L9(t),K_(t)?(t.q_.M_(e),H_(t)):t.q_.set("Unknown")}async function qH(t,e,r){if(t.q_.set("Online"),e instanceof k9&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await eg(t,n)}else if(e instanceof dm?t.Q_.Ke(e):e instanceof j9?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ie.min()))try{const n=await I9(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(gr.EMPTY_BYTE_STRING,d.snapshotVersion)),$9(a,c);const h=new ti(d.target,c,u,d.sequenceNumber);W_(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){pe("RemoteStore","Failed to raise snapshot:",n),await eg(t,n)}}async function eg(t,e,r){if(!pf(e))throw e;t.L_.add(1),await yf(t),t.q_.set("Offline"),r||(r=()=>I9(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await W0(t)})}function F9(t,e){return e().catch(r=>eg(t,r,e))}async function H0(t){const e=De(t),r=bi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WH(e);)try{const s=await AH(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,HH(e,s)}catch(s){await eg(e,s)}U9(e)&&V9(e)}function WH(t){return Ko(t)&&t.O_.length<10}function HH(t,e){t.O_.push(e);const r=bi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function U9(t){return Ko(t)&&!bi(t).n_()&&t.O_.length>0}function V9(t){bi(t).start()}async function KH(t){bi(t).p_()}async function GH(t){const e=bi(t);for(const r of t.O_)e.m_(r.mutations)}async function YH(t,e,r){const n=t.O_.shift(),s=L_.from(n,e,r);await F9(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await H0(t)}async function QH(t,e){e&&bi(t).V_&&await async function(n,s){if(function(o){return LW(o)&&o!==J.ABORTED}(s.code)){const a=n.O_.shift();bi(n).s_(),await F9(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await H0(n)}}(t,e),U9(t)&&V9(t)}async function ZN(t,e){const r=De(t);r.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const n=Ko(r);r.L_.add(3),await yf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await W0(r)}async function XH(t,e){const r=De(t);e?(r.L_.delete(2),await W0(r)):e||(r.L_.add(2),await yf(r),r.q_.set("Unknown"))}function Zc(t){return t.K_||(t.K_=function(r,n,s){const a=De(r);return a.w_(),new MH(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VH.bind(null,t),Ro:BH.bind(null,t),mo:zH.bind(null,t),d_:qH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),K_(t)?H_(t):t.q_.set("Unknown")):(await t.K_.stop(),L9(t))})),t.K_}function bi(t){return t.U_||(t.U_=function(r,n,s){const a=De(r);return a.w_(),new $H(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KH.bind(null,t),mo:QH.bind(null,t),f_:GH.bind(null,t),g_:YH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await H0(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const o=Date.now()+n,l=new G_(e,r,o,s,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y_(t,e){if(ya("AsyncQueue",`${e}: ${t}`),pf(t))return new ce(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ve.comparator(r.key,n.key):(r,n)=>ve.comparator(r.key,n.key),this.keyedMap=sd(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Xl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Xl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.W_=new kt(ve.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class mc{constructor(e,r,n,s,a,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new mc(e,r,Xl.emptySet(r),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&F0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ZH{constructor(){this.queries=t6(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=De(r),a=s.queries;s.queries=t6(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function t6(){return new Jc(t=>u9(t),F0)}async function Q_(t,e){const r=De(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.H_()&&e.J_()&&(n=2):(a=new JH,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(s,!0);break;case 1:a.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=Y_(o,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&J_(r)}async function X_(t,e){const r=De(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function eK(t,e){const r=De(t);let n=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(n=!0);o.z_=s}}n&&J_(r)}function tK(t,e,r){const n=De(t),s=n.queries.get(e);if(s)for(const a of s.j_)a.onError(r);n.queries.delete(e)}function J_(t){t.Y_.forEach(e=>{e.next()})}var b1,r6;(r6=b1||(b1={})).ea="default",r6.Cache="cache";class Z_{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new mc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==b1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.key=e}}class z9{constructor(e){this.key=e}}class rK{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=d9(e),this.Ra=new Xl(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new e6,s=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),g=U0(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?p!==x&&(n.track({type:3,doc:g}),b=!0):this.ga(f,g)||(n.track({type:2,doc:g}),b=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(l=!0)):!f&&g?(n.track({type:0,doc:g}),b=!0):f&&!g&&(n.track({type:1,doc:f}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),a=x?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,p){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return x(g)-x(p)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new mc(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new e6,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new z9(n))}),this.da.forEach(n=>{e.has(n)||r.push(new B9(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ve();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return mc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nK{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class sK{constructor(e){this.key=e,this.va=!1}}class aK{constructor(e,r,n,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jc(l=>u9(l),F0),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(ve.comparator),this.Na=new Map,this.La=new V_,this.Ba={},this.ka=new Map,this.qa=pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iK(t,e,r=!0){const n=Y9(t);let s;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await q9(n,e,r,!0),s}async function oK(t,e){const r=Y9(t);await q9(r,e,!0,!1)}async function q9(t,e,r,n){const s=await CH(t.localStore,Ns(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await lK(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&M9(t.remoteStore,s),l}async function lK(t,e,r,n,s){t.Ka=(h,f,g)=>async function(x,b,w,y){let _=b.view.ma(w);_.ns&&(_=await QN(x.localStore,b.query,!1).then(({documents:N})=>b.view.ma(N,_)));const S=y&&y.targetChanges.get(b.targetId),j=y&&y.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(_,x.isPrimaryClient,S,j);return s6(x,b.targetId,k.wa),k.snapshot}(t,h,f,g);const a=await QN(t.localStore,e,!0),o=new rK(e,a.Ts),l=o.ma(a.documents),c=gf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);s6(t,r,u.wa);const d=new nK(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function cK(t,e,r){const n=De(t),s=n.Fa.get(e),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter(o=>!F0(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await x1(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&q_(n.remoteStore,s.targetId),w1(n,s.targetId)}).catch(ff)):(w1(n,s.targetId),await x1(n.localStore,s.targetId,!0))}async function uK(t,e){const r=De(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),q_(r.remoteStore,n.targetId))}async function dK(t,e,r){const n=vK(t);try{const s=await function(o,l){const c=De(o),u=Xt.now(),d=l.reduce((g,p)=>g.add(p.key),Ve());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let p=va(),x=Ve();return c.cs.getEntries(g,d).next(b=>{p=b,p.forEach((w,y)=>{y.isValidDocument()||(x=x.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,p)).next(b=>{h=b;const w=[];for(const y of l){const _=IW(y,h.get(y.key).overlayedDocument);_!=null&&w.push(new Ci(y.key,_,r9(_.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,w,l)}).next(b=>{f=b;const w=b.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(g,b.batchId,w)})}).then(()=>({batchId:f.batchId,changes:f9(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new kt(He)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,s.batchId,r),await vf(n,s.changes),await H0(n.remoteStore)}catch(s){const a=Y_(s,"Failed to persist write");r.reject(a)}}async function W9(t,e){const r=De(t);try{const n=await SH(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Na.get(a);o&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Je(o.va):s.removedDocuments.size>0&&(Je(o.va),o.va=!1))}),await vf(r,n,e)}catch(n){await ff(n)}}function n6(t,e,r){const n=De(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=De(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(l)&&(u=!0)}),u&&J_(c)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function hK(t,e,r){const n=De(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),a=s&&s.key;if(a){let o=new kt(ve.comparator);o=o.insert(a,Er.newNoDocument(a,Ie.min()));const l=Ve().add(a),c=new z0(Ie.min(),new Map,new kt(He),o,l);await W9(n,c),n.Oa=n.Oa.remove(a),n.Na.delete(e),e4(n)}else await x1(n.localStore,e,!1).then(()=>w1(n,e,r)).catch(ff)}async function fK(t,e){const r=De(t),n=e.batch.batchId;try{const s=await NH(r.localStore,e);K9(r,n,null),H9(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await vf(r,s)}catch(s){await ff(s)}}async function pK(t,e,r){const n=De(t);try{const s=await function(o,l){const c=De(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Je(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);K9(n,e,r),H9(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await vf(n,s)}catch(s){await ff(s)}}function H9(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function K9(t,e,r){const n=De(t);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function w1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||G9(t,n)})}function G9(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(q_(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),e4(t))}function s6(t,e,r){for(const n of r)n instanceof B9?(t.La.addReference(n.key,e),mK(t,n)):n instanceof z9?(pe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||G9(t,n.key)):Te()}function mK(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(pe("SyncEngine","New document in limbo: "+r),t.xa.add(n),e4(t))}function e4(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ve(mt.fromString(e)),n=t.qa.next();t.Na.set(n,new sK(r)),t.Oa=t.Oa.insert(r,n),M9(t.remoteStore,new ti(Ns(L0(r.path)),n,"TargetPurposeLimboResolution",T_.oe))}}async function vf(t,e,r){const n=De(t),s=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=z_.Wi(c.targetId,u);a.push(h)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(c,u){const d=De(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>te.forEach(u,f=>te.forEach(f.$i,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>te.forEach(f.Ui,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!pf(h))throw h;pe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const g=d.os.get(f),p=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(p);d.os=d.os.insert(f,x)}}}(n.localStore,a))}async function gK(t,e){const r=De(t);if(!r.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const n=await O9(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new ce(J.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vf(r,n.hs)}}function yK(t,e){const r=De(t),n=r.Na.get(e);if(n&&n.va)return Ve().add(n.key);{let s=Ve();const a=r.Ma.get(e);if(!a)return s;for(const o of a){const l=r.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Y9(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hK.bind(null,e),e.Ca.d_=eK.bind(null,e.eventManager),e.Ca.$a=tK.bind(null,e.eventManager),e}function vK(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pK.bind(null,e),e}class tg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=q0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return kH(this.persistence,new _H,e.initialUser,this.serializer)}Ga(e){return new xH(B_.Zr,this.serializer)}Wa(e){return new PH}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tg.provider={build:()=>new tg};class _1{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>n6(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=gK.bind(null,this.syncEngine),await XH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZH}()}createDatastore(e){const r=q0(e.databaseInfo.databaseId),n=function(a){return new DH(a)}(e.databaseInfo);return function(a,o,l,c){return new LH(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,o,l){return new UH(n,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>n6(this.syncEngine,r,0),function(){return JN.D()?new JN:new OH}())}createSyncEngine(e,r){return function(s,a,o,l,c,u,d){const h=new aK(s,a,o,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=De(s);pe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await yf(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}_1.provider={build:()=>new _1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Nr.UNAUTHENTICATED,this.clientId=Z8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{pe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(pe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Y_(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tx(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await O9(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function a6(t,e){t.asyncQueue.verifyOperationInProgress();const r=await bK(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>ZN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>ZN(e.remoteStore,s)),t._onlineComponents=e}async function bK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await tx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;uc("Error using user provided cache. Falling back to memory cache: "+r),await tx(t,new tg)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await tx(t,new tg);return t._offlineComponents}async function Q9(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await a6(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await a6(t,new _1))),t._onlineComponents}function wK(t){return Q9(t).then(e=>e.syncEngine)}async function rg(t){const e=await Q9(t),r=e.eventManager;return r.onListen=iK.bind(null,e.syncEngine),r.onUnlisten=cK.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=oK.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=uK.bind(null,e.syncEngine),r}function _K(t,e,r={}){const n=new ia;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new t4({next:f=>{d.Za(),o.enqueueAndForget(()=>X_(a,h));const g=f.docs.has(l);!g&&f.fromCache?u.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&c&&c.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new Z_(L0(l.path),d,{includeMetadataChanges:!0,_a:!0});return Q_(a,h)}(await rg(t),t.asyncQueue,e,r,n)),n.promise}function jK(t,e,r={}){const n=new ia;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new t4({next:f=>{d.Za(),o.enqueueAndForget(()=>X_(a,h)),f.fromCache&&c.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new Z_(l,d,{includeMetadataChanges:!0,_a:!0});return Q_(a,h)}(await rg(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t,e,r){if(!r)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kK(t,e,r,n){if(e===!0&&n===!0)throw new ce(J.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function o6(t){if(!ve.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function l6(t){if(ve.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function K0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function Zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=K0(t);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function NK(t,e){if(e<=0)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X9((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class G0{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c6({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c6(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Vq;switch(n.type){case"firstParty":return new Wq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=i6.get(r);n&&(pe("ComponentProvider","Removing Datastore"),i6.delete(r),n.terminate())}(this),Promise.resolve()}}function SK(t,e,r,n={}){var s;const a=(t=Zr(t,G0))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Nr.MOCK_USER;else{l=r8(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Nr(u)}t._authCredentials=new Bq(new J8(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class Tr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class fi extends Sa{constructor(e,r,n){super(e,r,L0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new ve(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function ae(t,e,...r){if(t=rt(t),J9("collection","path",e),t instanceof G0){const n=mt.fromString(e,...r);return l6(n),new fi(t,null,n)}{if(!(t instanceof Tr||t instanceof fi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return l6(n),new fi(t.firestore,null,n)}}function ie(t,e,...r){if(t=rt(t),arguments.length===1&&(e=Z8.newId()),J9("doc","path",e),t instanceof G0){const n=mt.fromString(e,...r);return o6(n),new Tr(t,null,new ve(n))}{if(!(t instanceof Tr||t instanceof fi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return o6(n),new Tr(t.firestore,t instanceof fi?t.converter:null,new ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R9(this,"async_queue_retry"),this.Vu=()=>{const n=ex();n&&pe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=ex();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=ex();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ia;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pf(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw ya("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=G_.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function d6(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class xa extends G0{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new u6,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u6(e),this._firestoreClient=void 0,await e}}}function EK(t,e){const r=typeof t=="object"?t:lf(),n=typeof t=="string"?t:"(default)",s=Ai(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=g_("firestore");a&&SK(s,...a)}return s}function Y0(t){if(t._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AK(t),t._firestoreClient}function AK(t){var e,r,n;const s=t._freezeSettings(),a=function(l,c,u,d){return new sW(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,X9(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new xK(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gc(gr.fromBase64String(e))}catch(r){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new gc(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=/^__.*__$/;class TK{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,r,this.fieldTransforms):new mf(e,this.data,r,this.fieldTransforms)}}class Z9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ci(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function e7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class s4{constructor(e,r,n,s,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new s4(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ng(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(e7(this.Cu)&&CK.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PK{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||q0(e)}Qu(e,r,n,s=!1){return new s4({Cu:e,methodName:r,qu:n,path:hr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(t){const e=t._freezeSettings(),r=q0(t._databaseId);return new PK(t._databaseId,!!e.ignoreUndefinedProperties,r)}function t7(t,e,r,n,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,s);i4("Data must be an object, but it was:",o,n);const l=r7(n,o);let c,u;if(a.merge)c=new fn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=j1(e,h,r);if(!o.contains(f))throw new ce(J.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);s7(d,f)||d.push(f)}c=new fn(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new TK(new Kr(l),c,u)}class Z0 extends X0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Z0}}class a4 extends X0{_toFieldTransform(e){return new CW(e.path,new ih)}isEqual(e){return e instanceof a4}}function OK(t,e,r,n){const s=t.Qu(1,e,r);i4("Data must be an object, but it was:",s,n);const a=[],o=Kr.empty();Ho(n,(c,u)=>{const d=o4(e,c,r);u=rt(u);const h=s.Nu(d);if(u instanceof Z0)a.push(d);else{const f=xf(u,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new fn(a);return new Z9(o,l,s.fieldTransforms)}function IK(t,e,r,n,s,a){const o=t.Qu(1,e,r),l=[j1(e,n,r)],c=[s];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(j1(e,a[f])),c.push(a[f+1]);const u=[],d=Kr.empty();for(let f=l.length-1;f>=0;--f)if(!s7(u,l[f])){const g=l[f];let p=c[f];p=rt(p);const x=o.Nu(g);if(p instanceof Z0)u.push(g);else{const b=xf(p,x);b!=null&&(u.push(g),d.set(g,b))}}const h=new fn(u);return new Z9(d,h,o.fieldTransforms)}function RK(t,e,r,n=!1){return xf(r,t.Qu(n?4:3,e))}function xf(t,e){if(n7(t=rt(t)))return i4("Unsupported field value:",e,t),r7(t,e);if(t instanceof X0)return function(n,s){if(!e7(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const a=[];let o=0;for(const l of n){let c=xf(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=rt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return SW(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Xt.fromDate(n);return{timestampValue:Zm(s.serializer,a)}}if(n instanceof Xt){const a=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Zm(s.serializer,a)}}if(n instanceof r4)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gc)return{bytesValue:N9(s.serializer,n._byteString)};if(n instanceof Tr){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:U_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof n4)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return M_(l.serializer,c)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${K0(n)}`)}(t,e)}function r7(t,e){const r={};return e9(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(n,s)=>{const a=xf(s,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function n7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof r4||t instanceof gc||t instanceof Tr||t instanceof X0||t instanceof n4)}function i4(t,e,r){if(!n7(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=K0(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function j1(t,e,r){if((e=rt(e))instanceof Q0)return e._internalPath;if(typeof e=="string")return o4(t,e);throw ng("Field path arguments must be of type string or ",t,!1,void 0,r)}const DK=new RegExp("[~\\*/\\[\\]]");function o4(t,e,r){if(e.search(DK)>=0)throw ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Q0(...e.split("."))._internalPath}catch{throw ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ng(t,e,r,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new ce(J.INVALID_ARGUMENT,l+t+c)}function s7(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ey("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class MK extends a7{data(){return super.data()}}function ey(t,e){return typeof e=="string"?o4(t,e):e instanceof Q0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l4{}class c4 extends l4{}function Ce(t,e,...r){let n=[];e instanceof l4&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof u4).length,l=a.filter(c=>c instanceof ty).length;if(o>1||o>0&&l>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class ty extends c4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ty(e,r,n)}_apply(e){const r=this._parse(e);return o7(e._query,r),new Sa(e.firestore,e.converter,p1(e._query,r))}_parse(e){const r=J0(e.firestore);return function(a,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){f6(h,d);const g=[];for(const p of h)g.push(h6(c,a,p));f={arrayValue:{values:g}}}else f=h6(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||f6(h,d),f=RK(l,o,h,d==="in"||d==="not-in");return Vt.create(u,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function je(t,e,r){const n=e,s=ey("where",t);return ty._create(s,n,r)}class u4 extends l4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new u4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:is.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)o7(o,c),o=p1(o,c)}(e._query,r),new Sa(e.firestore,e.converter,p1(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d4 extends c4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new d4(e,r)}_apply(e){const r=function(s,a,o){if(s.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ah(a,o)}(e._query,this._field,this._direction);return new Sa(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Xc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function en(t,e="asc"){const r=e,n=ey("orderBy",t);return d4._create(n,r)}class h4 extends c4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new h4(e,r,n)}_apply(e){return new Sa(e.firestore,e.converter,Xm(e._query,this._limit,this._limitType))}}function yc(t){return NK("limit",t),h4._create("limit",t,"F")}function h6(t,e,r){if(typeof(r=rt(r))=="string"){if(r==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c9(e)&&r.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(mt.fromString(r));if(!ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return IN(t,new ve(n))}if(r instanceof Tr)return IN(t,r._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K0(r)}.`)}function f6(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o7(t,e){const r=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class $K{convertValue(e,r="none"){switch(To(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ho(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,s;const a=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new n4(a)}convertGeoPoint(e){return new r4(It(e.latitude),It(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=O_(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){const r=xi(e);return new Xt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=mt.fromString(e);Je(P9(n));const s=new nh(n.get(1),n.get(3)),a=new ve(n.popFirst(5));return s.isEqual(r)||ya(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class c7 extends a7{constructor(e,r,n,s,a,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ey("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class hm extends c7{data(e={}){return super.data(e)}}class u7{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new id(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new hm(this._firestore,this._userDataWriter,n.key,n,new id(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new hm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new id(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new hm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new id(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:LK(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function LK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){t=Zr(t,Tr);const e=Zr(t.firestore,xa);return _K(Y0(e),t._key).then(r=>d7(e,t,r))}class f4 extends $K{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,r)}}function me(t){t=Zr(t,Sa);const e=Zr(t.firestore,xa),r=Y0(e),n=new f4(e);return i7(t._query),jK(r,t._query).then(s=>new u7(e,n,t,s))}function sg(t,e,r){t=Zr(t,Tr);const n=Zr(t.firestore,xa),s=l7(t.converter,e);return ry(n,[t7(J0(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,On.none())])}function ke(t,e,r,...n){t=Zr(t,Tr);const s=Zr(t.firestore,xa),a=J0(s);let o;return o=typeof(e=rt(e))=="string"||e instanceof Q0?IK(a,"updateDoc",t._key,e,r,n):OK(a,"updateDoc",t._key,e),ry(s,[o.toMutation(t._key,On.exists(!0))])}function ns(t){return ry(Zr(t.firestore,xa),[new $_(t._key,On.none())])}function Mt(t,e){const r=Zr(t.firestore,xa),n=ie(t),s=l7(t.converter,e);return ry(r,[t7(J0(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,On.exists(!1))]).then(()=>n)}function p4(t,...e){var r,n,s;t=rt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||d6(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(d6(e[o])){const h=e[o];e[o]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,u,d;if(t instanceof Tr)u=Zr(t.firestore,xa),d=L0(t._key.path),c={next:h=>{e[o]&&e[o](d7(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Zr(t,Sa);u=Zr(h.firestore,xa),d=h._query;const f=new f4(u);c={next:g=>{e[o]&&e[o](new u7(u,f,h,g))},error:e[o+1],complete:e[o+2]},i7(t._query)}return function(f,g,p,x){const b=new t4(x),w=new Z_(g,b,p);return f.asyncQueue.enqueueAndForget(async()=>Q_(await rg(f),w)),()=>{b.Za(),f.asyncQueue.enqueueAndForget(async()=>X_(await rg(f),w))}}(Y0(u),d,l,c)}function ry(t,e){return function(n,s){const a=new ia;return n.asyncQueue.enqueueAndForget(async()=>dK(await wK(n),s,a)),a.promise}(Y0(t),e)}function d7(t,e,r){const n=r.docs.get(e._key),s=new f4(t);return new c7(t,s,e._key,n,new id(r.hasPendingWrites,r.fromCache),e.converter)}function ag(){return new a4("serverTimestamp")}(function(e,r=!0){(function(s){Qc=s})(qo),Dn(new xn("firestore",(n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new xa(new zq(n.getProvider("auth-internal")),new Kq(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(u.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Cr(AN,"4.7.3",e),Cr(AN,"4.7.3","esm2017")})();var FK="firebase",UK="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(FK,UK,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="firebasestorage.googleapis.com",f7="storageBucket",VK=2*60*1e3,BK=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class p7 extends ds{constructor(e,r,n=0){super(rx(e),`Firebase Storage: ${r} (${rx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,p7.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function rx(t){return"storage/"+t}function m4(){const t="An unknown error occurred, please check the error payload for server response.";return new zt(Ot.UNKNOWN,t)}function zK(t){return new zt(Ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qK(t){return new zt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function WK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Ot.UNAUTHENTICATED,t)}function HK(){return new zt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KK(t){return new zt(Ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function GK(){return new zt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YK(){return new zt(Ot.CANCELED,"User canceled the upload/download.")}function QK(t){return new zt(Ot.INVALID_URL,"Invalid URL '"+t+"'.")}function XK(t){return new zt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function JK(){return new zt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+f7+"' property when initializing the app?")}function ZK(){return new zt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eG(){return new zt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tG(t){return new zt(Ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function k1(t){return new zt(Ot.INVALID_ARGUMENT,t)}function m7(){return new zt(Ot.APP_DELETED,"The Firebase app was deleted.")}function rG(t){return new zt(Ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jd(t,e){return new zt(Ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $u(t){throw new zt(Ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=pn.makeFromUrl(e,r)}catch{return new pn(e,"")}if(n.path==="")return n;throw XK(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),p={bucket:1,path:3},x=r===h7?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",w=new RegExp(`^https?://${x}/${s}/${b}`,"i"),_=[{regex:l,indices:c,postModify:a},{regex:g,indices:p,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<_.length;S++){const j=_[S],k=j.regex.exec(e);if(k){const N=k[j.indices.bucket];let E=k[j.indices.path];E||(E=""),n=new pn(N,E),j.postModify(n);break}}if(n==null)throw QK(e);return n}}class nG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(t,e,r){let n=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(g,c())},b)}function f(){a&&clearTimeout(a)}function g(b,...w){if(u){f();return}if(b){f(),d.call(null,b,...w);return}if(c()||o){f(),d.call(null,b,...w);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,h(_)}let p=!1;function x(b){p||(p=!0,f(),!u&&(s!==null?(b||(l=2),clearTimeout(s),h(0)):b||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,x(!0)},r),x}function aG(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG(t){return t!==void 0}function oG(t){return typeof t=="object"&&!Array.isArray(t)}function g4(t){return typeof t=="string"||t instanceof String}function p6(t){return y4()&&t instanceof Blob}function y4(){return typeof Blob<"u"}function m6(t,e,r,n){if(n<e)throw k1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw k1(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function g7(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var yo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yo||(yo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e,r,n,s,a,o,l,c,u,d,h,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,p)=>{this.resolve_=g,this.reject_=p,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new wp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===yo.NO_ERROR,c=a.getStatus();if(!l||lG(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===yo.ABORT;n(!1,new wp(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new wp(u,a))})},r=(n,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());iG(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=m4();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?m7():YK();o(c)}else{const c=GK();o(c)}};this.canceled_?r(!1,new wp(!1,null,!0)):this.backoffId_=sG(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wp{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function uG(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fG(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function pG(t,e,r,n,s,a,o=!0){const l=g7(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return hG(u,e),uG(u,r),dG(u,a),fG(u,n),new cG(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gG(...t){const e=mG();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(y4())return new Blob(t);throw new zt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yG(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vG(t){if(typeof atob>"u")throw tG("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nx{constructor(e,r){this.data=e,this.contentType=r||null}}function xG(t,e){switch(t){case bs.RAW:return new nx(y7(e));case bs.BASE64:case bs.BASE64URL:return new nx(v7(t,e));case bs.DATA_URL:return new nx(wG(e),_G(e))}throw m4()}function y7(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function bG(t){let e;try{e=decodeURIComponent(t)}catch{throw jd(bs.DATA_URL,"Malformed data URL.")}return y7(e)}function v7(t,e){switch(t){case bs.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw jd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case bs.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw jd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=vG(e)}catch(s){throw s.message.includes("polyfill")?s:jd(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class x7{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw jd(bs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=jG(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function wG(t){const e=new x7(t);return e.base64?v7(bs.BASE64,e.rest):bG(e.rest)}function _G(t){return new x7(t).contentType}function jG(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,r){let n=0,s="";p6(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(p6(this.data_)){const n=this.data_,s=yG(n,e,r);return s===null?null:new Ya(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ya(n,!0)}}static getBlob(...e){if(y4()){const r=e.map(n=>n instanceof Ya?n.data_:n);return new Ya(gG.apply(null,r))}else{const r=e.map(o=>g4(o)?xG(bs.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Ya(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b7(t){let e;try{e=JSON.parse(t)}catch{return null}return oG(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function NG(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function w7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(t,e){return e}class Dr{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||SG}}let _p=null;function EG(t){return!g4(t)||t.length<2?t:w7(t)}function _7(){if(_p)return _p;const t=[];t.push(new Dr("bucket")),t.push(new Dr("generation")),t.push(new Dr("metageneration")),t.push(new Dr("name","fullPath",!0));function e(a,o){return EG(o)}const r=new Dr("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const s=new Dr("size");return s.xform=n,t.push(s),t.push(new Dr("timeCreated")),t.push(new Dr("updated")),t.push(new Dr("md5Hash",null,!0)),t.push(new Dr("cacheControl",null,!0)),t.push(new Dr("contentDisposition",null,!0)),t.push(new Dr("contentEncoding",null,!0)),t.push(new Dr("contentLanguage",null,!0)),t.push(new Dr("contentType",null,!0)),t.push(new Dr("metadata","customMetadata",!0)),_p=t,_p}function AG(t,e){function r(){const n=t.bucket,s=t.fullPath,a=new pn(n,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function CG(t,e,r){const n={};n.type="file";const s=r.length;for(let a=0;a<s;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return AG(n,t),n}function j7(t,e,r){const n=b7(e);return n===null?null:CG(t,n,r)}function TG(t,e,r,n){const s=b7(e);if(s===null||!g4(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),g=v4(f,r,n),p=g7({alt:"media",token:u});return g+p})[0]}function PG(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const a=e[s];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class k7{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t){if(!t)throw m4()}function OG(t,e){function r(n,s){const a=j7(t,s,e);return N7(a!==null),a}return r}function IG(t,e){function r(n,s){const a=j7(t,s,e);return N7(a!==null),TG(a,s,t.host,t._protocol)}return r}function S7(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=HK():s=WK():r.getStatus()===402?s=qK(t.bucket):r.getStatus()===403?s=KK(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function RG(t){const e=S7(t);function r(n,s){let a=e(n,s);return n.getStatus()===404&&(a=zK(t.path)),a.serverResponse=s.serverResponse,a}return r}function DG(t,e,r){const n=e.fullServerUrl(),s=v4(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new k7(s,a,IG(t,r),o);return l.errorHandler=RG(e),l}function MG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function $G(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=MG(null,e)),n}function LG(t,e,r,n,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let S=0;S<2;S++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=$G(e,n,s),d=PG(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",g=Ya.getBlob(h,n,f);if(g===null)throw ZK();const p={name:u.fullPath},x=v4(a,t.host,t._protocol),b="POST",w=t.maxUploadRetryTime,y=new k7(x,b,OG(t,r),w);return y.urlParams=p,y.headers=o,y.body=g.uploadData(),y.errorHandler=S7(e),y}const pSe=256*1024;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw $u("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UG extends FG{initXhr(){this.xhr_.responseType="text"}}function E7(){return new UG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,r){this._service=e,r instanceof pn?this._location=r:this._location=pn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Po(e,r)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w7(this._location.path)}get storage(){return this._service}get parent(){const e=kG(this._location.path);if(e===null)return null;const r=new pn(this._location.bucket,e);return new Po(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw rG(e)}}function VG(t,e,r){t._throwIfRoot("uploadBytes");const n=LG(t.storage,t._location,_7(),new Ya(e,!0),r);return t.storage.makeRequestWithTokens(n,E7).then(s=>({metadata:s,ref:t}))}function BG(t){t._throwIfRoot("getDownloadURL");const e=DG(t.storage,t._location,_7());return t.storage.makeRequestWithTokens(e,E7).then(r=>{if(r===null)throw eG();return r})}function zG(t,e){const r=NG(t._location.path,e),n=new pn(t._location.bucket,r);return new Po(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qG(t){return/^[A-Za-z]+:\/\//.test(t)}function WG(t,e){return new Po(t,e)}function A7(t,e){if(t instanceof x4){const r=t;if(r._bucket==null)throw JK();const n=new Po(r,r._bucket);return e!=null?A7(n,e):n}else return e!==void 0?zG(t,e):t}function HG(t,e){if(e&&qG(e)){if(t instanceof x4)return WG(t,e);throw k1("To use ref(service, url), the first argument must be a Storage instance.")}else return A7(t,e)}function g6(t,e){const r=e==null?void 0:e[f7];return r==null?null:pn.makeFromBucketSpec(r,t)}function KG(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:r8(s,t.app.options.projectId))}class x4{constructor(e,r,n,s,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=h7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VK,this._maxUploadRetryTime=BK,this._requests=new Set,s!=null?this._bucket=pn.makeFromBucketSpec(s,this._host):this._bucket=g6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=g6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Po(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new nG(m7());{const o=pG(e,this._appId,n,s,r,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const y6="@firebase/storage",v6="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7="storage";function os(t,e,r){return t=rt(t),VG(t,e,r)}function ls(t){return t=rt(t),BG(t)}function cs(t,e){return t=rt(t),HG(t,e)}function GG(t=lf(),e){t=rt(t);const n=Ai(t,C7).getImmediate({identifier:e}),s=g_("storage");return s&&YG(n,...s),n}function YG(t,e,r,n={}){KG(t,e,r,n)}function QG(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new x4(r,n,s,e,qo)}function XG(){Dn(new xn(C7,QG,"PUBLIC").setMultipleInstances(!0)),Cr(y6,v6,""),Cr(y6,v6,"esm2017")}XG();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="us-central1";class ZG{constructor(e,r,n,s,a=N1,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new JG(r,n,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=N1}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function eY(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}const x6="@firebase/functions",b6="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="auth-internal",rY="app-check-internal",nY="messaging-internal";function sY(t,e){const r=(n,{instanceIdentifier:s})=>{const a=n.getProvider("app").getImmediate(),o=n.getProvider(tY),l=n.getProvider(nY),c=n.getProvider(rY);return new ZG(a,o,l,c,s,t)};Dn(new xn(T7,r,"PUBLIC").setMultipleInstances(!0)),Cr(x6,b6,e),Cr(x6,b6,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(t=lf(),e=N1){const n=Ai(rt(t),T7).getImmediate({identifier:e}),s=g_("functions");return s&&iY(n,...s),n}function iY(t,e,r){eY(rt(t),e,r)}sY(fetch.bind(self));const P7="@firebase/installations",b4="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=1e4,I7=`w:${b4}`,R7="FIS_v2",oY="https://firebaseinstallations.googleapis.com/v1",lY=60*60*1e3,cY="installations",uY="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Oo=new zo(cY,uY,dY);function D7(t){return t instanceof ds&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7({projectId:t}){return`${oY}/projects/${t}/installations`}function $7(t){return{token:t.token,requestStatus:2,expiresIn:fY(t.expiresIn),creationTime:Date.now()}}async function L7(t,e){const n=(await e.json()).error;return Oo.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function F7({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function hY(t,{refreshToken:e}){const r=F7(t);return r.append("Authorization",pY(e)),r}async function U7(t){const e=await t();return e.status>=500&&e.status<600?t():e}function fY(t){return Number(t.replace("s","000"))}function pY(t){return`${R7} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mY({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=M7(t),s=F7(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:r,authVersion:R7,appId:t.appId,sdkVersion:I7},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await U7(()=>fetch(n,l));if(c.ok){const u=await c.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:$7(u.authToken)}}else throw await L7("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY=/^[cdef][\w-]{21}$/,S1="";function vY(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=xY(t);return yY.test(r)?r:S1}catch{return S1}}function xY(t){return gY(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new Map;function z7(t,e){const r=ny(t);q7(r,e),bY(r,e)}function q7(t,e){const r=B7.get(t);if(r)for(const n of r)n(e)}function bY(t,e){const r=wY();r&&r.postMessage({key:t,fid:e}),_Y()}let oo=null;function wY(){return!oo&&"BroadcastChannel"in self&&(oo=new BroadcastChannel("[Firebase] FID Change"),oo.onmessage=t=>{q7(t.data.key,t.data.fid)}),oo}function _Y(){B7.size===0&&oo&&(oo.close(),oo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY="firebase-installations-database",kY=1,Io="firebase-installations-store";let sx=null;function w4(){return sx||(sx=I0(jY,kY,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Io)}}})),sx}async function ig(t,e){const r=ny(t),s=(await w4()).transaction(Io,"readwrite"),a=s.objectStore(Io),o=await a.get(r);return await a.put(e,r),await s.done,(!o||o.fid!==e.fid)&&z7(t,e.fid),e}async function W7(t){const e=ny(t),n=(await w4()).transaction(Io,"readwrite");await n.objectStore(Io).delete(e),await n.done}async function sy(t,e){const r=ny(t),s=(await w4()).transaction(Io,"readwrite"),a=s.objectStore(Io),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await s.done,l&&(!o||o.fid!==l.fid)&&z7(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t){let e;const r=await sy(t.appConfig,n=>{const s=NY(n),a=SY(t,s);return e=a.registrationPromise,a.installationEntry});return r.fid===S1?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function NY(t){const e=t||{fid:vY(),registrationStatus:0};return H7(e)}function SY(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Oo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=EY(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AY(t)}:{installationEntry:e}}async function EY(t,e){try{const r=await mY(t,e);return ig(t.appConfig,r)}catch(r){throw D7(r)&&r.customData.serverCode===409?await W7(t.appConfig):await ig(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function AY(t){let e=await w6(t.appConfig);for(;e.registrationStatus===1;)await V7(100),e=await w6(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await _4(t);return n||r}return e}function w6(t){return sy(t,e=>{if(!e)throw Oo.create("installation-not-found");return H7(e)})}function H7(t){return CY(t)?{fid:t.fid,registrationStatus:0}:t}function CY(t){return t.registrationStatus===1&&t.registrationTime+O7<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY({appConfig:t,heartbeatServiceProvider:e},r){const n=PY(t,r),s=hY(t,r),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:I7,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await U7(()=>fetch(n,l));if(c.ok){const u=await c.json();return $7(u)}else throw await L7("Generate Auth Token",c)}function PY(t,{fid:e}){return`${M7(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,e=!1){let r;const n=await sy(t.appConfig,a=>{if(!K7(a))throw Oo.create("not-registered");const o=a.authToken;if(!e&&RY(o))return a;if(o.requestStatus===1)return r=OY(t,e),a;{if(!navigator.onLine)throw Oo.create("app-offline");const l=MY(a);return r=IY(t,l),l}});return r?await r:n.authToken}async function OY(t,e){let r=await _6(t.appConfig);for(;r.authToken.requestStatus===1;)await V7(100),r=await _6(t.appConfig);const n=r.authToken;return n.requestStatus===0?j4(t,e):n}function _6(t){return sy(t,e=>{if(!K7(e))throw Oo.create("not-registered");const r=e.authToken;return $Y(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function IY(t,e){try{const r=await TY(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await ig(t.appConfig,n),r}catch(r){if(D7(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await W7(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ig(t.appConfig,n)}throw r}}function K7(t){return t!==void 0&&t.registrationStatus===2}function RY(t){return t.requestStatus===2&&!DY(t)}function DY(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+lY}function MY(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $Y(t){return t.requestStatus===1&&t.requestTime+O7<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LY(t){const e=t,{installationEntry:r,registrationPromise:n}=await _4(e);return n?n.catch(console.error):j4(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FY(t,e=!1){const r=t;return await UY(r),(await j4(r,e)).token}async function UY(t){const{registrationPromise:e}=await _4(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VY(t){if(!t||!t.options)throw ax("App Configuration");if(!t.name)throw ax("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw ax(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ax(t){return Oo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="installations",BY="installations-internal",zY=t=>{const e=t.getProvider("app").getImmediate(),r=VY(e),n=Ai(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},qY=t=>{const e=t.getProvider("app").getImmediate(),r=Ai(e,G7).getImmediate();return{getId:()=>LY(r),getToken:s=>FY(r,s)}};function WY(){Dn(new xn(G7,zY,"PUBLIC")),Dn(new xn(BY,qY,"PRIVATE"))}WY();Cr(P7,b4);Cr(P7,b4,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY="/firebase-messaging-sw.js",KY="/firebase-cloud-messaging-push-scope",Y7="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",GY="https://fcmregistrations.googleapis.com/v1",Q7="google.c.a.c_id",YY="google.c.a.c_l",QY="google.c.a.ts",XY="google.c.a.e";var j6;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(j6||(j6={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ch;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ch||(ch={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function JY(t){const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),s=new Uint8Array(n.length);for(let a=0;a<n.length;++a)s[a]=n.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="fcm_token_details_db",ZY=5,k6="fcm_token_object_Store";async function eQ(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(ix))return null;let e=null;return(await I0(ix,ZY,{upgrade:async(n,s,a,o)=>{var l;if(s<2||!n.objectStoreNames.contains(k6))return;const c=o.objectStore(k6),u=await c.index("fcmSenderId").get(t);if(await c.clear(),!!u){if(s===2){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(l=d.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:zs(d.vapidKey)}}}else if(s===3){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:zs(d.auth),p256dh:zs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:zs(d.vapidKey)}}}else if(s===4){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:zs(d.auth),p256dh:zs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:zs(d.vapidKey)}}}}}})).close(),await Kv(ix),await Kv("fcm_vapid_details_db"),await Kv("undefined"),tQ(e)?e:null}function tQ(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ="firebase-messaging-database",nQ=1,uh="firebase-messaging-store";let ox=null;function X7(){return ox||(ox=I0(rQ,nQ,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(uh)}}})),ox}async function sQ(t){const e=J7(t),n=await(await X7()).transaction(uh).objectStore(uh).get(e);if(n)return n;{const s=await eQ(t.appConfig.senderId);if(s)return await k4(t,s),s}}async function k4(t,e){const r=J7(t),s=(await X7()).transaction(uh,"readwrite");return await s.objectStore(uh).put(e,r),await s.done,e}function J7({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Br=new zo("messaging","Messaging",aQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iQ(t,e){const r=await S4(t),n=Z7(e),s={method:"POST",headers:r,body:JSON.stringify(n)};let a;try{a=await(await fetch(N4(t.appConfig),s)).json()}catch(o){throw Br.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw Br.create("token-subscribe-failed",{errorInfo:o})}if(!a.token)throw Br.create("token-subscribe-no-token");return a.token}async function oQ(t,e){const r=await S4(t),n=Z7(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(n)};let a;try{a=await(await fetch(`${N4(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw Br.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw Br.create("token-update-failed",{errorInfo:o})}if(!a.token)throw Br.create("token-update-no-token");return a.token}async function lQ(t,e){const n={method:"DELETE",headers:await S4(t)};try{const a=await(await fetch(`${N4(t.appConfig)}/${e}`,n)).json();if(a.error){const o=a.error.message;throw Br.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Br.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function N4({projectId:t}){return`${GY}/projects/${t}/registrations`}async function S4({appConfig:t,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Z7({p256dh:t,auth:e,endpoint:r,vapidKey:n}){const s={web:{endpoint:r,auth:e,p256dh:t}};return n!==Y7&&(s.web.applicationPubKey=n),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=7*24*60*60*1e3;async function uQ(t){const e=await hQ(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:zs(e.getKey("auth")),p256dh:zs(e.getKey("p256dh"))},n=await sQ(t.firebaseDependencies);if(n){if(fQ(n.subscriptionOptions,r))return Date.now()>=n.createTime+cQ?dQ(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await lQ(t.firebaseDependencies,n.token)}catch(s){console.warn(s)}return N6(t.firebaseDependencies,r)}else return N6(t.firebaseDependencies,r)}async function dQ(t,e){try{const r=await oQ(t.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return await k4(t.firebaseDependencies,n),r}catch(r){throw r}}async function N6(t,e){const n={token:await iQ(t,e),createTime:Date.now(),subscriptionOptions:e};return await k4(t,n),n.token}async function hQ(t,e){const r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:JY(e)})}function fQ(t,e){const r=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return r&&n&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return pQ(e,t),mQ(e,t),gQ(e,t),e}function pQ(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const n=e.notification.body;n&&(t.notification.body=n);const s=e.notification.image;s&&(t.notification.image=s);const a=e.notification.icon;a&&(t.notification.icon=a)}function mQ(t,e){e.data&&(t.data=e.data)}function gQ(t,e){var r,n,s,a,o;if(!e.fcmOptions&&!(!((r=e.notification)===null||r===void 0)&&r.click_action))return;t.fcmOptions={};const l=(s=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;l&&(t.fcmOptions.link=l);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yQ(t){return typeof t=="object"&&!!t&&Q7 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(t){if(!t||!t.options)throw lx("App Configuration Object");if(!t.name)throw lx("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of e)if(!r[n])throw lx(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function lx(t){return Br.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(e,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=vQ(e);this.firebaseDependencies={app:e,appConfig:s,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bQ(t){try{t.swRegistration=await navigator.serviceWorker.register(HY,{scope:KY}),t.swRegistration.update().catch(()=>{})}catch(e){throw Br.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wQ(t,e){if(!e&&!t.swRegistration&&await bQ(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Br.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Q(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Y7)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jQ(t,e){if(!navigator)throw Br.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Br.create("permission-blocked");return await _Q(t,e==null?void 0:e.vapidKey),await wQ(t,e==null?void 0:e.serviceWorkerRegistration),uQ(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kQ(t,e,r){const n=NQ(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[Q7],message_name:r[YY],message_time:r[QY],message_device_time:Math.floor(Date.now()/1e3)})}function NQ(t){switch(t){case ch.NOTIFICATION_CLICKED:return"notification_open";case ch.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SQ(t,e){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===ch.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(S6(r)):t.onMessageHandler.next(S6(r)));const n=r.data;yQ(n)&&n[XY]==="1"&&await kQ(t,r.messageType,n)}const E6="@firebase/messaging",A6="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=t=>{const e=new xQ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>SQ(e,r)),e},AQ=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>jQ(e,n)}};function CQ(){Dn(new xn("messaging",EQ,"PUBLIC")),Dn(new xn("messaging-internal",AQ,"PRIVATE")),Cr(E6,A6),Cr(E6,A6,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TQ(){try{await s8()}catch{return!1}return typeof window<"u"&&n8()&&oV()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t=lf()){return TQ().then(e=>{if(!e)throw Br.create("unsupported-browser")},e=>{throw Br.create("indexed-db-unsupported")}),Ai(rt(t),"messaging").getImmediate()}CQ();const OQ={apiKey:"AIzaSyBmNnhtuEp4ULe8ZKynSJIxkuaDYMnb9mg",authDomain:"abu-mafhal-marketplace.firebaseapp.com",projectId:"abu-mafhal-marketplace",storageBucket:"abu-mafhal-marketplace.firebasestorage.app",messagingSenderId:"213061869529",appId:"1:213061869529:web:55d9498b508e10df4743c8",measurementId:"G-YJFGQTFR8B"},bf=o8(OQ),vs=Fq(bf),q=EK(bf),us=GG(bf);aY(bf);let IQ=null;try{IQ=PQ(bf)}catch(t){console.log("Messaging not supported:",t)}const eO=T.createContext({}),Le=()=>T.useContext(eO),tO=({children:t})=>{const[e,r]=T.useState(null),[n,s]=T.useState(null),[a,o]=T.useState(!0),l=async p=>{try{const x=await Pt(ie(q,"users",p));return x.exists()?x.data():null}catch(x){return console.error("Error getting user data:",x),null}},c=async(p,x,b)=>{try{const{user:w}=await I8(vs,p,x);await jz(w,{displayName:b.name});const y={uid:w.uid,email:w.email,name:b.name,phone:b.phone||"",role:b.role||"buyer",approved:b.role!=="vendor",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),avatar:"",address:{},loyaltyPoints:0,status:"active"};return b.role==="vendor"&&(y.businessName=b.businessName||"",y.businessDescription="",y.businessAddress="",y.businessPhone="",y.bankDetails={},y.totalSales=0,y.totalProducts=0,y.rating=0,y.reviewCount=0),await sg(ie(q,"users",w.uid),y),w}catch(w){throw console.error("Registration error:",w),w}},u=async(p,x)=>{try{const b=await wz(vs,p,x),w=await l(b.user.uid);return{...b.user,...w}}catch(b){throw console.error("Login error:",b),b}},d=async(p="buyer")=>{try{const x=new Ks,{user:b}=await Gz(vs,x);return(await Pt(ie(q,"users",b.uid))).exists()||await sg(ie(q,"users",b.uid),{uid:b.uid,email:b.email,name:b.displayName,phone:"",role:p,approved:p!=="vendor",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),avatar:b.photoURL||"",address:{},loyaltyPoints:0,status:"active"}),b}catch(x){throw console.error("Google login error:",x),x}},h=async()=>{try{await Az(vs)}catch(p){throw console.error("Logout error:",p),p}},f=async p=>{try{await O8(vs,p)}catch(x){throw console.error("Password reset error:",x),x}};T.useEffect(()=>Ez(vs,async x=>{if(x){const b=await l(x.uid);r({...x,...b}),s((b==null?void 0:b.role)||null)}else r(null),s(null);o(!1)}),[]);const g={currentUser:e,userRole:n,register:c,login:u,loginWithGoogle:d,logout:h,resetPassword:f,getUserData:l};return i.jsx(eO.Provider,{value:g,children:!a&&t})},rO=T.createContext(),wf=()=>{const t=T.useContext(rO);if(!t)throw new Error("useCart must be used within CartProvider");return t},nO=({children:t})=>{const[e,r]=T.useState([]);T.useEffect(()=>{const u=localStorage.getItem("cart");u&&r(JSON.parse(u))},[]),T.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(e))},[e]);const n=(u,d=1,h=null)=>{r(f=>f.find(p=>p.id===u.id&&JSON.stringify(p.selectedVariation)===JSON.stringify(h))?f.map(p=>p.id===u.id&&JSON.stringify(p.selectedVariation)===JSON.stringify(h)?{...p,quantity:p.quantity+d}:p):[...f,{...u,quantity:d,selectedVariation:h}])},s=(u,d=null)=>{r(h=>h.filter(f=>!(f.id===u&&JSON.stringify(f.selectedVariation)===JSON.stringify(d))))},a=(u,d,h=null)=>{r(f=>f.map(g=>g.id===u&&JSON.stringify(g.selectedVariation)===JSON.stringify(h)?{...g,quantity:Math.max(1,d)}:g))},o=()=>{r([])},l=()=>e.reduce((u,d)=>u+d.price*d.quantity,0),c=()=>e.reduce((u,d)=>u+d.quantity,0);return i.jsx(rO.Provider,{value:{cartItems:e,addToCart:n,removeFromCart:s,updateQuantity:a,clearCart:o,getCartTotal:l,getCartCount:c},children:t})},RQ=T.createContext(),sO=({children:t})=>{const[e,r]=T.useState([]);T.useEffect(()=>{const c=localStorage.getItem("wishlist");if(c)try{r(JSON.parse(c))}catch(u){console.error("Error loading wishlist:",u),r([])}},[]),T.useEffect(()=>{localStorage.setItem("wishlist",JSON.stringify(e))},[e]);const l={wishlistItems:e,addToWishlist:c=>{r(u=>u.some(h=>h.id===c.id)?u:[...u,c])},removeFromWishlist:c=>{r(u=>u.filter(d=>d.id!==c))},clearWishlist:()=>{r([])},isInWishlist:c=>e.some(u=>u.id===c),wishlistCount:e.length};return i.jsx(RQ.Provider,{value:l,children:t})},DQ=T.createContext(),MQ=({children:t})=>{const[e,r]=T.useState(()=>{const l=localStorage.getItem("comparisonItems");return l?JSON.parse(l):[]});T.useEffect(()=>{localStorage.setItem("comparisonItems",JSON.stringify(e))},[e]);const n=l=>{if(e.length>=4){alert("You can only compare up to 4 products at a time");return}if(e.find(c=>c.id===l.id)){alert("Product already in comparison");return}r([...e,l])},s=l=>{r(e.filter(c=>c.id!==l))},a=()=>{r([])},o=l=>e.some(c=>c.id===l);return i.jsx(DQ.Provider,{value:{comparisonItems:e,addToComparison:n,removeFromComparison:s,clearComparison:a,isInComparison:o,comparisonCount:e.length},children:t})};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=t=>{const e=LQ(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>T.createElement("svg",{ref:c,...FQ,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:aO("lucide",s),...!a&&!UQ(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>T.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=(t,e)=>{const r=T.forwardRef(({className:n,...s},a)=>T.createElement(VQ,{ref:a,iconNode:e,className:aO(`lucide-${$Q(C6(t))}`,`lucide-${t}`,n),...s}));return r.displayName=C6(t),r};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]],zQ=_n("bitcoin",BQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],WQ=_n("circle-check-big",qQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],KQ=_n("credit-card",HQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],YQ=_n("lock",GQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],XQ=_n("message-circle",QQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ZQ=_n("package",JQ);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tX=_n("search",eX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nX=_n("send",rX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],aX=_n("shopping-bag",sX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],oX=_n("sparkles",iX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],cX=_n("trending-up",lX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],dX=_n("wallet",uX);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fX=_n("x",hX),pX=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState([{id:1,type:"ai",text:"Hello!  I'm your AI shopping assistant. How can I help you today?",timestamp:new Date}]),[s,a]=T.useState(""),[o,l]=T.useState(!1),c=T.useRef(null),{cartItems:u}=wf(),{currentUser:d}=Le(),h=()=>{var w;(w=c.current)==null||w.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{h()},[r]);const f=[{icon:aX,text:"Recommend products",action:"recommend"},{icon:ZQ,text:"Track my order",action:"track"},{icon:tX,text:"Find deals",action:"deals"},{icon:cX,text:"Trending items",action:"trending"}],g=w=>{const y=w.toLowerCase();if(y.includes("recommend")||y.includes("suggest")||y.includes("buy"))return{text:`Based on your browsing history and preferences, I recommend checking out our trending electronics and fashion items! 

Here are some top picks:

 iPhone 17 Pro Max - 100,000
 MacBook Pro 2024 - 450,000
 Nike Air Max - 35,000

Would you like to see more details about any of these?`,suggestions:["Show iPhone details","More electronics","Fashion items"]};if(y.includes("order")||y.includes("track")||y.includes("delivery"))return{text:d?` Let me check your orders...

Your recent order #12345 is:
 Status: On the way
 Location: Lagos Distribution Center
 Expected delivery: Tomorrow, 2-5 PM

Would you like more details?`:"Please log in to track your orders. I can help you create an account if you need! ",suggestions:d?["Order details","Contact courier"]:["Sign in","Create account"]};if(y.includes("deal")||y.includes("discount")||y.includes("sale")||y.includes("offer"))return{text:` Great news! Here are today's hot deals:

 Flash Sale: Up to 50% off Electronics
 Weekend Special: Buy 2 Get 1 Free on Fashion
 New User Offer: Extra 10% off first purchase
 Free shipping on orders over 10,000

Which category interests you?`,suggestions:["Electronics deals","Fashion offers","All categories"]};if(y.includes("cart")||y.includes("checkout")){const _=(u==null?void 0:u.length)||0;return{text:_>0?`You have ${_} item${_>1?"s":""} in your cart! 

Would you like to:
 Review your cart
 Proceed to checkout
 Find similar items
 Apply discount codes`:"Your cart is empty. Let me help you find something amazing! What are you looking for today? ",suggestions:_>0?["View cart","Checkout","Apply coupon"]:["Browse products","See deals"]}}return y.includes("find")||y.includes("search")||y.includes("looking for")?{text:`I can help you find exactly what you need! 

What category are you interested in?

 Electronics
 Fashion
 Home & Living
 Beauty
 Sports
 Books

Or tell me a specific product name!`,suggestions:["Electronics","Fashion","Home & Living","Beauty"]}:y.includes("payment")||y.includes("pay")?{text:` We accept multiple payment methods:

 Paystack (Cards, Bank Transfer, USSD)
 Flutterwave (Cards, Mobile Money)
 Cryptocurrency (Bitcoin, Ethereum, USDT)

All payments are secure and encrypted. Need help with a specific payment method?`,suggestions:["Payment issues","Refund policy","Contact support"]}:y.includes("ship")||y.includes("deliver")?{text:` Shipping Information:

 We deliver nationwide
 Standard: 3-7 business days
 Express: 1-2 business days (2,500)
 Free shipping on orders over 10,000

Where are you located?`,suggestions:["Shipping cost","Delivery time","Track order"]}:y.includes("compare")?{text:` I can help you compare products!

Our comparison tool lets you:
 Compare prices
 Check specifications
 Read reviews
 See ratings

What products would you like to compare?`,suggestions:["Compare phones","Compare laptops","View comparisons"]}:y.includes("trend")||y.includes("popular")||y.includes("best seller")?{text:` Trending Now:

1. iPhone 17 Pro Max  4.9/5
2. Samsung Galaxy S25 Ultra  4.8/5
3. Sony WH-1000XM6 Headphones  4.9/5
4. Nike Air Jordan 1  4.7/5
5. MacBook Pro M4  5.0/5

These items are flying off the shelves! Want to see any of them?`,suggestions:["Show details","More trending","Add to cart"]}:y.includes("hello")||y.includes("hi")||y.includes("hey")?{text:`Hello${d?" "+d.displayName:""}! 

I'm here to help you with:
 Product recommendations
 Order tracking
 Finding deals
 Answering questions

What can I do for you today?`,suggestions:["Recommend products","Track order","Find deals"]}:y.includes("thank")||y.includes("thanks")?{text:"You're welcome!  Is there anything else I can help you with today?",suggestions:["Browse products","View cart","Track order"]}:y.includes("help")?{text:` I can assist you with:

 Product recommendations
 Order tracking
 Finding deals & discounts
 Product search
 Payment assistance
 Shipping information
 Product comparisons
 Customer support

What do you need help with?`,suggestions:["Recommend products","Track order","Find deals","Contact support"]}:{text:`I understand you're asking about "`+w+`". Let me help you with that!

Could you provide more details? Or try one of these options:`,suggestions:["Recommend products","Track order","Find deals","Contact support"]}},p=()=>{if(!s.trim())return;const w={id:r.length+1,type:"user",text:s,timestamp:new Date};n(y=>[...y,w]),a(""),l(!0),setTimeout(()=>{const y=g(s),_={id:r.length+2,type:"ai",text:y.text,suggestions:y.suggestions,timestamp:new Date};n(S=>[...S,_]),l(!1)},1e3)},x=w=>{a({recommend:"Can you recommend some products for me?",track:"I want to track my order",deals:"Show me the best deals",trending:"What are the trending items?"}[w]||"")},b=w=>{a(w),p()};return i.jsxs(i.Fragment,{children:[!t&&i.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50 animate-pulse",children:i.jsx(XQ,{className:"w-6 h-6"})}),t&&i.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl flex flex-col z-50 border border-gray-200",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:i.jsx(oX,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"AI Shopping Assistant"}),i.jsx("p",{className:"text-xs opacity-90",children:"Online  Always here to help"})]})]}),i.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-2 rounded-full transition",children:i.jsx(fX,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-3 bg-gray-50 border-b grid grid-cols-2 gap-2",children:f.map((w,y)=>i.jsxs("button",{onClick:()=>x(w.action),className:"flex items-center gap-2 p-2 bg-white rounded-lg hover:bg-blue-50 transition text-sm",children:[i.jsx(w.icon,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-gray-700",children:w.text})]},y))}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(w=>i.jsx("div",{className:`flex ${w.type==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] rounded-2xl p-3 ${w.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-line",children:w.text}),w.suggestions&&w.type==="ai"&&i.jsx("div",{className:"mt-3 space-y-2",children:w.suggestions.map((y,_)=>i.jsx("button",{onClick:()=>b(y),className:"block w-full text-left text-xs bg-white text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition",children:y},_))}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:w.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id)),o&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-gray-100 rounded-2xl p-3",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),i.jsx("div",{ref:c})]}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:s,onChange:w=>a(w.target.value),onKeyPress:w=>w.key==="Enter"&&p(),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{onClick:p,disabled:!s.trim(),className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:i.jsx(nX,{className:"w-5 h-5"})})]})})]})]})},mX=()=>{const[t,e]=T.useState(""),[r,n]=T.useState(""),[s,a]=T.useState(!1),[o,l]=T.useState(""),{login:c}=Le(),u=Jt(),d=async h=>{h.preventDefault(),l(""),a(!0);try{const f=await c(t,r);f.role==="admin"?u("/admin"):f.role==="vendor"?u("/vendor"):u("/buyer")}catch(f){l(f.message||"Failed to login. Please check your credentials.")}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 px-4 py-12",children:i.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal Logo",className:"mx-auto h-16 w-auto mb-4"}),i.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Welcome Back"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Sign in to Abu Mafhal Marketplace"})]}),o&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:o})}),i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:t,onChange:h=>e(h.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),i.jsx("input",{type:"password",value:r,onChange:h=>n(h.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Remember me"})]}),i.jsx(he,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Forgot password?"})]}),i.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?"Signing in...":"Sign In"})]}),i.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",i.jsx(he,{to:"/register",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 font-medium",children:"Create account"})]})]})})},gX={orderConfirmation:t=>({subject:`Order Confirmation - #${t.id.substring(0,8).toUpperCase()}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #f97316 0%, #dc2626 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .order-details { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; }
          .item { border-bottom: 1px solid #e5e7eb; padding: 15px 0; }
          .total { font-size: 24px; font-weight: bold; color: #f97316; margin-top: 20px; }
          .button { background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
          .footer { text-align: center; color: #6b7280; padding: 20px; font-size: 14px; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Order Confirmed!</h1>
            <p>Thank you for your order</p>
          </div>
          <div class="content">
            <p>Hi ${t.customerName},</p>
            <p>Your order has been confirmed and is being processed.</p>
            
            <div class="order-details">
              <h2>Order #${t.id.substring(0,8).toUpperCase()}</h2>
              <p><strong>Order Date:</strong> ${new Date(t.createdAt).toLocaleDateString()}</p>
              
              <h3>Items:</h3>
              ${t.items.map(e=>`
                <div class="item">
                  <strong>${e.productName}</strong><br>
                  Quantity: ${e.quantity}  ${e.price.toLocaleString()}<br>
                  Subtotal: ${(e.quantity*e.price).toLocaleString()}
                </div>
              `).join("")}
              
              <div style="margin-top: 20px;">
                <p><strong>Subtotal:</strong> ${t.subtotal.toLocaleString()}</p>
                <p><strong>Shipping:</strong> ${t.shippingFee.toLocaleString()}</p>
                ${t.discount>0?`<p><strong>Discount:</strong> -${t.discount.toLocaleString()}</p>`:""}
                <p class="total">Total: ${t.total.toLocaleString()}</p>
              </div>
              
              <h3>Shipping Address:</h3>
              <p>
                ${t.shippingAddress.address}<br>
                ${t.shippingAddress.city}, ${t.shippingAddress.state}<br>
                ${t.customerPhone}
              </p>
            </div>
            
            <center>
              <a href="${window.location.origin}/buyer/orders/track/${t.id}" class="button">Track Your Order</a>
            </center>
          </div>
          <div class="footer">
            <p>Abu Mafhal Marketplace</p>
            <p>If you have any questions, contact us at support@abumafhal.com</p>
          </div>
        </div>
      </body>
      </html>
    `}),orderShipped:t=>({subject:`Your Order Has Shipped - #${t.id.substring(0,8).toUpperCase()}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .tracking-box { background: white; padding: 20px; border-radius: 8px; border: 2px solid #3b82f6; margin: 20px 0; }
          .tracking-number { font-size: 24px; font-weight: bold; color: #3b82f6; font-family: monospace; }
          .button { background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Your Order is on the Way!</h1>
          </div>
          <div class="content">
            <p>Hi ${t.customerName},</p>
            <p>Great news! Your order has been shipped and is on its way to you.</p>
            
            <div class="tracking-box">
              <h3>Tracking Information</h3>
              <p><strong>Tracking Number:</strong></p>
              <p class="tracking-number">${t.trackingNumber}</p>
              <p><strong>Carrier:</strong> ${t.carrier}</p>
              ${t.estimatedDelivery?`<p><strong>Estimated Delivery:</strong> ${new Date(t.estimatedDelivery).toLocaleDateString()}</p>`:""}
            </div>
            
            <center>
              <a href="${window.location.origin}/buyer/orders/track/${t.id}" class="button">Track Package</a>
            </center>
          </div>
        </div>
      </body>
      </html>
    `}),orderDelivered:t=>({subject:`Order Delivered - #${t.id.substring(0,8).toUpperCase()}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .button { background: #10b981; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Order Delivered!</h1>
          </div>
          <div class="content">
            <p>Hi ${t.customerName},</p>
            <p>Your order has been successfully delivered. We hope you love your purchase!</p>
            
            <p>Order #${t.id.substring(0,8).toUpperCase()}</p>
            
            <center>
              <a href="${window.location.origin}/buyer/reviews?orderId=${t.id}" class="button">Write a Review</a>
            </center>
            
            <p style="margin-top: 30px;">Thank you for shopping with Abu Mafhal!</p>
          </div>
        </div>
      </body>
      </html>
    `}),welcomeEmail:t=>({subject:"Welcome to Abu Mafhal Marketplace!",html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #f97316 0%, #dc2626 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .feature { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; }
          .button { background: #f97316; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Welcome to Abu Mafhal!</h1>
            <p>Your journey starts here</p>
          </div>
          <div class="content">
            <p>Hi ${t.name},</p>
            <p>Welcome to Abu Mafhal Marketplace! We're excited to have you join our community.</p>
            
            <h3>What you can do:</h3>
            <div class="feature">
              <strong> Shop Thousands of Products</strong>
              <p>Discover amazing deals from verified vendors</p>
            </div>
            <div class="feature">
              <strong> Flash Sales & Discounts</strong>
              <p>Get exclusive deals and limited-time offers</p>
            </div>
            <div class="feature">
              <strong> Earn Rewards</strong>
              <p>Refer friends and earn 500 per referral</p>
            </div>
            <div class="feature">
              <strong> Secure Payments</strong>
              <p>Multiple payment options for your convenience</p>
            </div>
            
            <center>
              <a href="${window.location.origin}/shop" class="button">Start Shopping</a>
            </center>
          </div>
        </div>
      </body>
      </html>
    `}),vendorNewOrder:(t,e)=>({subject:`New Order Received - #${t.id.substring(0,8).toUpperCase()}`,html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .button { background: #8b5cf6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> New Order!</h1>
          </div>
          <div class="content">
            <p>Hi ${e},</p>
            <p>You have received a new order!</p>
            
            <p><strong>Order #${t.id.substring(0,8).toUpperCase()}</strong></p>
            <p><strong>Customer:</strong> ${t.customerName}</p>
            <p><strong>Total:</strong> ${t.total.toLocaleString()}</p>
            <p><strong>Items:</strong> ${t.items.length}</p>
            
            <center>
              <a href="${window.location.origin}/vendor/orders" class="button">View Order</a>
            </center>
          </div>
        </div>
      </body>
      </html>
    `}),passwordReset:t=>({subject:"Reset Your Password - Abu Mafhal",html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .button { background: #dc2626; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 20px 0; }
          .warning { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>Reset Your Password</h1>
          </div>
          <div class="content">
            <p>You requested to reset your password.</p>
            <p>Click the button below to reset it. This link will expire in 1 hour.</p>
            
            <center>
              <a href="${t}" class="button">Reset Password</a>
            </center>
            
            <div class="warning">
              <strong> Security Notice</strong><br>
              If you didn't request this, please ignore this email and your password will remain unchanged.
            </div>
          </div>
        </div>
      </body>
      </html>
    `}),referralSuccess:(t,e)=>({subject:" You Earned a Referral Reward!",html:`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px; text-align: center; }
          .content { background: #f9fafb; padding: 30px; }
          .reward { background: white; padding: 20px; border-radius: 8px; border: 2px solid #10b981; text-align: center; margin: 20px 0; }
          .amount { font-size: 36px; font-weight: bold; color: #10b981; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Congratulations!</h1>
          </div>
          <div class="content">
            <p>Hi ${t.name},</p>
            <p>${e.name} just signed up using your referral link!</p>
            
            <div class="reward">
              <p>You've earned</p>
              <p class="amount">500</p>
              <p>This has been added to your wallet!</p>
            </div>
            
            <p>Keep sharing your link to earn more rewards!</p>
          </div>
        </div>
      </body>
      </html>
    `})},yX=async(t,e,r)=>{try{const n=gX[e];if(!n){console.error("Email template not found:",e);return}const s=n(r);await Mt(ae(q,"emailQueue"),{to:t,subject:s.subject,html:s.html,status:"pending",createdAt:new Date().toISOString(),attempts:0}),console.log("Email queued successfully")}catch(n){console.error("Error queuing email:",n)}},vX=async t=>{await yX(t.email,"welcomeEmail",t)},xX=()=>{const[t]=WU(),e=t.get("ref"),[r,n]=T.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"buyer"}),[s,a]=T.useState(!1),[o,l]=T.useState(""),{register:c}=Le(),u=Jt(),d=f=>{n({...r,[f.target.name]:f.target.value})},h=async f=>{if(f.preventDefault(),l(""),a(!0),r.password!==r.confirmPassword){l("Passwords do not match"),a(!1);return}if(r.password.length<6){l("Password must be at least 6 characters"),a(!1);return}try{const g=await c(r.email,r.password,{name:r.name,phone:r.phone,role:r.role});try{await vX({name:r.name,email:r.email}),console.log("Welcome email sent successfully")}catch(p){console.error("Error sending welcome email:",p)}if(e)try{const p=Ce(ae(q,"users")),b=(await me(p)).docs.find(w=>w.id.substring(0,8).toUpperCase()===e.toUpperCase());b&&(await Mt(ae(q,"referrals"),{referrerId:b.id,referredUserId:g.user.uid,referredUserName:r.name,referredUserEmail:r.email,status:"pending",createdAt:new Date().toISOString()}),console.log("Referral recorded successfully"))}catch(p){console.error("Error processing referral:",p)}r.role==="vendor"?u("/vendor-application"):u("/buyer")}catch(g){l(g.message||"Failed to create account")}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 px-4 py-12",children:i.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal Logo",className:"mx-auto h-16 w-auto mb-4"}),i.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Create Account"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Join Abu Mafhal Marketplace"}),e&&i.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:" You've been referred! You'll get bonus rewards on your first purchase."})})]}),o&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:o})}),i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",name:"name",value:r.name,onChange:d,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:d,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+234 800 000 0000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),i.jsx("input",{type:"password",name:"password",value:r.password,onChange:d,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),i.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:d,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Account Type"}),i.jsxs("select",{name:"role",value:r.role,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"buyer",children:"Buyer"}),i.jsx("option",{value:"vendor",children:"Vendor"})]}),r.role==="vendor"&&i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"You'll be redirected to complete vendor application after registration"})]}),i.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?"Creating account...":"Create Account"})]}),i.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",i.jsx(he,{to:"/login",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 font-medium",children:"Sign in"})]})]})})},bX=()=>{const[t,e]=T.useState(""),[r,n]=T.useState(!1),[s,a]=T.useState(""),[o,l]=T.useState(""),c=async u=>{u.preventDefault(),l(""),a(""),n(!0);try{await O8(vs,t),a("Password reset email sent! Check your inbox."),e("")}catch(d){l(d.message||"Failed to send reset email")}finally{n(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 px-4 py-12",children:i.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal Logo",className:"mx-auto h-16 w-auto mb-4"}),i.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Reset Password"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email to receive reset instructions"})]}),s&&i.jsx("div",{className:"mb-4 p-4 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 rounded-lg",children:i.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm",children:s})}),o&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:o})}),i.jsxs("form",{onSubmit:c,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Sending...":"Send Reset Link"})]}),i.jsxs("div",{className:"mt-6 text-center space-y-2",children:[i.jsx(he,{to:"/login",className:"block text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Back to Login"}),i.jsx(he,{to:"/register",className:"block text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:"Don't have an account? Sign up"})]})]})})},Gs={ORDER_PLACED:"order_placed",ORDER_SHIPPED:"order_shipped",ORDER_DELIVERED:"order_delivered",ORDER_CANCELLED:"order_cancelled",PRODUCT_APPROVED:"product_approved",PRODUCT_REJECTED:"product_rejected",REVIEW_RECEIVED:"review_received",LOW_STOCK:"low_stock",FLASH_SALE_STARTED:"flash_sale_started",FLASH_SALE_ENDING:"flash_sale_ending",CART_REMINDER:"cart_reminder",LOYALTY_MILESTONE:"loyalty_milestone",PAYOUT_COMPLETED:"payout_completed",NEW_MESSAGE:"new_message",VENDOR_RESPONSE:"vendor_response"},_f=async t=>{try{await Mt(ae(q,"notifications"),{...t,read:!1,createdAt:new Date().toISOString()})}catch(e){throw console.error("Error creating notification:",e),e}},wX=async(t,e,r,n,s)=>{var l,c;const o=(c={buyer:{placed:{title:" Order Placed Successfully",message:`Your order #${t.substring(0,8)} has been placed. Total: ${s.total.toLocaleString()}`,type:Gs.ORDER_PLACED,actionUrl:`/buyer/orders/${t}`},shipped:{title:" Order Shipped",message:`Your order #${t.substring(0,8)} has been shipped and is on its way!`,type:Gs.ORDER_SHIPPED,actionUrl:`/buyer/orders/${t}`},delivered:{title:" Order Delivered",message:`Your order #${t.substring(0,8)} has been delivered. Enjoy your purchase!`,type:Gs.ORDER_DELIVERED,actionUrl:`/buyer/orders/${t}`},cancelled:{title:" Order Cancelled",message:`Your order #${t.substring(0,8)} has been cancelled.`,type:Gs.ORDER_CANCELLED,actionUrl:`/buyer/orders/${t}`}},vendor:{placed:{title:" New Order Received",message:`You received a new order #${t.substring(0,8)}. Amount: ${(l=s.vendorTotal)==null?void 0:l.toLocaleString()}`,type:Gs.ORDER_PLACED,actionUrl:`/vendor/orders/${t}`}}}[r])==null?void 0:c[n];o&&await _f({userId:e,...o,metadata:{orderId:t,...s}})},_X=async(t,e,r,n)=>{await _f({userId:e,title:" Low Stock Alert",message:`"${r}" is running low on stock (${n} items remaining)`,type:Gs.LOW_STOCK,actionUrl:"/vendor/products",metadata:{productId:t,stock:n},priority:"high"})},iO=async(t,e=!1)=>{try{let r=Ce(ae(q,"notifications"),je("userId","==",t),en("createdAt","desc"),yc(50));return e&&(r=Ce(r,je("read","==",!1))),(await me(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error getting notifications:",r),[]}},oO=async t=>{try{await ke(ie(q,"notifications",t),{read:!0,readAt:new Date().toISOString()})}catch(e){console.error("Error marking notification as read:",e)}},lO=async t=>{try{const e=Ce(ae(q,"notifications"),je("userId","==",t),je("read","==",!1)),n=(await me(e)).docs.map(s=>ke(s.ref,{read:!0,readAt:new Date().toISOString()}));await Promise.all(n)}catch(e){console.error("Error marking all as read:",e)}},jX=async t=>{try{await ke(ie(q,"notifications",t),{deleted:!0})}catch(e){console.error("Error deleting notification:",e)}},kX=async t=>{try{const e=Ce(ae(q,"notifications"),je("userId","==",t),je("read","==",!1));return(await me(e)).size}catch(e){return console.error("Error getting unread count:",e),0}},NX=()=>{const{currentUser:t}=Le(),e=Jt(),[r,n]=T.useState([]),[s,a]=T.useState(0),[o,l]=T.useState(!1),[c,u]=T.useState(!1);T.useEffect(()=>{if(t){d(),h();const x=setInterval(()=>{h()},3e4);return()=>clearInterval(x)}},[t]);const d=async()=>{u(!0);try{const x=await iO(t.uid);n(x.slice(0,10))}catch(x){console.error("Error fetching notifications:",x)}finally{u(!1)}},h=async()=>{try{const x=await kX(t.uid);a(x)}catch(x){console.error("Error fetching unread count:",x)}},f=async x=>{x.read||(await oO(x.id),h()),l(!1),x.actionUrl&&e(x.actionUrl)},g=async()=>{await lO(t.uid),d(),h()},p=x=>{const b=new Date(x),y=Math.floor((new Date-b)/1e3);return y<60?"just now":y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:y<604800?`${Math.floor(y/86400)}d ago`:b.toLocaleDateString()};return t?i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:s>9?"9+":s})]}),o&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),i.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-700 z-20 max-h-[600px] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-lg",children:"Notifications"}),s>0&&i.jsx("button",{onClick:g,className:"text-xs text-blue-600 hover:underline",children:"Mark all read"})]}),i.jsx("div",{className:"overflow-y-auto flex-1",children:c?i.jsx("div",{className:"p-8 text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):r.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No notifications yet"})]}):r.map(x=>i.jsx("button",{onClick:()=>f(x),className:`w-full p-4 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition text-left ${x.read?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:i.jsxs("div",{className:"flex gap-3",children:[!x.read&&i.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm mb-1",children:x.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:x.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p(x.createdAt)})]})]})},x.id))}),r.length>0&&i.jsx("div",{className:"p-3 border-t dark:border-gray-700",children:i.jsx("button",{onClick:()=>{l(!1),e("/notifications")},className:"w-full text-center text-sm text-blue-600 hover:underline",children:"View All Notifications"})})]})]})]}):null},jf=()=>{var o;const{currentUser:t,logout:e}=Le(),{cartItems:r}=wf(),[n,s]=T.useState(!1),a=r.reduce((l,c)=>l+c.quantity,0);return i.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs(he,{to:"/",className:"flex items-center gap-3",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal",className:"h-10 w-auto"}),i.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Abu Mafhal Marketplace"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[i.jsx(he,{to:"/shop",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 font-medium",children:"Shop"}),(t==null?void 0:t.role)==="buyer"&&i.jsx(he,{to:"/buyer/loyalty",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 font-medium",children:"Rewards"}),t?i.jsxs(i.Fragment,{children:[t.role==="buyer"&&i.jsxs(he,{to:"/cart",className:"relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),a>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),t.role==="buyer"&&i.jsx(he,{to:"/buyer/wishlist",className:"p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),i.jsx(he,{to:"/messages",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600",children:"Messages"}),i.jsx(NX,{}),i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold",children:(o=t.name)==null?void 0:o.charAt(0).toUpperCase()}),i.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:t.name}),i.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all",children:[i.jsx(he,{to:`/${t.role}`,className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",children:" Dashboard"}),i.jsx(he,{to:`/${t.role}/profile`,className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:" Profile"}),t.role==="buyer"&&i.jsxs(i.Fragment,{children:[i.jsx(he,{to:"/buyer/orders",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:" My Orders"}),i.jsx(he,{to:"/buyer/loyalty",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:" Rewards"})]}),t.role==="vendor"&&i.jsxs(i.Fragment,{children:[i.jsx(he,{to:"/vendor/products",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:" My Products"}),i.jsx(he,{to:"/vendor/orders",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:" Orders"})]}),i.jsx("hr",{className:"my-1 dark:border-gray-700"}),i.jsx("button",{onClick:e,className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg",children:" Logout"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(he,{to:"/login",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 font-medium",children:"Login"}),i.jsx(he,{to:"/register",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Sign Up"})]})]}),i.jsx("button",{onClick:()=>s(!n),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:i.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),n&&i.jsxs("div",{className:"md:hidden py-4 border-t dark:border-gray-700",children:[i.jsx(he,{to:"/shop",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:"Shop"}),t?i.jsxs(i.Fragment,{children:[t.role==="buyer"&&i.jsxs(i.Fragment,{children:[i.jsxs(he,{to:"/cart",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:[" Cart ",a>0&&`(${a})`]}),i.jsx(he,{to:"/buyer/wishlist",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:" Wishlist"}),i.jsx(he,{to:"/buyer/loyalty",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:" Rewards"})]}),i.jsx(he,{to:`/${t.role}`,className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:" Dashboard"}),i.jsx(he,{to:"/notifications",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:" Notifications"}),i.jsx("button",{onClick:()=>{e(),s(!1)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:" Logout"})]}):i.jsxs(i.Fragment,{children:[i.jsx(he,{to:"/login",className:"block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>s(!1),children:"Login"}),i.jsx(he,{to:"/register",className:"block px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-center mt-2",onClick:()=>s(!1),children:"Sign Up"})]})]})]})})},kf=()=>i.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Abu Mafhal"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Nigeria's premier multi-vendor marketplace. Buy and sell with confidence."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(he,{to:"/shop",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Shop"})}),i.jsx("li",{children:i.jsx(he,{to:"/vendors",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Become a Vendor"})}),i.jsx("li",{children:i.jsx(he,{to:"/about",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"About Us"})}),i.jsx("li",{children:i.jsx(he,{to:"/contact",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Contact"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Support"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:i.jsx(he,{to:"/faq",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"FAQ"})}),i.jsx("li",{children:i.jsx(he,{to:"/shipping",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Shipping & Returns"})}),i.jsx("li",{children:i.jsx(he,{to:"/privacy",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Privacy Policy"})}),i.jsx("li",{children:i.jsx(he,{to:"/terms",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Terms of Service"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Contact Us"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("li",{children:" support@abumafhal.com"}),i.jsx("li",{children:" +234 800 123 4567"}),i.jsx("li",{children:" Lagos, Nigeria"})]}),i.jsxs("div",{className:"mt-4 flex gap-3",children:[i.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),i.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),i.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121L7.773 13.98l-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.954z"})})})]})]})]}),i.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[" ",new Date().getFullYear()," Abu Mafhal Marketplace. All rights reserved."]})})]})}),SX=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0);T.useEffect(()=>{s()},[]);const s=async()=>{try{const a=Ce(ae(q,"products"),je("status","==","approved"),yc(8)),l=(await me(a)).docs.map(c=>({id:c.id,...c.data()}));e(l)}catch(a){console.error("Error fetching products:",a)}finally{n(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(jf,{}),i.jsx("section",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 text-white py-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal Logo",className:"mx-auto h-24 w-auto mb-6"}),i.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Welcome to Abu Mafhal"}),i.jsx("p",{className:"text-xl mb-8",children:"Nigeria's Premier Multi-Vendor Marketplace"}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx(he,{to:"/shop",className:"px-8 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100 transition",children:"Start Shopping"}),i.jsx(he,{to:"/register",className:"px-8 py-3 bg-transparent border-2 border-white text-white rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition",children:"Become a Vendor"})]})]})}),i.jsx("section",{className:"py-16 px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Shop by Category"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:["Electronics","Fashion","Home","Sports","Books","Other"].map(a=>i.jsxs(he,{to:`/shop?category=${a.toLowerCase()}`,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center hover:shadow-lg transition",children:[i.jsx("div",{className:"text-4xl mb-3",children:a==="Electronics"?"":a==="Fashion"?"":a==="Home"?"":a==="Sports"?"":a==="Books"?"":""}),i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:a})]},a))})]})}),i.jsx("section",{className:"py-16 px-4 bg-white dark:bg-gray-800",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Featured Products"}),i.jsx(he,{to:"/shop",className:"text-blue-600 hover:text-blue-700 font-medium",children:"View All "})]}),r?i.jsx("div",{className:"text-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):t.length===0?i.jsx("p",{className:"text-center text-gray-500 py-12",children:"No featured products available"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(a=>{var o,l;return i.jsxs(he,{to:`/product/${a.id}`,className:"bg-gray-50 dark:bg-gray-700 rounded-lg shadow overflow-hidden hover:shadow-lg transition",children:[i.jsx("img",{src:((o=a.images)==null?void 0:o[0])||"/placeholder.png",alt:a.name,className:"w-full h-48 object-cover"}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:a.name}),i.jsxs("p",{className:"text-blue-600 font-bold text-lg",children:["",(l=a.price)==null?void 0:l.toLocaleString()]})]})]},a.id)})})]})}),i.jsx("section",{className:"py-16 px-4",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Secure Payments"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Multiple payment options including crypto"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Quality Products"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verified vendors and quality assurance"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Fast Delivery"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Quick and reliable shipping nationwide"})]})]})})}),i.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to Start Selling?"}),i.jsx("p",{className:"text-xl mb-8",children:"Join thousands of vendors on Abu Mafhal today"}),i.jsx(he,{to:"/register",className:"inline-block px-8 py-4 bg-white text-purple-600 rounded-lg font-semibold text-lg hover:bg-gray-100 transition",children:"Become a Vendor"})]})}),i.jsx(kf,{})]})},EX=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class E4 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class AX extends E4{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class T6 extends E4{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class P6 extends E4{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var E1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(E1||(E1={}));class CX{constructor(e,{headers:r={},customFetch:n,region:s=E1.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=EX(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return wB(this,arguments,void 0,function*(r,n={}){var s;let a,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:g}=n;g||(g=this.region);const p=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let x;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?x=JSON.stringify(u):x=u;let b=d;h&&(o=new AbortController,a=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:x,signal:b}).catch(j=>{throw new AX(j)}),y=w.headers.get("x-relay-error");if(y&&y==="true")throw new T6(w);if(!w.ok)throw new P6(w);let _=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield w.json():_==="application/octet-stream"||_==="application/pdf"?S=yield w.blob():_==="text/event-stream"?S=w:_==="multipart/form-data"?S=yield w.formData():S=yield w.text(),{data:S,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof P6||l instanceof T6?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var TX=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},PX=class{constructor(t){var e,r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=t.urlLengthLimit)!==null&&n!==void 0?n:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,c=null,u=a.status,d=a.statusText;if(a.ok){var h,f;if(r.method!=="HEAD"){var g;const w=await a.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=w:l=JSON.parse(w))}const x=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&b&&b.length>1&&(c=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var p;const x=await a.text();try{o=JSON.parse(x),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,d="OK")}catch{a.status===404&&x===""?(u=204,d="No Content"):o={message:x}}if(o&&r.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new TX(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let l="",c="",u="";const d=a==null?void 0:a.cause;if(d){var h,f,g,p;const w=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",y=(f=d==null?void 0:d.code)!==null&&f!==void 0?f:"";l=`${(g=a==null?void 0:a.name)!==null&&g!==void 0?g:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(p=d==null?void 0:d.name)!==null&&p!==void 0?p:"Error"}: ${w}`,y&&(l+=` (${y})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var x;l=(x=a==null?void 0:a.stack)!==null&&x!==void 0?x:""}const b=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",b>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${b} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",b>this.urlLengthLimit&&(c+=`. Your request URL is ${b} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},OX=class extends PX{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const O6=new RegExp("[,()]");var bl=class extends OX{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&O6.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&O6.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},IX=class{constructor(t,{headers:e={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new bl({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST",{url:a,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new bl({method:s,url:a,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new bl({method:o,url:l,headers:c,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var r;const n="PATCH",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new bl({method:n,url:s,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new bl({method:r,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function RX(t,e){if(dh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DX(t){var e=RX(t,"string");return dh(e)=="symbol"?e:e+""}function MX(t,e,r){return(e=DX(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function jp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(r),!0).forEach(function(n){MX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $X=class cO{constructor(e,{headers:r={},schema:n,fetch:s,timeout:a,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=o;const l=s??globalThis.fetch;a!==void 0&&a>0?this.fetch=(c,u)=>{const d=new AbortController,h=setTimeout(()=>d.abort(),a),f=u==null?void 0:u.signal;if(f){if(f.aborted)return clearTimeout(h),l(c,u);const g=()=>{clearTimeout(h),d.abort()};return f.addEventListener("abort",g,{once:!0}),l(c,jp(jp({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(h),f.removeEventListener("abort",g)})}return l(c,jp(jp({},u),{},{signal:d.signal})).finally(()=>clearTimeout(h))}:this.fetch=l}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new IX(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new cO(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;const d=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{c.searchParams.append(g,p)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new bl({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class LX{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FX="2.97.0",UX=`realtime-js/${FX}`,VX="1.0.0",uO="2.0.0",R6=uO,A1=1e4,BX=1e3,zX=100;var Va;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Va||(Va={}));var Ht;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ht||(Ht={}));var Gn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Gn||(Gn={}));var C1;(function(t){t.websocket="websocket"})(C1||(C1={}));var Zi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zi||(Zi={}));class qX{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,a;const o=e.topic,l=(s=e.ref)!==null&&s!==void 0?s:"",c=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(g),x=0;p.setUint8(x++,this.KINDS.userBroadcastPush),p.setUint8(x++,c.length),p.setUint8(x++,l.length),p.setUint8(x++,o.length),p.setUint8(x++,u.length),p.setUint8(x++,h.length),p.setUint8(x++,r),Array.from(c,w=>p.setUint8(x++,w.charCodeAt(0))),Array.from(l,w=>p.setUint8(x++,w.charCodeAt(0))),Array.from(o,w=>p.setUint8(x++,w.charCodeAt(0))),Array.from(u,w=>p.setUint8(x++,w.charCodeAt(0))),Array.from(h,w=>p.setUint8(x++,w.charCodeAt(0)));var b=new Uint8Array(g.byteLength+n.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(n),g.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,a,o,l,c]=n;return r({join_ref:s,ref:a,topic:o,event:l,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(e.slice(c,c+s));c=c+s;const d=n.decode(e.slice(c,c+a));c=c+a;const h=n.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),g=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,p={type:this.BROADCAST_EVENT,event:d,payload:g};return o>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class dO{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const D6=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=WX(o,t,e,s),a),{}):{}},WX=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?hO(a,o):T1(o)},hO=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return YX(e,r)}switch(t){case it.bool:return HX(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return KX(e);case it.json:case it.jsonb:return GX(e);case it.timestamp:return QX(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return T1(e);default:return T1(e)}},T1=t=>t,HX=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},KX=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},GX=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},YX=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>hO(e,l))}return t},QX=t=>typeof t=="string"?t.replace(" ","T"):t,fO=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class cx{constructor(e,r,n={},s=A1){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var M6;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(M6||(M6={}));class kd{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kd.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=kd.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=kd.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),p=d.filter(b=>g.indexOf(b.presence_ref)<0),x=h.filter(b=>f.indexOf(b.presence_ref)<0);p.length>0&&(l[u]=p),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $6;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($6||($6={}));var Nd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Nd||(Nd={}));var qs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class Ml{constructor(e,r={config:{}},n){var s,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cx(this,Gn.join,this.params,this.timeout),this.rejoinTimer=new dO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new kd(this),this.broadcastEndpointURL=fO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ht.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Nd.PRESENCE]&&this.bindings[Nd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(qs.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(qs.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(qs.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,w=[];for(let y=0;y<b;y++){const _=x[y],{filter:{event:S,schema:j,table:k,filter:N}}=_,E=g&&g[y];if(E&&E.event===S&&Ml.isFilterValueEqual(E.schema,j)&&Ml.isFilterValueEqual(E.table,k)&&Ml.isFilterValueEqual(E.filter,N))w.push(Object.assign(Object.assign({},_),{id:E.id}));else{this.unsubscribe(),this.state=Ht.errored,e==null||e(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(qs.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ht.errored,e==null||e(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ht.joined&&e===Nd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ht.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new cx(this,Gn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ht.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new cx(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>zX){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Gn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,x,b;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(x=g.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var p,x,b,w,y,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const S=g.id,j=(p=g.filter)===null||p===void 0?void 0:p.event;return S&&((x=r.ids)===null||x===void 0?void 0:x.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(y=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return S==="*"||S===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:x,table:b,commit_timestamp:w,type:y,errors:_}=p;f=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:w,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(p))}g.callback(f,n)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Ml.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gn.close,{},e)}_onError(e){this._on(Gn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=D6(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=D6(e.columns,e.old_record)),r}}const ux=()=>{},kp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XX=[1e3,2e3,5e3,1e4],JX=1e4,ZX=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eJ{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=A1,this.transport=null,this.heartbeatIntervalMs=kp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ux,this.ref=0,this.reconnectTimer=null,this.vsn=R6,this.logger=ux,this.conn=null,this.sendBuffer=[],this.serializer=new qX,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${C1.websocket}`,this.httpEndpoint=fO(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=LX.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Va.connecting:return Zi.Connecting;case Va.open:return Zi.Open;case Va.closing:return Zi.Closing;default:return Zi.Closed}}isConnected(){return this.connectionState()===Zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Ml(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(BX,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},kp.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Va.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Va.open||this.conn.readyState===Va.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([ZX],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:UX};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Gn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new dO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,o,l,c,u,d,h,f,g;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:A1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:kp.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:ux,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:R6,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:p=>XX[p-1]||JX,this.vsn){case VX:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(p,x)=>x(JSON.stringify(p)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(p,x)=>x(JSON.parse(p));break;case uO:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var hh=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tJ(t,e,r){const n=new URL(e,t);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function rJ(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function nJ(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:o}){const l=tJ(t.baseUrl,n,s),c=await rJ(t.auth),u=await e(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...o},body:a?JSON.stringify(a):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const g=h?f:void 0,p=g==null?void 0:g.error;throw new hh((p==null?void 0:p.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:g})}return{status:u.status,headers:u.headers,data:f}}}}function Np(t){return t.join("")}var sJ=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Np(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Np(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Np(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Np(t.namespace)}`}),!0}catch(e){if(e instanceof hh&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof hh&&r.status===409)return;throw r}}};function il(t){return t.join("")}var aJ=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${il(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof hh&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof hh&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},iJ=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=nJ({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new sJ(this.client,e),this.tableOps=new aJ(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ay=class extends Error{constructor(t,e="storage",r,n){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function iy(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Sp=class extends ay{constructor(t,e,r,n="storage"){super(t,n,e,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},pO=class extends ay{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const oJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lJ=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},P1=t=>{if(Array.isArray(t))return t.map(r=>P1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=P1(n)}),e},cJ=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function uJ(t,e){if(fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dJ(t){var e=uJ(t,"string");return fh(e)=="symbol"?e:e+""}function hJ(t,e,r){return(e=dJ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function be(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(r),!0).forEach(function(n){hJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const F6=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},fJ=async(t,e,r,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t,a=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";e(new Sp(F6(o),a,l,n))}).catch(()=>{if(n==="vectors"){const o=a+"";e(new Sp(s.statusText||`HTTP ${a} error`,a,o,n))}else{const o=a+"";e(new Sp(s.statusText||`HTTP ${a} error`,a,o,n))}});else{const o=a+"";e(new Sp(s.statusText||`HTTP ${a} error`,a,o,n))}}else e(new pO(F6(t),t,n))},pJ=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!n?be(be({},s),r):(lJ(n)?(s.headers=be({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),be(be({},s),r))};async function Lu(t,e,r,n,s,a,o){return new Promise((l,c)=>{t(r,pJ(e,n,s,a)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>fJ(u,c,n,o))})}function mO(t="storage"){return{get:async(e,r,n,s)=>Lu(e,"GET",r,n,s,void 0,t),post:async(e,r,n,s,a)=>Lu(e,"POST",r,s,a,n,t),put:async(e,r,n,s,a)=>Lu(e,"PUT",r,s,a,n,t),head:async(e,r,n,s)=>Lu(e,"HEAD",r,be(be({},n),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,r,n,s,a)=>Lu(e,"DELETE",r,s,a,n,t)}}const mJ=mO("storage"),{get:ph,post:Hn,put:O1,head:gJ,remove:A4}=mJ,un=mO("vectors");var eu=class{constructor(t,e={},r,n="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=oJ(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=be(be({},this.headers),{},{[t]:e}),this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(iy(r))return{data:null,error:r};throw r}}},yJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(iy(e))return{data:null,error:e};throw e}}};let gO;gO=Symbol.toStringTag;var vJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[gO]="BlobDownloadBuilder",this.promise=null}asStream(){return new yJ(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(iy(e))return{data:null,error:e};throw e}}};const xJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var bJ=class extends eu{constructor(t,e={},r,n){super(t,e,n,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,n){var s=this;return s.handleOperation(async()=>{let a;const o=be(be({},U6),n);let l=be(be({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=be(be({},l),n.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),h=await(t=="PUT"?O1:Hn)(s.fetch,`${s.url}/object/${d}`,a,be({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const a=s._removeEmptyFolders(t),o=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",e),s.handleOperation(async()=>{let c;const u=be({upsert:U6.upsert},n),d=be(be({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:a,fullPath:(await O1(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t);const s=be({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const a=await Hn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+a.url),l=o.searchParams.get("token");if(!l)throw new ay("No token returned by API");return{signedUrl:o.toString(),path:t,token:l}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;return n.handleOperation(async()=>await Hn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(t,e,r){var n=this;return n.handleOperation(async()=>({path:(await Hn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(t,e,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t),a=await Hn(n.fetch,`${n.url}/object/sign/${s}`,be({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${o}`)}})}async createSignedUrls(t,e,r){var n=this;return n.handleOperation(async()=>{const s=await Hn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>be(be({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${a}`):null}))})}download(t,e,r){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(t),l=()=>ph(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0},r);return new vJ(l,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>P1(await ph(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await gJ(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(iy(n)&&n instanceof pO){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await A4(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var n=this;return n.handleOperation(async()=>{const s=be(be(be({},xJ),e),{},{prefix:t||""});return await Hn(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const n=be({},t);return await Hn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const wJ="2.97.0",Nf={"X-Client-Info":`storage-js/${wJ}`};var _J=class extends eu{constructor(t,e={},r,n){const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),o=be(be({},Nf),e);super(a,o,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await ph(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await ph(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await Hn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await O1(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Hn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await A4(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},jJ=class extends eu{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=be(be({},Nf),e);super(n,s,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Hn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await ph(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await A4(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!cJ(t))throw new ay("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new iJ({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},kJ=class extends eu{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=be(be({},Nf),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await un.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await un.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},NJ=class extends eu{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=be(be({},Nf),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},SJ=class extends eu{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=be(be({},Nf),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await un.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},EJ=class extends SJ{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new AJ(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},AJ=class extends kJ{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new CJ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},CJ=class extends NJ{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,be(be({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},TJ=class extends _J{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new bJ(this.url,this.headers,t,this.fetch)}get vectors(){return new EJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new jJ(this.url+"/iceberg",this.headers,this.fetch)}};const yO="2.97.0",wl=30*1e3,I1=3,dx=I1*wl,PJ="http://localhost:9999",OJ="supabase.auth.token",IJ={"X-Client-Info":`gotrue-js/${yO}`},R1="X-Supabase-Api-Version",vO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RJ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DJ=10*60*1e3;class mh extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ge(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MJ extends mh{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function $J(t){return ge(t)&&t.name==="AuthApiError"}class eo extends mh{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ea extends mh{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class nn extends Ea{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hx(t){return ge(t)&&t.name==="AuthSessionMissingError"}class ol extends Ea{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ep extends Ea{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ap extends Ea{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LJ(t){return ge(t)&&t.name==="AuthImplicitGrantRedirectError"}class V6 extends Ea{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FJ extends Ea{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class D1 extends Ea{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function fx(t){return ge(t)&&t.name==="AuthRetryableFetchError"}class B6 extends Ea{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class M1 extends Ea{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const og="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),z6=` 	
\r=`.split(""),UJ=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<z6.length;e+=1)t[z6[e].charCodeAt(0)]=-2;for(let e=0;e<og.length;e+=1)t[og[e].charCodeAt(0)]=e;return t})();function q6(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(og[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(og[n]),e.queuedBits-=6}}function xO(t,e,r){const n=UJ[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function W6(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{zJ(o,n,r)};for(let o=0;o<t.length;o+=1)xO(t.charCodeAt(o),s,a);return e.join("")}function VJ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function BJ(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}VJ(n,e)}}function zJ(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Jl(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)xO(t.charCodeAt(s),r,n);return new Uint8Array(e)}function qJ(t){const e=[];return BJ(t,r=>e.push(r)),new Uint8Array(e)}function lo(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>q6(s,r,n)),q6(null,r,n),e.join("")}function WJ(t){return Math.round(Date.now()/1e3)+t}function HJ(){return Symbol("auth-callback")}const lr=()=>typeof window<"u"&&typeof document<"u",Fi={tested:!1,writable:!1},bO=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fi.tested)return Fi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fi.tested=!0,Fi.writable=!0}catch{Fi.tested=!0,Fi.writable=!1}return Fi.writable};function KJ(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const wO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GJ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_l=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ui=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},or=async(t,e)=>{await t.removeItem(e)};class oy{constructor(){this.promise=new oy.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}oy.promiseConstructor=Promise;function Cp(t){const e=t.split(".");if(e.length!==3)throw new M1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!RJ.test(e[n]))throw new M1("JWT not in base64url format");return{header:JSON.parse(W6(e[0])),payload:JSON.parse(W6(e[1])),signature:Jl(e[2]),raw:{header:e[0],payload:e[1]}}}async function YJ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QJ(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function XJ(t){return("0"+t.toString(16)).substr(-2)}function JJ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,XJ).join("")}async function ZJ(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function eZ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ZJ(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ll(t,e,r=!1){const n=JJ();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await _l(t,`${e}-code-verifier`,s);const a=await eZ(n);return[a,n===a?"plain":"s256"]}const tZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rZ(t){const e=t.headers.get(R1);if(!e||!e.match(tZ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nZ(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sZ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cl(t){if(!aZ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function px(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iZ(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function H6(t){return JSON.parse(JSON.stringify(t))}const Gi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oZ=[502,503,504];async function K6(t){var e;if(!GJ(t))throw new D1(Gi(t),0);if(oZ.includes(t.status))throw new D1(Gi(t),t.status);let r;try{r=await t.json()}catch(a){throw new eo(Gi(a),a)}let n;const s=rZ(t);if(s&&s.getTime()>=vO["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new B6(Gi(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new nn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new B6(Gi(r),t.status,r.weak_password.reasons);throw new MJ(Gi(r),t.status||500,n)}const lZ=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function _e(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[R1]||(a[R1]=vO["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await cZ(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function cZ(t,e,r,n,s,a){const o=lZ(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new D1(Gi(c),0)}if(l.ok||await K6(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await K6(c)}}function qn(t){var e;let r=null;hZ(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=WJ(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function G6(t){const e=qn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function uZ(t){return{data:t,error:null}}function dZ(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=Wo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Y6(t){return t}function hZ(t){return t.access_token&&t.refresh_token&&t.expires_in}const mx=["global","local","others"];class fZ{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=wO(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=mx[0]){if(mx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mx.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qa})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Wo(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dZ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ge(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qa})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Y6});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ge(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){cl(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qa})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){cl(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Qa})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){cl(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qa})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){cl(e.userId);try{const{data:r,error:n}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _deleteFactor(e){cl(e.userId),cl(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Y6});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ge(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}}function Q6(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ul={debug:!!(globalThis&&bO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _O extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class X6 extends _O{}async function pZ(t,e,r){ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;e>0&&setTimeout(()=>{n.abort(),ul.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new X6(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ul.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new X6(`Acquiring an exclusive Navigator LockManager lock "${t}" timed out waiting ${e}ms`):s}}function mZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jO(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function gZ(t){return parseInt(t,16)}function yZ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function vZ(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=jO(t.address),p=d?`${d}://${n}`:n,x=t.statement?`${t.statement}
`:"",b=`${p} wants you to sign in with your Ethereum account:
${g}

${x}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);y+=`
- ${_}`}w+=y}return`${b}
${w}`}class Ft extends Error{constructor({message:e,code:r,cause:n,name:s}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class lg extends Ft{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function xZ({error:t,options:e}){var r,n,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ft({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(kO(o)){if(a.rp.id!==o)return new Ft({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function bZ({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ft({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(kO(n)){if(r.rpId!==n)return new Ft({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class wZ{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _Z=new wZ;function jZ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Wo(t,["challenge","user","excludeCredentials"]),a=Jl(e).buffer,o=Object.assign(Object.assign({},r),{id:Jl(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Jl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function kZ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Wo(t,["challenge","allowCredentials"]),s=Jl(e).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Jl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function NZ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:lo(new Uint8Array(t.response.attestationObject)),clientDataJSON:lo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SZ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:lo(new Uint8Array(s.authenticatorData)),clientDataJSON:lo(new Uint8Array(s.clientDataJSON)),signature:lo(new Uint8Array(s.signature)),userHandle:s.userHandle?lo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kO(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function J6(){var t,e;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function EZ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lg("Browser returned unexpected credential type",e)}:{data:null,error:new lg("Empty credential response",e)}}catch(e){return{data:null,error:xZ({error:e,options:t})}}}async function AZ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lg("Browser returned unexpected credential type",e)}:{data:null,error:new lg("Empty credential response",e)}}catch(e){return{data:null,error:bZ({error:e,options:t})}}}const CZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},TZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cg(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const l=n[a];e(l)?n[a]=cg(l,o):n[a]=cg(o)}else n[a]=o}return n}function PZ(t,e){return cg(CZ,t,e||{})}function OZ(t,e){return cg(TZ,t,e||{})}class IZ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},a){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:c};const u=s??_Z.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const h=n;if(h)d.name=`${d.id}:${h}`;else{const g=(await this.client.getUser()).data.user,p=((o=g==null?void 0:g.user_metadata)===null||o===void 0?void 0:o.name)||(g==null?void 0:g.email)||(g==null?void 0:g.id)||"User";d.name=`${d.id}:${p}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=PZ(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await EZ({publicKey:d,signal:u});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=OZ(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await AZ(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(l){return ge(l)?{data:null,error:l}:{data:null,error:new eo("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new mh("rpId is required for WebAuthn authentication")};try{if(!J6())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return ge(o)?{data:null,error:o}:{data:null,error:new eo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new mh("rpId is required for WebAuthn registration")};try{if(!J6())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ge(o)?{data:null,error:o}:{data:null,error:new eo("Unexpected error in register",o)}}}}mZ();const RZ={url:PJ,storageKey:OJ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IJ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Z6(t,e,r){return await r()}const dl={};class gh{get jwks(){var e,r;return(r=(e=dl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){dl[this.storageKey]=Object.assign(Object.assign({},dl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=dl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){dl[this.storageKey]=Object.assign(Object.assign({},dl[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},RZ),e);if(this.storageKey=a.storageKey,this.instanceID=(r=gh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,gh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&lr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new fZ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=wO(a.fetch),this.lock=a.lock||Z6,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&lr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=pZ:this.lock=Z6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IZ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:bO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Q6(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Q6(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}a.skipAutoInitialize||this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yO}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(lr()&&(r=KJ(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),lr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),LJ(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ge(r)?this._returnResult({error:r}):this._returnResult({error:new eo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:qn}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await ll(this.storage,this.storageKey)),a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:p},xform:qn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:qn})}else throw new Ep("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await or(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:G6})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:G6})}else throw new Ep("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new ol;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,a,o,l,c,u,d,h,f;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:x,wallet:b,statement:w,options:y}=e;let _;if(lr())if(typeof b=="object")_=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")_=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const S=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),j=await _.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=jO(j[0]);let N=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const A=await _.request({method:"eth_chainId"});N=gZ(A)}const E={domain:S.host,address:k,statement:w,uri:S.href,version:"1",chainId:N,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=vZ(E),p=await _.request({method:"personal_sign",params:[yZ(g),k]})}try{const{data:x,error:b}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:p},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:qn});if(b)throw b;if(!x||!x.session||!x.user){const w=new ol;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(ge(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var r,n,s,a,o,l,c,u,d,h,f,g;let p,x;if("message"in e)p=e.message,x=e.signature;else{const{chain:b,wallet:w,statement:y,options:_}=e;let S;if(lr())if(typeof w=="object")S=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))S=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const k=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let N;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")N=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)N=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)p=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const k=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:b,error:w}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:lo(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:qn});if(w)throw w;if(!b||!b.session||!b.user){const y=new ol;return this._returnResult({data:{user:null,session:null},error:y})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(ge(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await Ui(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new FJ;const{data:a,error:o}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qn});if(await or(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new ol;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new ol;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ll(this.storage,this.storageKey));const{error:h}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ep("You must provide either an email or phone number.")}catch(l){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:qn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ll(this.storage,this.storageKey));const u=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:uZ});return!((a=u.data)===null||a===void 0)&&a.url&&lr()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new nn;const{error:s}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ge(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Ep("You must provide either an email or phone number and a type")}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ui(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<dx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Ui(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=px()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=iZ(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qa}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Qa})})}catch(r){if(ge(r))return hx(r)&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new nn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ll(this.storage,this.storageKey));const{data:u,error:d}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qa});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nn;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Cp(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(ge(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new nn;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!lr())throw new Ap("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ap(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new V6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ap("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new V6("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Ap("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=wl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:x,error:b}=await this._getUser(a);if(b)throw b;const w={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(n){if(ge(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ui(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a&&!hx(a))return this._returnResult({error:a});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!($J(l)&&(l.status===404||l.status===401||l.status===403)||hx(l)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=HJ(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ll(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return lr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ge(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=e,h=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qn}),{data:f,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ol}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(s){if(await or(this.storage,`${this.storageKey}-code-verifier`),ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await QJ(async s=>(s>0&&await YJ(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qn})),(s,a)=>{const o=200*Math.pow(2,s);return a&&fx(a)&&Date.now()+o-n<wl})}catch(n){if(this._debug(r,"error",n),ge(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),lr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ui(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ui(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await _l(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:px()}else if(s&&!s.user&&!s.user){const o=await Ui(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await or(this.storage,this.storageKey+"-user"),await _l(this.storage,this.storageKey,s)):s.user=px()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<dx;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${dx}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new oy;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new nn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),ge(a)){const o={data:null,error:a};return fx(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await or(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await _l(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=H6(s);await _l(this.storage,this.storageKey,a)}else{const s=H6(r);await _l(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await or(this.storage,this.storageKey),await or(this.storage,this.storageKey+"-code-verifier"),await or(this.storage,this.storageKey+"-user"),this.userStorage&&await or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/wl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wl}ms, refresh threshold is ${I1} ticks`),s<=I1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _O)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await ll(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?NZ(e.webauthn.credential_response):SZ(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:jZ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,n,s,a;if(e)try{const{payload:g}=Cp(e);let p=null;g.aal&&(p=g.aal);let x=p;const{data:{user:b},error:w}=await this.getUser(e);if(w)return this._returnResult({data:null,error:w});((n=(r=b==null?void 0:b.factors)===null||r===void 0?void 0:r.filter(S=>S.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const _=g.amr||[];return{data:{currentLevel:p,nextLevel:x,currentAuthenticationMethods:_},error:null}}catch(g){if(ge(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Cp(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((a=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const f=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new nn})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new nn});const o=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new nn});const o=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new nn})})}catch(e){if(ge(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new nn})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+DJ>s)return n;const{data:a,error:o}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:p}=await this.getSession();if(p||!g.session)return this._returnResult({data:null,error:p});n=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=Cp(n);r!=null&&r.allowExpired||nZ(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const d=sZ(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,qJ(`${l}.${c}`)))throw new M1("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}}gh.nextInstanceID={};const DZ=gh,MZ="2.97.0";let od="";typeof Deno<"u"?od="deno":typeof document<"u"?od="web":typeof navigator<"u"&&navigator.product==="ReactNative"?od="react-native":od="node";const $Z={"X-Client-Info":`supabase-js-${od}/${MZ}`},LZ={headers:$Z},FZ={schema:"public"},UZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VZ={};function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function BZ(t,e){if(yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zZ(t){var e=BZ(t,"string");return yh(e)=="symbol"?e:e+""}function qZ(t,e,r){return(e=zZ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Et(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eS(Object(r),!0).forEach(function(n){qZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const WZ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HZ=()=>Headers,KZ=(t,e,r)=>{const n=WZ(r),s=HZ();return async(a,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Et(Et({},o),{},{headers:u}))}};function GZ(t){return t.endsWith("/")?t:t+"/"}function YZ(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Et(Et({},c),s),auth:Et(Et({},u),a),realtime:Et(Et({},d),o),storage:{},global:Et(Et(Et({},h),l),{},{headers:Et(Et({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function QZ(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(GZ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var XZ=class extends DZ{constructor(t){super(t)}},JZ=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const a=QZ(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:FZ,realtime:VZ,auth:Et(Et({},UZ),{},{storageKey:o}),global:LZ},c=YZ(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=KZ(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Et({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new $X(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new TJ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new CX(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XZ({url:this.authUrl.href,headers:Et(Et({},f),d),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new eJ(this.realtimeUrl.href,Et(Et({},t),{},{params:Et(Et({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ZZ=(t,e,r)=>new JZ(t,e,r);function eee(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}eee()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tee="https://ejqymvjrfqqljzjlwcin.supabase.co",ree="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqcXltdmpyZnFxbGp6amx3Y2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNzIxNTAsImV4cCI6MjA4MTY0ODE1MH0.CcY21LL1wyeQQJU3ZIQ9isLAjhm05Bjg5BrsNII1yng",oa=ZZ(tee,ree),nee=()=>{var y,_,S;const{currentUser:t,logout:e}=useAuth(),r=useNavigate(),[n,s]=useState([]),[a,o]=useState([]),[l,c]=useState(!0);useEffect(()=>{u(),d(),t&&h();const j=setInterval(()=>{setCurrentBanner(k=>(k+1)%banners.length)},5e3);return()=>clearInterval(j)},[t]);const u=async()=>{try{const{data:j,error:k}=await oa.from("products").select("*").eq("status","approved");if(k)throw k;const N=(j||[]).map(E=>({...E,createdAt:E.created_at||new Date().toISOString()}));s(N)}catch(j){console.error("Error fetching products from Supabase:",j)}finally{c(!1)}},d=async()=>{try{const{data:j,error:k}=await oa.from("flash_sales").select("*").eq("active",!0);!k&&j&&o(j.filter(N=>new Date(N.end_date)>new Date))}catch(j){console.error("Error fetching flash sales from Supabase:",j)}},h=async()=>{if((t==null?void 0:t.role)==="buyer")try{const j=await getDoc(doc(db,"vendorApplications",t.uid));j.exists()&&setVendorApplicationStatus(j.data().status)}catch(j){console.error("Error checking vendor application:",j)}},f=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const j=window.SpeechRecognition||window.webkitSpeechRecognition,k=new j;k.lang="en-US",k.continuous=!1,k.interimResults=!1,k.onstart=()=>setIsRecording(!0),k.onend=()=>setIsRecording(!1),k.onresult=N=>{const E=N.results[0][0].transcript;setSearchQuery(E)},k.onerror=()=>{setIsRecording(!1),alert("Voice search error. Please try again.")},k.start()}else alert("Voice search is not supported in your browser.")},g=j=>{j.target.files[0]&&(alert("AI Image Search feature coming soon!"),j.target.value="")},p=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await e(),setShowMenu(!1),r("/login")}catch(j){console.error("Logout error:",j),alert("Failed to logout. Please try again.")}},x=n.filter(j=>{var A,P,O,I;const k=!searchQuery||((A=j.name)==null?void 0:A.toLowerCase().includes(searchQuery.toLowerCase()))||((P=j.description)==null?void 0:P.toLowerCase().includes(searchQuery.toLowerCase()))||((O=j.category)==null?void 0:O.toLowerCase().includes(searchQuery.toLowerCase())),N=selectedCategory==="all"||((I=j.category)==null?void 0:I.toLowerCase())===selectedCategory.toLowerCase(),E=j.price>=priceRange.min&&j.price<=priceRange.max;return k&&N&&E}).sort((j,k)=>{switch(sortBy){case"price-low":return(j.price||0)-(k.price||0);case"price-high":return(k.price||0)-(j.price||0);case"name":return(j.name||"").localeCompare(k.name||"");case"rating":return(k.rating||0)-(j.rating||0);case"newest":default:return new Date(k.createdAt)-new Date(j.createdAt)}}),b=j=>({pending:{text:"Pending Review",color:"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800",icon:""},processing:{text:"Processing",color:"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800",icon:""},approved:{text:"Approved",color:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800",icon:""},rejected:{text:"Rejected",color:"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",icon:""}})[j]||null,w=()=>{setSearchQuery(""),setSelectedCategory("all"),setPriceRange({min:0,max:1e6}),setSortBy("newest")};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white sticky top-0 z-50 shadow-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>setShowMenu(!showMenu),className:"text-2xl p-2 hover:bg-white/10 rounded-lg transition-colors",children:""}),i.jsxs(Link,{to:"/",className:"flex items-center gap-2",children:[i.jsx("img",{src:"/logo.png",alt:"Abu Mafhal",className:"h-8 w-auto"}),i.jsx("span",{className:"font-bold text-lg hidden sm:inline",children:"Abu Mafhal"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(NotificationBell,{}),i.jsxs(Link,{to:"/cart",className:"text-2xl p-2 relative hover:bg-white/10 rounded-lg transition-colors",children:["",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold shadow-lg",children:"0"})]})]})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("input",{type:"text",value:searchQuery,onChange:j=>setSearchQuery(j.target.value),placeholder:"Search products, categories...",className:"w-full pl-10 pr-4 py-2.5 rounded-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-white shadow-md"}),i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""})]}),i.jsx("button",{onClick:()=>{var j;return(j=fileInputRef.current)==null?void 0:j.click()},className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-full transition-colors shadow-md",title:"AI Image Search",children:""}),i.jsx("button",{onClick:f,className:`p-2.5 ${isRecording?"bg-red-500 animate-pulse":"bg-white/20 hover:bg-white/30"} rounded-full transition-colors shadow-md`,title:"Voice Search",children:""}),i.jsx("button",{onClick:()=>setShowFilters(!showFilters),className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-full transition-colors shadow-md",title:"Filters",children:""}),i.jsx("input",{ref:fileInputRef,type:"file",accept:"image/*",onChange:g,className:"hidden"})]})]})}),showMenu&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:()=>setShowMenu(!1)}),i.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-800 z-50 shadow-2xl overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500 to-red-500 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl overflow-hidden border-2 border-white/30",children:t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx("span",{children:""})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold truncate",children:(t==null?void 0:t.name)||"Guest User"}),i.jsx("p",{className:"text-sm opacity-90 truncate",children:(t==null?void 0:t.email)||"Not logged in"}),(t==null?void 0:t.role)&&i.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full mt-1 inline-block capitalize",children:t.role})]})]}),i.jsx("button",{onClick:()=>setShowMenu(!1),className:"absolute top-4 right-4 text-2xl hover:bg-white/10 w-8 h-8 rounded-full transition-colors",children:""})]}),i.jsxs("nav",{className:"p-4 space-y-2",children:[i.jsxs(Link,{to:"/",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Home"})]}),i.jsxs(Link,{to:"/shop",className:"flex items-center gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Shop"})]}),t&&i.jsxs(i.Fragment,{children:[t.role==="admin"&&i.jsxs(Link,{to:"/admin",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Admin Dashboard"})]}),t.role==="vendor"&&i.jsxs(Link,{to:"/vendor",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Vendor Dashboard"})]}),t.role==="buyer"&&i.jsxs(Link,{to:"/buyer",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"My Dashboard"})]}),i.jsxs(Link,{to:"/buyer/orders",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"My Orders"})]}),i.jsxs(Link,{to:"/buyer/wishlist",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Wishlist"})]}),i.jsxs(Link,{to:"/messages",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Messages"})]}),t.role==="buyer"&&i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2 mt-2",children:vendorApplicationStatus?i.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Vendor Application"})]}),i.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 border ${(y=b(vendorApplicationStatus))==null?void 0:y.color}`,children:[i.jsx("span",{children:(_=b(vendorApplicationStatus))==null?void 0:_.icon}),i.jsx("span",{children:(S=b(vendorApplicationStatus))==null?void 0:S.text})]}),vendorApplicationStatus==="rejected"&&i.jsx(Link,{to:"/vendor-application",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline block mt-2",onClick:()=>setShowMenu(!1),children:"Reapply Now"})]}):i.jsxs(Link,{to:"/vendor-application",className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors border border-green-200 dark:border-green-800",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-400 block",children:"Become a Vendor"}),i.jsx("span",{className:"text-xs text-green-600 dark:text-green-500",children:"Start selling on our platform"})]})]})})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2 mt-2",children:[i.jsxs(Link,{to:"/about",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"About Us"})]}),i.jsxs(Link,{to:"/contact",className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium",children:"Contact"})]})]})]}),i.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:t?i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Logout"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Link,{to:"/login",className:"w-full flex items-center justify-center gap-2 p-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Login"})]}),i.jsxs(Link,{to:"/register",className:"w-full flex items-center justify-center gap-2 p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",onClick:()=>setShowMenu(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Register"})]})]})})]})]}),showFilters&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:()=>setShowFilters(!1),children:i.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-800 p-6 overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Filters & Sort"}),i.jsx("button",{onClick:()=>setShowFilters(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full transition-colors",children:""})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Sort By"}),i.jsxs("select",{value:sortBy,onChange:j=>setSortBy(j.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"price-low",children:"Price: Low to High"}),i.jsx("option",{value:"price-high",children:"Price: High to Low"}),i.jsx("option",{value:"name",children:"Name A-Z"}),i.jsx("option",{value:"rating",children:"Highest Rated"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Price Range"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"range",min:"0",max:"1000000",step:"10000",value:priceRange.max,onChange:j=>setPriceRange({...priceRange,max:parseInt(j.target.value)}),className:"w-full accent-orange-500"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("span",{children:"0"}),i.jsxs("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:["",priceRange.max.toLocaleString()]}),i.jsx("span",{children:"1M"})]})]})]}),i.jsx("button",{onClick:w,className:"w-full p-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Reset All Filters"})]})]})}),i.jsxs("div",{className:"relative h-40 md:h-48 overflow-hidden bg-gray-200 dark:bg-gray-800",children:[banners.map((j,k)=>i.jsx(Link,{to:j.link,className:`absolute inset-0 transition-opacity duration-1000 ${k===currentBanner?"opacity-100":"opacity-0"}`,children:i.jsx("img",{src:j.image,alt:`Banner ${k+1}`,className:"w-full h-full object-cover"})},j.id)),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:banners.map((j,k)=>i.jsx("button",{onClick:()=>setCurrentBanner(k),className:`h-2 rounded-full transition-all ${k===currentBanner?"bg-orange-500 w-8":"bg-white/50 w-2 hover:bg-white/80"}`},k))})]}),a.length>0&&i.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"text-red-600",children:" Flash Sales"}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Limited Time Offers"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:a.map(j=>i.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-pink-600 text-white rounded-lg p-6 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:j.title}),i.jsx("p",{className:"text-sm opacity-90 mb-3",children:j.description}),i.jsx("div",{className:"bg-white/20 rounded-lg p-3 mb-3",children:i.jsxs("p",{className:"text-4xl font-bold text-center",children:[j.discountPercentage,"% OFF"]})}),i.jsxs("p",{className:"text-sm mb-2",children:[" Only ",j.totalStock-(j.soldCount||0)," items left!"]}),i.jsx(Link,{to:`/flash-sale/${j.id}`,className:"block mt-3 bg-white text-red-600 text-center py-2 rounded-lg font-bold hover:bg-gray-100 transition",children:"Shop Now "})]},j.id))})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 overflow-x-auto border-b border-gray-200 dark:border-gray-700 shadow-sm",children:i.jsx("div",{className:"flex gap-2 min-w-max",children:categories.map(j=>i.jsx("button",{onClick:()=>setSelectedCategory(j.toLowerCase()),className:`px-4 py-2 rounded-full whitespace-nowrap font-medium transition-all ${selectedCategory===j.toLowerCase()?"bg-orange-500 text-white shadow-lg scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:j},j))})}),i.jsxs("div",{className:"max-w-7xl mx-auto p-4 pb-24",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[x.length," ",x.length===1?"product":"products"," found"]}),searchQuery&&i.jsx("button",{onClick:()=>setSearchQuery(""),className:"text-sm text-orange-500 hover:text-orange-600 font-medium flex items-center gap-1",children:"Clear search "})]}),l?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading amazing products..."})]}):x.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-2",children:"No products found"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4",children:searchQuery?`No results for "${searchQuery}". Try different keywords.`:"Try adjusting your search or filters"}),i.jsx("button",{onClick:w,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors",children:"Reset All Filters"})]}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:x.map(j=>i.jsx(ProductCard,{product:j},j.id))})]}),!l&&x.length>0&&i.jsx("div",{className:"mt-12",children:i.jsx(AIRecommendations,{})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 shadow-lg",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"flex justify-around py-2",children:[i.jsxs(Link,{to:"/shop",className:"flex flex-col items-center text-orange-500 py-2 px-3 transition-colors",children:[i.jsx("span",{className:"text-2xl mb-1",children:""}),i.jsx("span",{className:"text-xs font-medium",children:"Shop"})]}),i.jsxs(Link,{to:"/cart",className:"flex flex-col items-center text-gray-600 dark:text-gray-400 hover:text-orange-500 py-2 px-3 transition-colors",children:[i.jsxs("span",{className:"text-2xl mb-1 relative",children:["",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:"0"})]}),i.jsx("span",{className:"text-xs font-medium",children:"Cart"})]}),i.jsxs(Link,{to:"/buyer/orders",className:"flex flex-col items-center text-gray-600 dark:text-gray-400 hover:text-orange-500 py-2 px-3 transition-colors",children:[i.jsx("span",{className:"text-2xl mb-1",children:""}),i.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),i.jsxs(Link,{to:"/buyer/wishlist",className:"flex flex-col items-center text-gray-600 dark:text-gray-400 hover:text-orange-500 py-2 px-3 transition-colors",children:[i.jsx("span",{className:"text-2xl mb-1",children:""}),i.jsx("span",{className:"text-xs font-medium",children:"Wishlist"})]}),i.jsxs(Link,{to:"/buyer/profile",className:"flex flex-col items-center text-gray-600 dark:text-gray-400 hover:text-orange-500 py-2 px-3 transition-colors",children:[i.jsx("span",{className:"text-2xl mb-1",children:""}),i.jsx("span",{className:"text-xs font-medium",children:"Account"})]})]})})})]})},see=({product:t})=>{const{currentUser:e}=Le(),r=Jt(),[n,s]=T.useState(!1),[a,o]=T.useState(null),[l,c]=T.useState(!1);T.useEffect(()=>{e&&u()},[e,t.id]);const u=async()=>{try{const h=Ce(ae(q,"wishlists"),je("userId","==",e.uid),je("productId","==",t.id)),f=await me(h);f.empty?(s(!1),o(null)):(s(!0),o(f.docs[0].id))}catch(h){console.error("Error checking wishlist:",h)}},d=async()=>{if(!e){r("/login");return}c(!0);try{if(n&&a)await ns(ie(q,"wishlists",a)),s(!1),o(null);else{const h=await Mt(ae(q,"wishlists"),{userId:e.uid,productId:t.id,createdAt:new Date().toISOString()});s(!0),o(h.id)}}catch(h){console.error("Error toggling wishlist:",h),alert("Failed to update wishlist")}finally{c(!1)}};return i.jsx("button",{onClick:d,disabled:l,className:`px-6 py-3 rounded-lg font-medium transition ${n?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,children:l?"Loading...":n?" In Wishlist":" Add to Wishlist"})},aee=async t=>{try{const e=t.map(async r=>{const n=cs(us,`reviews/${Date.now()}_${r.name}`);return await os(n,r),await ls(n)});return await Promise.all(e)}catch(e){throw console.error("Error uploading review images:",e),e}},iee=async t=>{try{const e=Ce(ae(q,"reviews"),je("productId","==",t.productId),je("userId","==",t.userId));if(!(await me(e)).empty)throw new Error("You have already reviewed this product");const n=await Mt(ae(q,"reviews"),{...t,createdAt:new Date().toISOString(),helpful:0,reported:!1,vendorResponse:null,status:"approved"});return await NO(t.productId),n.id}catch(e){throw console.error("Error adding review:",e),e}},oee=async(t,e,r,n)=>{try{await ke(ie(q,"reviews",t),{vendorResponse:{message:e,vendorId:r,vendorName:n,respondedAt:new Date().toISOString()}})}catch(s){throw console.error("Error adding vendor response:",s),s}},NO=async t=>{try{const e=Ce(ae(q,"reviews"),je("productId","==",t),je("status","==","approved")),r=await me(e);if(r.empty)return;const n=r.docs.map(o=>o.data()),s=n.reduce((o,l)=>o+l.rating,0)/n.length,a=n.length;await ke(ie(q,"products",t),{rating:parseFloat(s.toFixed(1)),reviews:a})}catch(e){console.error("Error updating product rating:",e)}},lee=async t=>{try{const e=await Pt(ie(q,"reviews",t));e.exists()&&await ke(ie(q,"reviews",t),{helpful:(e.data().helpful||0)+1})}catch(e){console.error("Error marking review helpful:",e)}},cee=async(t,e)=>{try{await ke(ie(q,"reviews",t),{reported:!0,reportReason:e,reportedAt:new Date().toISOString()})}catch(r){console.error("Error reporting review:",r)}},uee=async(t,e,r="")=>{try{await ke(ie(q,"reviews",t),{status:e,moderatorNotes:r,moderatedAt:new Date().toISOString()})}catch(n){throw console.error("Error moderating review:",n),n}},dee=async(t,e)=>{try{await ns(ie(q,"reviews",t)),await NO(e)}catch(r){throw console.error("Error deleting review:",r),r}},tS=({productId:t,vendorId:e})=>{const{currentUser:r}=Le(),[n,s]=T.useState([]),[a,o]=T.useState(!0),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,f]=T.useState({rating:5,title:"",comment:"",images:[]}),[g,p]=T.useState([]),[x,b]=T.useState("all"),[w,y]=T.useState("recent"),[_,S]=T.useState(null),[j,k]=T.useState("");T.useEffect(()=>{N(),r&&E()},[t,r]);const N=async()=>{try{const $=Ce(ae(q,"reviews"),je("productId","==",t),je("status","==","approved")),V=(await me($)).docs.map(Z=>({id:Z.id,...Z.data()}));s(V)}catch($){console.error("Error fetching reviews:",$)}finally{o(!1)}},E=async()=>{try{const $=Ce(ae(q,"orders"),je("userId","==",r.uid),je("status","in",["delivered","completed"])),V=(await me($)).docs.some(Y=>Y.data().items.some(Pe=>Pe.productId===t)),Z=Ce(ae(q,"reviews"),je("productId","==",t),je("userId","==",r.uid)),ye=await me(Z);d(V&&ye.empty)}catch($){console.error("Error checking review eligibility:",$)}},A=$=>{const U=Array.from($.target.files);if(U.length+g.length>5){alert("Maximum 5 images allowed");return}p([...g,...U])},P=$=>{p(g.filter((U,V)=>V!==$))},O=async $=>{$.preventDefault(),o(!0);try{let U=[];g.length>0&&(U=await aee(g)),await iee({productId:t,userId:r.uid,userName:r.name,userAvatar:r.avatar||null,...h,images:U,verified:!0}),alert("Review submitted successfully!"),c(!1),f({rating:5,title:"",comment:"",images:[]}),p([]),N(),d(!1)}catch(U){alert(U.message||"Failed to submit review")}finally{o(!1)}},I=async $=>{if(!j.trim()){alert("Please enter a response");return}try{await oee($,j,r.uid,r.name),alert("Response added successfully!"),S(null),k(""),N()}catch{alert("Failed to add response")}},D=async $=>{try{await lee($),N()}catch(U){console.error("Error marking helpful:",U)}},B=async $=>{const U=window.prompt("Please provide a reason for reporting this review:");if(U)try{await cee($,U),alert("Review reported. Thank you for helping us maintain quality.")}catch{alert("Failed to report review")}},z=()=>{let $=n;return x!=="all"&&($=$.filter(U=>U.rating===parseInt(x))),w==="recent"?$.sort((U,V)=>new Date(V.createdAt)-new Date(U.createdAt)):w==="helpful"?$.sort((U,V)=>(V.helpful||0)-(U.helpful||0)):w==="rating-high"?$.sort((U,V)=>V.rating-U.rating):w==="rating-low"&&$.sort((U,V)=>U.rating-V.rating),$},G=[5,4,3,2,1].map($=>({star:$,count:n.filter(U=>U.rating===$).length,percentage:n.length>0?n.filter(U=>U.rating===$).length/n.length*100:0})),Q=n.length>0?(n.reduce(($,U)=>$+U.rating,0)/n.length).toFixed(1):0,F=($,U="text-base")=>i.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(V=>i.jsx("span",{className:`${U} ${V<=$?"text-yellow-400":"text-gray-300"}`,children:""},V))}),H=(r==null?void 0:r.role)==="vendor"&&(r==null?void 0:r.uid)===e;return a?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Customer Reviews"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 pb-8 border-b",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-5xl font-bold mb-2",children:Q}),F(Math.round(Q),"text-2xl"),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Based on ",n.length," ",n.length===1?"review":"reviews"]})]}),i.jsx("div",{className:"md:col-span-2",children:G.map(({star:$,count:U,percentage:V})=>i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-sm w-12",children:[$," star"]}),i.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${V}%`}})}),i.jsx("span",{className:"text-sm w-12 text-right",children:U})]},$))})]}),r&&u&&!l&&i.jsx("button",{onClick:()=>c(!0),className:"mb-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Write a Review"}),!r&&i.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:i.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"Login to write a review"})}),l&&i.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Write Your Review"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating *"}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map($=>i.jsx("button",{type:"button",onClick:()=>f({...h,rating:$}),className:`text-4xl ${$<=h.rating?"text-yellow-400":"text-gray-300"}`,children:""},$))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Review Title *"}),i.jsx("input",{type:"text",value:h.title,onChange:$=>f({...h,title:$.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-800",placeholder:"Sum up your experience"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Review *"}),i.jsx("textarea",{value:h.comment,onChange:$=>f({...h,comment:$.target.value}),required:!0,rows:"5",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-800",placeholder:"Share your thoughts about this product..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Add Photos (Optional, max 5)"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:A,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-800"}),g.length>0&&i.jsx("div",{className:"mt-3 grid grid-cols-5 gap-2",children:g.map(($,U)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:URL.createObjectURL($),alt:`Preview ${U+1}`,className:"w-full h-20 object-cover rounded"}),i.jsx("button",{type:"button",onClick:()=>P(U),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-xs",children:""})]},U))})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:bg-gray-400",children:a?"Submitting...":"Submit Review"}),i.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg",children:"Cancel"})]})]})]}),n.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[i.jsxs("select",{value:x,onChange:$=>b($.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-800",children:[i.jsx("option",{value:"all",children:"All Ratings"}),i.jsx("option",{value:"5",children:"5 Stars"}),i.jsx("option",{value:"4",children:"4 Stars"}),i.jsx("option",{value:"3",children:"3 Stars"}),i.jsx("option",{value:"2",children:"2 Stars"}),i.jsx("option",{value:"1",children:"1 Star"})]}),i.jsxs("select",{value:w,onChange:$=>y($.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-800",children:[i.jsx("option",{value:"recent",children:"Most Recent"}),i.jsx("option",{value:"helpful",children:"Most Helpful"}),i.jsx("option",{value:"rating-high",children:"Highest Rating"}),i.jsx("option",{value:"rating-low",children:"Lowest Rating"})]})]}),i.jsxs("div",{className:"space-y-6",children:[z().map($=>{var U;return i.jsx("div",{className:"border-b pb-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xl font-bold",children:(U=$.userName)==null?void 0:U.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"font-medium",children:$.userName}),$.verified&&i.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Verified Purchase"})]}),F($.rating),i.jsx("h4",{className:"font-semibold mt-2",children:$.title}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:$.comment}),$.images&&$.images.length>0&&i.jsx("div",{className:"mt-3 flex gap-2",children:$.images.map((V,Z)=>i.jsx("img",{src:V,alt:`Review ${Z+1}`,className:"w-20 h-20 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>window.open(V,"_blank")},Z))}),i.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:new Date($.createdAt).toLocaleDateString()}),i.jsxs("button",{onClick:()=>D($.id),className:"text-gray-600 hover:text-blue-600",children:[" Helpful (",$.helpful||0,")"]}),i.jsx("button",{onClick:()=>B($.id),className:"text-gray-600 hover:text-red-600",children:"Report"}),H&&!$.vendorResponse&&i.jsx("button",{onClick:()=>S($.id),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Respond"})]}),$.vendorResponse&&i.jsxs("div",{className:"mt-4 ml-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-500",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"font-semibold text-blue-700 dark:text-blue-400",children:$.vendorResponse.vendorName}),i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-0.5 rounded",children:"Vendor"})]}),i.jsx("p",{className:"text-sm",children:$.vendorResponse.message}),i.jsx("span",{className:"text-xs text-gray-500 mt-2 block",children:new Date($.vendorResponse.respondedAt).toLocaleDateString()})]}),_===$.id&&i.jsxs("div",{className:"mt-4 ml-8",children:[i.jsx("textarea",{value:j,onChange:V=>k(V.target.value),rows:"3",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-800",placeholder:"Write your response..."}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("button",{onClick:()=>I($.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Submit Response"}),i.jsx("button",{onClick:()=>{S(null),k("")},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg text-sm",children:"Cancel"})]})]})]})]})},$.id)}),z().length===0&&i.jsx("p",{className:"text-center text-gray-500 py-10",children:"No reviews match your filters"})]})]})},hee=()=>{var b,w,y,_;const{id:t}=P0(),{addToCart:e}=wf(),[r,n]=T.useState(null),[s,a]=T.useState([]),[o,l]=T.useState(!0),[c,u]=T.useState(0),[d,h]=T.useState(1),[f,g]=T.useState({});T.useEffect(()=>{p()},[t]);const p=async()=>{try{const S=await Pt(ie(q,"products",t));if(S.exists()){const j={id:S.id,...S.data()};if(n(j),j.category){const k=Ce(ae(q,"products"),je("category","==",j.category),je("status","==","approved")),E=(await me(k)).docs.map(A=>({id:A.id,...A.data()})).filter(A=>A.id!==t).slice(0,4);a(E)}}}catch(S){console.error("Error fetching product:",S)}finally{l(!1)}},x=()=>{if(r.stock===0){alert("Product is out of stock");return}if(d>r.stock){alert(`Only ${r.stock} items available`);return}e(r,d,f),alert("Added to cart!")};return o?i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r?i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 text-sm",children:[i.jsx(he,{to:"/",className:"text-blue-600 hover:underline",children:"Home"})," > ",i.jsx(he,{to:"/shop",className:"text-blue-600 hover:underline",children:"Shop"})," > ",i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r.name})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 aspect-square bg-gray-100 dark:bg-gray-900 rounded-lg overflow-hidden",children:i.jsx("img",{src:((b=r.images)==null?void 0:b[c])||"https://via.placeholder.com/500",alt:r.name,className:"w-full h-full object-cover"})}),((w=r.images)==null?void 0:w.length)>1&&i.jsx("div",{className:"grid grid-cols-5 gap-2",children:r.images.map((S,j)=>i.jsx("button",{onClick:()=>u(j),className:`aspect-square rounded-lg overflow-hidden border-2 ${c===j?"border-blue-600":"border-gray-200 dark:border-gray-700"}`,children:i.jsx("img",{src:S,alt:`${r.name} ${j+1}`,className:"w-full h-full object-cover"})},j))})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r.name}),r.category&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Category: ",i.jsx("span",{className:"font-medium",children:r.category})]}),r.brand&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Brand: ",i.jsx("span",{className:"font-medium",children:r.brand})]}),r.rating&&i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"text-yellow-500",children:""}),i.jsx("span",{className:"font-medium",children:r.rating}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",r.reviews||0," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsxs("p",{className:"text-4xl font-bold text-orange-600",children:["",(y=r.price)==null?void 0:y.toLocaleString()]}),r.originalPrice&&r.originalPrice>r.price&&i.jsxs("p",{className:"text-xl text-gray-500 line-through",children:["",(_=r.originalPrice)==null?void 0:_.toLocaleString()]}),r.discount&&i.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:["-",r.discount,"% OFF"]})]}),i.jsx("p",{className:`text-sm mb-6 ${r.stock>10?"text-green-600":r.stock>0?"text-yellow-600":"text-red-600"}`,children:r.stock>10?"In Stock":r.stock>0?`Only ${r.stock} left in stock`:"Out of Stock"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.description})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quantity"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>h(Math.max(1,d-1)),className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"-"}),i.jsx("input",{type:"number",value:d,onChange:S=>h(Math.max(1,parseInt(S.target.value)||1)),className:"w-20 text-center px-4 py-2 border rounded-lg dark:bg-gray-700",min:"1",max:r.stock}),i.jsx("button",{onClick:()=>h(Math.min(r.stock,d+1)),className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"+"})]})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsx("button",{onClick:x,disabled:r.stock===0,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed",children:r.stock===0?"Out of Stock":"Add to Cart"}),i.jsx(see,{product:r})]}),r.shippingInfo&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:" Shipping Information"}),i.jsx("p",{className:"text-sm",children:r.shippingInfo})]}),r.returnPolicy&&i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:" Return Policy"}),i.jsx("p",{className:"text-sm",children:r.returnPolicy})]})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx(tS,{productId:t}),i.jsx(tS,{productId:t,vendorId:r.vendorId})]}),s.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Related Products"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map(S=>{var j,k;return i.jsxs(he,{to:`/product/${S.id}`,className:"bg-gray-50 dark:bg-gray-900 rounded-lg overflow-hidden hover:shadow-lg transition",children:[i.jsx("img",{src:((j=S.images)==null?void 0:j[0])||"https://via.placeholder.com/200",alt:S.name,className:"w-full h-40 object-cover"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"font-semibold text-sm line-clamp-2 mb-2",children:S.name}),i.jsxs("p",{className:"text-orange-600 font-bold",children:["",(k=S.price)==null?void 0:k.toLocaleString()]})]})]},S.id)})})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center py-20",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Product Not Found"}),i.jsx(he,{to:"/shop",className:"text-blue-600 hover:underline",children:"Back to Shop"})]})})},fee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(jf,{}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-8",children:"About Abu Mafhal"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 space-y-6",children:[i.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"Abu Mafhal is Nigeria's premier multi-vendor marketplace, connecting buyers with trusted sellers across the country."}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"We offer a secure, AI-powered platform that supports multiple payment methods including Paystack, Flutterwave, and cryptocurrency."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Our Mission"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Empowering Nigerian businesses"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Our Vision"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Leading marketplace in Africa"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Our Values"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trust, quality, innovation"})]})]})]})]}),i.jsx(kf,{})]}),pee=()=>{const[t,e]=T.useState({name:"",email:"",subject:"",message:""}),r=n=>{n.preventDefault(),alert("Message sent! We will get back to you soon."),e({name:"",email:"",subject:"",message:""})};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(jf,{}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-8",children:"Contact Us"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Get in Touch"}),i.jsxs("form",{onSubmit:r,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Your Name",value:t.name,onChange:n=>e({...t,name:n.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("input",{type:"email",placeholder:"Your Email",value:t.email,onChange:n=>e({...t,email:n.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("input",{type:"text",placeholder:"Subject",value:t.subject,onChange:n=>e({...t,subject:n.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("textarea",{placeholder:"Your Message",value:t.message,onChange:n=>e({...t,message:n.target.value}),required:!0,rows:"5",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg",children:"Send Message"})]})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[i.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),i.jsxs("div",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:" Email: support@abumafhal.com"}),i.jsx("p",{children:" Phone: +234 800 000 0000"}),i.jsx("p",{children:" Address: Lagos, Nigeria"})]})]})})]})]}),i.jsx(kf,{})]})},mee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(jf,{}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-8",children:"Terms and Conditions"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 space-y-6 text-gray-700 dark:text-gray-300",children:[i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"1. Acceptance of Terms"}),i.jsx("p",{children:"By accessing and using Abu Mafhal marketplace, you accept and agree to be bound by these terms and conditions."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"2. User Accounts"}),i.jsx("p",{children:"Users must provide accurate information when creating accounts. You are responsible for maintaining account security."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"3. Vendor Responsibilities"}),i.jsx("p",{children:"Vendors must provide accurate product descriptions, honor prices, and fulfill orders promptly."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"4. Payment Terms"}),i.jsx("p",{children:"All payments are processed securely through our payment partners. Refund policies apply as stated."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"5. Prohibited Activities"}),i.jsx("p",{children:"Users must not engage in fraud, sale of prohibited items, or any illegal activities on the platform."})]})]})]}),i.jsx(kf,{})]}),gee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(jf,{}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-8",children:"Privacy Policy"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 space-y-6 text-gray-700 dark:text-gray-300",children:[i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"1. Information We Collect"}),i.jsx("p",{children:"We collect personal information including name, email, phone number, and payment details to provide our services."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"2. How We Use Your Data"}),i.jsx("p",{children:"Your data is used to process orders, improve services, and communicate important updates."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"3. Data Security"}),i.jsx("p",{children:"We implement industry-standard security measures to protect your personal information."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"4. Third-Party Services"}),i.jsx("p",{children:"We use trusted payment processors (Paystack, Flutterwave, NowPayments) who have their own privacy policies."})]}),i.jsxs("section",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"5. Your Rights"}),i.jsx("p",{children:"You have the right to access, modify, or delete your personal data. Contact us for assistance."})]})]})]}),i.jsx(kf,{})]}),yee=()=>{const{currentUser:t}=Le(),e=Jt(),[r,n]=T.useState(!1),[s,a]=T.useState(""),[o,l]=T.useState(!1),[c,u]=T.useState({fullName:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:"",bvnNumber:"",businessName:"",businessAddress:"",businessLocation:"",ninNumber:"",cacNumber:"",businessDescription:""}),[d,h]=T.useState({businessImage:null,businessVideo:null,ninDocument:null,cacDocument:null}),[f,g]=T.useState({businessImage:null,businessVideo:null,ninDocument:null,cacDocument:null}),p=y=>{u({...c,[y.target.name]:y.target.value})},x=y=>{const{name:_,files:S}=y.target,j=S[0];if(h({...d,[_]:j}),j)if(j.type.startsWith("image/")){const k=new FileReader;k.onloadend=()=>{g({...f,[_]:k.result})},k.readAsDataURL(j)}else g({...f,[_]:j.name})},b=async(y,_)=>{if(!y)return null;const S=Date.now(),j=cs(us,`vendor-applications/${t.uid}/${_}/${S}_${y.name}`);return await os(j,y),await ls(j)},w=async y=>{y.preventDefault(),n(!0),a("");try{const _=await Pt(ie(q,"vendorApplications",t.uid));if(_.exists()&&_.data().status==="pending"){a("You already have a pending application"),n(!1);return}const[S,j,k,N]=await Promise.all([b(d.businessImage,"images"),b(d.businessVideo,"videos"),b(d.ninDocument,"documents"),b(d.cacDocument,"documents")]),E={...c,userId:t.uid,businessImageUrl:S,businessVideoUrl:j,ninDocumentUrl:k,cacDocumentUrl:N,status:"pending",submittedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await sg(ie(q,"vendorApplications",t.uid),E),l(!0),setTimeout(()=>{e("/buyer")},3e3)}catch(_){console.error("Error submitting application:",_),a(_.message||"Failed to submit application. Please try again.")}finally{n(!1)}};return o?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Application Submitted!"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your vendor application is under review. You'll be notified via email once it's processed."}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:i.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-400",children:["Status: ",i.jsx("strong",{children:"Pending Review"})]})}),i.jsx(he,{to:"/buyer",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:"Go to Dashboard"})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Become a Vendor"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fill out the form below to apply as a vendor on Abu Mafhal"})]}),s&&i.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400",children:s})}),i.jsxs("form",{onSubmit:w,className:"space-y-6",children:[i.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"fullName",value:c.fullName,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",name:"email",value:c.email,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Phone Number ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["BVN Number ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"bvnNumber",value:c.bvnNumber,onChange:p,required:!0,maxLength:"11",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["NIN Number ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"ninNumber",value:c.ninNumber,onChange:p,required:!0,maxLength:"11",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]})]}),i.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Business Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"businessName",value:c.businessName,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["CAC Number ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"cacNumber",value:c.cacNumber,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"businessAddress",value:c.businessAddress,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Location (State/City) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"businessLocation",value:c.businessLocation,onChange:p,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Description ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"businessDescription",value:c.businessDescription,onChange:p,required:!0,rows:"4",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Describe your business and what you plan to sell..."})]})]})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Required Documents"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business/Store Image ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",name:"businessImage",onChange:x,accept:"image/*",required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f.businessImage&&i.jsx("img",{src:f.businessImage,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business/Store Video (Optional)"}),i.jsx("input",{type:"file",name:"businessVideo",onChange:x,accept:"video/*",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f.businessVideo&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[" ",f.businessVideo]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["NIN Document (Image/PDF) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",name:"ninDocument",onChange:x,accept:"image/*,application/pdf",required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f.ninDocument&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[" ",f.ninDocument]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["CAC Document (Image/PDF) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",name:"cacDocument",onChange:x,accept:"image/*,application/pdf",required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f.cacDocument&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[" ",f.cacDocument]})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:r?"Submitting...":"Submit Application"}),i.jsx(he,{to:"/buyer",className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-medium transition",children:"Cancel"})]})]})]})})})},vee=()=>{const{currentUser:t}=Le(),e=Jt(),[r,n]=T.useState([]),[s,a]=T.useState("all"),[o,l]=T.useState(!0);T.useEffect(()=>{c()},[t]);const c=async()=>{try{const x=await iO(t.uid);n(x)}catch(x){console.error("Error fetching notifications:",x)}finally{l(!1)}},u=async x=>{x.read||(await oO(x.id),c()),x.actionUrl&&e(x.actionUrl)},d=async()=>{await lO(t.uid),c()},h=async(x,b)=>{b.stopPropagation(),await jX(x),c()},f=r.filter(x=>s==="unread"?!x.read:s==="read"?x.read:!0),g=x=>({order_placed:"",order_shipped:"",order_delivered:"",order_cancelled:"",product_approved:"",product_rejected:"",review_received:"",low_stock:"",flash_sale_started:"",cart_reminder:"",loyalty_milestone:"",payout_completed:"",new_message:"",vendor_response:""})[x]||"",p=x=>{const b=new Date(x),y=Math.floor((new Date-b)/1e3);return y<60?"just now":y<3600?`${Math.floor(y/60)} minutes ago`:y<86400?`${Math.floor(y/3600)} hours ago`:y<604800?`${Math.floor(y/86400)} days ago`:b.toLocaleDateString()};return o?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),r.filter(x=>!x.read).length>0&&i.jsx("button",{onClick:d,className:"text-blue-600 hover:underline text-sm",children:"Mark all as read"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6 p-2 flex gap-2",children:[i.jsxs("button",{onClick:()=>a("all"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition ${s==="all"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:["All (",r.length,")"]}),i.jsxs("button",{onClick:()=>a("unread"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition ${s==="unread"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:["Unread (",r.filter(x=>!x.read).length,")"]}),i.jsxs("button",{onClick:()=>a("read"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition ${s==="read"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:["Read (",r.filter(x=>x.read).length,")"]})]}),i.jsx("div",{className:"space-y-2",children:f.length===0?i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No notifications to show"})]}):f.map(x=>i.jsx("div",{onClick:()=>u(x),className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 cursor-pointer hover:shadow-md transition ${x.read?"":"border-l-4 border-blue-600"}`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("span",{className:"text-3xl flex-shrink-0",children:g(x.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("h3",{className:"font-semibold text-lg",children:x.title}),i.jsx("button",{onClick:b=>h(x.id,b),className:"text-gray-400 hover:text-red-600 transition",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:x.message}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:p(x.createdAt)})]}),!x.read&&i.jsx("span",{className:"w-3 h-3 bg-blue-600 rounded-full flex-shrink-0"})]})},x.id))})]})})};class xee{constructor(){this.apiKey="",this.geminiKey="AIzaSyBZTbWlzQjWrYWe7kftqEB3qdkXcXTGw4A",this.useGemini=!this.apiKey&&this.geminiKey}async getOpenAIResponse(e,r={}){var n;try{return{text:(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:`You are a helpful AI shopping assistant for Abu Mafhal Marketplace. 
              Help users with:
              - Product recommendations
              - Order tracking
              - Finding deals
              - Answering product questions
              - Shopping assistance
              
              Current context:
              - User cart items: ${((n=r.cartItems)==null?void 0:n.length)||0}
              - User logged in: ${r.isLoggedIn?"Yes":"No"}
              - User name: ${r.userName||"Guest"}
              
              Be friendly, helpful, and concise. Use emojis appropriately.`},{role:"user",content:e}],max_tokens:500,temperature:.7})})).json()).choices[0].message.content,suggestions:this.generateSuggestions(e)}}catch(s){return console.error("OpenAI API Error:",s),this.getFallbackResponse(e)}}async getGeminiResponse(e,r={}){var n;try{return{text:(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${this.geminiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`You are a helpful AI shopping assistant for Abu Mafhal Marketplace.
                
                Context:
                - Cart items: ${((n=r.cartItems)==null?void 0:n.length)||0}
                - User: ${r.userName||"Guest"}
                - Logged in: ${r.isLoggedIn?"Yes":"No"}
                
                User message: ${e}
                
                Provide a helpful, friendly response with emojis. Be concise and action-oriented.`}]}],generationConfig:{temperature:.7,maxOutputTokens:500}})})).json()).candidates[0].content.parts[0].text,suggestions:this.generateSuggestions(e)}}catch(s){return console.error("Gemini API Error:",s),this.getFallbackResponse(e)}}async getAIResponse(e,r={}){return this.useGemini&&this.geminiKey?await this.getGeminiResponse(e,r):this.apiKey?await this.getOpenAIResponse(e,r):this.getFallbackResponse(e)}getFallbackResponse(e){const r=e.toLowerCase(),n={recommend:{text:`Based on popular items, I recommend:

 iPhone 17 Pro Max - 100,000
 MacBook Pro 2024 - 450,000
 Nike Air Max - 35,000

Would you like details on any of these?`,suggestions:["Show iPhone details","More electronics","Fashion items"]},order:{text:` To track your order:
1. Go to "My Orders"
2. Enter your order number
3. View real-time status

Need help with a specific order?`,suggestions:["My Orders","Contact Support","Order History"]},deal:{text:` Current Deals:

 Flash Sale: 50% off Electronics
 Weekend Special: Buy 2 Get 1 Free
 New Users: Extra 10% off

Which interests you?`,suggestions:["Electronics deals","Fashion offers","All categories"]},cart:{text:`Let me help with your cart! You can:
 View cart items
 Apply discount codes
 Proceed to checkout
 Save for later

What would you like to do?`,suggestions:["View Cart","Apply Coupon","Checkout"]},payment:{text:` We accept:
 Paystack (Cards, Bank Transfer)
 Flutterwave (Mobile Money)
 Cryptocurrency (BTC, ETH, USDT)

All secure & encrypted!`,suggestions:["Payment Help","Refund Policy","Contact Support"]}};for(const[s,a]of Object.entries(n))if(r.includes(s))return a;return{text:`I'm here to help! 

I can assist with:
 Product recommendations
 Order tracking
 Finding deals
 Payment help
 Shipping info

What do you need?`,suggestions:["Recommend Products","Track Order","Find Deals","Help"]}}generateSuggestions(e){const r=e.toLowerCase();return r.includes("recommend")||r.includes("suggest")?["Show more","Electronics","Fashion","Home & Living"]:r.includes("order")||r.includes("track")?["Order status","Contact courier","Order history"]:r.includes("deal")||r.includes("discount")?["All deals","Electronics offers","Fashion sales"]:r.includes("cart")?["View cart","Apply coupon","Checkout"]:["Help","Products","Deals","Support"]}async getProductRecommendations(e,r={}){return{trending:[{id:1,name:"iPhone 17 Pro Max",price:1e5,category:"Electronics"},{id:2,name:"MacBook Pro M4",price:45e4,category:"Electronics"},{id:3,name:"Nike Air Jordan",price:35e3,category:"Fashion"}],personalized:[{id:4,name:"Sony WH-1000XM6",price:85e3,category:"Electronics"},{id:5,name:"Samsung Galaxy S25",price:95e3,category:"Electronics"}],deals:[{id:6,name:"iPad Pro 2024",price:18e4,discount:20,category:"Electronics"},{id:7,name:"Apple Watch Series 10",price:12e4,discount:15,category:"Electronics"}]}}async smartSearch(e,r={}){const n=e.toLowerCase(),s={query:e,filters:{},suggestions:[]};if((n.includes("cheap")||n.includes("affordable"))&&(s.filters.maxPrice=5e4),n.match(/\d+k/)){const l=parseInt(n.match(/\d+/)[0])*1e3;s.filters.maxPrice=l}return["phone","laptop","fashion","shoes","electronics"].forEach(l=>{n.includes(l)&&(s.filters.category=l)}),["apple","samsung","nike","adidas","sony"].forEach(l=>{n.includes(l)&&(s.filters.brand=l)}),s}}const gx=new xee,bee=()=>{const[t,e]=T.useState({}),[r,n]=T.useState({}),s=async()=>{n({...r,description:!0});const l=await gx.generateDescription("Samsung Galaxy S21","smartphone, 5G, high-quality camera","Electronics");e({...t,description:l}),n({...r,description:!1})},a=async()=>{n({...r,price:!0});const l=await gx.optimizePrice("Samsung Galaxy S21","Electronics","smartphone, 5G");e({...t,price:l}),n({...r,price:!1})},o=async()=>{n({...r,keywords:!0});const l=await gx.generateKeywords("Samsung Galaxy S21","Premium smartphone with advanced features","Electronics");e({...t,keywords:l}),n({...r,keywords:!1})};return i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"AI Features Test"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("button",{onClick:s,disabled:r.description,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:r.description?"Testing...":"Test Description AI"}),t.description&&i.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded",children:[i.jsx("p",{className:"font-semibold",children:"Result:"}),i.jsx("p",{className:"text-sm",children:t.description.success?t.description.description:`Error: ${t.description.error}`})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("button",{onClick:a,disabled:r.price,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:r.price?"Testing...":"Test Price AI"}),t.price&&i.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded",children:[i.jsx("p",{className:"font-semibold",children:"Result:"}),i.jsx("p",{className:"text-sm",children:t.price.success?`${t.price.price}`:`Error: ${t.price.error}`})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("button",{onClick:o,disabled:r.keywords,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:r.keywords?"Testing...":"Test Keywords AI"}),t.keywords&&i.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded",children:[i.jsx("p",{className:"font-semibold",children:"Result:"}),i.jsx("p",{className:"text-sm",children:t.keywords.success?t.keywords.keywords:`Error: ${t.keywords.error}`})]})]})]})]})};var bt=function(){return bt=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bt.apply(this,arguments)};function SO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rS(Object(r),!0).forEach(function(n){CO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ro(t){return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(t)}function EO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AO(t,e,r){return e&&nS(t.prototype,e),r&&nS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function CO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $1(t,e){if(t==null)return{};var r,n,s=function(o,l){if(o==null)return{};var c,u,d={},h=Object.keys(o);for(u=0;u<h.length;u++)c=h[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function wee(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,n){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var a,o,l=[],c=!0,u=!1;try{for(s=s.call(r);!(c=(a=s.next()).done)&&(l.push(a.value),!n||l.length!==n);c=!0);}catch(d){u=!0,o=d}finally{try{c||s.return==null||s.return()}finally{if(u)throw o}}return l}}(t,e)||TO(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _ee(t){return function(e){if(Array.isArray(e))return L1(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||TO(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function TO(t,e){if(t){if(typeof t=="string")return L1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L1(t,e):void 0}}function L1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C4={cookieTestUrl:"https://legacy-staging.paystack.co/test-iframe/start.html",publishableKey:"uFmz/uE/SDT6GupOrSEXIZXGByjQ0zFkPyc9LqKHFqnTI0WPN3JS5kQPo/j9or0TOXlqMQj2lzHn/UGsQT4XeQ==",publicKey:`-----BEGIN PUBLIC KEY-----\r
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALhZs/7hP0g0+hrqTq0hFyGVxgco0NMx\r
ZD8nPS6ihxap0yNFjzdyUuZED6P4/aK9Ezl5ajEI9pcx5/1BrEE+F3kCAwEAAQ==\r
-----END PUBLIC KEY-----`,applePayVersion:6,applePayValidateSessionPath:"applepay/validate-session/",applePayChargePath:"applepay/charge"};Tt(Tt({},C4),{},{checkoutUrl:"http://localhost:8081/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"http://localhost:8081/static/vendor/pusher.min.js"});var jee=Tt(Tt({},C4),{},{checkoutUrl:"https://checkout-studio.paystack.com/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://beta.paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"https://checkout-studio.paystack.com/static/vendor/pusher.min.js"}),Wr={production:Tt(Tt({},C4),{},{checkoutUrl:"https://checkout.paystack.com/",paymentBaseUrl:"https://standard.paystack.co/",paystackApiUrl:"https://api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"8e4b9b7ca3418bd5cdc8",pusherUrl:"https://checkout.paystack.com/static/vendor/pusher.min.js"})}.production||jee;function PO(t,e){var r=[];return Object.keys(t).forEach(function(n){var s=e?"".concat(e,"[").concat(n,"]"):n,a=t[s];r.push(a!==null&&(typeof v>"u"?"undefined":Ro(v))==="object"?PO(a,s):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(a)))}),r.join("&")}function jl(){return document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1];var t}function sS(){var t=[],e=jl();if(e){var r=Array.prototype.slice.call(e.attributes);t=Object.keys(r).filter(function(n){var s=r[n].nodeName;return s&&s.indexOf("data")>-1}).map(function(n){return r[n].nodeName})}return t}var OO=`
  <svg id="inline-button-wordmark--white" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#ffffff"/>
  </svg>
`,kee=`
<svg id="inline-button-wordmark--grey" width="166" height="16" viewBox="0 0 166 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M0.564068 6.26985L1.86515 6.10375C1.85184 5.15143 1.83489 3.71187 1.84942 3.45964C1.95955 1.67927 3.39982 0.16589 5.13056 0.0170127C5.23949 0.00839996 5.34842 0.0034784 5.45371 0.00101762C6.36645 -0.0209585 7.25272 0.313716 7.93 0.936113C8.62472 1.56238 9.07979 2.4864 9.14999 3.4055C9.16815 3.64174 9.1621 5.24002 9.1621 6.18249L10.4886 6.38305L10.4438 14.0767L5.47308 14.7657L0.519287 13.961L0.564068 6.26985ZM5.53359 5.63743L7.62016 5.95241C7.61169 4.80446 7.55965 3.12867 7.30548 2.68696C6.91939 2.0164 6.28156 1.62021 5.55901 1.60421H5.48276C4.7481 1.61406 4.10543 2.0004 3.71813 2.66727C3.44944 3.13236 3.39619 4.70972 3.3974 5.91181L5.53359 5.63743ZM22.5808 12.4378C21.8836 12.4378 21.293 12.3492 20.8089 12.172C20.372 12.0088 19.9719 11.7577 19.6325 11.4338C19.3256 11.1331 19.0833 10.7712 18.9208 10.3707C18.7637 9.95815 18.6612 9.52621 18.6158 9.08621H19.8358C19.8745 9.40119 19.9423 9.70141 20.0391 9.98686C20.136 10.2625 20.286 10.5085 20.4894 10.7251C20.6927 10.9318 20.959 11.0991 21.2882 11.2271C21.6271 11.3452 22.0579 11.4043 22.5808 11.4043C22.9197 11.4043 23.2295 11.36 23.5103 11.2714C23.8008 11.173 24.0525 11.0351 24.2655 10.858C24.4785 10.6808 24.6431 10.4692 24.7593 10.2231C24.8852 9.97701 24.9481 9.70633 24.9481 9.41103C24.9481 9.11574 24.9094 8.85982 24.8319 8.64327C24.7536 8.41559 24.6125 8.21568 24.4253 8.06745C24.196 7.88594 23.9347 7.75064 23.6555 7.6688C23.257 7.54201 22.849 7.4482 22.4355 7.38828C21.9393 7.31041 21.4491 7.19693 20.9686 7.04869C20.5808 6.92967 20.2133 6.75038 19.8794 6.51716C19.5939 6.29685 19.3607 6.01432 19.1968 5.69034C19.0418 5.35567 18.9644 4.9521 18.9644 4.47963C18.9644 4.07607 19.0467 3.70203 19.2113 3.35752C19.3759 3.00317 19.6034 2.69803 19.8939 2.44211C20.194 2.18619 20.5475 1.98441 20.9541 1.83676C21.3608 1.68911 21.811 1.61529 22.3048 1.61529C23.3505 1.61529 24.1784 1.86629 24.7884 2.36829C25.4081 2.86044 25.7711 3.57899 25.8777 4.52393H24.7448C24.6189 3.8546 24.3624 3.37721 23.9751 3.09176C23.5878 2.79646 23.031 2.64882 22.3048 2.64882C21.5883 2.64882 21.0461 2.81123 20.6782 3.13605C20.5037 3.28606 20.3648 3.47417 20.2717 3.68635C20.1787 3.89853 20.1339 4.12931 20.1408 4.36152C20.1408 4.61744 20.1698 4.84875 20.2279 5.05546C20.2957 5.25232 20.4167 5.42457 20.591 5.57222C20.775 5.71987 21.0267 5.85275 21.3463 5.97087C21.7689 6.09987 22.2012 6.19369 22.6389 6.25139C23.2198 6.33998 23.7281 6.4581 24.1639 6.60575C24.5996 6.75339 24.9675 6.94533 25.2677 7.18157C25.5678 7.4178 25.7905 7.70818 25.9358 8.05268C26.0907 8.39719 26.1681 8.82045 26.1681 9.32245C26.1681 9.76539 26.0761 10.1788 25.8922 10.5627C25.7149 10.9408 25.4627 11.2775 25.1515 11.5519C24.8319 11.8275 24.4495 12.0441 24.0041 12.2016C23.5684 12.359 23.094 12.4378 22.5808 12.4378ZM31.2066 12.4378C30.6741 12.4378 30.1803 12.3443 29.7252 12.1573C29.2906 11.9775 28.8956 11.7115 28.5633 11.3747C28.2268 11.0185 27.965 10.5966 27.7936 10.1345C27.6136 9.61796 27.5251 9.07309 27.5321 8.52515V8.40704C27.5321 7.82629 27.6193 7.29476 27.7936 6.81245C27.9679 6.3203 28.2099 5.90196 28.5198 5.55746C28.8393 5.2031 29.2169 4.93242 29.6526 4.7454C30.0883 4.54854 30.5676 4.45011 31.0905 4.45011C31.5262 4.45011 31.9473 4.52393 32.354 4.67158C32.7704 4.80938 33.1383 5.03085 33.4578 5.33599C33.7773 5.64112 34.0291 6.03977 34.213 6.53192C34.4067 7.01424 34.5035 7.5999 34.5035 8.28892V8.68756H28.7812C28.8102 9.57345 29.0281 10.2526 29.4348 10.7251C29.8414 11.1877 30.4369 11.419 31.2212 11.419C32.4121 11.419 33.085 10.9712 33.24 10.0754H34.4454C34.3099 10.8531 33.9516 11.4436 33.3707 11.8472C32.7897 12.2409 32.0684 12.4378 31.2066 12.4378ZM33.269 7.69833C33.2109 6.90104 32.9882 6.33014 32.6009 5.98563C32.2233 5.64112 31.7198 5.46887 31.0905 5.46887C30.4708 5.46887 29.9624 5.67065 29.5655 6.07422C29.1782 6.46794 28.9313 7.00932 28.8248 7.69833H33.269ZM39.3593 12.4378C38.8267 12.4378 38.3329 12.3492 37.8779 12.172C37.4401 11.9901 37.0407 11.7245 36.7014 11.3895C36.3636 11.0315 36.0973 10.6103 35.9172 10.1493C35.7268 9.63002 35.6332 9.07925 35.6412 8.52515V8.40704C35.6412 7.81645 35.738 7.28 35.9317 6.79769C36.1253 6.30553 36.3868 5.8872 36.716 5.54269C37.0548 5.19818 37.447 4.93242 37.8924 4.7454C38.3475 4.54854 38.8267 4.45011 39.3302 4.45011C39.7272 4.45011 40.1097 4.49932 40.4776 4.59775C40.8552 4.69618 41.1893 4.85367 41.4797 5.07022C41.7799 5.27693 42.0316 5.55253 42.235 5.89704C42.4383 6.24155 42.569 6.65988 42.6271 7.15204H41.4362C41.3393 6.54177 41.0924 6.10867 40.6955 5.85275C40.3082 5.59683 39.8531 5.46887 39.3302 5.46887C38.995 5.46599 38.6632 5.53649 38.3571 5.67557C38.0667 5.81338 37.8101 6.01024 37.5874 6.26616C37.3615 6.53514 37.1889 6.84598 37.0791 7.18157C36.9484 7.57626 36.8845 7.99063 36.8902 8.40704V8.52515C36.8902 9.47994 37.1178 10.2034 37.5729 10.6956C38.0376 11.1779 38.6379 11.419 39.3738 11.419C39.6449 11.419 39.9015 11.3797 40.1436 11.3009C40.6361 11.1497 41.0523 10.8113 41.3055 10.356C41.441 10.1197 41.5233 9.84413 41.5524 9.52915H42.6707C42.6338 9.9361 42.5204 10.3321 42.3366 10.6956C42.1663 11.0447 41.9293 11.3559 41.6395 11.611C41.349 11.8669 41.0101 12.0687 40.6228 12.2163C40.2355 12.364 39.8144 12.4378 39.3593 12.4378ZM46.9164 12.4378C46.5568 12.4406 46.199 12.3858 45.8562 12.2754C45.5441 12.1717 45.2605 11.9947 45.0284 11.7586C44.7829 11.4908 44.595 11.1741 44.4765 10.8284C44.3409 10.4544 44.2731 10.0016 44.2731 9.47009V4.58299H45.4786V9.41103C45.4786 10.0902 45.619 10.5873 45.8998 10.9023C46.1903 11.2172 46.6356 11.3747 47.236 11.3747C47.5071 11.3747 47.7685 11.3304 48.0202 11.2419C48.272 11.1533 48.4947 11.0204 48.6883 10.8432C48.882 10.666 49.0369 10.4446 49.1531 10.1788C49.2693 9.91303 49.3274 9.6079 49.3274 9.26339V4.58299H50.5328V12.3049H49.3274V11.0794C49.1531 11.4436 48.8578 11.7635 48.4414 12.0391C48.0348 12.3049 47.5264 12.4378 46.9164 12.4378ZM52.8239 4.58299H54.0294V5.97087C54.2715 5.53777 54.5765 5.18342 54.9444 4.90781C55.322 4.62236 55.8497 4.46979 56.5275 4.45011V5.60175C56.1799 5.61707 55.8346 5.66652 55.4963 5.7494C55.2039 5.81939 54.9308 5.95567 54.6975 6.14804C54.4729 6.35252 54.303 6.6116 54.2037 6.90104C54.0875 7.20618 54.0294 7.59498 54.0294 8.06745V12.3049H52.8239V4.58299ZM61.0347 12.4378C60.5021 12.4378 60.0083 12.3443 59.5533 12.1573C59.1186 11.9775 58.7236 11.7115 58.3914 11.3747C58.0549 11.0185 57.793 10.5966 57.6216 10.1345C57.4416 9.61796 57.3531 9.07309 57.3602 8.52515V8.40704C57.3602 7.82629 57.4473 7.29476 57.6216 6.81245C57.7959 6.3203 58.038 5.90196 58.3478 5.55746C58.6673 5.2031 59.0449 4.93242 59.4806 4.7454C59.9164 4.54854 60.3956 4.45011 60.9185 4.45011C61.3542 4.45011 61.7754 4.52393 62.1821 4.67158C62.5984 4.80938 62.9663 5.03085 63.2859 5.33599C63.6054 5.64112 63.8571 6.03977 64.0411 6.53192C64.2347 7.01424 64.3316 7.5999 64.3316 8.28892V8.68756H58.6092C58.6383 9.57345 58.8561 10.2526 59.2628 10.7251C59.6695 11.1877 60.2649 11.419 61.0492 11.419C62.2401 11.419 62.9131 10.9712 63.068 10.0754H64.2735C64.1379 10.8531 63.7797 11.4436 63.1987 11.8472C62.6178 12.2409 61.8964 12.4378 61.0347 12.4378ZM63.097 7.69833C63.0389 6.90104 62.8162 6.33014 62.429 5.98563C62.0513 5.64112 61.5478 5.46887 60.9185 5.46887C60.2988 5.46887 59.7905 5.67065 59.3935 6.07422C59.0062 6.46794 58.7593 7.00932 58.6528 7.69833H63.097ZM68.8968 12.4378C68.403 12.4378 67.9431 12.3541 67.5171 12.1868C67.1072 12.0141 66.7365 11.7578 66.4278 11.4338C66.1165 11.0803 65.8749 10.6693 65.7161 10.2231C65.5451 9.69956 65.4617 9.15057 65.4692 8.59898V8.48086C65.4692 7.89027 65.5564 7.3489 65.7307 6.85675C65.905 6.36459 66.147 5.94134 66.4569 5.58698C66.7667 5.22279 67.1395 4.94226 67.5752 4.7454C68.0109 4.54854 68.4902 4.45011 69.013 4.45011C69.6521 4.45011 70.1701 4.58791 70.5671 4.86352C70.964 5.12928 71.2739 5.44918 71.4966 5.82322V0.891819H72.702V12.3049H71.4966V10.9761C71.3901 11.1631 71.2448 11.3452 71.0609 11.5224C70.8713 11.7038 70.6617 11.8623 70.4363 11.9949C70.2066 12.1258 69.963 12.2298 69.7102 12.3049C69.4487 12.3935 69.1776 12.4378 68.8968 12.4378ZM69.0275 11.419C69.3761 11.419 69.7053 11.36 70.0152 11.2419C70.325 11.1237 70.5913 10.9466 70.814 10.7103C71.0367 10.4642 71.2109 10.1591 71.3368 9.79492C71.4724 9.42088 71.5401 8.98778 71.5401 8.49562V8.37751C71.5401 7.38335 71.3223 6.65004 70.8866 6.17757C70.4606 5.7051 69.8748 5.46887 69.1292 5.46887C68.374 5.46887 67.7834 5.72479 67.3573 6.23663C66.9313 6.74847 66.7183 7.47686 66.7183 8.4218V8.53992C66.7183 9.02223 66.7764 9.44549 66.8926 9.80968C67.0184 10.1739 67.183 10.4741 67.3864 10.7103C67.5994 10.9466 67.8463 11.1237 68.1271 11.2419C68.4079 11.36 68.708 11.419 69.0275 11.419ZM82.4716 12.4378C81.852 12.4378 81.3243 12.3 80.8886 12.0244C80.485 11.7813 80.146 11.4417 79.901 11.0351V12.3049H78.6955V0.891819H79.901V5.88228C80.0153 5.68531 80.1572 5.50626 80.3221 5.35075C80.5061 5.17357 80.7094 5.02101 80.9321 4.89305C81.1645 4.75524 81.4114 4.64697 81.6729 4.56822C81.9343 4.48948 82.2005 4.45011 82.4716 4.45011C82.9655 4.45011 83.4254 4.53869 83.8514 4.71587C84.2774 4.89305 84.6405 5.14897 84.9407 5.48363C85.2505 5.8183 85.4926 6.22679 85.6669 6.7091C85.8411 7.19141 85.9283 7.73278 85.9283 8.33321V8.45133C85.9283 9.04192 85.846 9.58329 85.6814 10.0754C85.5295 10.535 85.2929 10.9609 84.9843 11.3304C84.6852 11.6839 84.3133 11.9662 83.895 12.1573C83.4445 12.3492 82.96 12.4447 82.4716 12.4378ZM82.3555 11.419C83.1107 11.419 83.6868 11.173 84.0838 10.6808C84.4808 10.1788 84.6793 9.45533 84.6793 8.51039V8.39227C84.6793 7.90012 84.6163 7.47194 84.4904 7.10775C84.3829 6.77559 84.2099 6.46915 83.9821 6.2071C83.7841 5.96487 83.5294 5.77704 83.2414 5.66081C82.9581 5.53232 82.6511 5.46687 82.3409 5.46887C81.9924 5.46887 81.6632 5.52793 81.3533 5.64604C81.0537 5.7638 80.7852 5.95084 80.569 6.19234C80.3464 6.42857 80.1721 6.73371 80.0462 7.10775C79.9127 7.52209 79.8488 7.95635 79.8574 8.39227V8.51039C79.8574 9.4947 80.0898 10.228 80.5545 10.7103C81.0193 11.1828 81.6196 11.419 82.3555 11.419ZM89.6342 11.5076L86.6569 4.58299H87.9495L90.2733 10.1197L92.3792 4.58299H93.6137L89.4164 14.9921H88.1964L89.6342 11.5076ZM105.97 4.51532C105.618 4.13844 105.195 3.83755 104.727 3.63067C104.257 3.42601 103.751 3.32132 103.241 3.32307C102.698 3.32307 102.214 3.42888 101.804 3.64297C101.501 3.7934 101.229 4.00091 101.003 4.25447V4.01947C101.003 3.93064 100.979 3.84347 100.933 3.76781C100.888 3.69214 100.822 3.631 100.744 3.59129C100.691 3.56626 100.633 3.55364 100.574 3.55438H98.9827C98.9241 3.55245 98.8658 3.56433 98.8125 3.58909C98.7592 3.61385 98.7122 3.65082 98.6753 3.69711C98.5956 3.78474 98.5523 3.90019 98.5542 4.01947V15.0561C98.5542 15.1791 98.5954 15.2874 98.6753 15.3735C98.715 15.4152 98.7629 15.4479 98.8158 15.4698C98.8688 15.4916 98.9256 15.502 98.9827 15.5002H100.606C100.661 15.5001 100.715 15.4889 100.766 15.4671C100.817 15.4453 100.863 15.4135 100.901 15.3735C100.945 15.3333 100.979 15.284 101.002 15.229C101.025 15.174 101.036 15.1146 101.034 15.0548V11.2898C101.25 11.5384 101.539 11.7291 101.884 11.8607C102.307 12.0256 102.755 12.1105 103.207 12.1105C103.727 12.1105 104.233 12.0096 104.71 11.8054C105.185 11.599 105.613 11.2958 105.969 10.9146C106.338 10.5135 106.628 10.0422 106.824 9.52669C107.044 8.94733 107.152 8.33033 107.143 7.70941C107.143 7.045 107.038 6.43349 106.824 5.89212C106.631 5.38011 106.341 4.91182 105.97 4.51409V4.51532ZM104.513 8.50178C104.424 8.73555 104.295 8.94718 104.131 9.12928C103.969 9.31219 103.77 9.45789 103.547 9.55674C103.325 9.65558 103.085 9.70531 102.842 9.70264C102.6 9.70387 102.358 9.65342 102.136 9.55499C101.911 9.4556 101.71 9.31074 101.542 9.12928C101.375 8.94704 101.244 8.73407 101.155 8.50178C101.062 8.25439 101.015 7.99155 101.016 7.72663C101.016 7.45102 101.064 7.19141 101.155 6.95026C101.332 6.48635 101.682 6.1122 102.128 5.90935C102.352 5.80353 102.595 5.7494 102.842 5.75063C103.103 5.75063 103.343 5.80476 103.56 5.91058C103.774 6.0127 103.969 6.15542 104.134 6.33014C104.476 6.71058 104.661 7.21105 104.648 7.72663C104.648 8.00347 104.603 8.26308 104.513 8.50178ZM115.859 3.55684H114.249C114.193 3.55751 114.138 3.56987 114.087 3.59315C114.036 3.61643 113.99 3.65013 113.952 3.69219C113.868 3.78 113.821 3.8973 113.821 4.01947V4.22371C113.62 3.9808 113.372 3.78302 113.092 3.64297C112.654 3.42397 112.17 3.31511 111.681 3.32553C111.166 3.32821 110.657 3.43439 110.183 3.63795C109.708 3.84151 109.278 4.13843 108.917 4.51162C108.537 4.91069 108.236 5.37962 108.029 5.89335C107.801 6.47081 107.687 7.08847 107.696 7.71064C107.696 8.37505 107.807 8.98655 108.029 9.52792C108.251 10.0619 108.545 10.5331 108.91 10.9158C109.265 11.2945 109.693 11.5958 110.167 11.8016C110.641 12.0074 111.15 12.1133 111.665 12.113C112.194 12.113 112.675 12.0047 113.085 11.7943C113.388 11.6343 113.637 11.4412 113.821 11.2148V11.4326C113.82 11.4923 113.831 11.5516 113.854 11.6066C113.877 11.6615 113.911 11.7109 113.954 11.7512C113.993 11.7915 114.038 11.8236 114.089 11.8456C114.14 11.8676 114.194 11.879 114.249 11.8792H115.859C115.916 11.8812 115.972 11.8706 116.024 11.8483C116.077 11.826 116.124 11.7925 116.162 11.75C116.203 11.7085 116.235 11.6589 116.256 11.6043C116.277 11.5497 116.287 11.4912 116.285 11.4326V4.0207C116.287 3.90142 116.244 3.78597 116.164 3.69834C116.127 3.65337 116.08 3.61736 116.027 3.5929C115.975 3.56844 115.917 3.55613 115.859 3.55684ZM113.685 8.4907C113.601 8.72324 113.473 8.9368 113.308 9.11943C113.143 9.29538 112.95 9.43933 112.735 9.54269C112.52 9.64727 112.275 9.70141 112.014 9.70141C111.764 9.70141 111.521 9.64727 111.3 9.54146C111.079 9.4398 110.881 9.29437 110.717 9.11372C110.552 8.93306 110.425 8.72082 110.343 8.48947C110.253 8.24551 110.207 7.98712 110.207 7.72663C110.207 7.44979 110.253 7.19018 110.343 6.94903C110.433 6.71156 110.562 6.50116 110.723 6.32891C110.888 6.15296 111.086 6.00901 111.301 5.90812C111.521 5.80353 111.764 5.7494 112.015 5.7494C112.275 5.7494 112.52 5.80353 112.735 5.90935C112.951 6.01393 113.144 6.15542 113.308 6.32891C113.65 6.70961 113.834 7.21001 113.821 7.7254C113.821 7.98993 113.776 8.24709 113.685 8.4907ZM131.919 7.49901C131.685 7.28955 131.417 7.12228 131.127 7.00439C130.828 6.88012 130.511 6.78169 130.177 6.71525L128.95 6.46425C128.635 6.40273 128.416 6.3203 128.293 6.21448C128.242 6.17732 128.201 6.12853 128.172 6.07209C128.144 6.01565 128.128 5.95315 128.128 5.88966C128.128 5.75432 128.204 5.64358 128.357 5.54269C128.523 5.43688 128.755 5.38274 129.042 5.38274C129.357 5.38274 129.669 5.44795 129.958 5.57591C130.252 5.70633 130.528 5.85398 130.769 6.01885C131.126 6.24893 131.43 6.21817 131.649 5.95364L132.238 5.25232C132.351 5.13393 132.416 4.97752 132.422 4.81307C132.422 4.65558 132.345 4.51162 132.198 4.3812C131.948 4.15481 131.553 3.91612 131.023 3.68234C130.494 3.44611 129.829 3.32553 129.042 3.32553C128.525 3.32553 128.049 3.39689 127.628 3.53716C127.205 3.67988 126.842 3.87674 126.547 4.12036C126.251 4.37136 126.017 4.66173 125.858 4.99763C125.699 5.33341 125.617 5.70154 125.618 6.07422C125.618 6.76324 125.82 7.32552 126.218 7.74509C126.615 8.15481 127.145 8.43411 127.796 8.56945L129.072 8.8549C129.435 8.93118 129.711 9.01731 129.889 9.11328C130.045 9.19572 130.119 9.31383 130.119 9.47871C130.119 9.62635 130.045 9.758 129.892 9.87735C129.731 10.0053 129.478 10.0681 129.139 10.0681C128.79 10.0717 128.445 9.99161 128.133 9.83429C127.836 9.68469 127.56 9.49515 127.312 9.27077C127.202 9.17922 127.076 9.1084 126.941 9.0616C126.788 9.01608 126.616 9.0653 126.419 9.22155L125.714 9.78876C125.509 9.96717 125.423 10.1825 125.461 10.431C125.496 10.6697 125.691 10.9158 126.055 11.1939C126.38 11.4313 126.798 11.6467 127.3 11.8312C127.803 12.017 128.391 12.113 129.059 12.113C129.596 12.113 130.092 12.0416 130.529 11.9013C130.967 11.7549 131.354 11.5593 131.668 11.3108C131.98 11.0724 132.231 10.7631 132.404 10.4077C132.576 10.0523 132.663 9.66076 132.659 9.26462C132.659 8.87212 132.595 8.52638 132.46 8.23601C132.331 7.95492 132.147 7.70366 131.919 7.49778V7.49901ZM138.958 9.51193C138.923 9.445 138.872 9.3882 138.809 9.34687C138.747 9.30555 138.675 9.28105 138.601 9.27569C138.451 9.27322 138.305 9.3222 138.186 9.41473C138.071 9.49101 137.946 9.55007 137.815 9.58821C137.649 9.64412 137.47 9.64967 137.3 9.60421C137.219 9.58443 137.144 9.54519 137.081 9.48978C137.005 9.42056 136.946 9.33472 136.908 9.23878C136.855 9.09669 136.83 8.94521 136.836 8.79338V5.76662H138.931C139.051 5.76662 139.159 5.71741 139.253 5.62267C139.295 5.58108 139.329 5.5314 139.352 5.4765C139.376 5.42159 139.388 5.36254 139.389 5.30276V4.02193C139.389 3.96024 139.377 3.89918 139.353 3.84249C139.329 3.78579 139.294 3.73465 139.25 3.69219C139.165 3.60724 139.05 3.55916 138.931 3.55807H136.835V1.49717C136.838 1.43555 136.827 1.37406 136.805 1.31679C136.782 1.25952 136.748 1.20777 136.704 1.16497C136.627 1.08454 136.521 1.03854 136.41 1.03701H134.784C134.695 1.03555 134.609 1.06135 134.535 1.11101C134.462 1.16066 134.405 1.23182 134.372 1.31507C134.349 1.37287 134.338 1.43484 134.339 1.49717V3.55684H133.411C133.353 3.55549 133.294 3.5675 133.241 3.59199C133.188 3.61647 133.14 3.65281 133.102 3.69834C133.025 3.78687 132.982 3.90193 132.984 4.0207V5.304C132.985 5.39177 133.01 5.47753 133.055 5.55238C133.1 5.62724 133.164 5.68846 133.24 5.72971C133.294 5.75555 133.352 5.76908 133.41 5.76662H134.339V9.36551C134.339 9.84536 134.423 10.2588 134.581 10.5996C134.741 10.9367 134.951 11.2197 135.204 11.4313C135.466 11.6503 135.766 11.8128 136.088 11.9087C136.415 12.0121 136.755 12.0638 137.096 12.0638C137.562 12.0638 138.004 11.9887 138.421 11.8423C138.817 11.7053 139.175 11.4722 139.463 11.1631C139.647 10.9404 139.668 10.6943 139.518 10.4483L138.958 9.51316V9.51193ZM147.78 3.55684H146.171C146.116 3.55785 146.061 3.57036 146.01 3.59363C145.959 3.6169 145.914 3.65043 145.876 3.69219C145.835 3.73558 145.802 3.78651 145.779 3.84229C145.758 3.89876 145.746 3.95885 145.747 4.01947V4.22371C145.544 3.98167 145.295 3.78409 145.014 3.64297C144.609 3.43011 144.136 3.32553 143.601 3.32553C143.092 3.32553 142.591 3.42765 142.117 3.6319C141.638 3.83631 141.204 4.13534 140.84 4.51162C140.46 4.9102 140.158 5.37925 139.952 5.89335C139.722 6.47038 139.608 7.08828 139.618 7.71064C139.618 8.37505 139.729 8.98655 139.95 9.52792C140.173 10.0619 140.468 10.5331 140.833 10.9158C141.188 11.2943 141.614 11.5956 142.087 11.8014C142.56 12.0072 143.069 12.1132 143.584 12.113C144.076 12.1217 144.563 12.0125 145.006 11.7943C145.314 11.6343 145.559 11.4412 145.747 11.2148V11.4326C145.745 11.4921 145.756 11.5513 145.778 11.6062C145.801 11.6612 145.834 11.7106 145.877 11.7512C145.916 11.7913 145.961 11.8232 146.012 11.8452C146.062 11.8671 146.116 11.8787 146.171 11.8792H147.78C147.837 11.8806 147.893 11.8699 147.946 11.8476C147.998 11.8254 148.046 11.7921 148.085 11.75C148.166 11.6649 148.21 11.5508 148.208 11.4326V4.0207C148.21 3.90149 148.167 3.78617 148.087 3.69834C148.049 3.65272 148.002 3.61618 147.948 3.59129C147.895 3.56679 147.838 3.555 147.78 3.55684ZM145.606 8.4907C145.437 8.95456 145.095 9.33232 144.655 9.54269C144.43 9.64997 144.184 9.70423 143.936 9.70141C143.685 9.70141 143.446 9.64727 143.224 9.54146C143.004 9.43906 142.806 9.2934 142.642 9.11285C142.477 8.9323 142.349 8.72044 142.266 8.48947C142.175 8.24565 142.129 7.98721 142.129 7.72663C142.129 7.44979 142.174 7.19018 142.264 6.94903C142.353 6.71894 142.481 6.50855 142.645 6.32891C142.812 6.15296 143.008 6.00901 143.224 5.90812C143.447 5.8023 143.69 5.74817 143.936 5.7494C144.199 5.7494 144.438 5.80353 144.655 5.90935C144.874 6.01393 145.066 6.15542 145.226 6.32891C145.388 6.50486 145.517 6.71402 145.606 6.94903C145.796 7.44486 145.796 7.99486 145.606 8.4907ZM156.622 9.40119L155.699 8.67157C155.522 8.52638 155.355 8.48701 155.21 8.54853C155.079 8.60436 154.964 8.69079 154.872 8.80076C154.673 9.05649 154.434 9.27863 154.167 9.45902C153.934 9.60913 153.629 9.68418 153.269 9.68418C153.004 9.68418 152.76 9.63496 152.542 9.53407C152.327 9.43495 152.134 9.2917 151.975 9.11328C151.812 8.93013 151.686 8.71715 151.602 8.48578C151.515 8.24262 151.471 7.98546 151.474 7.72663C151.474 7.4461 151.515 7.18772 151.602 6.94903C151.687 6.71279 151.811 6.50239 151.975 6.33014C152.138 6.15296 152.332 6.01024 152.546 5.90935C152.772 5.80107 153.019 5.74694 153.269 5.7494C153.629 5.7494 153.931 5.82814 154.167 5.97948C154.406 6.13451 154.646 6.35598 154.873 6.63651C154.968 6.7497 155.079 6.83337 155.21 6.88997C155.358 6.94903 155.523 6.90965 155.695 6.7657L156.618 6.03485C156.732 5.95424 156.817 5.83809 156.861 5.70387C156.886 5.63045 156.896 5.55227 156.889 5.47473C156.882 5.39719 156.858 5.32214 156.82 5.25478C156.464 4.67928 155.973 4.20275 155.391 3.86813C154.781 3.51009 154.05 3.32553 153.232 3.32553C152.668 3.32238 152.109 3.43311 151.588 3.65129C151.066 3.86947 150.593 4.19076 150.194 4.59652C149.805 4.99271 149.497 5.4701 149.29 5.99547C149.07 6.54494 148.957 7.13314 148.96 7.72663C148.96 8.33567 149.072 8.91765 149.29 9.45164C149.5 9.97332 149.807 10.4458 150.194 10.8395C150.593 11.2451 151.067 11.5663 151.588 11.7846C152.11 12.003 152.668 12.1142 153.232 12.1117C154.05 12.1117 154.781 11.9284 155.391 11.5654C155.976 11.232 156.468 10.7537 156.822 10.1751C156.86 10.1101 156.882 10.0374 156.889 9.96225C156.896 9.88643 156.886 9.80992 156.861 9.73832C156.813 9.60626 156.731 9.49007 156.622 9.40242V9.40119ZM165.194 11.1299L162.647 7.26277L164.827 4.29138C164.941 4.12036 164.971 3.95672 164.918 3.80292C164.88 3.69219 164.777 3.55684 164.514 3.55684H162.789C162.69 3.55775 162.593 3.58219 162.506 3.62821C162.398 3.68359 162.309 3.77173 162.253 3.88043L160.511 6.39904H160.089V0.447649C160.091 0.329229 160.048 0.214475 159.969 0.127748C159.929 0.0869473 159.881 0.0547186 159.828 0.0329554C159.776 0.0111921 159.719 0.000333517 159.663 0.00101762H158.051C157.964 0.00131009 157.88 0.0270233 157.807 0.0750545C157.735 0.123086 157.678 0.191382 157.643 0.271703C157.62 0.327334 157.608 0.387308 157.61 0.447649V11.4313C157.61 11.5581 157.656 11.6688 157.743 11.75C157.783 11.7911 157.831 11.8236 157.884 11.8456C157.937 11.8676 157.993 11.8786 158.051 11.878H159.664C159.721 11.8798 159.777 11.8692 159.83 11.8469C159.882 11.8246 159.929 11.7912 159.968 11.7488C160.007 11.7068 160.038 11.657 160.058 11.6024C160.08 11.5477 160.09 11.489 160.087 11.4301V8.52392H160.555L162.456 11.5335C162.592 11.7635 162.779 11.8792 163.013 11.8792H164.817C165.091 11.8792 165.205 11.7439 165.251 11.6307C165.316 11.4707 165.297 11.3083 165.194 11.1311V11.1299ZM125.015 3.55684H123.213C123.146 3.55424 123.079 3.56628 123.017 3.59218C122.954 3.61807 122.898 3.6572 122.852 3.70695C122.774 3.79331 122.72 3.89895 122.695 4.01332L121.365 9.14035H121.041L119.61 4.01332C119.586 3.90347 119.539 3.79998 119.473 3.70941C119.435 3.66072 119.386 3.62162 119.331 3.59516C119.276 3.5687 119.215 3.55559 119.154 3.55684H117.285C117.044 3.55684 116.892 3.63805 116.835 3.79431C116.786 3.94184 116.785 4.10149 116.832 4.24955L119.116 11.4658C119.152 11.5802 119.213 11.675 119.292 11.7512C119.337 11.7944 119.391 11.828 119.449 11.8499C119.507 11.8719 119.57 11.8818 119.632 11.8792H120.598L120.518 12.113L120.288 12.786C120.225 12.9927 120.103 13.1754 119.937 13.3101C119.784 13.4312 119.595 13.4954 119.402 13.4922C119.234 13.4914 119.069 13.4536 118.918 13.3815C118.768 13.312 118.625 13.2257 118.494 13.1243C118.375 13.0381 118.234 12.9889 118.089 12.9829H118.069C117.912 12.9829 117.775 13.0739 117.665 13.2486L117.091 14.1197C116.858 14.4938 116.987 14.7399 117.139 14.8764C117.422 15.152 117.778 15.3673 118.198 15.5211C118.614 15.6749 119.073 15.75 119.56 15.75C120.386 15.75 121.076 15.5199 121.605 15.0548C122.131 14.5922 122.52 13.9635 122.757 13.1797L125.405 4.24955C125.465 4.05884 125.465 3.90012 125.411 3.77093C125.366 3.6725 125.26 3.55684 125.015 3.55684Z"
  fill="#838383"
/>
</svg>
`,Nee=`
  <button type="button" id="apple-pay-close-button">
    <svg width="10" height="9" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.572 4.033L8.89.71a.4.4 0 0 0-.566-.566L5.003 3.459 1.681.145a.4.4 0 0 0-.566.566L4.44 4.033
      1.115 7.354a.398.398 0 0 0 0 .566.4.4 0 0 0 .566 0l3.322-3.33 3.322 3.33a.4.4 0 0 0 .566-.566L5.57 4.033z"
        fill="white"
      />
    </svg>
  </button>
`,See=`
<svg width="74" height="19" viewBox="0 0 74 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="vault-logo">
  <g clip-path="url(#clip0_9910_9664)">
    <path
      d="M32.1273 15.8163H28.9432C28.6448 15.8163 28.4481 15.6622 28.3497 15.3507L25.1886 6.20188C25.1165 6.01825 25.1296 5.85101 25.2214 5.70345C25.3132 5.55589 25.451 5.48047 25.6346 5.48047H27.9693C28.2513 5.48047 28.435 5.63787 28.5202 5.94611L30.6648 12.9077L32.5536 5.94611C32.6388 5.63459 32.829 5.48047 33.1274 5.48047H35.4195C35.6031 5.48047 35.7441 5.55589 35.8425 5.70345C35.9409 5.85101 35.954 6.01825 35.8851 6.20188L32.7241 15.3507C32.6257 15.6622 32.4257 15.8163 32.1305 15.8163H32.1273Z"
      fill="#343C43" />
    <path
      d="M37.6361 14.5842C36.6097 13.5644 36.0981 12.2495 36.0981 10.6362C36.0981 9.02283 36.6097 7.71118 37.6361 6.69792C38.6624 5.68795 39.8757 5.17969 41.2759 5.17969C41.9416 5.17969 42.5384 5.31085 43.0696 5.57318C43.6008 5.83551 43.9943 6.16998 44.2468 6.57988V5.94373C44.2468 5.81584 44.2927 5.70763 44.3845 5.61581C44.4763 5.524 44.578 5.47809 44.6927 5.47809H46.8373C46.9652 5.47809 47.0701 5.524 47.1554 5.61581C47.2406 5.70763 47.2833 5.81584 47.2833 5.94373V15.3679C47.2833 15.4958 47.2406 15.6008 47.1554 15.686C47.0701 15.7713 46.9652 15.8139 46.8373 15.8139H44.6927C44.578 15.8139 44.4763 15.7713 44.3845 15.686C44.2927 15.6008 44.2468 15.4958 44.2468 15.3679V14.7088C43.991 15.1187 43.6008 15.4565 43.0696 15.7155C42.5384 15.9779 41.935 16.109 41.2562 16.109C39.8691 16.109 38.6624 15.6008 37.6361 14.581V14.5842ZM39.9151 8.79985C39.433 9.31795 39.1936 9.93443 39.1936 10.6558C39.1936 11.3772 39.433 11.997 39.9151 12.5118C40.3971 13.0299 40.9972 13.2857 41.7186 13.2857C42.44 13.2857 43.0401 13.0266 43.5221 12.5118C44.0041 11.997 44.2435 11.3772 44.2435 10.6558C44.2435 9.93443 44.0041 9.31467 43.5221 8.79985C43.0401 8.28502 42.44 8.02597 41.7186 8.02597C40.9972 8.02597 40.3938 8.28502 39.9151 8.79985Z"
      fill="#343C43" />
    <path
      d="M51.6315 5.9016V11.2302C51.6315 11.9385 51.8086 12.4959 52.1627 12.9058C52.5169 13.3157 53.0415 13.5223 53.7334 13.5223C54.4253 13.5223 54.9401 13.319 55.3139 12.9058C55.6878 12.4959 55.878 11.9516 55.878 11.2728V5.9016C55.878 5.78683 55.9239 5.68845 56.0157 5.60319C56.1075 5.51794 56.2092 5.47531 56.3239 5.47531H58.4685C58.6095 5.47531 58.7242 5.52122 58.8095 5.61303C58.8948 5.70485 58.9374 5.81306 58.9374 5.94094V15.3652C58.9374 15.4931 58.8948 15.598 58.8095 15.6832C58.7242 15.7685 58.6128 15.8111 58.4685 15.8111H56.3239C56.196 15.8111 56.0911 15.7718 56.0058 15.6931C55.9206 15.6144 55.878 15.5127 55.878 15.3848V14.7257C55.1139 15.6472 54.081 16.1062 52.7792 16.1062C51.4774 16.1062 50.4707 15.7062 49.7132 14.9061C48.9557 14.106 48.5786 13.0501 48.5786 11.7319V5.89504C48.5786 5.78027 48.6278 5.68189 48.7262 5.59664C48.8246 5.51138 48.9295 5.46875 49.0442 5.46875H51.1658C51.2937 5.46875 51.4019 5.51138 51.4938 5.59664C51.5856 5.68189 51.6315 5.78027 51.6315 5.89504V5.9016Z"
      fill="#343C43" />
    <path
      d="M62.9872 15.8148C62.0658 15.8148 61.387 15.582 60.9509 15.113C60.5115 14.6474 60.2917 14.0178 60.2917 13.2243V1.42267C60.2917 1.29478 60.3344 1.18657 60.4196 1.09475C60.5049 1.00294 60.6164 0.957031 60.7607 0.957031H62.8823C63.0233 0.957031 63.138 1.00294 63.2233 1.09475C63.3085 1.18657 63.3512 1.29478 63.3512 1.42267V12.6078C63.3512 12.8045 63.4069 12.9652 63.5217 13.0865C63.6332 13.2079 63.7906 13.2669 63.9873 13.2669H64.6464C64.9448 13.2669 65.0924 13.4144 65.0924 13.7129V15.2409C65.0924 15.6246 64.8956 15.8148 64.4989 15.8148H62.9905H62.9872Z"
      fill="#343C43" />
    <path
      d="M66.722 12.7378V8.04861H65.3644C65.2365 8.04861 65.1316 8.00271 65.0463 7.91089C64.9611 7.81907 64.9185 7.71086 64.9185 7.58298V5.94997C64.9185 5.82208 64.9611 5.71387 65.0463 5.62206C65.1316 5.53024 65.2365 5.48433 65.3644 5.48433H66.722V2.74626C66.722 2.60526 66.7679 2.49049 66.8597 2.40523C66.9515 2.31997 67.0597 2.27734 67.1876 2.27734H69.3518C69.4666 2.27734 69.5683 2.31997 69.6601 2.40523C69.7519 2.49049 69.7978 2.60198 69.7978 2.74626V5.48433H72.7064C72.8343 5.48433 72.9458 5.53024 73.0474 5.62206C73.1458 5.71387 73.195 5.82208 73.195 5.94997V7.58298C73.195 7.69775 73.1458 7.80268 73.0474 7.90105C72.949 7.99943 72.8343 8.04861 72.7064 8.04861H69.7978V12.0164C69.7978 12.4689 69.9027 12.7804 70.1159 12.9509C70.329 13.1214 70.5684 13.2067 70.8373 13.2067C71.1193 13.2067 71.4308 13.1083 71.7718 12.9083C72.1555 12.6689 72.4441 12.6951 72.6408 12.9935L73.3852 14.1806C73.5557 14.4495 73.5327 14.7052 73.3229 14.9446C72.6146 15.6792 71.5948 16.0497 70.2667 16.0497C69.2764 16.0497 68.437 15.7742 67.7516 15.2234C67.0663 14.6725 66.722 13.8428 66.722 12.741V12.7378Z"
      fill="#343C43" />
    <path
      d="M15.2266 0H4.43496C2.26089 0 0.5 1.76089 0.5 3.93496V14.7266C0.5 16.9006 2.26089 18.6615 4.43496 18.6615H15.2266C17.4006 18.6615 19.1615 16.9006 19.1615 14.7266V3.93496C19.1615 1.76089 17.4006 0 15.2266 0ZM15.079 12.2312L12.1442 14.6118C11.9114 14.8086 11.5507 14.6807 11.4949 14.379L10.8161 11.8934C10.7702 11.6934 10.8489 11.4868 11.0096 11.3589C11.4425 11.0113 11.7179 10.4801 11.7179 9.8833C11.7179 8.44048 10.098 7.37476 8.5765 8.40113C8.48468 8.46344 8.40598 8.54214 8.34368 8.63723C7.63539 9.68983 7.92723 10.7883 8.65192 11.3655C8.8126 11.4934 8.88474 11.6967 8.84211 11.8967L8.22891 14.3823C8.17317 14.6839 7.81246 14.8118 7.57964 14.6151L4.57924 12.2344C4.47431 12.1262 4.41856 11.9787 4.4284 11.8278L4.77271 6.69271C4.78582 6.49268 4.91371 6.31561 5.09734 6.23691L9.41924 4.03661C9.68157 3.9284 9.97341 3.9284 10.2357 4.03661L14.5576 6.23691C14.7445 6.31561 14.8691 6.49268 14.8855 6.69271L15.2299 11.8278C15.2397 11.9787 15.1839 12.1262 15.079 12.2344V12.2312Z"
      fill="#343C43" />
  </g>
  <defs>
    <clipPath id="clip0_9910_9664">
      <rect width="73" height="18.6615" fill="white" transform="translate(0.5)" />
    </clipPath>
  </defs>
</svg>
`,yx={height:"50px",width:"auto",borderRadius:"3px",padding:"10px",locale:"en",type:"pay"},aS=function(t){return t&&Ro(t)==="object"?Object.keys(yx).reduce(function(e,r){return Tt(Tt({},e),{},CO({},r,t[r]||yx[r]))},{}):yx},Eee=`
  .pre-checkout-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.75);
    transition: all 0.2s ease;
  }

  .pre-checkout-modal.show {
    display: block;
  }

  .pre-checkout-modal__content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    background-color: #fefefe;
    padding: 20px;
    padding-bottom: max(30px, env(safe-area-inset-bottom));
    width: 100%;
    border-radius: 6px 6px 0 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;

    box-sizing: border-box;
    transform: translateY(238px);
    transition: transform 0.3s cubic-bezier(.16,.81,.32,1);
  }

  .modal-wrapper {
    width: 100%;
  }

  .payment-info {
    position: relative;
    padding-bottom: 15px;
    border-bottom: solid 1px whitesmoke;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .customer-email {
    color: #737373;
    font-size: 13px;
    line-height: 16px;
  }

  .customer-info {
    flex: 1;
    text-align: right;
  }

  .merchant-logo {
    display: flex;
    align-items: center;
    height: 30px;
  }
  .transaction-amount {
    margin-top: 5px;
    font-size: 13px;
    line-height: 16px;
    color: #737373;
  }

  .amount {
    color: #29b263;
    font-weight: bold;
  }

  @media only screen and (min-width: 500px) {
    .pre-checkout-modal__content {
      bottom: 0;
      top: 0;
      margin: auto;
      border-radius: 6px;
      height: fit-content;
    }
  }

  .pre-checkout-modal__content.show {
    transform: translateY(0);
    margin: 0 auto;
    margin-top: 100px;
  }

  .pre-checkout-modal__content > * {
    margin-top: 0;
    margin-bottom: 40px;
  }
  .pre-checkout-modal__content > *:last-child {
    margin-bottom: 0;
  }

  .pre-checkout-modal__content svg {
    margin: auto;
    width: 100%;
  }

  #inline-button-wordmark--white {
    position: absolute;
    bottom: -50px;
    margin: auto;
    left: 0;
    right: 0;
    width: fit-content;
  }

  #inline-button-wordmark--grey {
    display: none;
  }

  .pre-checkout-modal__content #apple-pay-mark--light {
    margin-bottom: 16px;
  }

  .pre-checkout-modal p {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
    color: #4E4E4E;
    line-height: 140%;
    font-size: 14px;
    font-weight: 500;
    margin: 0;
    padding: 0 20px;
    text-align: center;
    letter-spacing: -0.3px;
  }

  .pre-checkout-modal button {
    height: 42px;
    width: 100%;
    
    box-sizing: border-box;
    border-radius: 3px;
    font-size: 14px;
    line-height: 24px;
    cursor: pointer;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .pre-checkout-modal .open-paystack-pop-button {
    background: #FAFAFA;
    border: 1px solid #F2F3F3;
    color: #4E4E4E;
    font-weight: 500;
  }

  .pre-checkout-modal .open-paystack-pop-button:hover, 
  .pre-checkout-modal .open-paystack-pop-button:active, 
  .pre-checkout-modal .open-paystack-pop-button:focus {
    background: #F2F3F3;
  }

  .pre-checkout-modal .pay-with-vault-button {
    font-weight: 700;
    background: #44b669;
    background: linear-gradient(to bottom, #44b669 0%, #40ad57 100%);
    border: solid 1px #49a861;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    outline: none;
    color: white;
    transition: all 300ms;
  }

  .pre-checkout-modal .vault-instruction {
    color: #2f3d4d;
    font-size: 14px;
    letter-spacing: normal;
    line-height: 1.4;
    margin: 0 auto 24px;
    padding: 0;
  }
  .vault-logo-container {
    width: 74px;
    height: 20px;
    margin: 0 auto 24px
  }
  .vault-logo-container img {
    height: 100%;
    width: 100%;
    border-radius: 8px;
  }
  .vault-divider {
    margin-bottom: 16px;
    margin-top: 24px;
    position: relative;
  }
  .vault-divider__container {
    align-items: center;
    bottom: 0;
    display: flex;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .vault-divider__line {
    border: 1px dashed #ccced0;
    width: 100%;
  }
  .vault-divider__text-container {
    display: flex;
    justify-content: center;
    position: relative;
  }
  .vault-divider__text {
    background-color: #fff;
    color: #999da1;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -.3px;
    line-height: 19.6px;
    margin-bottom: 2px;
    padding: 0 8px;
  }

  #payment-request-button {
    width: 100%;
    height: fit-content;
    margin: 24px 0 16px 0;
  }

  #paystackpop-button {
    padding: 0 16px;
  }

  #apple-pay-close-button {
    position: absolute;
    text-align: center;
    top: 0;
    right: -26px;
    height: 16px;
    width: 16px;
    padding: 0;
    display: inline-block;
    z-index: 3;
    border-radius: 50%;
    background: transparent;
    transition: all 300ms;
    outline: none;
    cursor: pointer;
    border: none;
  }

  #apple-pay-close-button svg {
    width: initial;
  }
  
  #apple-pay-close-button:hover {
    background-color: #e22b28;
  }

  @media only screen and (max-width: 500px) {
    .pre-checkout-modal__content {
      max-width: 500px;
      border-radius: 0;
      padding-bottom: 0;
    }

    .modal-wrapper {
      padding: 0;
    }

    .vault-logo-container {
      width: 74px;
      height: 20px;
    }

    #inline-button-wordmark--white {
      display: none
    }
    
    #inline-button-wordmark--grey {
      display: block;
      width: 100%;
      margin: 16px 0;
      height: 13px;
    }

    #apple-pay-close-button {
      display: none;
    }
  }
`,iS=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Number(parseFloat(t/100).toFixed(2))},oS={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","content-type":"application/x-www-form-urlencoded","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site"},referrerPolicy:"no-referrer-when-downgrade",method:"POST",mode:"cors",credentials:"omit"};function lS(t){return Object.keys(t).reduce(function(e,r){var n=encodeURIComponent(r),s=encodeURIComponent(t[r]),a="".concat(n,"=").concat(s);return[].concat(_ee(e),[a])},[]).join("&")}var Aee=function(t){return{biannually:"BIANNUAL PLAN",annually:"ANNUAL PLAN"}[t]||"".concat(t.toUpperCase()," PLAN")},IO=function(){try{return window.location&&window.location.protocol==="https:"&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(Wr.applePayVersion)}catch{return!1}},F1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return IO()&&t.includes("apple_pay")};function Cee(){var t=0;return Array.from(document.querySelectorAll("body *")).forEach(function(e){var r=window.getComputedStyle(e),n=parseFloat(r.zIndex);!Number.isNaN(n)&&n>t&&(t=n)}),t}function vx(t){var e=document.createElement("iframe");return e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.id=t,e.style.display="none",e}function fm(t){return t.querySelector("apple-pay-button")||t.querySelector("#apple-pay-button")}function Tp(t){return document.querySelector("#".concat(t))}function cS(t,e,r){var n=e.channels,s=n===void 0?[]:n,a=e.styles,o=a===void 0?{}:a,l={applePay:!1};return new Promise(function(c,u){if(t)if(F1(s)){if(fm(t))return l.applePay=!0,void c(l);(function(d,h){return new Promise(function(f,g){var p=document.createElement("script");p.src=d,p.addEventListener("load",function(){f(!0)}),p.addEventListener("error",function(){p.remove(),g(!1)}),h?h.appendChild(p):document.head.appendChild(p)})})("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",t).then(function(){if(r&&r!==1077497&&window&&!Array.isArray(window.webpackJsonp))throw new Error("Incorrect data type for 'webpackJsonp', expected array, got ".concat(Ro(window.webpackJsonp),". Switching to fallback apple pay button"));(function(d,h){var f=h.styles,g=h.theme,p=document.createElement("style"),x=function(w){var y=w.height,_=w.width,S=w.borderRadius,j=w.padding;return`
  apple-pay-button {
    --apple-pay-button-width: `.concat(_,`;
    --apple-pay-button-height: `).concat(y,`;
    --apple-pay-button-border-radius: `).concat(S,`;
    --apple-pay-button-padding: `).concat(j,`;
    --apple-pay-button-box-sizing: border-box;
    width: `).concat(_,`;
  }
`)}(f);p.type="text/css",p.styleSheet?p.styleSheet.cssText=x:p.appendChild(document.createTextNode(x)),d.appendChild(p);var b=document.createElement("apple-pay-button");b.setAttribute("buttonstyle",g==="light"?"white":"black"),b.setAttribute("type",f.type),b.setAttribute("locale",f.locale),d.appendChild(b)})(t,{styles:aS(o.applePay),theme:o.theme}),l.applePay=!0,c(l)}).catch(function(){(function(d,h){var f=h.styles,g=h.theme,p=document.createElement("style"),x=function(y){var _=y.height,S=y.width,j=y.borderRadius,k=y.padding,N=y.type,E=y.locale;return`
  @supports (-webkit-appearance: -apple-pay-button) { 
    .apple-pay-button {
        display: inline-block;
        -webkit-appearance: -apple-pay-button;
        width: `.concat(S,`;
        height: `).concat(_,`;
        border-radius: `).concat(j,`;
        padding: `).concat(k,`;
        -apple-pay-button-type: `).concat(N,`;
        -webkit-locale: `).concat(E,`;
    }
    .apple-pay-button-black {
        -apple-pay-button-style: black;
    }
    .apple-pay-button-white {
        -apple-pay-button-style: white;
    }
    .apple-pay-button-white-with-line {
        -apple-pay-button-style: white-outline;
    }
  }

  @supports not (-webkit-appearance: -apple-pay-button) {
    .apple-pay-button {
        display: inline-block;
        background-size: 100% 60%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        border-radius: 5px;
        padding: 0px;
        box-sizing: border-box;
        min-width: 200px;
        min-height: 32px;
        max-height: 64px;
    }
    .apple-pay-button-black {
        background-image: -webkit-named-image(apple-pay-logo-white);
        background-color: black;
    }
    .apple-pay-button-white {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
    }
    .apple-pay-button-white-with-line {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
        border: .5px solid black;
    }
  }
`)}(f);p.type="text/css",p.styleSheet?p.styleSheet.cssText=x:p.appendChild(document.createTextNode(x)),d.appendChild(p);var b=document.createElement("button");b.classList.add("apple-pay-button",g==="light"?"apple-pay-button-white":"apple-pay-button-black"),b.id="apple-pay-button";var w=document.createElement("span");w.classList.add("logo"),b.appendChild(w),d.appendChild(b)})(t,{styles:aS(o.applePay),theme:o.theme}),l.applePay=!0,c(l)})}else u("No wallet payment method is available on this device");else u("Container to mount elements was not provided")})}function Tee(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var RO="payment-request-button",DO="paystackpop-button",MO="pay-with-vault-button";function $O(t){var e=document.createElement("button");return e.id=DO,e.className="open-paystack-pop-button",e.innerText=t,e}function uS(t){return t.querySelector("#".concat(DO))}function LO(){var t=document.createElement("div");return t.id=RO,t}function xx(t){return t.querySelector("#".concat(RO))}function Pee(){var t=document.createElement("button");return t.className="pay-with-vault-button",t.id=MO,t.innerText="Pay with Vault",t}function Oee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("div");r.className="vault-logo-container",r.innerHTML=See,t.appendChild(r);var n=document.createElement("p");n.id="instruction",n.className="vault-instruction",n.innerHTML="Access your saved cards and bank details for faster, more secure payments",t.appendChild(n);var s=Pee();t.appendChild(s);var a=document.createElement("div");if(a.className="vault-divider",a.innerHTML='<div id="vault-divider" class="vault-divider__container"><div class="vault-divider__line"></div></div><div class="vault-divider__text-container"><span class="vault-divider__text">or</span></div>',t.appendChild(a),e.canPayWithApplePay){var o=LO();t.appendChild(o)}var l=$O("Use other payment methods");t.appendChild(l)}function Iee(t){var e=document.createElement("div");e.innerHTML=`
  <svg width="51" height="32" viewBox="0 0 51 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="apple-pay-mark--light">
    <g>
    <path d="M46.0162 0H4.98386C4.81297 0 4.64177 0 4.47118 0.000996555C4.32698 0.00202331 4.18311 0.00362383 4.03925 0.00754966C3.72548 0.0160355 3.40903 0.0345472 3.09919 0.0902335C2.7844 0.146886 2.49148 0.239294 2.20571 0.384791C1.92477 0.52766 1.66757 0.71453 1.44468 0.937516C1.22169 1.1605 1.03482 1.41728 0.891977 1.69852C0.74645 1.98429 0.653982 2.27731 0.597722 2.59234C0.541737 2.90227 0.523101 3.21866 0.514645 3.53209C0.51078 3.67596 0.509122 3.81982 0.508183 3.96366C0.507186 4.13461 0.507519 4.30545 0.507519 4.4767V27.5236C0.507519 27.6949 0.507186 27.8654 0.508183 28.0367C0.509122 28.1805 0.51078 28.3244 0.514645 28.4683C0.523101 28.7814 0.541737 29.0978 0.597722 29.4077C0.653982 29.7228 0.74645 30.0157 0.891977 30.3015C1.03482 30.5827 1.22169 30.8399 1.44468 31.0625C1.66757 31.2859 1.92477 31.4727 2.20571 31.6152C2.49148 31.7611 2.7844 31.8535 3.09919 31.9102C3.40903 31.9655 3.72548 31.9843 4.03925 31.9928C4.18311 31.9961 4.32698 31.998 4.47118 31.9987C4.64177 32 4.81297 32 4.98386 32H46.0162C46.1868 32 46.358 32 46.5286 31.9987C46.6724 31.998 46.8163 31.9961 46.9608 31.9928C47.2739 31.9843 47.5903 31.9655 47.9009 31.9102C48.2153 31.8535 48.5083 31.7611 48.7941 31.6152C49.0753 31.4727 49.3317 31.2859 49.5551 31.0625C49.7777 30.8399 49.9646 30.5827 50.1078 30.3015C50.2537 30.0157 50.346 29.7228 50.402 29.4077C50.458 29.0978 50.4762 28.7814 50.4847 28.4683C50.4886 28.3244 50.4906 28.1805 50.4912 28.0367C50.4925 27.8654 50.4926 27.6949 50.4926 27.5236V4.4767C50.4926 4.30545 50.4925 4.13461 50.4912 3.96366C50.4906 3.81982 50.4886 3.67596 50.4847 3.53209C50.4762 3.21866 50.458 2.90227 50.402 2.59234C50.346 2.27731 50.2537 1.98429 50.1078 1.69852C49.9646 1.41728 49.7777 1.1605 49.5551 0.937516C49.3317 0.71453 49.0753 0.52766 48.7941 0.384791C48.5083 0.239294 48.2153 0.146886 47.9009 0.0902335C47.5903 0.0345472 47.2739 0.0160355 46.9608 0.00754966C46.8163 0.00362383 46.6724 0.00202331 46.5286 0.000996555C46.358 0 46.1868 0 46.0162 0Z" fill="black"/>
    <path d="M46.0162 1.06662L46.521 1.06759C46.6577 1.06855 46.7945 1.07003 46.932 1.07378C47.1711 1.08024 47.4509 1.09319 47.7117 1.13994C47.9384 1.18077 48.1285 1.24286 48.311 1.33575C48.4911 1.42728 48.6562 1.54723 48.8003 1.69113C48.9449 1.83599 49.065 2.0013 49.1578 2.18343C49.2501 2.36447 49.3118 2.55369 49.3524 2.78205C49.3991 3.04001 49.412 3.32055 49.4185 3.56121C49.4222 3.69704 49.424 3.83287 49.4247 3.97194C49.426 4.14012 49.4259 4.3082 49.4259 4.47671V27.5236C49.4259 27.6921 49.426 27.8599 49.4246 28.0317C49.424 28.1675 49.4222 28.3033 49.4185 28.4394C49.4119 28.6797 49.3991 28.9601 49.3519 29.2211C49.3118 29.4463 49.2502 29.6356 49.1573 29.8175C49.0648 29.9992 48.9449 30.1643 48.8009 30.3083C48.656 30.4532 48.4915 30.5728 48.3092 30.6652C48.1281 30.7576 47.9383 30.8197 47.7138 30.8601C47.4477 30.9075 47.1562 30.9205 46.9367 30.9265C46.7986 30.9296 46.6611 30.9315 46.5203 30.9321C46.3525 30.9334 46.1841 30.9334 46.0162 30.9334H4.98386C4.98162 30.9334 4.97945 30.9334 4.97718 30.9334C4.81127 30.9334 4.64503 30.9334 4.4761 30.9321C4.33836 30.9315 4.20093 30.9296 4.06805 30.9266C3.8435 30.9205 3.55181 30.9075 3.2879 30.8604C3.06151 30.8197 2.87171 30.7576 2.68822 30.664C2.50766 30.5724 2.34329 30.453 2.19831 30.3077C2.05444 30.1641 1.93488 29.9995 1.84245 29.8176C1.74992 29.6358 1.68801 29.446 1.64731 29.218C1.60025 28.9576 1.58733 28.6783 1.58087 28.4396C1.57718 28.303 1.57564 28.1664 1.57476 28.0305L1.5741 27.6295L1.57413 27.5236V4.47671L1.5741 4.37083L1.57473 3.97067C1.57564 3.83402 1.57718 3.6974 1.58087 3.56088C1.58733 3.32197 1.60025 3.04258 1.64769 2.77991C1.68804 2.55405 1.74992 2.36422 1.84293 2.18155C1.93464 2.001 2.05441 1.83617 2.19903 1.69158C2.34308 1.54747 2.50799 1.42767 2.6897 1.33527C2.87122 1.24283 3.06138 1.18077 3.28778 1.14003C3.54864 1.09316 3.82861 1.08024 4.06839 1.07375C4.20507 1.07003 4.34174 1.06855 4.4774 1.06762L4.98386 1.06662H46.0162Z" fill="white"/>
    <path d="M14.1531 10.7629C14.5811 10.2276 14.8715 9.50886 14.7949 8.77435C14.1684 8.80551 13.4038 9.18768 12.9612 9.72342C12.5638 10.1822 12.212 10.9311 12.3037 11.6348C13.007 11.6958 13.7097 11.2832 14.1531 10.7629Z" fill="black"/>
    <path d="M14.7869 11.7722C13.7655 11.7114 12.8972 12.3519 12.4094 12.3519C11.9214 12.3519 11.1745 11.8029 10.3667 11.8177C9.31521 11.8331 8.33959 12.4276 7.80602 13.3731C6.70857 15.2646 7.51641 18.0704 8.58362 19.611C9.10188 20.3731 9.72648 21.2123 10.5495 21.1822C11.3271 21.1517 11.6319 20.6787 12.5771 20.6787C13.5216 20.6787 13.7961 21.1822 14.6192 21.1669C15.4729 21.1516 16.0065 20.4044 16.5248 19.6415C17.1193 18.7727 17.3627 17.9338 17.378 17.8877C17.3627 17.8725 15.732 17.2469 15.7169 15.3711C15.7015 13.8004 16.9972 13.0534 17.0581 13.007C16.3265 11.9249 15.1832 11.8029 14.7869 11.7722Z" fill="black"/>
    <path d="M23.68 9.64661C25.8999 9.64661 27.4457 11.1768 27.4457 13.4046C27.4457 15.6404 25.8681 17.1786 23.6244 17.1786H21.1665V21.0872H19.3907V9.64661H23.68V9.64661ZM21.1665 15.688H23.2041C24.7502 15.688 25.6302 14.8556 25.6302 13.4126C25.6302 11.9697 24.7502 11.1451 23.2121 11.1451H21.1665V15.688Z" fill="black"/>
    <path d="M27.9097 18.7167C27.9097 17.2578 29.0276 16.3619 31.0098 16.2509L33.293 16.1162V15.474C33.293 14.5464 32.6666 13.9914 31.6203 13.9914C30.629 13.9914 30.0106 14.467 29.8601 15.2124H28.2428C28.3379 13.7059 29.6222 12.5959 31.6836 12.5959C33.7053 12.5959 34.9976 13.6663 34.9976 15.3392V21.0872H33.3563V19.7156H33.3169C32.8333 20.6433 31.7787 21.2299 30.6847 21.2299C29.0514 21.2299 27.9097 20.2151 27.9097 18.7167ZM33.293 17.9635V17.3055L31.2395 17.4323C30.2167 17.5037 29.6381 17.9556 29.6381 18.6691C29.6381 19.3985 30.2406 19.8742 31.1603 19.8742C32.3574 19.8742 33.293 19.0496 33.293 17.9635Z" fill="black"/>
    <path d="M36.547 24.1556V22.768C36.6736 22.7997 36.959 22.7997 37.1018 22.7997C37.8946 22.7997 38.3228 22.4668 38.5843 21.6105C38.5843 21.5946 38.7351 21.1031 38.7351 21.0952L35.7224 12.7466H37.5774L39.6866 19.5333H39.7181L41.8273 12.7466H43.6349L40.5109 21.5232C39.7976 23.5451 38.973 24.1952 37.2447 24.1952C37.1018 24.1952 36.6736 24.1793 36.547 24.1556Z" fill="black"/>
    </g>
    <defs>
    <clipPath id="clip0">
    <rect width="49.9851" height="32" fill="white" transform="translate(0.507462)"/>
    </clipPath>
    </defs>
  </svg>
`,t.appendChild(e);var r=document.createElement("p");r.id="apple-pay-description",r.innerHTML="Pay with Apple Pay to complete your purchase without filling a form",t.appendChild(r);var n=LO();t.appendChild(n);var s=$O("More payment options");t.appendChild(s)}var Pp=[{value:"key",required:!0,types:["string"]},{value:"amount",required:!0,or:["plan","planCode"],types:["string","number"]},{value:"currency",required:!1,types:["string"]},{value:"email",required:!0,or:["customerCode"],types:["string"]},{value:"label",required:!1,types:["string"]},{value:"firstName",required:!1,types:["string"]},{value:"lastName",required:!1,types:["string"]},{value:"reference",required:!1,types:["string"]},{value:"phone",required:!1,types:["string"]},{value:"customerCode",required:!1,override:"email",types:["string"]},{value:"channels",required:!1,types:["array"]},{value:"paymentRequest",required:!1,types:["string","number"]},{value:"paymentPage",required:!1,types:["string"]},{value:"hash",required:!1,types:["string"]},{value:"container",required:!1,types:["string"]},{value:"metadata",required:!1,types:["object"]},{value:"subaccountCode",required:!1,types:["string"]},{value:"bearer",required:!1,types:["string"]},{value:"transactionCharge",required:!1,types:["string","number"]},{value:"planCode",required:!1,override:"amount",types:["string"]},{value:"subscriptionCount",required:!1,types:["number"]},{value:"planInterval",required:!1,types:["string"]},{value:"subscriptionLimit",required:!1,types:["number"]},{value:"subscriptionStartDate",required:!1,types:["string"]},{value:"accessCode",required:!1,types:["string"]},{value:"onError",required:!1,types:["function"]},{value:"onLoad",required:!1,types:["function"]},{value:"onSuccess",required:!1,types:["function"]},{value:"onCancel",required:!1,types:["function"]},{value:"callback",required:!1,types:["function"]},{value:"onClose",required:!1,types:["function"]},{value:"onBankTransferConfirmationPending",required:!1,types:["function"]},{value:"firstname",required:!1,types:["string"]},{value:"lastname",required:!1,types:["string"]},{value:"customer_code",required:!1,types:["string"]},{value:"payment_request",required:!1,types:["string","number"]},{value:"subaccount",required:!1,types:["string"]},{value:"transaction_charge",required:!1,types:["number","string"]},{value:"plan",required:!1,types:["string"]},{value:"quantity",required:!1,types:["number"]},{value:"interval",required:!1,types:["string"]},{value:"invoice_limit",required:!1,types:["number","string"]},{value:"start_date",required:!1,types:["string"]},{value:"payment_page",required:!1,types:["number","string"]},{value:"order_id",required:!1,types:["number"]},{value:"ref",required:!1,types:["string"]},{value:"card",required:!1,types:["string"]},{value:"bank",required:!1,types:["string"]},{value:"split",required:!1,types:["object"]},{value:"split_code",required:!1,types:["string"]},{value:"transaction_type",required:!1,types:["string"]},{value:"subscription",required:!1,types:["number"]},{value:"language",required:!1,types:["string"]},{value:"connect_account",required:!1,types:["string"]},{value:"connect_split",required:!1,types:["array"]}];function Ree(t){var e,r=Tt({},t);return r.metadata=t.metadata||{},r.metadata.referrer=(e=window.location.href)&&e.length>500?e.split("?")[0]:e,r.metadata=JSON.stringify(r.metadata),r.mode="popup",t.split&&typeof t.split!="string"&&(r.split=JSON.stringify(r.split)),r.card!==void 0&&["false",!1].indexOf(r.card)>-1&&(r.channels=["bank"],delete r.card),r.bank!==void 0&&["false",!1].indexOf(r.bank)>-1&&(r.channels=["card"],delete r.bank),[{to:"firstname",from:"firstName"},{to:"lastname",from:"lastName"},{to:"customer_code",from:"customerCode"},{to:"payment_request",from:"paymentRequest"},{to:"subaccount",from:"subaccountCode"},{to:"transaction_charge",from:"transactionCharge"},{to:"plan",from:"planCode"},{to:"quantity",from:"subscriptionCount"},{to:"interval",from:"planInterval"},{to:"invoice_limit",from:"subscriptionLimit"},{to:"start_date",from:"subscriptionStartDate"},{to:"ref",from:"reference"}].forEach(function(n){r[n.from]&&(r[n.to]=r[n.from],delete r[n.from])}),Object.values(t).forEach(function(n,s){if(typeof n=="function"){var a=Object.keys(t)[s];delete r[a]}}),r}var Dee=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],FO=window&&window.navigator&&(window.navigator.platform||window.navigator.userAgentData&&window.navigator.userAgentData.platform),UO=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.platform,r=t.userAgent,n=r===void 0?window&&window.navigator&&window.navigator.userAgent:r,s=e||FO;return Dee.includes(s)||n.includes("Mac")&&"ontouchend"in document},Mee=function(t,e,r){var n="".concat(Wr.paystackApiUrl,"transaction/update_log/").concat(t),s={Authorization:"Bearer ".concat(e)};return fetch(n,{method:"POST",body:JSON.stringify({payload:JSON.stringify(r)}),headers:s})},$ee=function(t,e){var r="".concat(Wr.paystackApiUrl,"transaction/set_ip/").concat(t),n={Authorization:"Bearer ".concat(e)};return fetch(r,{method:"POST",headers:n})},Lee={initializeLog:function(t){var e=t||{},r=e.attempts,n=e.authentication,s=e.errors,a=e.history;this.log={start_time:Math.round(Date.now()/1e3),time_spent:0,attempts:r||0,authentication:n,errors:s||0,success:!1,mobile:UO(),input:[],history:a||[]}},getTimeSpent:function(){var t=Math.round(Date.now()/1e3);return this.log.time_spent=t-this.log.start_time,this.log.time_spent},logAPIResponse:function(t,e){switch(t.status){case"success":return this.logApiSuccess(e);case"failed":return this.logApiError(t.message);default:return!1}},logValidationResponse:function(t){return this.log.history.push({type:"action",message:t,time:this.getTimeSpent()}),this.saveLog()},logAttempt:function(t){var e="Attempted to pay";return t&&(e+=" with ".concat(t)),this.log.attempts+=1,this.log.history.push({type:"action",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiError:function(t){var e="Error";return t&&(e+=": ".concat(t)),this.log.errors+=1,this.log.history.push({type:"error",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiSuccess:function(t){var e="Successfully paid";return t&&(e+=" with ".concat(t)),this.log.success=!0,this.log.history.push({type:"success",message:e,time:this.getTimeSpent()}),this.saveLog()},saveLog:function(){try{if(this.response)return Mee(this.id,this.response.merchant_key,this.log)}catch{}},saveIpAddress:function(){try{if(this.response)return $ee(this.id,this.response.merchant_key)}catch{}}},Fee=["language","connect_account"],Uee={requestInline:function(){var t=this,e=this.urlParameters,r=e.language,n=e.connect_account,s=$1(e,Fee),a=Tt({"Content-Type":"application/json"},r&&{"Accept-Language":r});return(this.accessCode?fetch(new URL("transaction/verify_access_code/".concat(this.accessCode),Wr.paystackApiUrl).toString(),{headers:a}):fetch(new URL("/checkout/request_inline",Wr.paystackApiUrl).toString(),{method:"POST",body:JSON.stringify(s),headers:Tt(Tt({},a),n&&{"x-connect-account":n})})).then(function(o){return o.json()}).then(function(o){if(o.status===!1)throw new Error(o.message);return t.response=o.data,t.id=o.data.id,t.status=o.data.transaction_status,t.accessCode=o.data.access_code,t.log=null,Object.assign(t,Lee),t.initializeLog(o.data.log),t.saveIpAddress(),o.data})}},bx=function(){function t(e){EO(this,t),function(u){function d(p,x){this.message=p,this.issues=x||[]}if(!u||Ro(u)!=="object")throw new d("Transaction parameters should be a non-empty object");var h=u;if("accessCode"in h)return{accessCode:h.accessCode};Object.keys(h).forEach(function(p){Pp.find(function(x){return x.value===p})!==void 0||delete h[p]});var f=Object.keys(h),g=[];if(Pp.filter(function(p){return p.required}).forEach(function(p){var x=!h[p.value],b=p.or?p.or.some(function(w){return h[w]}):null;x&&!b&&g.push({message:"Required parameter missing: ".concat(p.value)})}),f.forEach(function(p){var x=h[p],b=Pp.find(function(y){return y.value===p}),w=Ro(x);w==="object"&&Array.isArray(x)&&(w="array"),b.types.indexOf(w)<=-1&&g.push({message:"Invalid parameter type: ".concat(p),validTypes:b.types})}),f.forEach(function(p){var x=Pp.find(function(b){return b.value===p});x.override&&delete h[x.override]}),g.length)throw new d("Invalid transaction parameters",g)}(e),this.parameters=e,this.urlParameters=Ree(e),this.id=null,this.status=null,this.accessCode=e.accessCode||null,this.authorizationUrl=null,this.errors=[],this.response=null,this.isActive=!0;var r=e.onError,n=e.onLoad,s=e.onSuccess,a=e.onCancel,o=e.callback,l=e.onClose,c=e.onBankTransferConfirmationPending;this.callbacks={onError:r,onLoad:n,onSuccess:s,onCancel:a,onBankTransferConfirmationPending:c},this.deprecatedCallbacks={callback:o,onClose:l},Object.assign(this,Uee)}return AO(t,[{key:"onSetupError",value:function(e){this.logError(e),this.callbacks.onError&&this.callbacks.onError(e)}},{key:"onLoad",value:function(e){var r=e.id,n=e.customer,s=e.accessCode;Object.assign(this,{id:r,customer:n,accessCode:s}),this.authorizationUrl="".concat(Wr.checkoutUrl).concat(s),this.callbacks.onLoad&&this.callbacks.onLoad({id:r,customer:n,accessCode:s})}},{key:"onSuccess",value:function(e){this.isActive=!1,this.response=e,this.status=e.status,this.callbacks.onSuccess&&this.callbacks.onSuccess(e),this.deprecatedCallbacks.callback&&this.deprecatedCallbacks.callback(e)}},{key:"setStatus",value:function(e){this.status=e}},{key:"onCancel",value:function(){this.callbacks.onCancel&&this.callbacks.onCancel(),this.deprecatedCallbacks.onClose&&this.deprecatedCallbacks.onClose()}},{key:"cancel",value:function(){this.isActive=!1,this.onCancel()}},{key:"onBankTransferConfirmationPending",value:function(){this.cancel(),this.callbacks.onBankTransferConfirmationPending&&this.callbacks.onBankTransferConfirmationPending()}},{key:"logError",value:function(e){this.errors.push(e)}}]),t}(),T4=console?console.warn||console.log:function(){};function dS(t,e,r){T4('"'.concat(t,'" has been deprecated, please use "').concat(e,'". ').concat(r))}var Me,Vee=["preload","inlineTransaction"],Bee=["container","styles","onElementsMount"];function wx(t,e){if(!t.length)return null;var r=t.filter(function(n){var s,a,o,l,c=!n.status||n.status==="abandoned",u=(s=n.parameters,a=e,o=Object.keys(s).sort().join("")===Object.keys(a).sort().join(""),l=Object.values(s).sort().join("")===Object.values(a).sort().join(""),o&&l);return c&&u});return r.length?r[r.length-1]:null}function hS(t){var e=t.checkoutIframe,r=t.urlParameters;e&&r&&e.contentWindow.postMessage({type:"inline:url",path:"newTransaction",params:r},"*")}var zee="trackCheckoutClosed",fS="trackPaymentError",qee="trackPaymentAttempt",Wee="trackPaymentCompletion";function _x(t){throw T4(t),new Error(t)}var pS,mS,VO=function(){function t(e){var r,n;EO(this,t),this.id=function(){for(var s="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<5;o+=1)s+=a.charAt(Math.floor(Math.random()*a.length));return s}(),this.transactions=[],this.isOpen=!1,this.isLoaded=!1,this.isDeprecatedApi=e&&e.isDeprecatedApi,e&&e.isEmbed?this.isEmbed=!0:e&&e.isPaymentRequest&&(e.container&&Tp(e.container)||_x("A container is required to mount the payment request button"),this.paymentRequestContainer=Tp(e.container),this.paymentRequestTransaction=null),this.preCheckoutModal=null,this.backgroundIframe=function(s){var a=vx("inline-background-".concat(s));a.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  background: rgba(0, 0, 0, 0.75);    
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  -webkit-transition: opacity 0.3s;
  visibility: hidden;
  display: none;
`,document.body.appendChild(a);var o=a.contentWindow.document;return o.open(),o.write(`
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Paystack Popup Loader</title>
    <style>
      .app-loader {
        margin: 200px 0;
        text-align: center;
        color: white;
      }      
      @keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @-webkit-keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      .app-loader__spinner {
        position: relative;
        display: inline-block;
      }
      .app-loader__spinner div {
        left: 95px;
        top: 35px;
        position: absolute;
        -webkit-animation: app-loader__spinner linear 1s infinite;
        animation: app-loader__spinner linear 1s infinite;
        background: white;
        width: 10px;
        height: 30px;
        border-radius: 40%;
        -webkit-transform-origin: 5px 65px;
        transform-origin: 5px 65px;
      }
      .app-loader__spinner div:nth-child(1) {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-animation-delay: -0.916666666666667s;
        animation-delay: -0.916666666666667s;
      }
      .app-loader__spinner div:nth-child(2) {
        -webkit-transform: rotate(30deg);
        transform: rotate(30deg);
        -webkit-animation-delay: -0.833333333333333s;
        animation-delay: -0.833333333333333s;
      }
      .app-loader__spinner div:nth-child(3) {
        -webkit-transform: rotate(60deg);
        transform: rotate(60deg);
        -webkit-animation-delay: -0.75s;
        animation-delay: -0.75s;
      }
      .app-loader__spinner div:nth-child(4) {
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
        -webkit-animation-delay: -0.666666666666667s;
        animation-delay: -0.666666666666667s;
      }
      .app-loader__spinner div:nth-child(5) {
        -webkit-transform: rotate(120deg);
        transform: rotate(120deg);
        -webkit-animation-delay: -0.583333333333333s;
        animation-delay: -0.583333333333333s;
      }
      .app-loader__spinner div:nth-child(6) {
        -webkit-transform: rotate(150deg);
        transform: rotate(150deg);
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
      }
      .app-loader__spinner div:nth-child(7) {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
        -webkit-animation-delay: -0.416666666666667s;
        animation-delay: -0.416666666666667s;
      }
      .app-loader__spinner div:nth-child(8) {
        -webkit-transform: rotate(210deg);
        transform: rotate(210deg);
        -webkit-animation-delay: -0.333333333333333s;
        animation-delay: -0.333333333333333s;
      }
      .app-loader__spinner div:nth-child(9) {
        -webkit-transform: rotate(240deg);
        transform: rotate(240deg);
        -webkit-animation-delay: -0.25s;
        animation-delay: -0.25s;
      }
      .app-loader__spinner div:nth-child(10) {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        -webkit-animation-delay: -0.166666666666667s;
        animation-delay: -0.166666666666667s;
      }
      .app-loader__spinner div:nth-child(11) {
        -webkit-transform: rotate(300deg);
        transform: rotate(300deg);
        -webkit-animation-delay: -0.083333333333333s;
        animation-delay: -0.083333333333333s;
      }
      .app-loader__spinner div:nth-child(12) {
        -webkit-transform: rotate(330deg);
        transform: rotate(330deg);
        -webkit-animation-delay: 0s;
        animation-delay: 0s;
      }
      .app-loader__spinner {
        width: 40px;
        height: 40px;
        -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
        transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
      }
    </style>
  </head>

  <body>
    <div id="app-loader" class="app-loader">
      <div id="spinner" class="app-loader__spinner">
        <div></div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div>
      </div>
    </div>
  </body>

  </html>
`),o.close(),a}(this.id),this.checkoutIframe=(r=this.id,(n=vx("inline-checkout-".concat(r))).src="".concat(Wr.checkoutUrl,"popup"),n.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  visibility: hidden;
  display: none;
  height: 100%;
`,n.setAttribute("allowpaymentrequest","true"),n.setAttribute("allow","payment; clipboard-read; clipboard-write"),document.body.appendChild(n),n),this.registerListeners()}return AO(t,[{key:"registerListeners",value:function(){var e=this;window.addEventListener("message",function(r){var n="".concat(r.origin,"/")===Wr.checkoutUrl,s=e.checkoutIframe&&e.checkoutIframe.contentWindow===r.source,a=e.isEmbed;n||s?e.respondToEvent(r):a&&e.respondToEmbedEvents(r)})}},{key:"sendAnalyticsEventToCheckout",value:function(e,r){this.checkoutIframe.contentWindow.postMessage({type:"analytics",action:e,params:r},"*")}},{key:"checkout",value:function(e){this.activeTransaction()&&this.activeTransaction().cancel(),Me=this;var r=wx(this.transactions,e)||new bx(e);return new Promise(function(n,s){r.requestInline().then(function(a){var o=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.platform,d=c.userAgent,h=d===void 0?window&&window.navigator&&window.navigator.userAgent:d,f=u||FO,g=h&&!!h.match(/Version\/[\d.]+.*Safari/),p=f&&/(Mac)/i.test(f);return UO()||p&&g}()&&F1(a.channels),l=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!!c.custom_filters&&c.custom_filters.recurring,d=c.plan_details,h=u||d,f=!!c.link_config&&c.link_config.enabled&&c.link_config.has_payment_instruments;return!h&&f}(a);l||o?(Me.preloadTransaction({inlineTransaction:r}),Me.preCheckoutModal=function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=document.querySelector("#pre-checkout-modal-".concat(c));if(h){if(uS(h)&&xx(h))return h;h.remove()}var f=document.createElement("div");f.classList.add("pre-checkout-modal"),f.id="pre-checkout-modal-".concat(c),f.style.zIndex=Cee()+1;var g=document.createElement("div");g.classList.add("pre-checkout-modal__content"),f.appendChild(g);var p=u||{},x=p.merchant_logo,b=p.merchant_name,w=p.email,y=p.amount,_=p.currency,S=p.label,j=new Intl.NumberFormat("en",{style:"currency",currency:_,currencyDisplay:"code",maximumFractionDigits:2,minimumFractionDigits:0}).format(y/100),k=document.createElement("div");k.classList.add("payment-info"),k.innerHTML='<img class="merchant-logo" src="'.concat(x,'" alt="').concat(b,` Logo">
    <div class="customer-info">
      <div class="customer-email">`).concat(S||w,`</div>
      <div class="transaction-amount">Pay <span class="amount">`).concat(j,`</span></div>
    </div>`),g.appendChild(k),g.innerHTML+=Nee;var N=document.createElement("div");N.classList.add("modal-wrapper"),d.canPayWithVault?Oee(N,{canPayWithApplePay:d.canPayWithApplePay}):Iee(N),N.innerHTML=N.innerHTML+OO+kee,g.appendChild(N);var E=document.createElement("style");return E.textContent=Eee,document.body.appendChild(E),document.body.appendChild(f),f}(Me.id,a,{canPayWithVault:l,canPayWithApplePay:o}),o?(Me.paymentRequestContainer=xx(Me.preCheckoutModal),cS(Me.paymentRequestContainer,{channels:a.channels,styles:{applePay:{width:"100%",type:"pay",height:"42px",padding:"15px",borderRadius:"5px"}}},a.merchant_id).then(function(){Me.registerPaymentRequestEventListeners(),Me.openPreCheckoutModal()}).catch(function(){l?(xx(Me.preCheckoutModal).remove(),Me.openPreCheckoutModal()):(Me.closePreCheckoutModal(),Me.animateCheckoutIn())}).finally(function(){n(r)})):(Me.openPreCheckoutModal(),n(r))):(Me.newTransaction({inlineTransaction:r}),n(r))}).catch(function(a){r.onSetupError({status:!1,message:a.message}),s(a)})})}},{key:"openPreCheckoutModal",value:function(){var e;this.registerPreCheckoutModalEventListeners(),e=this.preCheckoutModal,new Promise(function(r,n){try{var s=e.querySelector(".pre-checkout-modal__content");e.classList.add("show"),setTimeout(function(){s.classList.add("show"),r(!0)},50)}catch(a){n(a)}})}},{key:"registerPreCheckoutModalEventListeners",value:function(){var e,r=this,n=!1,s=this.activeTransaction();document.addEventListener("touchstart",function(c){c.preventDefault(),n||(n=!0,e=setTimeout(function(){n=!1},125))},!0),document.addEventListener("touchend",function(c){c.target&&c.target.isSameNode(Me.preCheckoutModal)&&n&&(clearTimeout(e),Me.closePreCheckoutModal(),s&&s.cancel()),n=!1},!0);var a=uS(this.preCheckoutModal),o=this.preCheckoutModal.querySelector("#".concat(MO));a.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn()},o&&(o.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn(),r.checkoutIframe.contentWindow.postMessage({type:"inline:pay-with-vault"},"*")});var l=function(c){return c.querySelector("#apple-pay-close-button")}(this.preCheckoutModal);l.onclick=function(){r.sendAnalyticsEventToCheckout(zee),r.closePreCheckoutModalAndCancelTransaction()}}},{key:"closePreCheckoutModal",value:function(e){var r;this.preCheckoutModal&&(e==="failed"?(r=this.preCheckoutModal)&&(r.querySelector("#apple-pay-mark--light").innerHTML=`<svg width="50" height="30" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="error-icon">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="error" fill-rule="nonzero">
            <path d="M9.14672,0.47855 L0.14829,15.47855 C-0.0403320234,15.7872042 -0.0475647902,16.1736607 0.129375884,16.4891566 C0.306316558,16.8046526 0.639843999,16.9999993 1.00157,17 L19.43546,17 C19.797186,16.9999993 20.1307134,16.8046526 20.3076541,16.4891566 C20.4845948,16.1736607 20.477362,15.7872042 20.28874,15.47855 L10.85328,0.47855 C10.671624,0.181297031 10.3483651,3.00996351e-06 10,3.00996351e-06 C9.6516349,3.00996351e-06 9.32837603,0.181297031 9.14672,0.47855 Z" id="Shape" fill="#FFAA22"></path>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="6" width="2" height="5"></rect>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="12" width="2" height="2"></rect>
        </g>
    </g>
</svg>`,r.querySelector("#apple-pay-description").textContent="An error occurred while paying with Apple Pay. Please try again or use another payment method."):(function(n){n&&(n.querySelector(".pre-checkout-modal__content").classList.remove("show"),n.classList.remove("show"))}(this.preCheckoutModal),this.preCheckoutModal.remove(),this.preCheckoutModal=null))}},{key:"closePreCheckoutModalAndCancelTransaction",value:function(){this.preCheckoutModal&&(this.cancelTransaction(),this.checkoutIframe&&this.checkoutIframe.contentWindow&&this.checkoutIframe.contentWindow.postMessage("close","*"),this.closePreCheckoutModal())}},{key:"newTransaction",value:function(e){var r,n=e.preload,s=e.inlineTransaction,a=$1(e,Vee),o=this.paymentRequestContainer&&fm(this.paymentRequestContainer);this.activeTransaction()&&!o&&this.activeTransaction().cancel();var l=wx(this.transactions,s?s.parameters:a),c=l||s||new bx(a);return l?(c.isActive=!0,r={accessCode:c.accessCode}):(r=c.accessCode?{accessCode:c.accessCode}:c.urlParameters,this.transactions.push(c)),this.isDeprecatedApi||this.open(r,n),c}},{key:"preloadTransaction",value:function(e){var r=this;return this.newTransaction(Tt(Tt({},e),{},{preload:!0})),function(){return r.animateCheckoutIn()}}},{key:"paymentRequest",value:function(e){var r=e.container,n=e.styles,s=e.onElementsMount,a=$1(e,Bee);return Me=this,new Promise(function(o,l){var c=document.querySelector("#".concat(e.loadPaystackCheckoutButton));if(IO()){Me.activeTransaction()&&Me.activeTransaction().cancel(),r&&Tp(r)||_x("A container is required to mount the payment request button"),Me.paymentRequestContainer=Tp(r);var u=wx(Me.transactions,a),d=u||new bx(a);d.requestInline().then(function(g){cS(Me.paymentRequestContainer,{channels:g.channels,styles:n},g.merchant_id).then(function(p){s&&s(p)}).catch(function(){s&&s(null)}).finally(function(){if(u?d.isActive=!0:Me.transactions.push(d),Me.registerPaymentRequestEventListeners(),c){var p=Me.preloadTransaction({inlineTransaction:d});c.onclick=p}o(d)})}).catch(function(g){d.onSetupError({status:!1,message:g.message}),l(g)})}else{if(e&&e.loadPaystackCheckoutButton)if(c){var h=Me.preloadTransaction(a);c.onclick=h}else T4("This device does not support any payment request wallet options. Please consult our documentation at https://developers.paystack.co/docs/paystack-inline to see how to load alternative payment options using 'loadPaystackCheckoutButton'");s&&s(null);var f=Me.activeTransaction();o(f)}})}},{key:"registerApplePayEventListener",value:function(){var e=this;fm(this.paymentRequestContainer).onclick=function(){return e.startApplePay()}}},{key:"registerPaymentRequestEventListeners",value:function(){var e=this.activeTransaction();e&&F1(e.response.channels)?this.registerApplePayEventListener():Tee(this.paymentRequestContainer)}},{key:"startApplePay",value:function(){var e,r,n,s,a,o=this,l="apple pay",c=this.activeTransaction();if(c){var u={channel:"apple_pay",paymentMethod:l,currency:c.currency,amount:c.amount},d={channel:"apple_pay",currency:c.currency,amount:c.amount,timeSpent:c.getTimeSpent()};try{c.logAttempt(l),this.sendAnalyticsEventToCheckout(qee,u);var h=(e={currency:c.response.currency,amount:c.response.amount,merchantName:c.response.merchant_name,interval:c.response.plan_details&&c.response.plan_details.interval},r=e.currency,n=e.amount,s=e.merchantName,a=e.interval,Tt({countryCode:"NG",currencyCode:r,merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["visa","masterCard"],requiredBillingContactFields:["postalAddress","name","phone","email"],total:{label:"".concat(s," - Paystack"),type:"final",amount:String(iS(n))}},typeof a=="string"&&a.trim()!==""&&{lineItems:[{label:Aee(a),amount:String(iS(n))}]})),f=new window.ApplePaySession(Wr.applePayVersion,h);f.onvalidatemerchant=function(g){var p=function(x){var b=x.transactionId,w=x.validationURL,y=x.merchantName,_=x.domainName,S=_===void 0?window&&window.location&&window.location.hostname:_,j="".concat(Wr.paymentBaseUrl).concat(Wr.applePayValidateSessionPath),k=lS({transaction:b,sessionUrl:w,displayName:y,domainName:S});return fetch(j,Tt(Tt({},oS),{},{body:k})).then(function(N){return N.json()})}({validationURL:g.validationURL,transactionId:c.id,merchantName:c.response.merchant_name});p.then(function(x){x.status!=="success"?c.onSetupError(x):f.completeMerchantValidation(x.data),c.logValidationResponse(x.message)}).catch(function(x){c.onSetupError(x)})},f.oncancel=function(){Me.preCheckoutModal||c.onCancel()},f.onpaymentauthorized=function(g){var p=g.payment,x=function(b){var w=b.transactionId,y=b.payment,_="".concat(Wr.paymentBaseUrl).concat(Wr.applePayChargePath),S=lS({transaction:w,paymentObject:JSON.stringify(y)});return fetch(_,Tt(Tt({},oS),{},{body:S})).then(function(j){return j.json()})}({transactionId:c.id,payment:p});x.then(function(b){c.logAPIResponse(b,l),b.status==="success"?(f.completePayment(f.STATUS_SUCCESS),c.onSuccess(b),o.sendAnalyticsEventToCheckout(Wee,d)):(f.completePayment(f.STATUS_FAILURE),c.onSetupError(b),o.sendAnalyticsEventToCheckout(fS,{channel:"apple_pay",message:b&&b.message||"Transaction attempt failed"})),Me.closePreCheckoutModal(b.status)}).catch(function(b){f.completePayment(f.STATUS_FAILURE),c.onSetupError(b),o.sendAnalyticsEventToCheckout(fS,{channel:"apple_pay",message:b&&b.message||"Error occurred"}),Me.closePreCheckoutModal("failed")})},f.begin()}catch(g){c.onSetupError(g)}}else _x("Could not initiate apple pay transaction")}},{key:"resumeTransaction",value:function(e){return this.newTransaction({accessCode:e})}},{key:"activeTransaction",value:function(){var e=this.transactions.filter(function(n){return n.isActive}),r=e.length?e[e.length-1]:null;return r}},{key:"cancelTransaction",value:function(e){var r=this.transactions.find(function(n){return n.id===e})||this.activeTransaction();r&&(r.cancel(),this.close())}},{key:"respondToEvent",value:function(e){if(e){var r,n,s=this.activeTransaction();try{var a=e.data||e.message,o=a.event,l=a.data;if(o)switch(o){case"loaded:checkout":this.isLoaded=!0,s&&hS({checkoutIframe:this.checkoutIframe,urlParameters:s.urlParameters});break;case"loaded:transaction":r=this.backgroundIframe,(n=r.contentWindow.document)&&(n.getElementById("app-loader").style.display="none"),s.onLoad(l);break;case"error":l.type==="setup"?s.onSetupError(l):s.logError(l);break;case"cancel":case"close":this.close();var c=l&&l.status;c&&s.setStatus(c),!(this.paymentRequestContainer&&fm(this.paymentRequestContainer)&&!this.preCheckoutModal)&&(s.isActive=!1),s.onCancel();break;case"transfer:pending":this.close();var u=l&&l.status;u&&s.setStatus(u),s.onBankTransferConfirmationPending();break;case"success":this.close(),s.onSuccess(l)}}catch{}}}},{key:"respondToEmbedEvents",value:function(e){var r,n,s=this.activeTransaction(),a=e.data||e.message;if(a&&(typeof a=="string"||a instanceof String)){var o={action:n=(r=a)&&typeof r=="string"?r.split(" ")[0]:null,data:n?r.split(" ").slice(2).join(" "):null};o&&o.action==="PaystackClose"&&o.data&&s.onSuccess(a),o.action==="PaystackTLSClose"&&s.cancel()}}},{key:"animateCheckoutIn",value:function(){var e,r=this;if(!this.isOpen){var n=this.checkoutIframe,s=this.backgroundIframe;(e={checkoutIframe:n,backgroundIframe:s},new Promise(function(a,o){e||o("No dom element provided");var l=e.checkoutIframe,c=e.backgroundIframe;l&&c||o("No dom element provided"),l.style.display="",l.style.visibility="visible",c.style.display="",c.style.visibility="visible",a()})).then(function(){r.checkoutIframe.contentWindow.postMessage("render","*")}),this.isOpen=!0}}},{key:"open",value:function(e,r){e&&(hS({checkoutIframe:this.checkoutIframe,urlParameters:e}),r||this.animateCheckoutIn())}},{key:"close",value:function(){var e=this;if(this.isOpen){var r,n=this.checkoutIframe,s=this.backgroundIframe;(r={checkoutIframe:n,backgroundIframe:s},new Promise(function(a,o){r||o("No dom element provided");var l=r.checkoutIframe,c=r.backgroundIframe;l&&c||o("No dom element provided"),c.style.opacity=0,l.style.display="none",l.style.visibility="hidden",setTimeout(function(){c.style.display="none",c.style.visibility="hidden",c.style.opacity=1,a()},300)})).then(function(){e.checkoutIframe.contentWindow.postMessage("close","*")}),this.isOpen=!1}}},{key:"isLoaded",value:function(){return this.isLoaded}}],[{key:"setup",value:function(e){var r=e&&e.container;Me||(Me=new t({isDeprecatedApi:!0,isEmbed:r})),dS("PaystackPop.setup()","new PaystackPop()","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline");var n=Me.newTransaction(e,"deprecated"),s=n.urlParameters;if(r){var a="".concat(Wr.siteUrl,"/assets/payment/production/inline.html?").concat(PO(s)),o=function(l,c){var u=vx("embed-checkout-".concat(l));return u.style.cssText=`
  background: transparent;
  background: rgba(0,0,0,0);
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  nmargin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  display: none;
`,u.src=c,u.id=l,u.name=l,u}(Me.id,a);(function(l,c){var u=document.getElementById(l);u.innerHTML="",u.removeAttribute("style"),u.className="paystack-embed-container",u.style.position="relative",u.style.width="100%",u.appendChild(c)})(e.container,o),o.onload=function(){var l;o.contentWindow.postMessage("PaystackOpen ".concat(Me.id),"*"),l=o,new Promise(function(c,u){l||u("No dom element provided"),l.style.display="",l.style.visibility="visible",c()})}}else n.openIframe=function(){dS("openIframe","open","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline"),Me.open(s)};return n}}]),t}();if(pS=sS().length>0,mS=jl()&&jl().parentElement.tagName==="FORM",pS&&mS){var jx,Vi=function(){var t={},e=jl();return sS().forEach(function(r){var n=e.getAttribute(r),s=r.split("data-")[1].replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});t[s]=n}),function(r){if(r.buttonId&&!document.getElementById(r.buttonId))throw new Error("Please make sure the buttonId is an element available in the DOM");var n=Tt({},r);n.buttonText=r.buttonText||"Pay",n.buttonVariant="normal",n.buttonWordmarkVariant="normal";var s=["normal","light"];return r.buttonVariant&&s.indexOf(r.buttonVariant)>-1&&(n.buttonVariant=r.buttonVariant),r.buttonWordmarkVariant&&s.indexOf(r.buttonWordmarkVariant)>-1&&(n.buttonWordmarkVariant=r.buttonWordmarkVariant),n}(t)}(),gS=jl().parentElement;Me||(Me=new VO),function(t){var e;if(t.id)(e=document.getElementById(t.id)).setAttribute("data-inline-id",t.id);else{var r=document.createElement("div");r.id="inline-button-".concat(t.inlineId),r.innerHTML=function(n){var s,a,o={normal:`
  <svg id="inline-button-wordmark" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#011B33"/>
    </svg>`,light:OO};return`
    <style>
      #inline-button-`.concat(n.inlineId,` {
        position: relative;
        text-align: center;
        display: inline-block;
      }
      #inline-button-`).concat(n.inlineId,`__trigger {
        `).concat((s=n.variant||"normal",a={normal:`
    background: linear-gradient(180deg,#44b669 0,#40ad57);
    text-shadow: 1px 1px 1px rgba(0,0,0,.1);
    color: #ffffff;
  `,light:`
    background: white;
    text-shadow: none;
    color: #011b33;
  `},"".concat(`
    box-sizing: border-box;
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    margin: 0 0 10px;
    text-align: center;
    -webkit-appearance: none;
    outline: none;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    padding: 16px 24px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
    transition: all .3s ease;
    border: none;
    min-width: 190px;
  `).concat(a[s])),`
      }
      #inline-button-`).concat(n.inlineId,`__trigger:hover {
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      }
      #inline-button-`).concat(n.inlineId,`__trigger:active {
        transform: translateY(3px);
      }
    </style>
    <button id="inline-button-`).concat(n.inlineId,'__trigger" data-inline-id="').concat(n.inlineId,'">').concat(n.text||"Pay"," ").concat(n.currency||"NGN"," ").concat(n.amount,`</button>
    <div id="inline-button-`).concat(n.inlineId,`__wordmark">
      `).concat(o[n.wordmarkVariant||"normal"],`
    </div>
  `)}(t),t.parent.parentNode.insertBefore(r,t.parent.nextSibling),e=wee(r.getElementsByTagName("button"),1)[0]}return e}({inlineId:Me.id,amount:Vi.amount/100,currency:Vi.currency,id:Vi.buttonId,text:Vi.buttonText,variant:Vi.buttonVariant,wordmarkVariant:Vi.buttonWordmarkVariant,parent:jl()}).addEventListener("click",function(t){t.preventDefault(),jx?Me.resumeTransaction(jx.accessCode):jx=Me.newTransaction(Tt(Tt({},Vi),{},{onSuccess:function(e){var r,n,s,a,o,l;r={type:"hidden",name:"reference",value:e.reference,parent:gS},n=r.type,s=r.value,a=r.name,o=r.parent,(l=document.createElement("input")).type=n,l.value=s,l.name=a,o.appendChild(l),gS.submit()}}))})}var Hee=function(t){var e=new VO;e.newTransaction(t)};function BO(t){function e(r){var n=r.config,s=r.onSuccess,a=r.onClose,o=bt(bt({},t),n),l=o.publicKey,c=o.firstname,u=o.lastname,d=o.phone,h=o.email,f=o.amount,g=o.reference,p=o.metadata,x=o.currency,b=x===void 0?"NGN":x,w=o.channels,y=o.label,_=o.plan,S=o.quantity,j=o.subaccount,k=o.transaction_charge,N=o.bearer,E=o.split,A=o.split_code,P=o.connect_account,O=o.connect_split,I=o.onBankTransferConfirmationPending,D=bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt(bt({onSuccess:s||function(){return null},onCancel:a||function(){return null},key:l,email:h,amount:f},c&&{firstname:c}),u&&{lastname:u}),d&&{phone:d}),g&&{ref:g}),b&&{currency:b}),w&&{channels:w}),p&&{metadata:p}),y&&{label:y}),I&&{onBankTransferConfirmationPending:I}),j&&{subaccount:j}),k&&{transaction_charge:k}),N&&{bearer:N}),E&&{split:E}),A&&{split_code:A}),_&&{plan:_}),S&&{quantity:S}),O&&{connect_split:O}),P&&{connect_account:P});Hee(D)}return e}var zO=T.createContext({config:{},initializePayment:function(){return null},onSuccess:function(){return null},onClose:function(){return null}}),Kee=function(t){var e=t.children,r=t.onSuccess,n=t.onClose,s=SO(t,["children","onSuccess","onClose"]),a=BO(s);return L.createElement(zO.Provider,{value:{config:s,initializePayment:a,onSuccess:r,onClose:n}},e)},Gee=function(t){var e=t.children,r=t.ref,n=T.useContext(zO),s=n.config,a=n.initializePayment,o=n.onSuccess,l=n.onClose,c=function(){return a({config:s,onSuccess:o,onClose:l})};return e({initializePayment:c,ref:r})};T.forwardRef(function(t,e){var r=t.children,n=t.onSuccess,s=t.onClose,a=SO(t,["children","onSuccess","onClose"]),o=n||function(){return null},l=s||function(){return null};return L.createElement(Kee,bt({},a,{onSuccess:o,onClose:l}),L.createElement(Gee,{ref:e},r))});var Sd=function(){return Sd=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sd.apply(this,arguments)};function U1(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function V1(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Yee="https://checkout.flutterwave.com/v3.js",yS=3,vS=1,kx=1;function xS(t){return typeof t=="number"}function qO(t){var e=t.maxAttempt,r=e===void 0?yS:e,n=t.interval,s=n===void 0?vS:n;return U1(this,void 0,void 0,function(){return V1(this,function(a){return r=xS(r)?Math.max(1,r):yS,s=xS(s)?Math.max(1,s):vS,[2,new Promise(function(o,l){var c=document.createElement("script");c.src=Yee,c.async=!0;var u=function(){c.removeEventListener("load",u),c.removeEventListener("error",d),o()},d=function(){document.body.removeChild(c),console.log("Flutterwave script download failed. Attempt: "+kx),kx<r?(++kx,setTimeout(function(){return qO({maxAttempt:r,interval:s}).then(o).catch(l)},s*1e3)):l(new Error("Failed to load payment modal. Check your internet connection and retry later."))};c.addEventListener("load",u),c.addEventListener("error",d),document.body.appendChild(c)})]})})}var Nx=!1;function Qee(t){return function(r){var n,s,a=r.callback,o=r.onClose;return U1(this,void 0,void 0,function(){var l,c=this;return V1(this,function(u){switch(u.label){case 0:return Nx?[2]:window.FlutterwaveCheckout?[3,2]:(Nx=!0,[4,qO(Sd({},t.retry))]);case 1:u.sent(),Nx=!1,u.label=2;case 2:return l=Sd(Sd({},t),{amount:(n=t.amount)!==null&&n!==void 0?n:0,callback:function(d){return U1(c,void 0,void 0,function(){var h;return V1(this,function(f){switch(f.label){case 0:return d.status!=="successful"?[3,2]:(a(d),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:t.public_key,language:"Flutterwave-React-v3",version:"1.0.7",title:(t==null?void 0:t.payment_options.split(",").length)>1?"Initiate-Charge-Multiple":"Initiate-Charge-"+(t==null?void 0:t.payment_options),message:"15s"})})]);case 1:return f.sent(),[3,4];case 2:return a(d),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:(h=t.public_key)!==null&&h!==void 0?h:"",language:"Flutterwave-React-v3",version:"1.0.7",title:(t==null?void 0:t.payment_options.split(",").length)>1?"Initiate-Charge-Multiple-error":"Initiate-Charge-"+(t==null?void 0:t.payment_options)+"-error",message:"15s"})})];case 3:f.sent(),f.label=4;case 4:return[2]}})})},onclose:o,payment_options:(s=t==null?void 0:t.payment_options)!==null&&s!==void 0?s:"card, ussd, mobilemoney"}),window.FlutterwaveCheckout(l),[2]}})})}}function Xee(){document.getElementsByName("checkout").forEach(function(t){t.setAttribute("style","position:fixed;top:0;left:0;z-index:-1;border:none;opacity:0;pointer-events:none;width:100%;height:100%;"),t.setAttribute("id","flwpugpaidid"),t.setAttribute("src","https://checkout.flutterwave.com/?"),document.body.style.overflow=""})}const Jee=()=>{var O;const t=Jt(),{cartItems:e,clearCart:r}=wf(),{currentUser:n}=Le(),s=I=>typeof I=="number"?I:I&&parseFloat(I.toString().replace(/[^\d.]/g,""))||0,[a,o]=T.useState(""),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[h,f]=T.useState({fullName:((O=n==null?void 0:n.user_metadata)==null?void 0:O.name)||(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",address:"",city:"",state:"",zipCode:""}),g=I=>{const{name:D,value:B}=I.target;f(z=>({...z,[D]:B}))},p=()=>!h.fullName||!h.email||!h.phone||!h.address||!h.city||!h.state?(alert("Please fill in all required shipping information"),!1):!0,x=e.reduce((I,D)=>I+s(D.price)*(D.quantity||1),0),b=e.length>0?2e3:0,w=x+b,y={email:h.email,amount:w*100,publicKey:"pk_test_92a99bcc7c063338c402506c2e6db390dd986585"},_={public_key:"FLWPUBK-8KAiNOWzksWGTGZDvgcrEL8QD82brD0MZXzh+Nm9USY=",tx_ref:Date.now().toString(),amount:w,currency:"NGN",payment_options:"card,mobilemoney,ussd",customer:{email:h.email,phone_number:h.phone,name:h.fullName},customizations:{title:"Checkout",description:"Payment for items in cart",logo:""}},S=BO(y),j=Qee(_),k=()=>{S(I=>A(I.reference,"paystack"),()=>c(!1))},N=()=>{j({callback:I=>{Xee(),I.status==="successful"?A(I.transaction_id,"flutterwave"):(console.error("Flutterwave failed:",I),c(!1))},onClose:()=>c(!1)})},E=()=>{alert("NOWPayments integration not yet available."),c(!1)},A=async(I,D)=>{try{c(!0);const{data:B,error:z}=await oa.from("orders").insert({buyer_id:(n==null?void 0:n.uid)||(n==null?void 0:n.id),status:"pending",total_amount:w,payment_method:D,transaction_id:I,shipping_address:JSON.stringify(h),created_at:new Date().toISOString()}).select().single();if(z)throw z;const G=e.map(F=>({order_id:B.id,product_id:F.id,quantity:F.quantity||1,price:s(F.price)})),{error:Q}=await oa.from("order_items").insert(G);if(Q)throw Q;console.log("Order successfully synced to Supabase:",B),r(),d(!0),setTimeout(()=>{t("/buyer/orders",{state:{success:!0,orderId:B.id}})},2e3)}catch(B){console.error("Error completing order:",B),alert("Failed to complete order. Please contact support. Error: "+(B.message||"Unknown error")),c(!1)}},P=()=>{if(p())switch(c(!0),a){case"paystack":k();break;case"flutterwave":N();break;case"nowpayments":E();break;default:alert("Please select a payment method"),c(!1)}};return u?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(WQ,{className:"w-20 h-20 text-green-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),i.jsx("p",{className:"text-gray-600",children:"Redirecting to order details..."})]})}):e.length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your cart is empty"}),i.jsx("button",{onClick:()=>t("/shop"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Continue Shopping"})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Shipping Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("input",{type:"text",name:"fullName",placeholder:"Full Name *",value:h.fullName,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"email",name:"email",placeholder:"Email *",value:h.email,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number *",value:h.phone,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"text",name:"city",placeholder:"City *",value:h.city,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"text",name:"state",placeholder:"State *",value:h.state,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"text",name:"zipCode",placeholder:"Zip Code",value:h.zipCode,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"text",name:"address",placeholder:"Street Address *",value:h.address,onChange:g,className:"col-span-full w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payment Method"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${a==="paystack"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("input",{type:"radio",name:"payment",value:"paystack",checked:a==="paystack",onChange:I=>o(I.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx(KQ,{className:"w-6 h-6 ml-3 text-blue-600"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"font-semibold",children:"Paystack"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Pay with Card, Bank Transfer, USSD"})]})]}),i.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${a==="flutterwave"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("input",{type:"radio",name:"payment",value:"flutterwave",checked:a==="flutterwave",onChange:I=>o(I.target.value),className:"w-4 h-4 text-orange-600"}),i.jsx(dX,{className:"w-6 h-6 ml-3 text-orange-600"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"font-semibold",children:"Flutterwave"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Card, Mobile Money, Bank Transfer"})]})]}),i.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${a==="nowpayments"?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("input",{type:"radio",name:"payment",value:"nowpayments",checked:a==="nowpayments",onChange:I=>o(I.target.value),className:"w-4 h-4 text-yellow-600"}),i.jsx(zQ,{className:"w-6 h-6 ml-3 text-yellow-600"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"font-semibold",children:"Cryptocurrency"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Bitcoin, Ethereum, USDT, and more"})]})]})]}),i.jsxs("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:[i.jsx(YQ,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Secure payment processing"})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),i.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:e.map(I=>{var D;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:I.image||((D=I.images)==null?void 0:D[0]),alt:I.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:I.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",I.quantity]})]}),i.jsxs("p",{className:"font-semibold",children:["",(I.price*I.quantity).toLocaleString()]})]},I.id)})}),i.jsxs("div",{className:"border-t pt-4 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",x.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{children:b===0?"FREE":`${b.toLocaleString()}`})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{children:["",w.toLocaleString()]})]})]}),i.jsx("button",{onClick:P,disabled:l,className:`w-full mt-6 py-3 rounded-lg font-semibold transition ${l?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:l?"Processing...":`Pay ${w.toLocaleString()}`}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By completing your purchase you agree to our Terms of Service"})]})})]})]})})},Zee=()=>{const{currentUser:t,logout:e}=Le(),r=Jt(),[n,s]=T.useState(!1),a=[{label:"Analytics",path:"/admin/analytics",icon:""},{label:"Users",path:"/admin/users",icon:""},{label:"Vendors",path:"/admin/vendors",icon:""},{label:"Vendor Approvals",path:"/admin/vendor-approvals",icon:""},{label:"Products",path:"/admin/products",icon:""},{label:"Orders",path:"/admin/orders",icon:""},{label:"Abandoned Carts",path:"/admin/abandoned-carts",icon:""},{label:"Disputes",path:"/admin/disputes",icon:""},{label:"Payments",path:"/admin/payments",icon:""},{label:"CMS",path:"/admin/cms",icon:""},{label:"Audit Logs",path:"/admin/audit-logs",icon:""},{label:"Coupons",path:"/admin/coupons",icon:""},{label:"Flash Sales",path:"/admin/flash-sales",icon:""},{label:"Payouts",path:"/admin/payouts",icon:""},{label:"Reviews",path:"/admin/reviews",icon:""},{label:"Financials",path:"/admin/financials",icon:""},{label:"Settings",path:"/admin/settings",icon:""}],o=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await e(),r("/login")}catch(l){console.error("Logout error:",l)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white sticky top-0 z-50 shadow-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>s(!n),className:"text-2xl p-2 hover:bg-white/10 rounded-lg transition",children:""}),i.jsx("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),i.jsx(he,{to:"/shop",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition",children:" Shop"})]})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>s(!1)}),i.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-800 z-50 shadow-2xl overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl overflow-hidden",children:t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold truncate",children:(t==null?void 0:t.name)||"Admin"}),i.jsx("p",{className:"text-sm opacity-90 truncate",children:t==null?void 0:t.email}),i.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full mt-1 inline-block",children:"Administrator"})]})]}),i.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-2xl hover:bg-white/10 w-8 h-8 rounded-full",children:""})]}),i.jsx("nav",{className:"p-4 space-y-2",children:a.map(l=>i.jsxs(he,{to:l.path,onClick:()=>s(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[i.jsx("span",{className:"text-xl",children:l.icon}),i.jsx("span",{className:"font-medium",children:l.label})]},l.path))}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium",children:[i.jsx("span",{className:"text-xl",children:""})," Logout"]})})]})]}),i.jsx("main",{className:"w-full",children:i.jsx(m_,{})})]})},ete=()=>{const{currentUser:t,logout:e}=Le(),r=Jt(),[n,s]=T.useState(!1),a=[{label:"Analytics",path:"/vendor/analytics",icon:""},{label:"Products",path:"/vendor/products",icon:""},{label:"Orders",path:"/vendor/orders",icon:""},{label:"Wallet",path:"/vendor/wallet",icon:""},{label:"Disputes",path:"/vendor/disputes",icon:""},{label:"Profile",path:"/vendor/profile",icon:""},{label:"Settings",path:"/vendor/settings",icon:""}],o=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await e(),r("/login")}catch(l){console.error("Logout error:",l)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white sticky top-0 z-50 shadow-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>s(!n),className:"text-2xl p-2 hover:bg-white/10 rounded-lg transition",children:""}),i.jsx("h1",{className:"text-xl font-bold",children:"Vendor Dashboard"}),i.jsx(he,{to:"/shop",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition",children:" Shop"})]})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>s(!1)}),i.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-800 z-50 shadow-2xl overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl overflow-hidden",children:t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold truncate",children:(t==null?void 0:t.name)||"Vendor"}),i.jsx("p",{className:"text-sm opacity-90 truncate",children:t==null?void 0:t.email}),i.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full mt-1 inline-block",children:"Vendor"})]})]}),i.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-2xl hover:bg-white/10 w-8 h-8 rounded-full",children:""})]}),i.jsx("nav",{className:"p-4 space-y-2",children:a.map(l=>i.jsxs(he,{to:l.path,onClick:()=>s(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[i.jsx("span",{className:"text-xl",children:l.icon}),i.jsx("span",{className:"font-medium",children:l.label})]},l.path))}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium",children:[i.jsx("span",{className:"text-xl",children:""})," Logout"]})})]})]}),i.jsx("main",{className:"w-full",children:i.jsx(m_,{})})]})},tte=()=>{var h,f,g;const{currentUser:t,logout:e}=Le(),r=Jt(),[n,s]=T.useState(!1),[a,o]=T.useState(null);T.useEffect(()=>{l()},[t]);const l=async()=>{if((t==null?void 0:t.role)==="buyer")try{const p=await Pt(ie(q,"vendorApplications",t.uid));p.exists()&&o(p.data().status)}catch(p){console.error("Error checking vendor application:",p)}},c=[{label:"My Orders",path:"/buyer/orders",icon:""},{label:"Wishlist",path:"/buyer/wishlist",icon:""},{label:"Wallet",path:"/buyer/wallet",icon:""},{label:"Loyalty & Rewards",path:"/buyer/loyalty",icon:""},{label:"Reviews",path:"/buyer/reviews",icon:""},{label:"Disputes",path:"/buyer/disputes",icon:""},{label:"Referrals",path:"/buyer/referrals",icon:""},{label:"Profile",path:"/buyer/profile",icon:""},{label:"Settings",path:"/buyer/settings",icon:""}],u=p=>({pending:{text:"Pending Review",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",icon:""},processing:{text:"Processing",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",icon:""},approved:{text:"Approved",color:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",icon:""},rejected:{text:"Rejected",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",icon:""}})[p]||null,d=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await e(),r("/login")}catch(p){console.error("Logout error:",p)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white sticky top-0 z-50 shadow-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>s(!n),className:"text-2xl p-2 hover:bg-white/10 rounded-lg transition",children:""}),i.jsx("h1",{className:"text-xl font-bold",children:"My Dashboard"}),i.jsx(he,{to:"/shop",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition",children:" Shop"})]})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>s(!1)}),i.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white dark:bg-gray-800 z-50 shadow-2xl overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500 to-red-500 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl overflow-hidden",children:t!=null&&t.avatar?i.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold truncate",children:(t==null?void 0:t.name)||"Buyer"}),i.jsx("p",{className:"text-sm opacity-90 truncate",children:t==null?void 0:t.email}),i.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full mt-1 inline-block",children:"Buyer"})]})]}),i.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-2xl hover:bg-white/10 w-8 h-8 rounded-full",children:""})]}),i.jsxs("nav",{className:"p-4 space-y-2",children:[c.map(p=>i.jsxs(he,{to:p.path,onClick:()=>s(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[i.jsx("span",{className:"text-xl",children:p.icon}),i.jsx("span",{className:"font-medium",children:p.label})]},p.path)),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2 mt-2",children:a?i.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"font-medium text-sm",children:"Vendor Application"})]}),i.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 border ${(h=u(a))==null?void 0:h.color}`,children:[i.jsx("span",{children:(f=u(a))==null?void 0:f.icon}),i.jsx("span",{children:(g=u(a))==null?void 0:g.text})]}),a==="rejected"&&i.jsx(he,{to:"/vendor-application",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline block mt-2",onClick:()=>s(!1),children:"Reapply Now"})]}):i.jsxs(he,{to:"/vendor-application",className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition border border-green-200 dark:border-green-800",onClick:()=>s(!1),children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-400 block",children:"Become a Vendor"}),i.jsx("span",{className:"text-xs text-green-600 dark:text-green-500",children:"Start selling on our platform"})]})]})})]}),i.jsx("div",{className:"p-4 border-t",children:i.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium",children:[i.jsx("span",{className:"text-xl",children:""})," Logout"]})})]})]}),i.jsx("main",{className:"w-full",children:i.jsx(m_,{})})]})},rte=()=>{const[t,e]=T.useState(!0),[r,n]=T.useState({totalRevenue:0,totalOrders:0,totalProducts:0,totalUsers:0,totalVendors:0,pendingOrders:0,pendingProducts:0,pendingVendorApps:0,todayRevenue:0,todayOrders:0,activeDisputes:0}),[s,a]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState([]);T.useEffect(()=>{d()},[]);const d=async()=>{try{const h=new Date;h.setHours(0,0,0,0);const g=(await me(ae(q,"orders"))).docs.map(F=>({id:F.id,...F.data()})),p=g.reduce((F,H)=>F+(H.total||0),0),x=g.filter(F=>new Date(F.createdAt)>=h),b=x.reduce((F,H)=>F+(H.total||0),0),w=g.filter(F=>F.status==="pending").length,_=(await me(ae(q,"products"))).docs.map(F=>({id:F.id,...F.data()})),S=_.filter(F=>F.status==="pending").length,j=_.sort((F,H)=>(H.sales||0)-(F.sales||0)).slice(0,5),N=(await me(ae(q,"users"))).docs.map(F=>({id:F.id,...F.data()})),E=N.filter(F=>F.role==="vendor"),A=new Date;A.setDate(A.getDate()-7);const P=N.filter(F=>F.createdAt&&new Date(F.createdAt)>=A).sort((F,H)=>new Date(H.createdAt)-new Date(F.createdAt)).slice(0,5),D=(await me(ae(q,"vendorApplications"))).docs.map(F=>({id:F.id,...F.data()})).filter(F=>F.status==="pending").length,G=(await me(ae(q,"disputes"))).docs.map(F=>({id:F.id,...F.data()})).filter(F=>F.status==="open").length,Q=g.sort((F,H)=>new Date(H.createdAt)-new Date(F.createdAt)).slice(0,5);n({totalRevenue:p,totalOrders:g.length,totalProducts:_.length,totalUsers:N.length,totalVendors:E.length,pendingOrders:w,pendingProducts:S,pendingVendorApps:D,todayRevenue:b,todayOrders:x.length,activeDisputes:G}),a(Q),l(j),u(P)}catch(h){console.error("Error fetching analytics:",h)}finally{e(!1)}};return t?i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading analytics..."})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard Analytics"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Platform overview and key metrics"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Total Revenue"}),i.jsx("span",{className:"text-2xl",children:""})]}),i.jsxs("p",{className:"text-3xl font-bold mb-1",children:["",r.totalRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75",children:["From ",r.totalOrders," orders"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Total Users"}),i.jsx("span",{className:"text-2xl",children:""})]}),i.jsx("p",{className:"text-3xl font-bold mb-1",children:r.totalUsers}),i.jsxs("p",{className:"text-xs opacity-75",children:[r.totalVendors," vendors"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Total Products"}),i.jsx("span",{className:"text-2xl",children:""})]}),i.jsx("p",{className:"text-3xl font-bold mb-1",children:r.totalProducts}),i.jsxs("p",{className:"text-xs opacity-75",children:[r.pendingProducts," pending"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Today's Revenue"}),i.jsx("span",{className:"text-2xl",children:""})]}),i.jsxs("p",{className:"text-3xl font-bold mb-1",children:["",r.todayRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75",children:[r.todayOrders," orders today"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.pendingOrders>0&&i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-yellow-800 dark:text-yellow-400",children:[r.pendingOrders," Pending Orders"]}),i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-500",children:"Require attention"})]})]})}),r.pendingVendorApps>0&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-blue-800 dark:text-blue-400",children:[r.pendingVendorApps," Vendor Applications"]}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-500",children:"Awaiting review"})]})]})}),r.activeDisputes>0&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-red-800 dark:text-red-400",children:[r.activeDisputes," Active Disputes"]}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-500",children:"Need resolution"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recent Orders"}),s.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No orders yet"}):i.jsx("div",{className:"space-y-3",children:s.map(h=>{var f;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:["#",h.id.substring(0,8)]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.userName})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-green-600",children:["",(f=h.total)==null?void 0:f.toLocaleString()]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.status==="delivered"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:h.status})]})]},h.id)})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Top Selling Products"}),o.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No sales data yet"}):i.jsx("div",{className:"space-y-3",children:o.map((h,f)=>{var g,p;return i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("span",{className:"text-2xl font-bold text-gray-400",children:["#",f+1]}),i.jsx("img",{src:((g=h.images)==null?void 0:g[0])||"https://via.placeholder.com/50",alt:h.name,className:"w-12 h-12 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.name}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.sales||0," sales"]})]}),i.jsxs("p",{className:"font-bold text-blue-600",children:["",(p=h.price)==null?void 0:p.toLocaleString()]})]},h.id)})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recent User Registrations"}),c.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No new users this week"}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Email"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Joined"})]})}),i.jsx("tbody",{children:c.map(h=>i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:h.name}),i.jsx("td",{className:"py-3 px-4 text-sm",children:h.email}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded-full capitalize ${h.role==="vendor"?"bg-green-100 text-green-800":h.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:h.role})}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(h.createdAt).toLocaleDateString()})]},h.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[i.jsxs("button",{onClick:()=>window.location.href="/admin/vendor-approvals",className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[i.jsx("span",{className:"text-3xl mb-2 block",children:""}),i.jsx("p",{className:"font-medium",children:"Review Applications"})]}),i.jsxs("button",{onClick:()=>window.location.href="/admin/products",className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors",children:[i.jsx("span",{className:"text-3xl mb-2 block",children:""}),i.jsx("p",{className:"font-medium",children:"Manage Products"})]}),i.jsxs("button",{onClick:()=>window.location.href="/admin/orders",className:"p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",children:[i.jsx("span",{className:"text-3xl mb-2 block",children:""}),i.jsx("p",{className:"font-medium",children:"View Orders"})]}),i.jsxs("button",{onClick:()=>window.location.href="/admin/users",className:"p-4 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[i.jsx("span",{className:"text-3xl mb-2 block",children:""}),i.jsx("p",{className:"font-medium",children:"Manage Users"})]})]})]})},nte=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all"),[o,l]=T.useState(""),[c,u]=T.useState(!1),[d,h]=T.useState(null),[f,g]=T.useState(!1),[p,x]=T.useState({name:"",email:"",password:"",phone:"",role:"buyer",active:!0});T.useEffect(()=>{b()},[]);const b=async()=>{try{const E=(await me(ae(q,"users"))).docs.map(A=>({id:A.id,...A.data()}));e(E)}catch(N){console.error("Error fetching users:",N)}finally{n(!1)}},w=async()=>{if(!p.name||!p.email||!p.password){alert("Please fill in all required fields");return}if(p.password.length<6){alert("Password must be at least 6 characters");return}try{const N=await I8(vs,p.email,p.password);await sg(ie(q,"users",N.user.uid),{name:p.name,email:p.email,phone:p.phone,role:p.role,active:p.active,createdAt:new Date().toISOString(),createdBy:"admin"}),alert("User created successfully!"),g(!1),x({name:"",email:"",password:"",phone:"",role:"buyer",active:!0}),b()}catch(N){console.error("Error creating user:",N),N.code==="auth/email-already-in-use"?alert("Email already in use"):alert("Failed to create user: "+N.message)}},y=async(N,E)=>{if(window.confirm(`Change user role to ${E}?`))try{await ke(ie(q,"users",N),{role:E,updatedAt:new Date().toISOString()}),alert("User role updated successfully"),b()}catch{alert("Failed to update user role")}},_=async(N,E)=>{try{await ke(ie(q,"users",N),{active:!E,updatedAt:new Date().toISOString()}),alert(`User ${E?"deactivated":"activated"} successfully`),b()}catch{alert("Failed to update user status")}},S=async N=>{if(window.confirm("Permanently delete this user? This action cannot be undone!"))try{await ns(ie(q,"users",N)),alert("User deleted successfully"),b()}catch{alert("Failed to delete user")}},j=t.filter(N=>{var P,O;const E=((P=N.name)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))||((O=N.email)==null?void 0:O.toLowerCase().includes(o.toLowerCase())),A=s==="all"||N.role===s;return E&&A}),k={all:t.length,buyers:t.filter(N=>N.role==="buyer").length,vendors:t.filter(N=>N.role==="vendor").length,admins:t.filter(N=>N.role==="admin").length};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),i.jsxs("button",{onClick:()=>g(!0),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:"+"}),i.jsx("span",{children:"Create New User"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Users"}),i.jsx("p",{className:"text-3xl font-bold",children:k.all})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-blue-700 dark:text-blue-400 text-sm",children:"Buyers"}),i.jsx("p",{className:"text-3xl font-bold text-blue-800 dark:text-blue-300",children:k.buyers})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm",children:"Vendors"}),i.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-300",children:k.vendors})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"Admins"}),i.jsx("p",{className:"text-3xl font-bold text-purple-800 dark:text-purple-300",children:k.admins})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:N=>l(N.target.value),className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg ${s==="all"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"All"}),i.jsx("button",{onClick:()=>a("buyer"),className:`px-4 py-2 rounded-lg ${s==="buyer"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Buyers"}),i.jsx("button",{onClick:()=>a("vendor"),className:`px-4 py-2 rounded-lg ${s==="vendor"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Vendors"}),i.jsx("button",{onClick:()=>a("admin"),className:`px-4 py-2 rounded-lg ${s==="admin"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Admins"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Email"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Phone"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:j.map(N=>i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:N.name}),i.jsx("td",{className:"py-3 px-4",children:N.email}),i.jsx("td",{className:"py-3 px-4",children:N.phone||"N/A"}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("select",{value:N.role,onChange:E=>y(N.id,E.target.value),className:"px-3 py-1 border rounded dark:bg-gray-700 capitalize",children:[i.jsx("option",{value:"buyer",children:"Buyer"}),i.jsx("option",{value:"vendor",children:"Vendor"}),i.jsx("option",{value:"admin",children:"Admin"})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("button",{onClick:()=>_(N.id,N.active),className:`px-3 py-1 rounded text-xs ${N.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.active?"Active":"Inactive"})}),i.jsxs("td",{className:"py-3 px-4 space-x-2",children:[i.jsx("button",{onClick:()=>{h(N),u(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View"}),i.jsx("button",{onClick:()=>S(N.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]},N.id))})]}),j.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No users found"})})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Create New User"}),i.jsx("button",{onClick:()=>g(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",value:p.name,onChange:N=>x({...p,name:N.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),i.jsx("input",{type:"email",value:p.email,onChange:N=>x({...p,email:N.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"user@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password * (min 6 characters)"}),i.jsx("input",{type:"password",value:p.password,onChange:N=>x({...p,password:N.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),i.jsx("input",{type:"text",value:p.phone,onChange:N=>x({...p,phone:N.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"+234 XXX XXX XXXX"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role *"}),i.jsxs("select",{value:p.role,onChange:N=>x({...p,role:N.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 capitalize",children:[i.jsx("option",{value:"buyer",children:"Buyer"}),i.jsx("option",{value:"vendor",children:"Vendor"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:p.active,onChange:N=>x({...p,active:N.target.checked}),className:"w-5 h-5"}),i.jsx("label",{className:"text-sm font-medium",children:"Active Account"})]}),i.jsx("button",{onClick:w,className:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Create User"})]})]})}),c&&d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"User Details"}),i.jsx("button",{onClick:()=>u(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",d.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",d.email]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Phone:"})," ",d.phone||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Role:"})," ",i.jsx("span",{className:"capitalize",children:d.role})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",d.active?"Active":"Inactive"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Joined:"})," ",d.createdAt?new Date(d.createdAt).toLocaleDateString():"N/A"]})]})]})})]})},ste=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all"),[o,l]=T.useState(null),[c,u]=T.useState(!1);T.useEffect(()=>{d()},[]);const d=async()=>{try{const p=Ce(ae(q,"users"),je("role","==","vendor")),b=(await me(p)).docs.map(w=>({id:w.id,...w.data()}));e(b)}catch(p){console.error("Error fetching vendors:",p)}finally{n(!1)}},h=async p=>{if(window.confirm("Are you sure you want to suspend this vendor?"))try{await ke(ie(q,"users",p),{suspended:!0,suspendedAt:new Date().toISOString()}),alert("Vendor suspended successfully"),d()}catch{alert("Failed to suspend vendor")}},f=async p=>{try{await ke(ie(q,"users",p),{suspended:!1,activatedAt:new Date().toISOString()}),alert("Vendor activated successfully"),d()}catch{alert("Failed to activate vendor")}},g=t.filter(p=>s==="active"?!p.suspended:s==="suspended"?p.suspended:!0);return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Vendor Management"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Vendors"}),i.jsx("p",{className:"text-3xl font-bold",children:t.length})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm",children:"Active Vendors"}),i.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-300",children:t.filter(p=>!p.suspended).length})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:"Suspended"}),i.jsx("p",{className:"text-3xl font-bold text-red-800 dark:text-red-300",children:t.filter(p=>p.suspended).length})]})]}),i.jsxs("select",{value:s,onChange:p=>a(p.target.value),className:"mb-6 px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Vendors"}),i.jsx("option",{value:"active",children:"Active Only"}),i.jsx("option",{value:"suspended",children:"Suspended Only"})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Vendor Name"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Email"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Joined Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:g.map(p=>i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:p.name}),i.jsx("td",{className:"py-3 px-4",children:p.email}),i.jsx("td",{className:"py-3 px-4",children:p.createdAt?new Date(p.createdAt).toLocaleDateString():"N/A"}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${p.suspended?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:p.suspended?"Suspended":"Active"})}),i.jsxs("td",{className:"py-3 px-4 space-x-2",children:[i.jsx("button",{onClick:()=>{l(p),u(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View"}),p.suspended?i.jsx("button",{onClick:()=>f(p.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Activate"}):i.jsx("button",{onClick:()=>h(p.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Suspend"})]})]},p.id))})]})}),c&&o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendor Details"}),i.jsx("button",{onClick:()=>u(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",o.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",o.email]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Phone:"})," ",o.phone||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Business Name:"})," ",o.businessName||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",o.suspended?"Suspended":"Active"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Joined:"})," ",o.createdAt?new Date(o.createdAt).toLocaleDateString():"N/A"]})]})]})})]})},ate=()=>{var w;const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("pending"),[o,l]=T.useState(null),[c,u]=T.useState(!1),[d,h]=T.useState("");T.useEffect(()=>{f()},[]);const f=async()=>{try{const _=(await me(ae(q,"vendorApplications"))).docs.map(S=>({id:S.id,...S.data()}));e(_)}catch(y){console.error("Error fetching applications:",y)}finally{n(!1)}},g=async(y,_)=>{if(window.confirm("Are you sure you want to approve this vendor application?"))try{await ke(ie(q,"vendorApplications",y),{status:"approved",approvedAt:new Date().toISOString(),reviewedBy:"admin"}),await ke(ie(q,"users",_),{role:"vendor",vendorApproved:!0,approvedAt:new Date().toISOString()}),alert("Vendor application approved successfully!"),f()}catch(S){console.error("Error approving vendor:",S),alert("Failed to approve vendor application")}},p=async(y,_)=>{if(!d.trim()){alert("Please provide a reason for rejection");return}try{await ke(ie(q,"vendorApplications",y),{status:"rejected",rejectedAt:new Date().toISOString(),rejectionReason:d,reviewedBy:"admin"}),alert("Vendor application rejected"),u(!1),h(""),f()}catch{alert("Failed to reject application")}},x=t.filter(y=>s==="all"?!0:y.status===s),b={all:t.length,pending:t.filter(y=>y.status==="pending").length,processing:t.filter(y=>y.status==="processing").length,approved:t.filter(y=>y.status==="approved").length,rejected:t.filter(y=>y.status==="rejected").length};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Vendor Applications"}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsxs("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg ${s==="all"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["All (",b.all,")"]}),i.jsxs("button",{onClick:()=>a("pending"),className:`px-4 py-2 rounded-lg ${s==="pending"?"bg-yellow-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Pending (",b.pending,")"]}),i.jsxs("button",{onClick:()=>a("processing"),className:`px-4 py-2 rounded-lg ${s==="processing"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Processing (",b.processing,")"]}),i.jsxs("button",{onClick:()=>a("approved"),className:`px-4 py-2 rounded-lg ${s==="approved"?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Approved (",b.approved,")"]}),i.jsxs("button",{onClick:()=>a("rejected"),className:`px-4 py-2 rounded-lg ${s==="rejected"?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["Rejected (",b.rejected,")"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Applicant"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Business Name"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Applied Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:x.map(y=>i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:y.fullName}),i.jsx("p",{className:"text-sm text-gray-600",children:y.email})]}),i.jsx("td",{className:"py-3 px-4",children:y.businessName}),i.jsx("td",{className:"py-3 px-4",children:new Date(y.createdAt).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${y.status==="approved"?"bg-green-100 text-green-800":y.status==="rejected"?"bg-red-100 text-red-800":y.status==="processing"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})}),i.jsxs("td",{className:"py-3 px-4 space-x-2",children:[i.jsx("button",{onClick:()=>{l(y),u(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Details"}),y.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>g(y.id,y.userId),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Approve"}),i.jsx("button",{onClick:()=>{l(y),u(!0)},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Reject"})]})]})]},y.id))})]}),x.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No applications found"})})]}),c&&o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Application Details"}),i.jsx("button",{onClick:()=>u(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Applicant Name"}),i.jsx("p",{className:"font-medium",children:o.fullName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),i.jsx("p",{className:"font-medium",children:o.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),i.jsx("p",{className:"font-medium",children:o.phone})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Business Name"}),i.jsx("p",{className:"font-medium",children:o.businessName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Business Type"}),i.jsx("p",{className:"font-medium",children:o.businessType})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Business Address"}),i.jsx("p",{className:"font-medium",children:o.businessAddress})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Product Categories"}),i.jsx("p",{className:"font-medium",children:(w=o.productCategories)==null?void 0:w.join(", ")})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Business Description"}),i.jsx("p",{className:"font-medium",children:o.businessDescription})]}),o.status==="pending"&&i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsx("button",{onClick:()=>g(o.id,o.userId),className:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve Application"}),i.jsxs("div",{children:[i.jsx("textarea",{value:d,onChange:y=>h(y.target.value),placeholder:"Reason for rejection...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",rows:"3"}),i.jsx("button",{onClick:()=>p(o.id,o.userId),className:"w-full mt-2 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reject Application"})]})]})]})]})})]})},ite=()=>{var k,N,E,A;const t=Jt(),[e,r]=T.useState([]),[n,s]=T.useState(!0),[a,o]=T.useState("all"),[l,c]=T.useState(""),[u,d]=T.useState(null),[h,f]=T.useState(!1),[g,p]=T.useState("");T.useEffect(()=>{x()},[]);const x=async()=>{try{const O=(await me(ae(q,"products"))).docs.map(I=>({id:I.id,...I.data()}));r(O)}catch(P){console.error("Error fetching products:",P)}finally{s(!1)}},b=async(P,O,I)=>{if(window.confirm("Approve this product?"))try{await ke(ie(q,"products",P),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:"admin"}),alert("Product approved successfully!"),x()}catch(D){console.error("Error approving product:",D),alert("Failed to approve product")}},w=async(P,O,I)=>{if(!g.trim()){alert("Please provide a rejection reason");return}try{await ke(ie(q,"products",P),{status:"rejected",rejectedAt:new Date().toISOString(),rejectionReason:g,rejectedBy:"admin"}),alert("Product rejected"),f(!1),p(""),x()}catch{alert("Failed to reject product")}},y=async P=>{if(window.confirm("Permanently delete this product? This cannot be undone!"))try{await ns(ie(q,"products",P)),alert("Product deleted successfully"),x()}catch{alert("Failed to delete product")}},_=P=>{t(`/admin/products/edit/${P}`)},S=e.filter(P=>{var D,B,z;const O=((D=P.name)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((B=P.category)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((z=P.vendorName)==null?void 0:z.toLowerCase().includes(l.toLowerCase())),I=a==="all"||P.status===a;return O&&I}),j={all:e.length,pending:e.filter(P=>P.status==="pending").length,approved:e.filter(P=>P.status==="approved").length,rejected:e.filter(P=>P.status==="rejected").length};return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Product Management"}),i.jsxs("button",{onClick:()=>t("/admin/products/add"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:"+"}),i.jsx("span",{children:"Add New Product"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Products"}),i.jsx("p",{className:"text-3xl font-bold",children:j.all})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-yellow-700 dark:text-yellow-400 text-sm",children:"Pending Review"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-800 dark:text-yellow-300",children:j.pending})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm",children:"Approved"}),i.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-300",children:j.approved})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:"Rejected"}),i.jsx("p",{className:"text-3xl font-bold text-red-800 dark:text-red-300",children:j.rejected})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{type:"text",placeholder:"Search products by name, category, or vendor...",value:l,onChange:P=>c(P.target.value),className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsxs("select",{value:a,onChange:P=>o(P.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Product"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Price"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Stock"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Vendor"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:S.map(P=>{var O,I;return i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:((O=P.images)==null?void 0:O[0])||"https://via.placeholder.com/50",alt:P.name,className:"w-12 h-12 object-cover rounded"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium line-clamp-1",children:P.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",P.id.substring(0,8)]})]})]})}),i.jsx("td",{className:"py-3 px-4 capitalize",children:P.category}),i.jsxs("td",{className:"py-3 px-4 font-bold",children:["",(I=P.price)==null?void 0:I.toLocaleString()]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`${P.stock===0?"text-red-600":P.stock<10?"text-yellow-600":"text-green-600"}`,children:P.stock})}),i.jsx("td",{className:"py-3 px-4",children:P.vendorName||"Admin"}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${P.status==="approved"?"bg-green-100 text-green-800":P.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:P.status})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>{d(P),f(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View"}),i.jsx("button",{onClick:()=>_(P.id),className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700",children:"Edit"}),P.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>b(P.id,P.vendorId,P.name),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Approve"}),i.jsx("button",{onClick:()=>{d(P),f(!0)},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Reject"})]}),i.jsx("button",{onClick:()=>y(P.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})})]},P.id)})})]}),S.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found"}),l&&i.jsx("button",{onClick:()=>c(""),className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Clear Search"})]})]}),h&&u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Product Details"}),i.jsx("button",{onClick:()=>f(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("img",{src:((k=u.images)==null?void 0:k[0])||"https://via.placeholder.com/400",alt:u.name,className:"w-full h-64 object-cover rounded-lg mb-3"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:(N=u.images)==null?void 0:N.slice(1,5).map((P,O)=>i.jsx("img",{src:P,alt:`Product ${O+2}`,className:"w-full h-16 object-cover rounded"},O))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Product Name"}),i.jsx("p",{className:"font-bold text-xl",children:u.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Category"}),i.jsx("p",{className:"font-medium capitalize",children:u.category})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Price"}),i.jsxs("p",{className:"font-bold text-2xl text-blue-600",children:["",(E=u.price)==null?void 0:E.toLocaleString()]}),u.originalPrice&&u.originalPrice>u.price&&i.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",(A=u.originalPrice)==null?void 0:A.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Stock"}),i.jsxs("p",{className:"font-medium",children:[u.stock," units"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Vendor"}),i.jsx("p",{className:"font-medium",children:u.vendorName||"Admin"})]}),u.description&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Description"}),i.jsx("p",{className:"text-sm",children:u.description})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs ${u.status==="approved"?"bg-green-100 text-green-800":u.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:u.status})]}),u.rating&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Rating"}),i.jsxs("p",{className:"font-medium",children:[u.rating,"  (",u.reviews||0," reviews)"]})]}),u.status==="pending"&&i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsx("button",{onClick:()=>{b(u.id,u.vendorId,u.name),f(!1)},className:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve Product"}),i.jsxs("div",{children:[i.jsx("textarea",{value:g,onChange:P=>p(P.target.value),placeholder:"Reason for rejection...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",rows:"3"}),i.jsx("button",{onClick:()=>w(u.id,u.vendorId,u.name),className:"w-full mt-2 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reject Product"})]})]})]})]})]})})]})};class ote{constructor(){this.openaiKey=void 0,this.geminiKey="AIzaSyBZTbWlzQjWrYWe7kftqEB3qdkXcXTGw4A"}async generateDescription(e){const{name:r,category:n,price:s,features:a}=e;if(!this.openaiKey&&!this.geminiKey)return this.generateTemplateDescription(e);try{if(this.geminiKey)return await this.generateWithGemini(e);if(this.openaiKey)return await this.generateWithOpenAI(e)}catch(o){return console.error("AI description generation failed:",o),this.generateTemplateDescription(e)}}async generateWithOpenAI(e){const{name:r,category:n,price:s,features:a,brand:o}=e,l=`Write a compelling, SEO-optimized product description for an e-commerce listing:

Product Name: ${r}
Category: ${n}
Price: ${s.toLocaleString()}
${o?`Brand: ${o}`:""}
${a?`Key Features: ${a}`:""}

Requirements:
- 3-4 paragraphs
- Highlight key benefits and features
- Use persuasive language
- Include relevant keywords
- Professional and engaging tone
- Focus on customer value`,u=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.openaiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an expert e-commerce copywriter who creates compelling product descriptions that convert."},{role:"user",content:l}],max_tokens:500,temperature:.7})})).json();if(u.error)throw new Error(u.error.message);return u.choices[0].message.content}async generateWithGemini(e){const{name:r,category:n,price:s,features:a,brand:o}=e,l=`Write a compelling, SEO-optimized product description for:

Product: ${r}
Category: ${n}
Price: ${s.toLocaleString()}
${o?`Brand: ${o}`:""}
${a?`Features: ${a}`:""}

Create 3-4 engaging paragraphs that highlight benefits and value.`,u=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${this.geminiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:l}]}],generationConfig:{temperature:.7,maxOutputTokens:500}})})).json();if(u.error)throw new Error(u.error.message);return u.candidates[0].content.parts[0].text}generateTemplateDescription(e){const{name:r,category:n,price:s,features:a,brand:o}=e,c={electronics:"cutting-edge technology and innovative features",fashion:"stylish design and premium quality materials",home:"comfort, functionality, and elegant design",sports:"performance, durability, and professional quality",beauty:"premium ingredients and transformative results",books:"engaging content and valuable knowledge",toys:"fun, safety, and educational value",food:"authentic taste and premium quality"}[n==null?void 0:n.toLowerCase()]||"exceptional quality and value";let u=`Discover the **${r}**, a premium ${n} product that combines ${c}.

`;return o&&(u+=`Brought to you by **${o}**, a trusted name in quality. `),u+=`At just **${s==null?void 0:s.toLocaleString()}**, this product offers exceptional value for money.

`,a&&(u+=`**Key Features:**
${a}

`),u+=`Perfect for those who demand the best, this ${r} is designed to exceed your expectations. Whether you're looking for quality, performance, or style, this product delivers on all fronts.

`,u+=`**Why Choose This Product?**
`,u+=` High-quality ${n} product
`,u+=` Competitive pricing
`,u+=` Fast delivery available
`,u+=` Customer satisfaction guaranteed

`,u+="Order now and experience the difference! Limited stock available.",u}generateKeywords(e){const{name:r,category:n,brand:s}=e,a=[r.toLowerCase(),n==null?void 0:n.toLowerCase(),s==null?void 0:s.toLowerCase(),`buy ${r.toLowerCase()}`,`${r.toLowerCase()} online`,`best ${n==null?void 0:n.toLowerCase()}`,`${s==null?void 0:s.toLowerCase()} ${n==null?void 0:n.toLowerCase()}`,`affordable ${r.toLowerCase()}`].filter(Boolean);return[...new Set(a)].join(", ")}generateTitleVariations(e,r){return[e,`Premium ${e}`,`${e} - Best in ${r}`,`${e} | Free Shipping`,`New ${e} Collection`]}suggestPrice(e,r){const s={electronics:1.2,fashion:1.5,home:1.3,sports:1.4,beauty:1.6,books:1.2,toys:1.3,food:1.2}[e==null?void 0:e.toLowerCase()]||1.3;return Math.round(r*s)}generateTags(e){const{name:r,category:n,brand:s}=e,a=["trending","new arrival",n==null?void 0:n.toLowerCase(),s==null?void 0:s.toLowerCase(),"featured","best seller","premium"].filter(Boolean);return[...new Set(a)]}async optimizeProductListing(e){const r=await this.generateDescription(e),n=this.generateKeywords(e),s=this.generateTags(e),a=this.generateTitleVariations(e.name,e.category);return{description:r,keywords:n,tags:s,titleVariations:a,optimizedTitle:a[0]}}}const bS=new ote,lte=()=>{const t=Jt(),{currentUser:e}=Le(),[r,n]=T.useState({name:"",description:"",category:"",price:"",compareAtPrice:"",cost:"",stock:"",sku:"",barcode:"",brand:"",features:"",specifications:{},tags:[],status:"approved",featured:!1,seoTitle:"",seoDescription:"",seoKeywords:"",variants:[],shippingWeight:"",shippingDimensions:{length:"",width:"",height:""},warranty:"",returnPolicy:"30 days",manufacturer:"",countryOfOrigin:""}),[s,a]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!1),[d,h]=T.useState(!1),[f,g]=T.useState(!1),[p,x]=T.useState(""),[b,w]=T.useState(""),[y,_]=T.useState(""),[S,j]=T.useState({key:"",value:""}),[k,N]=T.useState({name:"",values:""}),E=["Electronics","Fashion","Home","Sports","Books","Beauty","Toys","Food","Other"],A=[{value:"approved",label:"Approved",color:"green"},{value:"pending",label:"Pending Review",color:"yellow"},{value:"rejected",label:"Rejected",color:"red"},{value:"draft",label:"Draft",color:"gray"}],P=Y=>{const{name:re,value:Pe,type:Ne,checked:le}=Y.target;n(Se=>({...Se,[re]:Ne==="checkbox"?le:Pe})),x("")},O=(Y,re,Pe)=>{n(Ne=>({...Ne,[Y]:{...Ne[Y],[re]:Pe}}))},I=Y=>{a(re=>re.filter((Pe,Ne)=>Ne!==Y)),l(re=>re.filter((Pe,Ne)=>Ne!==Y))},D=async Y=>{g(!0);try{const re=Y.name.toLowerCase();return re.includes("phone")||re.includes("laptop")||re.includes("electronic")?"Electronics":re.includes("shirt")||re.includes("shoe")||re.includes("dress")?"Fashion":re.includes("chair")||re.includes("table")||re.includes("bed")?"Home":null}catch(re){return console.error("Category suggestion error:",re),null}finally{g(!1)}},B=async Y=>{const re=Array.from(Y.target.files);if(re.length>5){x("Maximum 5 images allowed");return}a(re);const Pe=re.map(Ne=>URL.createObjectURL(Ne));if(l(Pe),re.length>0&&!r.category){const Ne=await D(re[0]);Ne&&(n(le=>({...le,category:Ne})),w(`AI suggested category: ${Ne} `),setTimeout(()=>w(""),3e3))}x("")},z=async()=>{h(!0),x("");try{if(!r.name||!r.category)throw new Error("Please fill in product name and category first");const Y={name:r.name,category:r.category,price:parseFloat(r.price)||0,brand:r.brand,features:r.features},re=await bS.generateDescription(Y);n(Ne=>({...Ne,description:re}));const Pe=bS.generateKeywords(Y);n(Ne=>({...Ne,seoKeywords:Pe,seoTitle:`${r.name} - Buy Online at Best Price`,seoDescription:re.substring(0,160)+"..."})),w("Description and SEO fields generated successfully! "),setTimeout(()=>w(""),3e3)}catch(Y){console.error("Description generation error:",Y),x(Y.message||"Failed to generate description. Please try again.")}finally{h(!1)}},G=()=>{y.trim()&&!r.tags.includes(y.trim())&&(n(Y=>({...Y,tags:[...Y.tags,y.trim()]})),_(""))},Q=Y=>{n(re=>({...re,tags:re.tags.filter(Pe=>Pe!==Y)}))},F=()=>{S.key.trim()&&S.value.trim()&&(n(Y=>({...Y,specifications:{...Y.specifications,[S.key.trim()]:S.value.trim()}})),j({key:"",value:""}))},H=Y=>{n(re=>{const Pe={...re.specifications};return delete Pe[Y],{...re,specifications:Pe}})},$=()=>{k.name.trim()&&k.values.trim()&&(n(Y=>({...Y,variants:[...Y.variants,{name:k.name.trim(),values:k.values.split(",").map(re=>re.trim())}]})),N({name:"",values:""}))},U=Y=>{n(re=>({...re,variants:re.variants.filter((Pe,Ne)=>Ne!==Y)}))},V=async()=>{const Y=s.map(async(re,Pe)=>{const Ne=cs(us,`products/${Date.now()}_${Pe}_${re.name}`);return await os(Ne,re),await ls(Ne)});return await Promise.all(Y)},Z=()=>{if(!r.name.trim())throw new Error("Product name is required");if(!r.category)throw new Error("Please select a category");if(!r.price||parseFloat(r.price)<=0)throw new Error("Please enter a valid price");if(!r.stock||parseInt(r.stock)<0)throw new Error("Please enter valid stock quantity");if(s.length===0)throw new Error("Please upload at least one product image");if(!r.description.trim())throw new Error("Product description is required")},ye=async Y=>{Y.preventDefault(),u(!0),x(""),w("");try{Z();const re=await V(),Pe={...r,price:parseFloat(r.price),compareAtPrice:r.compareAtPrice?parseFloat(r.compareAtPrice):null,cost:r.cost?parseFloat(r.cost):null,stock:parseInt(r.stock),shippingWeight:r.shippingWeight?parseFloat(r.shippingWeight):null,images:re,vendorId:"admin",vendorName:"Admin",rating:0,reviewCount:0,soldCount:0,views:0,discount:0,createdAt:ag(),updatedAt:ag(),createdBy:(e==null?void 0:e.uid)||"admin"};await Mt(ae(q,"products"),Pe),w("Product added successfully! "),setTimeout(()=>{t("/admin/products")},2e3)}catch(re){console.error("Error adding product:",re),x(re.message||"Failed to add product. Please try again.")}finally{u(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Product (Admin)"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"AI-powered product creation with admin privileges"})]}),i.jsx("button",{onClick:()=>t("/admin/products"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Back to Products"})]}),p&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:i.jsxs("p",{className:"font-medium",children:[" ",p]})}),b&&i.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:i.jsx("p",{className:"font-medium",children:b})}),i.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx("span",{children:""})," Admin Controls"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Status"}),i.jsx("select",{name:"status",value:r.status,onChange:P,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500",children:A.map(Y=>i.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Vendor Name"}),i.jsx("input",{type:"text",value:"Admin",disabled:!0,className:"w-full p-3 border rounded-lg bg-gray-100"})]}),i.jsx("div",{className:"flex items-center pt-6",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"featured",checked:r.featured,onChange:P,className:"w-5 h-5 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:" Featured Product"})]})})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Basic Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Product Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"name",value:r.name,onChange:P,placeholder:"e.g., iPhone 17 Pro Max",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Category ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{name:"category",value:r.category,onChange:P,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[i.jsx("option",{value:"",children:"Select Category"}),E.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brand"}),i.jsx("input",{type:"text",name:"brand",value:r.brand,onChange:P,placeholder:"e.g., Apple, Samsung",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Manufacturer"}),i.jsx("input",{type:"text",name:"manufacturer",value:r.manufacturer,onChange:P,placeholder:"e.g., Foxconn",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),i.jsx("input",{type:"text",name:"sku",value:r.sku,onChange:P,placeholder:"e.g., IPHN-17PM-BLK-256",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),i.jsx("input",{type:"text",name:"barcode",value:r.barcode,onChange:P,placeholder:"e.g., 123456789012",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Country of Origin"}),i.jsx("input",{type:"text",name:"countryOfOrigin",value:r.countryOfOrigin,onChange:P,placeholder:"e.g., China, USA",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Warranty"}),i.jsx("input",{type:"text",name:"warranty",value:r.warranty,onChange:P,placeholder:"e.g., 1 Year Manufacturer Warranty",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Pricing"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Price () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",name:"price",value:r.price,onChange:P,placeholder:"100000",min:"0",step:"0.01",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compare at Price ()"}),i.jsx("input",{type:"number",name:"compareAtPrice",value:r.compareAtPrice,onChange:P,placeholder:"150000 (Original price)",min:"0",step:"0.01",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shows as crossed-out price"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cost per Item ()"}),i.jsx("input",{type:"number",name:"cost",value:r.cost,onChange:P,placeholder:"80000 (Your cost)",min:"0",step:"0.01",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For profit tracking"})]})]}),r.price&&r.compareAtPrice&&r.compareAtPrice>r.price&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-green-700",children:[" Discount: ",Math.round((1-r.price/r.compareAtPrice)*100),"% OFF (Save ",(r.compareAtPrice-r.price).toLocaleString(),")"]})})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Inventory"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stock Quantity ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",name:"stock",value:r.stock,onChange:P,placeholder:"50",min:"0",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Return Policy"}),i.jsxs("select",{name:"returnPolicy",value:r.returnPolicy,onChange:P,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"7 days",children:"7 Days Return"}),i.jsx("option",{value:"14 days",children:"14 Days Return"}),i.jsx("option",{value:"30 days",children:"30 Days Return"}),i.jsx("option",{value:"no return",children:"No Returns"})]})]})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Product Description"}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Description ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"description",value:r.description,onChange:P,rows:"8",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Enter detailed product description...",required:!0}),i.jsx("button",{type:"button",onClick:z,disabled:d||!r.name||!r.category,className:"mt-3 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all shadow-lg",children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"animate-spin",children:""}),i.jsx("span",{children:"Generating with AI..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Generate Description with AI"})]})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Fill in product name, category, and price first for best results"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Key Features"}),i.jsx("textarea",{name:"features",value:r.features,onChange:P,rows:"3",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 5G Network, 256GB Storage, 6.7-inch Display"})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Product Media"}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Upload Images (Max 5) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:B,className:"w-full p-3 border rounded-lg"}),f&&i.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-purple-600",children:[i.jsx("span",{className:"animate-spin",children:""}),i.jsx("span",{children:"AI is analyzing image to suggest category..."})]}),o.length>0&&i.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-5 gap-4",children:o.map((Y,re)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:Y,alt:`Preview ${re+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),re===0&&i.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:"Main"}),i.jsx("button",{type:"button",onClick:()=>I(re),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:""})]},re))}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" First image will be the main product image. AI will suggest category based on image."})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Specifications"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsx("input",{type:"text",value:S.key,onChange:Y=>j({...S,key:Y.target.value}),placeholder:"Specification name (e.g., Screen Size)",className:"p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:S.value,onChange:Y=>j({...S,value:Y.target.value}),placeholder:"Value (e.g., 6.7 inches)",className:"flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add"})]})]}),Object.keys(r.specifications).length>0&&i.jsx("div",{className:"space-y-2",children:Object.entries(r.specifications).map(([Y,re])=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-medium",children:[Y,":"]})," ",re]}),i.jsx("button",{type:"button",onClick:()=>H(Y),className:"text-red-600 hover:text-red-700",children:""})]},Y))})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Product Variants"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsx("input",{type:"text",value:k.name,onChange:Y=>N({...k,name:Y.target.value}),placeholder:"Variant name (e.g., Color, Size)",className:"p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:k.values,onChange:Y=>N({...k,values:Y.target.value}),placeholder:"Values (comma-separated: Red, Blue, Green)",className:"flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add"})]})]}),r.variants.length>0&&i.jsx("div",{className:"space-y-2",children:r.variants.map((Y,re)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-medium",children:[Y.name,":"]})," ",Y.values.join(", ")]}),i.jsx("button",{type:"button",onClick:()=>U(re),className:"text-red-600 hover:text-red-700",children:""})]},re))})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Product Tags"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"text",value:y,onChange:Y=>_(Y.target.value),onKeyPress:Y=>Y.key==="Enter"&&(Y.preventDefault(),G()),placeholder:"Add tag (e.g., trending, new arrival)",className:"flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Tag"})]}),r.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((Y,re)=>i.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-2",children:[Y,i.jsx("button",{type:"button",onClick:()=>Q(Y),className:"hover:text-blue-900",children:""})]},re))})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" Shipping Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight (kg)"}),i.jsx("input",{type:"number",name:"shippingWeight",value:r.shippingWeight,onChange:P,placeholder:"0.5",min:"0",step:"0.01",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Length (cm)"}),i.jsx("input",{type:"number",value:r.shippingDimensions.length,onChange:Y=>O("shippingDimensions","length",Y.target.value),placeholder:"30",min:"0",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width (cm)"}),i.jsx("input",{type:"number",value:r.shippingDimensions.width,onChange:Y=>O("shippingDimensions","width",Y.target.value),placeholder:"20",min:"0",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height (cm)"}),i.jsx("input",{type:"number",value:r.shippingDimensions.height,onChange:Y=>O("shippingDimensions","height",Y.target.value),placeholder:"5",min:"0",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]}),i.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:" SEO Optimization"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"SEO Title"}),i.jsx("input",{type:"text",name:"seoTitle",value:r.seoTitle,onChange:P,placeholder:"Optimized title for search engines",maxLength:"60",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.seoTitle.length,"/60 characters"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"SEO Description"}),i.jsx("textarea",{name:"seoDescription",value:r.seoDescription,onChange:P,rows:"3",placeholder:"Meta description for search engines",maxLength:"160",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.seoDescription.length,"/160 characters"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"SEO Keywords"}),i.jsx("input",{type:"text",name:"seoKeywords",value:r.seoKeywords,onChange:P,placeholder:"keyword1, keyword2, keyword3",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated keywords for search optimization"})]})]})]}),i.jsxs("div",{className:"flex gap-4 sticky bottom-0 bg-white p-4 border-t shadow-lg rounded-lg",children:[i.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition shadow-lg text-lg",children:c?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"animate-spin",children:""}),"Adding Product..."]}):i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{children:""}),"Add Product to Store"]})}),i.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure? All unsaved changes will be lost.")&&t("/admin/products")},disabled:c,className:"px-6 py-4 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-50 transition font-semibold",children:"Cancel"})]})]}),!r.description&&r.name&&r.category&&i.jsxs("div",{className:"fixed bottom-24 right-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-lg shadow-2xl animate-bounce",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:" AI Tip"}),i.jsx("p",{className:"text-xs",children:'Click "Generate with AI" to auto-create your product description!'})]})]})},cte=()=>{var w,y,_,S,j,k,N;const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all"),[o,l]=T.useState(""),[c,u]=T.useState(null),[d,h]=T.useState(!1);T.useEffect(()=>{f()},[]);const f=async()=>{try{const E=Ce(ae(q,"orders"),en("createdAt","desc")),P=(await me(E)).docs.map(O=>({id:O.id,...O.data()}));e(P)}catch(E){console.error("Error fetching orders:",E)}finally{n(!1)}},g=async(E,A)=>{if(window.confirm(`Update order status to ${A}?`))try{await ke(ie(q,"orders",E),{status:A,updatedAt:new Date().toISOString()}),alert("Order status updated successfully"),f()}catch{alert("Failed to update order status")}},p=t.filter(E=>{var O,I,D;const A=((O=E.id)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||((I=E.userName)==null?void 0:I.toLowerCase().includes(o.toLowerCase()))||((D=E.userEmail)==null?void 0:D.toLowerCase().includes(o.toLowerCase())),P=s==="all"||E.status===s;return A&&P}),x={all:t.length,pending:t.filter(E=>E.status==="pending").length,processing:t.filter(E=>E.status==="processing").length,shipped:t.filter(E=>E.status==="shipped").length,delivered:t.filter(E=>E.status==="delivered").length,cancelled:t.filter(E=>E.status==="cancelled").length,totalRevenue:t.filter(E=>E.status==="delivered").reduce((E,A)=>E+(A.total||0),0)},b=E=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[E]||"bg-gray-100 text-gray-800";return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Order Management"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),i.jsx("p",{className:"text-2xl font-bold",children:x.all})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:x.pending})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Processing"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:x.processing})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Shipped"}),i.jsx("p",{className:"text-2xl font-bold text-purple-800 dark:text-purple-300",children:x.shipped})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Delivered"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:x.delivered})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"Cancelled"}),i.jsx("p",{className:"text-2xl font-bold text-red-800 dark:text-red-300",children:x.cancelled})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Revenue"}),i.jsxs("p",{className:"text-xl font-bold",children:["",x.totalRevenue.toLocaleString()]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{type:"text",placeholder:"Search by order ID, customer name or email...",value:o,onChange:E=>l(E.target.value),className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsxs("select",{value:s,onChange:E=>a(E.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Orders"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"shipped",children:"Shipped"}),i.jsx("option",{value:"delivered",children:"Delivered"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Order ID"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Items"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Total"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:p.map(E=>{var A,P,O,I,D;return i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsxs("td",{className:"py-3 px-4 font-mono text-sm",children:["#",E.id.substring(0,8)]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:E.userName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.userEmail})]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsxs("p",{className:"font-medium",children:[((A=E.items)==null?void 0:A.length)||0," items"]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:[(O=(P=E.items)==null?void 0:P[0])==null?void 0:O.productName,((I=E.items)==null?void 0:I.length)>1&&` +${E.items.length-1} more`]})]}),i.jsxs("td",{className:"py-3 px-4 font-bold text-lg",children:["",(D=E.total)==null?void 0:D.toLocaleString()]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(E.createdAt).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b(E.status)}`,children:E.status})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("button",{onClick:()=>{u(E),h(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Details"})})]},E.id)})})]}),p.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No orders found"})})]}),d&&c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),i.jsx("button",{onClick:()=>h(!1),className:"text-2xl",children:""})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order ID"}),i.jsxs("p",{className:"font-mono font-bold",children:["#",c.id.substring(0,8)]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${b(c.status)}`,children:c.status})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order Date"}),i.jsx("p",{className:"font-medium",children:new Date(c.createdAt).toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Amount"}),i.jsxs("p",{className:"font-bold text-lg",children:["",(w=c.total)==null?void 0:w.toLocaleString()]})]})]}),i.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Customer Information"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",c.userName]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",c.userEmail]}),c.shippingAddress&&i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"mt-2",children:i.jsx("strong",{children:"Shipping Address:"})}),i.jsx("p",{children:c.shippingAddress.address}),i.jsxs("p",{children:[c.shippingAddress.city,", ",c.shippingAddress.state," ",c.shippingAddress.zipCode]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Phone:"})," ",c.shippingAddress.phone]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Order Items"}),i.jsx("div",{className:"space-y-3",children:(y=c.items)==null?void 0:y.map((E,A)=>{var P,O;return i.jsxs("div",{className:"flex gap-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx("img",{src:((P=E.images)==null?void 0:P[0])||"https://via.placeholder.com/80",alt:E.productName,className:"w-20 h-20 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:E.productName}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",E.quantity]}),i.jsxs("p",{className:"text-sm font-bold",children:["",(O=E.price)==null?void 0:O.toLocaleString()," each"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold",children:["",(E.price*E.quantity).toLocaleString()]})})]},A)})})]}),i.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{className:"font-medium",children:["",(_=c.subtotal)==null?void 0:_.toLocaleString()]})]}),c.couponDiscount>0&&i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Coupon Discount:"}),i.jsxs("span",{children:["-",(S=c.couponDiscount)==null?void 0:S.toLocaleString()]})]}),c.pointsDiscount>0&&i.jsxs("div",{className:"flex justify-between text-purple-600",children:[i.jsx("span",{children:"Loyalty Points:"}),i.jsxs("span",{children:["-",(j=c.pointsDiscount)==null?void 0:j.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Shipping:"}),i.jsxs("span",{className:"font-medium",children:["",(k=c.shipping)==null?void 0:k.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["",(N=c.total)==null?void 0:N.toLocaleString()]})]})]})}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Update Order Status"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.status==="pending"&&i.jsx("button",{onClick:()=>{g(c.id,"processing"),h(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Mark as Processing"}),(c.status==="pending"||c.status==="processing")&&i.jsx("button",{onClick:()=>{g(c.id,"shipped"),h(!1)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Mark as Shipped"}),c.status==="shipped"&&i.jsx("button",{onClick:()=>{g(c.id,"delivered"),h(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Mark as Delivered"}),c.status!=="delivered"&&c.status!=="cancelled"&&i.jsx("button",{onClick:()=>{g(c.id,"cancelled"),h(!1)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Cancel Order"})]})]})]})})]})},WO=async(t,e,r,n)=>{try{const s=ie(q,"disputes",t),a=await Pt(s);if(!a.exists())throw new Error("Dispute not found");const o=a.data(),l={message:e,senderId:r,senderRole:n,createdAt:new Date().toISOString()},c=[...o.messages||[],l];await ke(s,{messages:c,updatedAt:new Date().toISOString()});const u=n==="admin"?o.userId:"admin";return await _f({userId:u,title:" New Dispute Message",message:`New message in dispute #${t.substring(0,8)}`,type:Gs.NEW_MESSAGE,actionUrl:`/disputes/${t}`,metadata:{disputeId:t}}),!0}catch(s){throw console.error("Error adding dispute message:",s),s}},ute=async(t,e,r="")=>{try{const n=ie(q,"disputes",t),s=await Pt(n);if(!s.exists())throw new Error("Dispute not found");const a=s.data();return await ke(n,{status:e,resolution:r,resolvedAt:e==="resolved"?new Date().toISOString():null,updatedAt:new Date().toISOString()}),await _f({userId:a.userId,title:` Dispute ${e==="resolved"?"Resolved":"Updated"}`,message:`Your dispute #${t.substring(0,8)} has been ${e}`,type:Gs.NEW_MESSAGE,actionUrl:`/buyer/disputes/${t}`,metadata:{disputeId:t,status:e}}),!0}catch(n){throw console.error("Error updating dispute:",n),n}},dte=async(t=null,e="buyer")=>{try{let r;return e==="admin"?r=Ce(ae(q,"disputes"),en("createdAt","desc")):r=Ce(ae(q,"disputes"),je("userId","==",t),en("createdAt","desc")),(await me(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error getting disputes:",r),[]}},hte=()=>{var b;const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(!0),[a,o]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState(""),[h,f]=T.useState("");T.useEffect(()=>{g()},[]);const g=async()=>{try{const w=await dte(null,"admin");r(w)}catch(w){console.error("Error fetching disputes:",w)}finally{s(!1)}},p=async()=>{if(u.trim())try{await WO(a.id,u,t.uid,"admin"),d(""),g();const w=e.find(y=>y.id===a.id);o(w)}catch{alert("Failed to send message")}},x=async w=>{if(window.confirm("Are you sure you want to resolve this dispute?"))try{await ute(w,"resolved",h),alert("Dispute resolved successfully!"),c(!1),f(""),g()}catch{alert("Failed to resolve dispute")}};return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Disputes Management"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Dispute ID"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Order ID"}),i.jsx("th",{className:"text-left py-3 px-4",children:"User"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Reason"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:e.map(w=>{var y;return i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsxs("td",{className:"py-3 px-4",children:["#",w.id.substring(0,8)]}),i.jsxs("td",{className:"py-3 px-4",children:["#",(y=w.orderId)==null?void 0:y.substring(0,8)]}),i.jsx("td",{className:"py-3 px-4",children:w.userName}),i.jsx("td",{className:"py-3 px-4",children:w.reason}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${w.status==="resolved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:w.status})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("button",{onClick:()=>{o(w),c(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:"View"})})]},w.id)})})]}),e.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600",children:"No disputes found"})})]}),l&&a&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Dispute Details"}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Reason:"})," ",a.reason]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Description:"})," ",a.description]})]}),i.jsx("div",{className:"mb-4 max-h-60 overflow-y-auto space-y-2",children:(b=a.messages)==null?void 0:b.map((w,y)=>i.jsxs("div",{className:`p-3 rounded ${w.senderRole==="admin"?"bg-blue-50 ml-8":"bg-gray-50 mr-8"}`,children:[i.jsx("p",{className:"text-sm font-semibold",children:w.senderRole==="admin"?"Admin":"User"}),i.jsx("p",{children:w.message})]},y))}),a.status!=="resolved"&&i.jsxs(i.Fragment,{children:[i.jsx("textarea",{value:u,onChange:w=>d(w.target.value),className:"w-full px-4 py-2 border rounded-lg mb-2",placeholder:"Type your message...",rows:"3"}),i.jsx("button",{onClick:p,className:"w-full bg-blue-600 text-white py-2 rounded-lg mb-4",children:"Send Message"}),i.jsx("textarea",{value:h,onChange:w=>f(w.target.value),className:"w-full px-4 py-2 border rounded-lg mb-2",placeholder:"Resolution notes...",rows:"2"}),i.jsx("button",{onClick:()=>x(a.id),className:"w-full bg-green-600 text-white py-2 rounded-lg",children:"Resolve Dispute"})]}),i.jsx("button",{onClick:()=>c(!1),className:"w-full mt-4 bg-gray-200 py-2 rounded-lg",children:"Close"})]})})]})},fte=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all"),[o,l]=T.useState("all");T.useEffect(()=>{c()},[]);const c=async()=>{try{const p=(await me(ae(q,"orders"))).docs.map(x=>({id:x.id,...x.data(),paymentStatus:x.data().status==="delivered"?"completed":x.data().status==="cancelled"?"refunded":"pending"}));e(p)}catch(g){console.error("Error fetching payments:",g)}finally{n(!1)}},u=g=>{if(o==="all")return!0;const p=new Date(g.createdAt),x=new Date;switch(o){case"today":return p.toDateString()===x.toDateString();case"week":const b=new Date(x.setDate(x.getDate()-7));return p>=b;case"month":const w=new Date(x.setMonth(x.getMonth()-1));return p>=w;default:return!0}},d=t.filter(g=>{const p=s==="all"||g.paymentStatus===s,x=u(g);return p&&x}),h={totalRevenue:t.reduce((g,p)=>g+(p.total||0),0),completedPayments:t.filter(g=>g.paymentStatus==="completed").length,pendingPayments:t.filter(g=>g.paymentStatus==="pending").length,refundedPayments:t.filter(g=>g.paymentStatus==="refunded").length,completedRevenue:t.filter(g=>g.paymentStatus==="completed").reduce((g,p)=>g+(p.total||0),0),pendingRevenue:t.filter(g=>g.paymentStatus==="pending").reduce((g,p)=>g+(p.total||0),0),platformCommission:t.filter(g=>g.paymentStatus==="completed").reduce((g,p)=>g+(p.total||0),0)*.1},f=g=>({completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",refunded:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800"})[g]||"bg-gray-100 text-gray-800";return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Payment Management"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Revenue"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",h.totalRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[t.length," transactions"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Completed Payments"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",h.completedRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[h.completedPayments," payments"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Pending Payments"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",h.pendingRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[h.pendingPayments," payments"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6 shadow-lg",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Platform Commission (10%)"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",h.platformCommission.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"From completed orders"})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsxs("select",{value:s,onChange:g=>a(g.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Payments"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"refunded",children:"Refunded"})]}),i.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"week",children:"Last 7 Days"}),i.jsx("option",{value:"month",children:"Last 30 Days"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Transaction ID"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Payment Method"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Commission"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"})]})}),i.jsx("tbody",{children:d.map(g=>{var p;return i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsxs("td",{className:"py-3 px-4 font-mono text-sm",children:["#",g.id.substring(0,8)]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:g.userName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.userEmail})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:g.paymentMethod||"Card"}),i.jsxs("td",{className:"py-3 px-4 font-bold text-lg",children:["",(p=g.total)==null?void 0:p.toLocaleString()]}),i.jsxs("td",{className:"py-3 px-4 text-purple-600 font-medium",children:["",((g.total||0)*.1).toLocaleString()]}),i.jsxs("td",{className:"py-3 px-4 text-sm",children:[new Date(g.createdAt).toLocaleDateString(),i.jsx("br",{}),i.jsx("span",{className:"text-xs text-gray-500",children:new Date(g.createdAt).toLocaleTimeString()})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f(g.paymentStatus)}`,children:g.paymentStatus})})]},g.id)})})]}),d.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No payments found"})})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-1",children:"Vendor Earnings (90%)"}),i.jsxs("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:["",(h.completedRevenue*.9).toLocaleString()]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400 mb-1",children:"Platform Revenue (10%)"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-800 dark:text-purple-300",children:["",h.platformCommission.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Average Transaction"}),i.jsxs("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:["",t.length>0?Math.round(h.totalRevenue/t.length).toLocaleString():0]})]})]})]})},pte=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState(!1),[o,l]=T.useState({code:"",type:"percentage",value:"",minPurchase:0,maxDiscount:0,usageLimit:0,usedCount:0,expiryDate:"",active:!0,description:""}),[c,u]=T.useState(null);T.useEffect(()=>{d()},[]);const d=async()=>{try{const _=(await me(ae(q,"coupons"))).docs.map(S=>({id:S.id,...S.data()}));_.sort((S,j)=>new Date(j.createdAt||0)-new Date(S.createdAt||0)),e(_)}catch(y){console.error("Error fetching coupons:",y)}finally{n(!1)}},h=()=>{const y="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let _="";for(let S=0;S<8;S++)_+=y.charAt(Math.floor(Math.random()*y.length));l({...o,code:_})},f=async y=>{y.preventDefault(),n(!0);try{const _={...o,code:o.code.toUpperCase(),value:parseFloat(o.value),minPurchase:parseFloat(o.minPurchase)||0,maxDiscount:parseFloat(o.maxDiscount)||0,usageLimit:parseInt(o.usageLimit)||0,usedCount:c?o.usedCount:0,createdAt:c?o.createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c?(await ke(ie(q,"coupons",c),_),alert("Coupon updated successfully!")):(await Mt(ae(q,"coupons"),_),alert("Coupon created successfully!")),a(!1),b(),d()}catch(_){console.error("Error saving coupon:",_),alert("Failed to save coupon")}finally{n(!1)}},g=y=>{l(y),u(y.id),a(!0)},p=async y=>{if(window.confirm("Are you sure you want to delete this coupon?"))try{await ns(ie(q,"coupons",y)),alert("Coupon deleted successfully!"),d()}catch(_){console.error("Error deleting coupon:",_),alert("Failed to delete coupon")}},x=async(y,_)=>{try{await ke(ie(q,"coupons",y),{active:!_,updatedAt:new Date().toISOString()}),d()}catch(S){console.error("Error toggling coupon status:",S)}},b=()=>{l({code:"",type:"percentage",value:"",minPurchase:0,maxDiscount:0,usageLimit:0,usedCount:0,expiryDate:"",active:!0,description:""}),u(null)},w=y=>new Date(y)<new Date;return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Coupon Management"}),i.jsx("button",{onClick:()=>{b(),a(!0)},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Create Coupon"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Coupons"}),i.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Active Coupons"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:t.filter(y=>y.active&&!w(y.expiryDate)).length})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Total Uses"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:t.reduce((y,_)=>y+(_.usedCount||0),0)})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"Expired"}),i.jsx("p",{className:"text-2xl font-bold text-red-800 dark:text-red-300",children:t.filter(y=>w(y.expiryDate)).length})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Code"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Value"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Usage"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Expiry"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(y=>i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-mono font-bold text-lg",children:y.code}),y.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.description})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:y.type}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-bold text-green-600",children:y.type==="percentage"?`${y.value}%`:`${y.value.toLocaleString()}`}),y.minPurchase>0&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",y.minPurchase.toLocaleString()]}),y.maxDiscount>0&&y.type==="percentage"&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Max: ",y.maxDiscount.toLocaleString()]})]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsxs("p",{children:[y.usedCount||0," / ",y.usageLimit||""]}),y.usageLimit>0&&i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${(y.usedCount||0)/y.usageLimit*100}%`}})})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(y.expiryDate).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4",children:w(y.expiryDate)?i.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Expired"}):y.active?i.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Active"}):i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:"Inactive"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>g(y),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),i.jsx("button",{onClick:()=>x(y.id,y.active),className:`px-3 py-1 rounded text-sm ${y.active?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:y.active?"Deactivate":"Activate"}),i.jsx("button",{onClick:()=>p(y.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})})]},y.id))})]}),t.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No coupons created yet"})})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:c?"Edit Coupon":"Create Coupon"}),i.jsx("button",{onClick:()=>{a(!1),b()},className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coupon Code *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:o.code,onChange:y=>l({...o,code:y.target.value.toUpperCase()}),required:!0,className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700 font-mono",placeholder:"SUMMER2025"}),i.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:"Generate"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),i.jsx("input",{type:"text",value:o.description,onChange:y=>l({...o,description:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"Summer sale discount"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type *"}),i.jsxs("select",{value:o.type,onChange:y=>l({...o,type:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"percentage",children:"Percentage"}),i.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Value *"}),i.jsx("input",{type:"number",value:o.value,onChange:y=>l({...o,value:y.target.value}),required:!0,min:"1",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:o.type==="percentage"?"10":"5000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Purchase ()"}),i.jsx("input",{type:"number",value:o.minPurchase,onChange:y=>l({...o,minPurchase:y.target.value}),min:"0",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Discount ()"}),i.jsx("input",{type:"number",value:o.maxDiscount,onChange:y=>l({...o,maxDiscount:y.target.value}),min:"0",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"0 = unlimited"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Usage Limit"}),i.jsx("input",{type:"number",value:o.usageLimit,onChange:y=>l({...o,usageLimit:y.target.value}),min:"0",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"0 = unlimited"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Expiry Date *"}),i.jsx("input",{type:"date",value:o.expiryDate,onChange:y=>l({...o,expiryDate:y.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:r?"Saving...":c?"Update Coupon":"Create Coupon"})]})]})})]})},mte=()=>{const[t,e]=T.useState([]),[r,n]=T.useState([]),[s,a]=T.useState(!0),[o,l]=T.useState(!1),[c,u]=T.useState({title:"",description:"",discountPercentage:"",startDate:"",endDate:"",productIds:[],totalStock:0,soldCount:0,active:!0}),[d,h]=T.useState(null);T.useEffect(()=>{f(),g()},[]);const f=async()=>{try{const k=(await me(ae(q,"flashSales"))).docs.map(N=>({id:N.id,...N.data()}));k.sort((N,E)=>new Date(E.createdAt)-new Date(N.createdAt)),e(k)}catch(j){console.error("Error fetching flash sales:",j)}finally{a(!1)}},g=async()=>{try{const j=Ce(ae(q,"products"),je("status","==","approved")),N=(await me(j)).docs.map(E=>({id:E.id,...E.data()}));n(N)}catch(j){console.error("Error fetching products:",j)}},p=async j=>{j.preventDefault(),a(!0);try{const k={...c,discountPercentage:parseFloat(c.discountPercentage),totalStock:parseInt(c.totalStock),soldCount:d?c.soldCount:0,createdAt:d?c.createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};d?(await ke(ie(q,"flashSales",d),k),alert("Flash sale updated successfully!")):(await Mt(ae(q,"flashSales"),k),alert("Flash sale created successfully!")),l(!1),y(),f()}catch(k){console.error("Error saving flash sale:",k),alert("Failed to save flash sale")}finally{a(!1)}},x=j=>{u(j),h(j.id),l(!0)},b=async j=>{if(window.confirm("Are you sure you want to delete this flash sale?"))try{await ns(ie(q,"flashSales",j)),alert("Flash sale deleted successfully!"),f()}catch(k){console.error("Error deleting flash sale:",k),alert("Failed to delete flash sale")}},w=async(j,k)=>{try{await ke(ie(q,"flashSales",j),{active:!k,updatedAt:new Date().toISOString()}),f()}catch(N){console.error("Error toggling flash sale status:",N)}},y=()=>{u({title:"",description:"",discountPercentage:"",startDate:"",endDate:"",productIds:[],totalStock:0,soldCount:0,active:!0}),h(null)},_=j=>{const k=c.productIds.includes(j)?c.productIds.filter(N=>N!==j):[...c.productIds,j];u({...c,productIds:k})},S=j=>{const k=new Date,N=new Date(j.startDate),E=new Date(j.endDate);return j.active?k<N?i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"Upcoming"}):k>E?i.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Expired"}):i.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Active"}):i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:"Inactive"})};return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Flash Sales Management"}),i.jsx("button",{onClick:()=>{y(),l(!0)},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Create Flash Sale"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Flash Sales"}),i.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Active Now"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:t.filter(j=>{const k=new Date;return j.active&&new Date(j.startDate)<=k&&new Date(j.endDate)>=k}).length})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Upcoming"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:t.filter(j=>j.active&&new Date(j.startDate)>new Date).length})]}),i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:"Total Items Sold"}),i.jsx("p",{className:"text-2xl font-bold text-orange-800 dark:text-orange-300",children:t.reduce((j,k)=>j+(k.soldCount||0),0)})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Title"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Discount"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Duration"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Stock"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(j=>i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:j.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.description})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-lg font-bold text-red-600",children:[j.discountPercentage,"% OFF"]})}),i.jsxs("td",{className:"py-3 px-4 text-sm",children:[i.jsx("p",{children:new Date(j.startDate).toLocaleDateString()}),i.jsx("p",{className:"text-gray-500",children:"to"}),i.jsx("p",{children:new Date(j.endDate).toLocaleDateString()})]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsxs("p",{className:"font-medium",children:[j.soldCount||0," / ",j.totalStock]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${(j.soldCount||0)/j.totalStock*100}%`}})})]}),i.jsx("td",{className:"py-3 px-4",children:S(j)}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>x(j),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),i.jsx("button",{onClick:()=>w(j.id,j.active),className:`px-3 py-1 rounded text-sm ${j.active?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:j.active?"Deactivate":"Activate"}),i.jsx("button",{onClick:()=>b(j.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})})]},j.id))})]}),t.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No flash sales created yet"})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:d?"Edit Flash Sale":"Create Flash Sale"}),i.jsx("button",{onClick:()=>{l(!1),y()},className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),i.jsx("input",{type:"text",value:c.title,onChange:j=>u({...c,title:j.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"e.g., Weekend Flash Sale"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),i.jsx("textarea",{value:c.description,onChange:j=>u({...c,description:j.target.value}),required:!0,rows:"3",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"Describe your flash sale..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount Percentage *"}),i.jsx("input",{type:"number",value:c.discountPercentage,onChange:j=>u({...c,discountPercentage:j.target.value}),required:!0,min:"1",max:"99",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"e.g., 50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Stock *"}),i.jsx("input",{type:"number",value:c.totalStock,onChange:j=>u({...c,totalStock:j.target.value}),required:!0,min:"1",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"e.g., 100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date *"}),i.jsx("input",{type:"datetime-local",value:c.startDate,onChange:j=>u({...c,startDate:j.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date *"}),i.jsx("input",{type:"datetime-local",value:c.endDate,onChange:j=>u({...c,endDate:j.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Products (Optional)"}),i.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 space-y-2",children:r.map(j=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:c.productIds.includes(j.id),onChange:()=>_(j.id)}),i.jsx("span",{className:"text-sm",children:j.name})]},j.id))})]}),i.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:s?"Saving...":d?"Update Flash Sale":"Create Flash Sale"})]})]})})]})},gte=()=>{var j;const[t,e]=T.useState([]),[r,n]=T.useState({}),[s,a]=T.useState(!0),[o,l]=T.useState("all"),[c,u]=T.useState(!1),[d,h]=T.useState(null),[f,g]=T.useState(null);T.useEffect(()=>{p()},[]);const p=async()=>{try{const k=Ce(ae(q,"vendorPayouts"),en("createdAt","desc")),E=(await me(k)).docs.map(I=>({id:I.id,...I.data()}));e(E);const A=Ce(ae(q,"vendorWallets")),P=await me(A),O={};P.docs.forEach(I=>{O[I.id]=I.data()}),n(O)}catch(k){console.error("Error fetching payouts:",k)}finally{a(!1)}},x=async k=>{if(window.confirm(`Approve payout of ${k.amount.toLocaleString()} to ${k.vendorName}?`)){g(k.id);try{await ke(ie(q,"vendorPayouts",k.id),{status:"completed",processedAt:new Date().toISOString(),processedBy:"admin"});const N=r[k.vendorId]||{balance:0,pendingPayouts:0,totalPayouts:0};await ke(ie(q,"vendorWallets",k.vendorId),{balance:(N.balance||0)-k.amount,pendingPayouts:(N.pendingPayouts||0)-k.amount,totalPayouts:(N.totalPayouts||0)+k.amount,updatedAt:new Date().toISOString()}),await Mt(ae(q,"walletTransactions"),{vendorId:k.vendorId,type:"payout",amount:k.amount,description:`Payout approved - ${k.method}`,status:"completed",createdAt:new Date().toISOString()}),alert("Payout approved successfully!"),p()}catch(N){console.error("Error approving payout:",N),alert("Failed to approve payout")}finally{g(null)}}},b=async k=>{const N=window.prompt("Enter rejection reason:");if(N){g(k.id);try{await ke(ie(q,"vendorPayouts",k.id),{status:"rejected",processedAt:new Date().toISOString(),processedBy:"admin",rejectionReason:N});const E=r[k.vendorId]||{pendingPayouts:0};await ke(ie(q,"vendorWallets",k.vendorId),{pendingPayouts:(E.pendingPayouts||0)-k.amount,updatedAt:new Date().toISOString()}),alert("Payout rejected"),p()}catch(E){console.error("Error rejecting payout:",E),alert("Failed to reject payout")}finally{g(null)}}},w=k=>{h(k),u(!0)},y=k=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-300",processing:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300"})[k]||"bg-gray-100 text-gray-800 border-gray-300",_=t.filter(k=>o==="all"?!0:k.status===o),S={total:t.length,pending:t.filter(k=>k.status==="pending").length,completed:t.filter(k=>k.status==="completed").length,rejected:t.filter(k=>k.status==="rejected").length,totalAmount:t.filter(k=>k.status==="completed").reduce((k,N)=>k+(N.amount||0),0),pendingAmount:t.filter(k=>k.status==="pending").reduce((k,N)=>k+(N.amount||0),0)};return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Payout Management"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Payouts"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.total})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mb-1",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:S.pending}),i.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["",S.pendingAmount.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:S.completed}),i.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["",S.totalAmount.toLocaleString()]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 mb-1",children:"Rejected"}),i.jsx("p",{className:"text-2xl font-bold text-red-800 dark:text-red-300",children:S.rejected})]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("select",{value:o,onChange:k=>l(k.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[i.jsx("option",{value:"all",children:"All Payouts"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"rejected",children:"Rejected"})]})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-900 border-b dark:border-gray-700",children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Vendor"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Method"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:_.map(k=>{var N;return i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsx("td",{className:"py-3 px-4",children:new Date(k.createdAt).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:k.vendorName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.vendorEmail})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("p",{className:"font-bold text-lg",children:["",(N=k.amount)==null?void 0:N.toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4 capitalize",children:k.method}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${y(k.status)}`,children:k.status})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>w(k),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:"View"}),k.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>x(k),disabled:f===k.id,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:bg-gray-400",children:f===k.id?"Processing...":"Approve"}),i.jsx("button",{onClick:()=>b(k),disabled:f===k.id,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded disabled:bg-gray-400",children:"Reject"})]})]})})]},k.id)})})]}),_.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No payouts found"})})]}),c&&d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Payout Details"}),i.jsx("button",{onClick:()=>u(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vendor Name"}),i.jsx("p",{className:"font-medium",children:d.vendorName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),i.jsx("p",{className:"font-medium",children:d.vendorEmail})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",(j=d.amount)==null?void 0:j.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Method"}),i.jsx("p",{className:"font-medium capitalize",children:d.method})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Request Date"}),i.jsx("p",{className:"font-medium",children:new Date(d.createdAt).toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${y(d.status)}`,children:d.status})]})]}),d.bankDetails&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Bank Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Name"}),i.jsx("p",{className:"font-medium",children:d.bankDetails.accountName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Number"}),i.jsx("p",{className:"font-medium font-mono",children:d.bankDetails.accountNumber})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bank Name"}),i.jsx("p",{className:"font-medium",children:d.bankDetails.bankName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Type"}),i.jsx("p",{className:"font-medium capitalize",children:d.bankDetails.accountType})]})]})]}),d.processedAt&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processed Date"}),i.jsx("p",{className:"font-medium",children:new Date(d.processedAt).toLocaleString()})]}),d.rejectionReason&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejection Reason"}),i.jsx("p",{className:"font-medium text-red-600",children:d.rejectionReason})]}),d.status==="pending"&&i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsx("button",{onClick:()=>{x(d),u(!1)},className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium",children:"Approve Payout"}),i.jsx("button",{onClick:()=>{b(d),u(!1)},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium",children:"Reject Payout"})]})]})]})})]})};function HO(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=HO(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function $e(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=HO(t))&&(n&&(n+=" "),n+=e);return n}var yte=Array.isArray,tn=yte,vte=typeof Jf=="object"&&Jf&&Jf.Object===Object&&Jf,KO=vte,xte=KO,bte=typeof self=="object"&&self&&self.Object===Object&&self,wte=xte||bte||Function("return this")(),Rs=wte,_te=Rs,jte=_te.Symbol,Sf=jte,wS=Sf,GO=Object.prototype,kte=GO.hasOwnProperty,Nte=GO.toString,Fu=wS?wS.toStringTag:void 0;function Ste(t){var e=kte.call(t,Fu),r=t[Fu];try{t[Fu]=void 0;var n=!0}catch{}var s=Nte.call(t);return n&&(e?t[Fu]=r:delete t[Fu]),s}var Ete=Ste,Ate=Object.prototype,Cte=Ate.toString;function Tte(t){return Cte.call(t)}var Pte=Tte,_S=Sf,Ote=Ete,Ite=Pte,Rte="[object Null]",Dte="[object Undefined]",jS=_S?_S.toStringTag:void 0;function Mte(t){return t==null?t===void 0?Dte:Rte:jS&&jS in Object(t)?Ote(t):Ite(t)}var Aa=Mte;function $te(t){return t!=null&&typeof t=="object"}var Ca=$te,Lte=Aa,Fte=Ca,Ute="[object Symbol]";function Vte(t){return typeof t=="symbol"||Fte(t)&&Lte(t)==Ute}var tu=Vte,Bte=tn,zte=tu,qte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wte=/^\w*$/;function Hte(t,e){if(Bte(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||zte(t)?!0:Wte.test(t)||!qte.test(t)||e!=null&&t in Object(e)}var P4=Hte;function Kte(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ti=Kte;const ru=Ze(Ti);var Gte=Aa,Yte=Ti,Qte="[object AsyncFunction]",Xte="[object Function]",Jte="[object GeneratorFunction]",Zte="[object Proxy]";function ere(t){if(!Yte(t))return!1;var e=Gte(t);return e==Xte||e==Jte||e==Qte||e==Zte}var O4=ere;const Ae=Ze(O4);var tre=Rs,rre=tre["__core-js_shared__"],nre=rre,Sx=nre,kS=function(){var t=/[^.]+$/.exec(Sx&&Sx.keys&&Sx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sre(t){return!!kS&&kS in t}var are=sre,ire=Function.prototype,ore=ire.toString;function lre(t){if(t!=null){try{return ore.call(t)}catch{}try{return t+""}catch{}}return""}var YO=lre,cre=O4,ure=are,dre=Ti,hre=YO,fre=/[\\^$.*+?()[\]{}|]/g,pre=/^\[object .+?Constructor\]$/,mre=Function.prototype,gre=Object.prototype,yre=mre.toString,vre=gre.hasOwnProperty,xre=RegExp("^"+yre.call(vre).replace(fre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bre(t){if(!dre(t)||ure(t))return!1;var e=cre(t)?xre:pre;return e.test(hre(t))}var wre=bre;function _re(t,e){return t==null?void 0:t[e]}var jre=_re,kre=wre,Nre=jre;function Sre(t,e){var r=Nre(t,e);return kre(r)?r:void 0}var Go=Sre,Ere=Go,Are=Ere(Object,"create"),ly=Are,NS=ly;function Cre(){this.__data__=NS?NS(null):{},this.size=0}var Tre=Cre;function Pre(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ore=Pre,Ire=ly,Rre="__lodash_hash_undefined__",Dre=Object.prototype,Mre=Dre.hasOwnProperty;function $re(t){var e=this.__data__;if(Ire){var r=e[t];return r===Rre?void 0:r}return Mre.call(e,t)?e[t]:void 0}var Lre=$re,Fre=ly,Ure=Object.prototype,Vre=Ure.hasOwnProperty;function Bre(t){var e=this.__data__;return Fre?e[t]!==void 0:Vre.call(e,t)}var zre=Bre,qre=ly,Wre="__lodash_hash_undefined__";function Hre(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=qre&&e===void 0?Wre:e,this}var Kre=Hre,Gre=Tre,Yre=Ore,Qre=Lre,Xre=zre,Jre=Kre;function nu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nu.prototype.clear=Gre;nu.prototype.delete=Yre;nu.prototype.get=Qre;nu.prototype.has=Xre;nu.prototype.set=Jre;var Zre=nu;function ene(){this.__data__=[],this.size=0}var tne=ene;function rne(t,e){return t===e||t!==t&&e!==e}var I4=rne,nne=I4;function sne(t,e){for(var r=t.length;r--;)if(nne(t[r][0],e))return r;return-1}var cy=sne,ane=cy,ine=Array.prototype,one=ine.splice;function lne(t){var e=this.__data__,r=ane(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():one.call(e,r,1),--this.size,!0}var cne=lne,une=cy;function dne(t){var e=this.__data__,r=une(e,t);return r<0?void 0:e[r][1]}var hne=dne,fne=cy;function pne(t){return fne(this.__data__,t)>-1}var mne=pne,gne=cy;function yne(t,e){var r=this.__data__,n=gne(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var vne=yne,xne=tne,bne=cne,wne=hne,_ne=mne,jne=vne;function su(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}su.prototype.clear=xne;su.prototype.delete=bne;su.prototype.get=wne;su.prototype.has=_ne;su.prototype.set=jne;var uy=su,kne=Go,Nne=Rs,Sne=kne(Nne,"Map"),R4=Sne,SS=Zre,Ene=uy,Ane=R4;function Cne(){this.size=0,this.__data__={hash:new SS,map:new(Ane||Ene),string:new SS}}var Tne=Cne;function Pne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var One=Pne,Ine=One;function Rne(t,e){var r=t.__data__;return Ine(e)?r[typeof e=="string"?"string":"hash"]:r.map}var dy=Rne,Dne=dy;function Mne(t){var e=Dne(this,t).delete(t);return this.size-=e?1:0,e}var $ne=Mne,Lne=dy;function Fne(t){return Lne(this,t).get(t)}var Une=Fne,Vne=dy;function Bne(t){return Vne(this,t).has(t)}var zne=Bne,qne=dy;function Wne(t,e){var r=qne(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Hne=Wne,Kne=Tne,Gne=$ne,Yne=Une,Qne=zne,Xne=Hne;function au(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}au.prototype.clear=Kne;au.prototype.delete=Gne;au.prototype.get=Yne;au.prototype.has=Qne;au.prototype.set=Xne;var D4=au,QO=D4,Jne="Expected a function";function M4(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Jne);var r=function(){var n=arguments,s=e?e.apply(this,n):n[0],a=r.cache;if(a.has(s))return a.get(s);var o=t.apply(this,n);return r.cache=a.set(s,o)||a,o};return r.cache=new(M4.Cache||QO),r}M4.Cache=QO;var XO=M4;const Zne=Ze(XO);var ese=XO,tse=500;function rse(t){var e=ese(t,function(n){return r.size===tse&&r.clear(),n}),r=e.cache;return e}var nse=rse,sse=nse,ase=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ise=/\\(\\)?/g,ose=sse(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ase,function(r,n,s,a){e.push(s?a.replace(ise,"$1"):n||r)}),e}),lse=ose;function cse(t,e){for(var r=-1,n=t==null?0:t.length,s=Array(n);++r<n;)s[r]=e(t[r],r,t);return s}var $4=cse,ES=Sf,use=$4,dse=tn,hse=tu,AS=ES?ES.prototype:void 0,CS=AS?AS.toString:void 0;function JO(t){if(typeof t=="string")return t;if(dse(t))return use(t,JO)+"";if(hse(t))return CS?CS.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var fse=JO,pse=fse;function mse(t){return t==null?"":pse(t)}var ZO=mse,gse=tn,yse=P4,vse=lse,xse=ZO;function bse(t,e){return gse(t)?t:yse(t,e)?[t]:vse(xse(t))}var eI=bse,wse=tu;function _se(t){if(typeof t=="string"||wse(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var hy=_se,jse=eI,kse=hy;function Nse(t,e){e=jse(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[kse(e[r++])];return r&&r==n?t:void 0}var L4=Nse,Sse=L4;function Ese(t,e,r){var n=t==null?void 0:Sse(t,e);return n===void 0?r:n}var tI=Ese;const gn=Ze(tI);function Ase(t){return t==null}var Cse=Ase;const Re=Ze(Cse);var Tse=Aa,Pse=tn,Ose=Ca,Ise="[object String]";function Rse(t){return typeof t=="string"||!Pse(t)&&Ose(t)&&Tse(t)==Ise}var Dse=Rse;const Do=Ze(Dse);var rI={exports:{}},et={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4=Symbol.for("react.element"),U4=Symbol.for("react.portal"),fy=Symbol.for("react.fragment"),py=Symbol.for("react.strict_mode"),my=Symbol.for("react.profiler"),gy=Symbol.for("react.provider"),yy=Symbol.for("react.context"),Mse=Symbol.for("react.server_context"),vy=Symbol.for("react.forward_ref"),xy=Symbol.for("react.suspense"),by=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),_y=Symbol.for("react.lazy"),$se=Symbol.for("react.offscreen"),nI;nI=Symbol.for("react.module.reference");function Ln(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case F4:switch(t=t.type,t){case fy:case my:case py:case xy:case by:return t;default:switch(t=t&&t.$$typeof,t){case Mse:case yy:case vy:case _y:case wy:case gy:return t;default:return e}}case U4:return e}}}et.ContextConsumer=yy;et.ContextProvider=gy;et.Element=F4;et.ForwardRef=vy;et.Fragment=fy;et.Lazy=_y;et.Memo=wy;et.Portal=U4;et.Profiler=my;et.StrictMode=py;et.Suspense=xy;et.SuspenseList=by;et.isAsyncMode=function(){return!1};et.isConcurrentMode=function(){return!1};et.isContextConsumer=function(t){return Ln(t)===yy};et.isContextProvider=function(t){return Ln(t)===gy};et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===F4};et.isForwardRef=function(t){return Ln(t)===vy};et.isFragment=function(t){return Ln(t)===fy};et.isLazy=function(t){return Ln(t)===_y};et.isMemo=function(t){return Ln(t)===wy};et.isPortal=function(t){return Ln(t)===U4};et.isProfiler=function(t){return Ln(t)===my};et.isStrictMode=function(t){return Ln(t)===py};et.isSuspense=function(t){return Ln(t)===xy};et.isSuspenseList=function(t){return Ln(t)===by};et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===fy||t===my||t===py||t===xy||t===by||t===$se||typeof t=="object"&&t!==null&&(t.$$typeof===_y||t.$$typeof===wy||t.$$typeof===gy||t.$$typeof===yy||t.$$typeof===vy||t.$$typeof===nI||t.getModuleId!==void 0)};et.typeOf=Ln;rI.exports=et;var Lse=rI.exports,Fse=Aa,Use=Ca,Vse="[object Number]";function Bse(t){return typeof t=="number"||Use(t)&&Fse(t)==Vse}var sI=Bse;const zse=Ze(sI);var qse=sI;function Wse(t){return qse(t)&&t!=+t}var Hse=Wse;const Ef=Ze(Hse);var Lr=function(e){return e===0?0:e>0?1:-1},co=function(e){return Do(e)&&e.indexOf("%")===e.length-1},se=function(e){return zse(e)&&!Ef(e)},Kse=function(e){return Re(e)},Qt=function(e){return se(e)||Do(e)},Gse=0,iu=function(e){var r=++Gse;return"".concat(e||"").concat(r)},Fr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(e)&&!Do(e))return n;var a;if(co(e)){var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Ef(a)&&(a=n),s&&a>r&&(a=r),a},Xa=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Yse=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},s=0;s<r;s++)if(!n[e[s]])n[e[s]]=!0;else return!0;return!1},cn=function(e,r){return se(e)&&se(r)?function(n){return e+n*(r-e)}:function(){return r}};function ug(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):gn(n,e))===r})}var Qse=function(e,r){return se(e)&&se(r)?e-r:Do(e)&&Do(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Zl(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function B1(t){"@babel/helpers - typeof";return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B1(t)}var Xse=["viewBox","children"],Jse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],TS=["points","pathLength"],Ex={svg:Xse,polygon:TS,polyline:TS},V4=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],dg=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!ru(n))return null;var s={};return Object.keys(n).forEach(function(a){V4.includes(a)&&(s[a]=r||function(o){return n[a](n,o)})}),s},Zse=function(e,r,n){return function(s){return e(r,n,s),null}},Mo=function(e,r,n){if(!ru(e)||B1(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];V4.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=Zse(o,r,n))}),s},eae=["children"],tae=["children"];function PS(t,e){if(t==null)return{};var r=rae(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function z1(t){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z1(t)}var OS={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},la=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},IS=null,Ax=null,B4=function t(e){if(e===IS&&Array.isArray(Ax))return Ax;var r=[];return T.Children.forEach(e,function(n){Re(n)||(Lse.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Ax=r,IS=e,r};function yn(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(s){return la(s)}):n=[la(e)],B4(t).forEach(function(s){var a=gn(s,"type.displayName")||gn(s,"type.name");n.indexOf(a)!==-1&&r.push(s)}),r}function ln(t,e){var r=yn(t,e);return r&&r[0]}var RS=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,s=r.height;return!(!se(n)||n<=0||!se(s)||s<=0)},nae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sae=function(e){return e&&e.type&&Do(e.type)&&nae.indexOf(e.type)>=0},aae=function(e){return e&&z1(e)==="object"&&"clipDot"in e},iae=function(e,r,n,s){var a,o=(a=Ex==null?void 0:Ex[s])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Ae(e)&&(s&&o.includes(r)||Jse.includes(r))||n&&V4.includes(r)},xe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(T.isValidElement(e)&&(s=e.props),!ru(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;iae((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(a[o]=s[o])}),a},q1=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return DS(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var a=e[s],o=r[s];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!DS(a,o))return!1}return!0},DS=function(e,r){if(Re(e)&&Re(r))return!0;if(!Re(e)&&!Re(r)){var n=e.props||{},s=n.children,a=PS(n,eae),o=r.props||{},l=o.children,c=PS(o,tae);return s&&l?Zl(a,c)&&q1(s,l):!s&&!l?Zl(a,c):!1}return!1},MS=function(e,r){var n=[],s={};return B4(e).forEach(function(a,o){if(sae(a))n.push(a);else if(a){var l=la(a.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var h=u(a,l,o);n.push(h),s[l]=!0}}}),n},oae=function(e){var r=e&&e.type;return r&&OS[r]?OS[r]:null},lae=function(e,r){return B4(r).indexOf(e)},cae=["children","width","height","viewBox","className","style","title","desc"];function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W1.apply(this,arguments)}function uae(t,e){if(t==null)return{};var r=dae(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function H1(t){var e=t.children,r=t.width,n=t.height,s=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=uae(t,cae),d=s||{width:r,height:n,x:0,y:0},h=$e("recharts-surface",a);return L.createElement("svg",W1({},xe(u,!0,"svg"),{className:h,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,l),L.createElement("desc",null,c),e)}var hae=["children","className"];function K1(){return K1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},K1.apply(this,arguments)}function fae(t,e){if(t==null)return{};var r=pae(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ke=L.forwardRef(function(t,e){var r=t.children,n=t.className,s=fae(t,hae),a=$e("recharts-layer",n);return L.createElement("g",K1({className:a},xe(s,!0),{ref:e}),r)}),ss=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function mae(t,e,r){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),r=r>s?s:r,r<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(s);++n<s;)a[n]=t[n+e];return a}var gae=mae,yae=gae;function vae(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:yae(t,e,r)}var xae=vae,bae="\\ud800-\\udfff",wae="\\u0300-\\u036f",_ae="\\ufe20-\\ufe2f",jae="\\u20d0-\\u20ff",kae=wae+_ae+jae,Nae="\\ufe0e\\ufe0f",Sae="\\u200d",Eae=RegExp("["+Sae+bae+kae+Nae+"]");function Aae(t){return Eae.test(t)}var aI=Aae;function Cae(t){return t.split("")}var Tae=Cae,iI="\\ud800-\\udfff",Pae="\\u0300-\\u036f",Oae="\\ufe20-\\ufe2f",Iae="\\u20d0-\\u20ff",Rae=Pae+Oae+Iae,Dae="\\ufe0e\\ufe0f",Mae="["+iI+"]",G1="["+Rae+"]",Y1="\\ud83c[\\udffb-\\udfff]",$ae="(?:"+G1+"|"+Y1+")",oI="[^"+iI+"]",lI="(?:\\ud83c[\\udde6-\\uddff]){2}",cI="[\\ud800-\\udbff][\\udc00-\\udfff]",Lae="\\u200d",uI=$ae+"?",dI="["+Dae+"]?",Fae="(?:"+Lae+"(?:"+[oI,lI,cI].join("|")+")"+dI+uI+")*",Uae=dI+uI+Fae,Vae="(?:"+[oI+G1+"?",G1,lI,cI,Mae].join("|")+")",Bae=RegExp(Y1+"(?="+Y1+")|"+Vae+Uae,"g");function zae(t){return t.match(Bae)||[]}var qae=zae,Wae=Tae,Hae=aI,Kae=qae;function Gae(t){return Hae(t)?Kae(t):Wae(t)}var Yae=Gae,Qae=xae,Xae=aI,Jae=Yae,Zae=ZO;function eie(t){return function(e){e=Zae(e);var r=Xae(e)?Jae(e):void 0,n=r?r[0]:e.charAt(0),s=r?Qae(r,1).join(""):e.slice(1);return n[t]()+s}}var tie=eie,rie=tie,nie=rie("toUpperCase"),sie=nie;const jy=Ze(sie);function lt(t){return function(){return t}}const hI=Math.cos,hg=Math.sin,fs=Math.sqrt,fg=Math.PI,ky=2*fg,Q1=Math.PI,X1=2*Q1,Yi=1e-6,aie=X1-Yi;function fI(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function iie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fI;const r=10**e;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class oie{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fI:iie(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,a,o){this._append`C${+e},${+r},${+n},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,s,a){if(e=+e,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=n-e,u=s-r,d=o-e,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Yi)if(!(Math.abs(h*c-u*d)>Yi)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-o,p=s-l,x=c*c+u*u,b=g*g+p*p,w=Math.sqrt(x),y=Math.sqrt(f),_=a*Math.tan((Q1-Math.acos((x+f-b)/(2*w*y)))/2),S=_/y,j=_/w;Math.abs(S-1)>Yi&&this._append`L${e+S*d},${r+S*h}`,this._append`A${a},${a},0,0,${+(h*g>d*p)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,s,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=e+l,d=r+c,h=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Yi||Math.abs(this._y1-d)>Yi)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%X1+X1),f>aie?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>Yi&&this._append`A${n},${n},0,${+(f>=Q1)},${h},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function z4(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new oie(e)}function q4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pI(t){this._context=t}pI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ny(t){return new pI(t)}function mI(t){return t[0]}function gI(t){return t[1]}function yI(t,e){var r=lt(!0),n=null,s=Ny,a=null,o=z4(l);t=typeof t=="function"?t:t===void 0?mI:lt(t),e=typeof e=="function"?e:e===void 0?gI:lt(e);function l(c){var u,d=(c=q4(c)).length,h,f=!1,g;for(n==null&&(a=s(g=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,c),+e(h,u,c));if(g)return a=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:lt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:lt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:lt(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),l):n},l}function Op(t,e,r){var n=null,s=lt(!0),a=null,o=Ny,l=null,c=z4(u);t=typeof t=="function"?t:t===void 0?mI:lt(+t),e=typeof e=="function"?e:lt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?gI:lt(+r);function u(h){var f,g,p,x=(h=q4(h)).length,b,w=!1,y,_=new Array(x),S=new Array(x);for(a==null&&(l=o(y=c())),f=0;f<=x;++f){if(!(f<x&&s(b=h[f],f,h))===w)if(w=!w)g=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=g;--p)l.point(_[p],S[p]);l.lineEnd(),l.areaEnd()}w&&(_[f]=+t(b,f,h),S[f]=+e(b,f,h),l.point(n?+n(b,f,h):_[f],r?+r(b,f,h):S[f]))}if(y)return l=null,y+""||null}function d(){return yI().defined(s).curve(o).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:lt(+h),n=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:lt(+h),u):t},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:lt(+h),u):n},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:lt(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:lt(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:lt(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:lt(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class vI{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function lie(t){return new vI(t,!0)}function cie(t){return new vI(t,!1)}const W4={draw(t,e){const r=fs(e/fg);t.moveTo(r,0),t.arc(0,0,r,0,ky)}},uie={draw(t,e){const r=fs(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},xI=fs(1/3),die=xI*2,hie={draw(t,e){const r=fs(e/die),n=r*xI;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},fie={draw(t,e){const r=fs(e),n=-r/2;t.rect(n,n,r,r)}},pie=.8908130915292852,bI=hg(fg/10)/hg(7*fg/10),mie=hg(ky/10)*bI,gie=-hI(ky/10)*bI,yie={draw(t,e){const r=fs(e*pie),n=mie*r,s=gie*r;t.moveTo(0,-r),t.lineTo(n,s);for(let a=1;a<5;++a){const o=ky*a/5,l=hI(o),c=hg(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*s,c*n+l*s)}t.closePath()}},Cx=fs(3),vie={draw(t,e){const r=-fs(e/(Cx*3));t.moveTo(0,r*2),t.lineTo(-Cx*r,-r),t.lineTo(Cx*r,-r),t.closePath()}},jn=-.5,kn=fs(3)/2,J1=1/fs(12),xie=(J1/2+1)*3,bie={draw(t,e){const r=fs(e/xie),n=r/2,s=r*J1,a=n,o=r*J1+r,l=-a,c=o;t.moveTo(n,s),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(jn*n-kn*s,kn*n+jn*s),t.lineTo(jn*a-kn*o,kn*a+jn*o),t.lineTo(jn*l-kn*c,kn*l+jn*c),t.lineTo(jn*n+kn*s,jn*s-kn*n),t.lineTo(jn*a+kn*o,jn*o-kn*a),t.lineTo(jn*l+kn*c,jn*c-kn*l),t.closePath()}};function wie(t,e){let r=null,n=z4(s);t=typeof t=="function"?t:lt(t||W4),e=typeof e=="function"?e:lt(e===void 0?64:+e);function s(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:lt(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:lt(+a),s):e},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function pg(){}function mg(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function wI(t){this._context=t}wI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _ie(t){return new wI(t)}function _I(t){this._context=t}_I.prototype={areaStart:pg,areaEnd:pg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jie(t){return new _I(t)}function jI(t){this._context=t}jI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kie(t){return new jI(t)}function kI(t){this._context=t}kI.prototype={areaStart:pg,areaEnd:pg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Nie(t){return new kI(t)}function $S(t){return t<0?-1:1}function LS(t,e,r){var n=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(n||s<0&&-0),o=(r-t._y1)/(s||n<0&&-0),l=(a*s+o*n)/(n+s);return($S(a)+$S(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function FS(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Tx(t,e,r){var n=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-n)/3;t._context.bezierCurveTo(n+l,s+l*e,a-l,o-l*r,a,o)}function gg(t){this._context=t}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tx(this,this._t0,FS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Tx(this,FS(this,r=LS(this,t,e)),r);break;default:Tx(this,this._t0,r=LS(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function NI(t){this._context=new SI(t)}(NI.prototype=Object.create(gg.prototype)).point=function(t,e){gg.prototype.point.call(this,e,t)};function SI(t){this._context=t}SI.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,a){this._context.bezierCurveTo(e,t,n,r,a,s)}};function Sie(t){return new gg(t)}function Eie(t){return new NI(t)}function EI(t){this._context=t}EI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=US(t),s=US(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function US(t){var e,r=t.length-1,n,s=new Array(r),a=new Array(r),o=new Array(r);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(s[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function Aie(t){return new EI(t)}function Sy(t,e){this._context=t,this._t=e}Sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Cie(t){return new Sy(t,.5)}function Tie(t){return new Sy(t,0)}function Pie(t){return new Sy(t,1)}function vc(t,e){if((o=t.length)>1)for(var r=1,n,s,a=t[e[0]],o,l=a.length;r<o;++r)for(s=a,a=t[e[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Z1(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Oie(t,e){return t[e]}function Iie(t){const e=[];return e.key=t,e}function Rie(){var t=lt([]),e=Z1,r=vc,n=Oie;function s(a){var o=Array.from(t.apply(this,arguments),Iie),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,a)]).data=h;for(l=0,d=q4(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:lt(Array.from(a)),s):t},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:lt(+a),s):n},s.order=function(a){return arguments.length?(e=a==null?Z1:typeof a=="function"?a:lt(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(r=a??vc,s):r},s}function Die(t,e){if((n=t.length)>0){for(var r,n,s=0,a=t[0].length,o;s<a;++s){for(o=r=0;r<n;++r)o+=t[r][s][1]||0;if(o)for(r=0;r<n;++r)t[r][s][1]/=o}vc(t,e)}}function Mie(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,a=n.length;r<a;++r){for(var o=0,l=0;o<s;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}vc(t,e)}}function $ie(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,a,o;n<a;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[n][1]||0,f=d[n-1][1]||0,g=(h-f)/2,p=0;p<l;++p){var x=t[e[p]],b=x[n][1]||0,w=x[n-1][1]||0;g+=b-w}c+=h,u+=g*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,vc(t,e)}}function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}var Lie=["type","size","sizeType"];function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ew.apply(this,arguments)}function VS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function BS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VS(Object(r),!0).forEach(function(n){Fie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fie(t,e,r){return e=Uie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uie(t){var e=Vie(t,"string");return vh(e)=="symbol"?e:e+""}function Vie(t,e){if(vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bie(t,e){if(t==null)return{};var r=zie(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var AI={symbolCircle:W4,symbolCross:uie,symbolDiamond:hie,symbolSquare:fie,symbolStar:yie,symbolTriangle:vie,symbolWye:bie},qie=Math.PI/180,Wie=function(e){var r="symbol".concat(jy(e));return AI[r]||W4},Hie=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*qie;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Kie=function(e,r){AI["symbol".concat(jy(e))]=r},H4=function(e){var r=e.type,n=r===void 0?"circle":r,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=Bie(e,Lie),u=BS(BS({},c),{},{type:n,size:a,sizeType:l}),d=function(){var b=Wie(n),w=wie().type(b).size(Hie(a,l,n));return w()},h=u.className,f=u.cx,g=u.cy,p=xe(u,!0);return f===+f&&g===+g&&a===+a?L.createElement("path",ew({},p,{className:$e("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(g,")"),d:d()})):null};H4.registerSymbol=Kie;function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}function tw(){return tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tw.apply(this,arguments)}function zS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Gie(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zS(Object(r),!0).forEach(function(n){xh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TI(n.key),n)}}function Xie(t,e,r){return e&&Qie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jie(t,e,r){return e=yg(e),Zie(t,CI()?Reflect.construct(e,r||[],yg(t).constructor):e.apply(t,r))}function Zie(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eoe(t)}function eoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CI=function(){return!!t})()}function yg(t){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yg(t)}function toe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rw(t,e)}function rw(t,e){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},rw(t,e)}function xh(t,e,r){return e=TI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TI(t){var e=roe(t,"string");return xc(e)=="symbol"?e:e+""}function roe(t,e){if(xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nn=32,K4=function(t){function e(){return Yie(this,e),Jie(this,e,arguments)}return toe(e,t),Xie(e,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,a=Nn/2,o=Nn/6,l=Nn/3,c=n.inactive?s:n.color;if(n.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:Nn,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Nn,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return L.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Nn/8,"h").concat(Nn,"v").concat(Nn*3/4,"h").concat(-Nn,"z"),className:"recharts-legend-icon"});if(L.isValidElement(n.legendIcon)){var u=Gie({},n);return delete u.legendIcon,L.cloneElement(n.legendIcon,u)}return L.createElement(H4,{fill:c,cx:a,cy:a,size:Nn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Nn,height:Nn},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,p){var x=g.formatter||c,b=$e(xh(xh({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=Ae(g.value)?null:g.value;ss(!Ae(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=g.inactive?u:g.color;return L.createElement("li",tw({className:b,style:h,key:"legend-item-".concat(p)},Mo(n.props,g,p)),L.createElement(H1,{width:o,height:o,viewBox:d,style:f},n.renderIcon(g)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x?x(w,g,p):w))})}},{key:"render",value:function(){var n=this.props,s=n.payload,a=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(T.PureComponent);xh(K4,"displayName","Legend");xh(K4,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var noe=uy;function soe(){this.__data__=new noe,this.size=0}var aoe=soe;function ioe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var ooe=ioe;function loe(t){return this.__data__.get(t)}var coe=loe;function uoe(t){return this.__data__.has(t)}var doe=uoe,hoe=uy,foe=R4,poe=D4,moe=200;function goe(t,e){var r=this.__data__;if(r instanceof hoe){var n=r.__data__;if(!foe||n.length<moe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new poe(n)}return r.set(t,e),this.size=r.size,this}var yoe=goe,voe=uy,xoe=aoe,boe=ooe,woe=coe,_oe=doe,joe=yoe;function ou(t){var e=this.__data__=new voe(t);this.size=e.size}ou.prototype.clear=xoe;ou.prototype.delete=boe;ou.prototype.get=woe;ou.prototype.has=_oe;ou.prototype.set=joe;var PI=ou,koe="__lodash_hash_undefined__";function Noe(t){return this.__data__.set(t,koe),this}var Soe=Noe;function Eoe(t){return this.__data__.has(t)}var Aoe=Eoe,Coe=D4,Toe=Soe,Poe=Aoe;function vg(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Coe;++e<r;)this.add(t[e])}vg.prototype.add=vg.prototype.push=Toe;vg.prototype.has=Poe;var OI=vg;function Ooe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var II=Ooe;function Ioe(t,e){return t.has(e)}var RI=Ioe,Roe=OI,Doe=II,Moe=RI,$oe=1,Loe=2;function Foe(t,e,r,n,s,a){var o=r&$oe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,g=r&Loe?new Roe:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var p=t[h],x=e[h];if(n)var b=o?n(x,p,h,e,t,a):n(p,x,h,t,e,a);if(b!==void 0){if(b)continue;f=!1;break}if(g){if(!Doe(e,function(w,y){if(!Moe(g,y)&&(p===w||s(p,w,r,n,a)))return g.push(y)})){f=!1;break}}else if(!(p===x||s(p,x,r,n,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var DI=Foe,Uoe=Rs,Voe=Uoe.Uint8Array,Boe=Voe;function zoe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,s){r[++e]=[s,n]}),r}var qoe=zoe;function Woe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var G4=Woe,qS=Sf,WS=Boe,Hoe=I4,Koe=DI,Goe=qoe,Yoe=G4,Qoe=1,Xoe=2,Joe="[object Boolean]",Zoe="[object Date]",ele="[object Error]",tle="[object Map]",rle="[object Number]",nle="[object RegExp]",sle="[object Set]",ale="[object String]",ile="[object Symbol]",ole="[object ArrayBuffer]",lle="[object DataView]",HS=qS?qS.prototype:void 0,Px=HS?HS.valueOf:void 0;function cle(t,e,r,n,s,a,o){switch(r){case lle:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ole:return!(t.byteLength!=e.byteLength||!a(new WS(t),new WS(e)));case Joe:case Zoe:case rle:return Hoe(+t,+e);case ele:return t.name==e.name&&t.message==e.message;case nle:case ale:return t==e+"";case tle:var l=Goe;case sle:var c=n&Qoe;if(l||(l=Yoe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=Xoe,o.set(t,e);var d=Koe(l(t),l(e),n,s,a,o);return o.delete(t),d;case ile:if(Px)return Px.call(t)==Px.call(e)}return!1}var ule=cle;function dle(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var MI=dle,hle=MI,fle=tn;function ple(t,e,r){var n=e(t);return fle(t)?n:hle(n,r(t))}var mle=ple;function gle(t,e){for(var r=-1,n=t==null?0:t.length,s=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[s++]=o)}return a}var yle=gle;function vle(){return[]}var xle=vle,ble=yle,wle=xle,_le=Object.prototype,jle=_le.propertyIsEnumerable,KS=Object.getOwnPropertySymbols,kle=KS?function(t){return t==null?[]:(t=Object(t),ble(KS(t),function(e){return jle.call(t,e)}))}:wle,Nle=kle;function Sle(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ele=Sle,Ale=Aa,Cle=Ca,Tle="[object Arguments]";function Ple(t){return Cle(t)&&Ale(t)==Tle}var Ole=Ple,GS=Ole,Ile=Ca,$I=Object.prototype,Rle=$I.hasOwnProperty,Dle=$I.propertyIsEnumerable,Mle=GS(function(){return arguments}())?GS:function(t){return Ile(t)&&Rle.call(t,"callee")&&!Dle.call(t,"callee")},Y4=Mle,xg={exports:{}};function $le(){return!1}var Lle=$le;xg.exports;(function(t,e){var r=Rs,n=Lle,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(xg,xg.exports);var LI=xg.exports,Fle=9007199254740991,Ule=/^(?:0|[1-9]\d*)$/;function Vle(t,e){var r=typeof t;return e=e??Fle,!!e&&(r=="number"||r!="symbol"&&Ule.test(t))&&t>-1&&t%1==0&&t<e}var Q4=Vle,Ble=9007199254740991;function zle(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ble}var X4=zle,qle=Aa,Wle=X4,Hle=Ca,Kle="[object Arguments]",Gle="[object Array]",Yle="[object Boolean]",Qle="[object Date]",Xle="[object Error]",Jle="[object Function]",Zle="[object Map]",ece="[object Number]",tce="[object Object]",rce="[object RegExp]",nce="[object Set]",sce="[object String]",ace="[object WeakMap]",ice="[object ArrayBuffer]",oce="[object DataView]",lce="[object Float32Array]",cce="[object Float64Array]",uce="[object Int8Array]",dce="[object Int16Array]",hce="[object Int32Array]",fce="[object Uint8Array]",pce="[object Uint8ClampedArray]",mce="[object Uint16Array]",gce="[object Uint32Array]",ft={};ft[lce]=ft[cce]=ft[uce]=ft[dce]=ft[hce]=ft[fce]=ft[pce]=ft[mce]=ft[gce]=!0;ft[Kle]=ft[Gle]=ft[ice]=ft[Yle]=ft[oce]=ft[Qle]=ft[Xle]=ft[Jle]=ft[Zle]=ft[ece]=ft[tce]=ft[rce]=ft[nce]=ft[sce]=ft[ace]=!1;function yce(t){return Hle(t)&&Wle(t.length)&&!!ft[qle(t)]}var vce=yce;function xce(t){return function(e){return t(e)}}var FI=xce,bg={exports:{}};bg.exports;(function(t,e){var r=KO,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,o=a&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(bg,bg.exports);var bce=bg.exports,wce=vce,_ce=FI,YS=bce,QS=YS&&YS.isTypedArray,jce=QS?_ce(QS):wce,UI=jce,kce=Ele,Nce=Y4,Sce=tn,Ece=LI,Ace=Q4,Cce=UI,Tce=Object.prototype,Pce=Tce.hasOwnProperty;function Oce(t,e){var r=Sce(t),n=!r&&Nce(t),s=!r&&!n&&Ece(t),a=!r&&!n&&!s&&Cce(t),o=r||n||s||a,l=o?kce(t.length,String):[],c=l.length;for(var u in t)(e||Pce.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ace(u,c)))&&l.push(u);return l}var Ice=Oce,Rce=Object.prototype;function Dce(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Rce;return t===r}var Mce=Dce;function $ce(t,e){return function(r){return t(e(r))}}var VI=$ce,Lce=VI,Fce=Lce(Object.keys,Object),Uce=Fce,Vce=Mce,Bce=Uce,zce=Object.prototype,qce=zce.hasOwnProperty;function Wce(t){if(!Vce(t))return Bce(t);var e=[];for(var r in Object(t))qce.call(t,r)&&r!="constructor"&&e.push(r);return e}var Hce=Wce,Kce=O4,Gce=X4;function Yce(t){return t!=null&&Gce(t.length)&&!Kce(t)}var Af=Yce,Qce=Ice,Xce=Hce,Jce=Af;function Zce(t){return Jce(t)?Qce(t):Xce(t)}var Ey=Zce,eue=mle,tue=Nle,rue=Ey;function nue(t){return eue(t,rue,tue)}var sue=nue,XS=sue,aue=1,iue=Object.prototype,oue=iue.hasOwnProperty;function lue(t,e,r,n,s,a){var o=r&aue,l=XS(t),c=l.length,u=XS(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:oue.call(e,f)))return!1}var g=a.get(t),p=a.get(e);if(g&&p)return g==e&&p==t;var x=!0;a.set(t,e),a.set(e,t);for(var b=o;++h<c;){f=l[h];var w=t[f],y=e[f];if(n)var _=o?n(y,w,f,e,t,a):n(w,y,f,t,e,a);if(!(_===void 0?w===y||s(w,y,r,n,a):_)){x=!1;break}b||(b=f=="constructor")}if(x&&!b){var S=t.constructor,j=e.constructor;S!=j&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof j=="function"&&j instanceof j)&&(x=!1)}return a.delete(t),a.delete(e),x}var cue=lue,uue=Go,due=Rs,hue=uue(due,"DataView"),fue=hue,pue=Go,mue=Rs,gue=pue(mue,"Promise"),yue=gue,vue=Go,xue=Rs,bue=vue(xue,"Set"),BI=bue,wue=Go,_ue=Rs,jue=wue(_ue,"WeakMap"),kue=jue,nw=fue,sw=R4,aw=yue,iw=BI,ow=kue,zI=Aa,lu=YO,JS="[object Map]",Nue="[object Object]",ZS="[object Promise]",e5="[object Set]",t5="[object WeakMap]",r5="[object DataView]",Sue=lu(nw),Eue=lu(sw),Aue=lu(aw),Cue=lu(iw),Tue=lu(ow),Qi=zI;(nw&&Qi(new nw(new ArrayBuffer(1)))!=r5||sw&&Qi(new sw)!=JS||aw&&Qi(aw.resolve())!=ZS||iw&&Qi(new iw)!=e5||ow&&Qi(new ow)!=t5)&&(Qi=function(t){var e=zI(t),r=e==Nue?t.constructor:void 0,n=r?lu(r):"";if(n)switch(n){case Sue:return r5;case Eue:return JS;case Aue:return ZS;case Cue:return e5;case Tue:return t5}return e});var Pue=Qi,Ox=PI,Oue=DI,Iue=ule,Rue=cue,n5=Pue,s5=tn,a5=LI,Due=UI,Mue=1,i5="[object Arguments]",o5="[object Array]",Ip="[object Object]",$ue=Object.prototype,l5=$ue.hasOwnProperty;function Lue(t,e,r,n,s,a){var o=s5(t),l=s5(e),c=o?o5:n5(t),u=l?o5:n5(e);c=c==i5?Ip:c,u=u==i5?Ip:u;var d=c==Ip,h=u==Ip,f=c==u;if(f&&a5(t)){if(!a5(e))return!1;o=!0,d=!1}if(f&&!d)return a||(a=new Ox),o||Due(t)?Oue(t,e,r,n,s,a):Iue(t,e,c,r,n,s,a);if(!(r&Mue)){var g=d&&l5.call(t,"__wrapped__"),p=h&&l5.call(e,"__wrapped__");if(g||p){var x=g?t.value():t,b=p?e.value():e;return a||(a=new Ox),s(x,b,r,n,a)}}return f?(a||(a=new Ox),Rue(t,e,r,n,s,a)):!1}var Fue=Lue,Uue=Fue,c5=Ca;function qI(t,e,r,n,s){return t===e?!0:t==null||e==null||!c5(t)&&!c5(e)?t!==t&&e!==e:Uue(t,e,r,n,qI,s)}var J4=qI,Vue=PI,Bue=J4,zue=1,que=2;function Wue(t,e,r,n){var s=r.length,a=s,o=!n;if(t==null)return!a;for(t=Object(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=r[s];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new Vue;if(n)var f=n(u,d,c,t,e,h);if(!(f===void 0?Bue(d,u,zue|que,n,h):f))return!1}}return!0}var Hue=Wue,Kue=Ti;function Gue(t){return t===t&&!Kue(t)}var WI=Gue,Yue=WI,Que=Ey;function Xue(t){for(var e=Que(t),r=e.length;r--;){var n=e[r],s=t[n];e[r]=[n,s,Yue(s)]}return e}var Jue=Xue;function Zue(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var HI=Zue,ede=Hue,tde=Jue,rde=HI;function nde(t){var e=tde(t);return e.length==1&&e[0][2]?rde(e[0][0],e[0][1]):function(r){return r===t||ede(r,t,e)}}var sde=nde;function ade(t,e){return t!=null&&e in Object(t)}var ide=ade,ode=eI,lde=Y4,cde=tn,ude=Q4,dde=X4,hde=hy;function fde(t,e,r){e=ode(e,t);for(var n=-1,s=e.length,a=!1;++n<s;){var o=hde(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=s?a:(s=t==null?0:t.length,!!s&&dde(s)&&ude(o,s)&&(cde(t)||lde(t)))}var pde=fde,mde=ide,gde=pde;function yde(t,e){return t!=null&&gde(t,e,mde)}var vde=yde,xde=J4,bde=tI,wde=vde,_de=P4,jde=WI,kde=HI,Nde=hy,Sde=1,Ede=2;function Ade(t,e){return _de(t)&&jde(e)?kde(Nde(t),e):function(r){var n=bde(r,t);return n===void 0&&n===e?wde(r,t):xde(e,n,Sde|Ede)}}var Cde=Ade;function Tde(t){return t}var cu=Tde;function Pde(t){return function(e){return e==null?void 0:e[t]}}var Ode=Pde,Ide=L4;function Rde(t){return function(e){return Ide(e,t)}}var Dde=Rde,Mde=Ode,$de=Dde,Lde=P4,Fde=hy;function Ude(t){return Lde(t)?Mde(Fde(t)):$de(t)}var Vde=Ude,Bde=sde,zde=Cde,qde=cu,Wde=tn,Hde=Vde;function Kde(t){return typeof t=="function"?t:t==null?qde:typeof t=="object"?Wde(t)?zde(t[0],t[1]):Bde(t):Hde(t)}var Ds=Kde;function Gde(t,e,r,n){for(var s=t.length,a=r+(n?1:-1);n?a--:++a<s;)if(e(t[a],a,t))return a;return-1}var KI=Gde;function Yde(t){return t!==t}var Qde=Yde;function Xde(t,e,r){for(var n=r-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}var Jde=Xde,Zde=KI,ehe=Qde,the=Jde;function rhe(t,e,r){return e===e?the(t,e,r):Zde(t,ehe,r)}var nhe=rhe,she=nhe;function ahe(t,e){var r=t==null?0:t.length;return!!r&&she(t,e,0)>-1}var ihe=ahe;function ohe(t,e,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(e,t[n]))return!0;return!1}var lhe=ohe;function che(){}var uhe=che,Ix=BI,dhe=uhe,hhe=G4,fhe=1/0,phe=Ix&&1/hhe(new Ix([,-0]))[1]==fhe?function(t){return new Ix(t)}:dhe,mhe=phe,ghe=OI,yhe=ihe,vhe=lhe,xhe=RI,bhe=mhe,whe=G4,_he=200;function jhe(t,e,r){var n=-1,s=yhe,a=t.length,o=!0,l=[],c=l;if(r)o=!1,s=vhe;else if(a>=_he){var u=e?null:bhe(t);if(u)return whe(u);o=!1,s=xhe,c=new ghe}else c=e?[]:l;e:for(;++n<a;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else s(c,h,r)||(c!==l&&c.push(h),l.push(d))}return l}var khe=jhe,Nhe=Ds,She=khe;function Ehe(t,e){return t&&t.length?She(t,Nhe(e)):[]}var Ahe=Ehe;const u5=Ze(Ahe);function GI(t,e,r){return e===!0?u5(t,r):Ae(e)?u5(t,e):t}function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}var Che=["ref"];function d5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(r),!0).forEach(function(n){Ay(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function The(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QI(n.key),n)}}function Phe(t,e,r){return e&&h5(t.prototype,e),r&&h5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ohe(t,e,r){return e=wg(e),Ihe(t,YI()?Reflect.construct(e,r||[],wg(t).constructor):e.apply(t,r))}function Ihe(t,e){if(e&&(bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rhe(t)}function Rhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YI=function(){return!!t})()}function wg(t){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wg(t)}function Dhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lw(t,e)}function lw(t,e){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},lw(t,e)}function Ay(t,e,r){return e=QI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QI(t){var e=Mhe(t,"string");return bc(e)=="symbol"?e:e+""}function Mhe(t,e){if(bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $he(t,e){if(t==null)return{};var r=Lhe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Fhe(t){return t.value}function Uhe(t,e){if(L.isValidElement(t))return L.cloneElement(t,e);if(typeof t=="function")return L.createElement(t,e);e.ref;var r=$he(e,Che);return L.createElement(K4,r)}var f5=1,pi=function(t){function e(){var r;The(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=Ohe(this,e,[].concat(s)),Ay(r,"lastBoundingBox",{width:-1,height:-1}),r}return Dhe(e,t),Phe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>f5||Math.abs(s.height-this.lastBoundingBox.height)>f5)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,h,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();h={left:((u||0)-g.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var p=this.getBBoxSnapshot();f={top:((d||0)-p.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Vs(Vs({},h),f)}},{key:"render",value:function(){var n=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,h=Vs(Vs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return L.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(g){n.wrapperNode=g}},Uhe(a,Vs(Vs({},this.props),{},{payload:GI(d,u,Fhe)})))}}],[{key:"getWithHeight",value:function(n,s){var a=Vs(Vs({},this.defaultProps),n.props),o=a.layout;return o==="vertical"&&se(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(T.PureComponent);Ay(pi,"displayName","Legend");Ay(pi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var p5=Sf,Vhe=Y4,Bhe=tn,m5=p5?p5.isConcatSpreadable:void 0;function zhe(t){return Bhe(t)||Vhe(t)||!!(m5&&t&&t[m5])}var qhe=zhe,Whe=MI,Hhe=qhe;function XI(t,e,r,n,s){var a=-1,o=t.length;for(r||(r=Hhe),s||(s=[]);++a<o;){var l=t[a];e>0&&r(l)?e>1?XI(l,e-1,r,n,s):Whe(s,l):n||(s[s.length]=l)}return s}var JI=XI;function Khe(t){return function(e,r,n){for(var s=-1,a=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++s];if(r(a[c],c,a)===!1)break}return e}}var Ghe=Khe,Yhe=Ghe,Qhe=Yhe(),Xhe=Qhe,Jhe=Xhe,Zhe=Ey;function efe(t,e){return t&&Jhe(t,e,Zhe)}var ZI=efe,tfe=Af;function rfe(t,e){return function(r,n){if(r==null)return r;if(!tfe(r))return t(r,n);for(var s=r.length,a=e?s:-1,o=Object(r);(e?a--:++a<s)&&n(o[a],a,o)!==!1;);return r}}var nfe=rfe,sfe=ZI,afe=nfe,ife=afe(sfe),Z4=ife,ofe=Z4,lfe=Af;function cfe(t,e){var r=-1,n=lfe(t)?Array(t.length):[];return ofe(t,function(s,a,o){n[++r]=e(s,a,o)}),n}var eR=cfe;function ufe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var dfe=ufe,g5=tu;function hfe(t,e){if(t!==e){var r=t!==void 0,n=t===null,s=t===t,a=g5(t),o=e!==void 0,l=e===null,c=e===e,u=g5(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!s)return 1;if(!n&&!a&&!u&&t<e||u&&r&&s&&!n&&!a||l&&r&&s||!o&&s||!c)return-1}return 0}var ffe=hfe,pfe=ffe;function mfe(t,e,r){for(var n=-1,s=t.criteria,a=e.criteria,o=s.length,l=r.length;++n<o;){var c=pfe(s[n],a[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var gfe=mfe,Rx=$4,yfe=L4,vfe=Ds,xfe=eR,bfe=dfe,wfe=FI,_fe=gfe,jfe=cu,kfe=tn;function Nfe(t,e,r){e.length?e=Rx(e,function(a){return kfe(a)?function(o){return yfe(o,a.length===1?a[0]:a)}:a}):e=[jfe];var n=-1;e=Rx(e,wfe(vfe));var s=xfe(t,function(a,o,l){var c=Rx(e,function(u){return u(a)});return{criteria:c,index:++n,value:a}});return bfe(s,function(a,o){return _fe(a,o,r)})}var Sfe=Nfe;function Efe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Afe=Efe,Cfe=Afe,y5=Math.max;function Tfe(t,e,r){return e=y5(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,a=y5(n.length-e,0),o=Array(a);++s<a;)o[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),Cfe(t,this,l)}}var Pfe=Tfe;function Ofe(t){return function(){return t}}var Ife=Ofe,Rfe=Go,Dfe=function(){try{var t=Rfe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),tR=Dfe,Mfe=Ife,v5=tR,$fe=cu,Lfe=v5?function(t,e){return v5(t,"toString",{configurable:!0,enumerable:!1,value:Mfe(e),writable:!0})}:$fe,Ffe=Lfe,Ufe=800,Vfe=16,Bfe=Date.now;function zfe(t){var e=0,r=0;return function(){var n=Bfe(),s=Vfe-(n-r);if(r=n,s>0){if(++e>=Ufe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qfe=zfe,Wfe=Ffe,Hfe=qfe,Kfe=Hfe(Wfe),Gfe=Kfe,Yfe=cu,Qfe=Pfe,Xfe=Gfe;function Jfe(t,e){return Xfe(Qfe(t,e,Yfe),t+"")}var Zfe=Jfe,epe=I4,tpe=Af,rpe=Q4,npe=Ti;function spe(t,e,r){if(!npe(r))return!1;var n=typeof e;return(n=="number"?tpe(r)&&rpe(e,r.length):n=="string"&&e in r)?epe(r[e],t):!1}var Cy=spe,ape=JI,ipe=Sfe,ope=Zfe,x5=Cy,lpe=ope(function(t,e){if(t==null)return[];var r=e.length;return r>1&&x5(t,e[0],e[1])?e=[]:r>2&&x5(e[0],e[1],e[2])&&(e=[e[0]]),ipe(t,ape(e,1),[])}),cpe=lpe;const ej=Ze(cpe);function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cw.apply(this,arguments)}function upe(t,e){return ppe(t)||fpe(t,e)||hpe(t,e)||dpe()}function dpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hpe(t,e){if(t){if(typeof t=="string")return b5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b5(t,e)}}function b5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fpe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ppe(t){if(Array.isArray(t))return t}function w5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Dx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(r),!0).forEach(function(n){mpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mpe(t,e,r){return e=gpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gpe(t){var e=ype(t,"string");return bh(e)=="symbol"?e:e+""}function ype(t,e){if(bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vpe(t){return Array.isArray(t)&&Qt(t[0])&&Qt(t[1])?t.join(" ~ "):t}var xpe=function(e){var r=e.separator,n=r===void 0?" : ":r,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,g=e.wrapperClassName,p=e.labelClassName,x=e.label,b=e.labelFormatter,w=e.accessibilityLayer,y=w===void 0?!1:w,_=function(){if(d&&d.length){var I={padding:0,margin:0},D=(f?ej(d,f):d).map(function(B,z){if(B.type==="none")return null;var G=Dx({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),Q=B.formatter||h||vpe,F=B.value,H=B.name,$=F,U=H;if(Q&&$!=null&&U!=null){var V=Q(F,H,B,z,d);if(Array.isArray(V)){var Z=upe(V,2);$=Z[0],U=Z[1]}else $=V}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:G},Qt(U)?L.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Qt(U)?L.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,L.createElement("span",{className:"recharts-tooltip-item-value"},$),L.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:I},D)}return null},S=Dx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),j=Dx({margin:0},u),k=!Re(x),N=k?x:"",E=$e("recharts-default-tooltip",g),A=$e("recharts-tooltip-label",p);k&&b&&d!==void 0&&d!==null&&(N=b(x,d));var P=y?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",cw({className:E,style:S},P),L.createElement("p",{className:A,style:j},L.isValidElement(N)?N:"".concat(N)),_())};function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Rp(t,e,r){return e=bpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bpe(t){var e=wpe(t,"string");return wh(e)=="symbol"?e:e+""}function wpe(t,e){if(wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uu="recharts-tooltip-wrapper",_pe={visibility:"hidden"};function jpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return $e(Uu,Rp(Rp(Rp(Rp({},"".concat(Uu,"-right"),se(r)&&e&&se(e.x)&&r>=e.x),"".concat(Uu,"-left"),se(r)&&e&&se(e.x)&&r<e.x),"".concat(Uu,"-bottom"),se(n)&&e&&se(e.y)&&n>=e.y),"".concat(Uu,"-top"),se(n)&&e&&se(e.y)&&n<e.y))}function _5(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,s=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&se(a[n]))return a[n];var d=r[n]-l-s,h=r[n]+s;if(e[n])return o[n]?d:h;if(o[n]){var f=d,g=c[n];return f<g?Math.max(h,c[n]):Math.max(d,c[n])}var p=h+l,x=c[n]+u;return p>x?Math.max(d,c[n]):Math.max(h,c[n])}function kpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Npe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&r?(d=_5({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=_5({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=kpe({translateX:d,translateY:h,useTranslate3d:l})):u=_pe,{cssProperties:u,cssClasses:jpe({translateX:d,translateY:h,coordinate:r})}}function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function j5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function k5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(r),!0).forEach(function(n){dw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Spe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Epe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nR(n.key),n)}}function Ape(t,e,r){return e&&Epe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cpe(t,e,r){return e=_g(e),Tpe(t,rR()?Reflect.construct(e,r||[],_g(t).constructor):e.apply(t,r))}function Tpe(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ppe(t)}function Ppe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rR=function(){return!!t})()}function _g(t){return _g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_g(t)}function Ope(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uw(t,e)}function uw(t,e){return uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},uw(t,e)}function dw(t,e,r){return e=nR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nR(t){var e=Ipe(t,"string");return wc(e)=="symbol"?e:e+""}function Ipe(t,e){if(wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var N5=1,Rpe=function(t){function e(){var r;Spe(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=Cpe(this,e,[].concat(s)),dw(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dw(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Ope(e,t),Ape(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>N5||Math.abs(n.height-this.state.lastBoundingBox.height)>N5)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,g=s.offset,p=s.position,x=s.reverseDirection,b=s.useTranslate3d,w=s.viewBox,y=s.wrapperStyle,_=Npe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:g,position:p,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:w}),S=_.cssClasses,j=_.cssProperties,k=k5(k5({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return L.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(E){n.wrapperNode=E}},u)}}])}(T.PureComponent),Dpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Yo={isSsr:Dpe()};function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function S5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function E5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(r),!0).forEach(function(n){tj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aR(n.key),n)}}function Lpe(t,e,r){return e&&$pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fpe(t,e,r){return e=jg(e),Upe(t,sR()?Reflect.construct(e,r||[],jg(t).constructor):e.apply(t,r))}function Upe(t,e){if(e&&(_c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vpe(t)}function Vpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sR=function(){return!!t})()}function jg(t){return jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jg(t)}function Bpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hw(t,e)}function hw(t,e){return hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},hw(t,e)}function tj(t,e,r){return e=aR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aR(t){var e=zpe(t,"string");return _c(e)=="symbol"?e:e+""}function zpe(t,e){if(_c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qpe(t){return t.dataKey}function Wpe(t,e){return L.isValidElement(t)?L.cloneElement(t,e):typeof t=="function"?L.createElement(t,e):L.createElement(xpe,e)}var $r=function(t){function e(){return Mpe(this,e),Fpe(this,e,arguments)}return Bpe(e,t),Lpe(e,[{key:"render",value:function(){var n=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,h=s.filterNull,f=s.isAnimationActive,g=s.offset,p=s.payload,x=s.payloadUniqBy,b=s.position,w=s.reverseDirection,y=s.useTranslate3d,_=s.viewBox,S=s.wrapperStyle,j=p??[];h&&j.length&&(j=GI(p.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),x,qpe));var k=j.length>0;return L.createElement(Rpe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:k,offset:g,position:b,reverseDirection:w,useTranslate3d:y,viewBox:_,wrapperStyle:S},Wpe(u,E5(E5({},this.props),{},{payload:j})))}}])}(T.PureComponent);tj($r,"displayName","Tooltip");tj($r,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Yo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Hpe=Rs,Kpe=function(){return Hpe.Date.now()},Gpe=Kpe,Ype=/\s/;function Qpe(t){for(var e=t.length;e--&&Ype.test(t.charAt(e)););return e}var Xpe=Qpe,Jpe=Xpe,Zpe=/^\s+/;function eme(t){return t&&t.slice(0,Jpe(t)+1).replace(Zpe,"")}var tme=eme,rme=tme,A5=Ti,nme=tu,C5=NaN,sme=/^[-+]0x[0-9a-f]+$/i,ame=/^0b[01]+$/i,ime=/^0o[0-7]+$/i,ome=parseInt;function lme(t){if(typeof t=="number")return t;if(nme(t))return C5;if(A5(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=A5(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=rme(t);var r=ame.test(t);return r||ime.test(t)?ome(t.slice(2),r?2:8):sme.test(t)?C5:+t}var iR=lme,cme=Ti,Mx=Gpe,T5=iR,ume="Expected a function",dme=Math.max,hme=Math.min;function fme(t,e,r){var n,s,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(ume);e=T5(e)||0,cme(r)&&(d=!!r.leading,h="maxWait"in r,a=h?dme(T5(r.maxWait)||0,e):a,f="trailing"in r?!!r.trailing:f);function g(k){var N=n,E=s;return n=s=void 0,u=k,o=t.apply(E,N),o}function p(k){return u=k,l=setTimeout(w,e),d?g(k):o}function x(k){var N=k-c,E=k-u,A=e-N;return h?hme(A,a-E):A}function b(k){var N=k-c,E=k-u;return c===void 0||N>=e||N<0||h&&E>=a}function w(){var k=Mx();if(b(k))return y(k);l=setTimeout(w,x(k))}function y(k){return l=void 0,f&&n?g(k):(n=s=void 0,o)}function _(){l!==void 0&&clearTimeout(l),u=0,n=c=s=l=void 0}function S(){return l===void 0?o:y(Mx())}function j(){var k=Mx(),N=b(k);if(n=arguments,s=this,c=k,N){if(l===void 0)return p(c);if(h)return clearTimeout(l),l=setTimeout(w,e),g(c)}return l===void 0&&(l=setTimeout(w,e)),o}return j.cancel=_,j.flush=S,j}var pme=fme,mme=pme,gme=Ti,yme="Expected a function";function vme(t,e,r){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(yme);return gme(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),mme(t,e,{leading:n,maxWait:e,trailing:s})}var xme=vme;const oR=Ze(xme);function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function P5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Dp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(r),!0).forEach(function(n){bme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bme(t,e,r){return e=wme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wme(t){var e=_me(t,"string");return _h(e)=="symbol"?e:e+""}function _me(t,e){if(_h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jme(t,e){return Eme(t)||Sme(t,e)||Nme(t,e)||kme()}function kme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nme(t,e){if(t){if(typeof t=="string")return O5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O5(t,e)}}function O5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Eme(t){if(Array.isArray(t))return t}var ec=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,s=n===void 0?{width:-1,height:-1}:n,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,g=t.children,p=t.debounce,x=p===void 0?0:p,b=t.id,w=t.className,y=t.onResize,_=t.style,S=_===void 0?{}:_,j=T.useRef(null),k=T.useRef();k.current=y,T.useImperativeHandle(e,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=T.useState({containerWidth:s.width,containerHeight:s.height}),E=jme(N,2),A=E[0],P=E[1],O=T.useCallback(function(D,B){P(function(z){var G=Math.round(D),Q=Math.round(B);return z.containerWidth===G&&z.containerHeight===Q?z:{containerWidth:G,containerHeight:Q}})},[]);T.useEffect(function(){var D=function(H){var $,U=H[0].contentRect,V=U.width,Z=U.height;O(V,Z),($=k.current)===null||$===void 0||$.call(k,V,Z)};x>0&&(D=oR(D,x,{trailing:!0,leading:!1}));var B=new ResizeObserver(D),z=j.current.getBoundingClientRect(),G=z.width,Q=z.height;return O(G,Q),B.observe(j.current),function(){B.disconnect()}},[O,x]);var I=T.useMemo(function(){var D=A.containerWidth,B=A.containerHeight;if(D<0||B<0)return null;ss(co(o)||co(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ss(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=co(o)?D:o,G=co(c)?B:c;r&&r>0&&(z?G=z/r:G&&(z=G*r),f&&G>f&&(G=f)),ss(z>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,G,o,c,d,h,r);var Q=!Array.isArray(g)&&la(g.type).endsWith("Chart");return L.Children.map(g,function(F){return L.isValidElement(F)?T.cloneElement(F,Dp({width:z,height:G},Q?{style:Dp({height:"100%",width:"100%",maxHeight:G,maxWidth:z},F.props.style)}:{})):F})},[r,g,c,f,h,d,A,o]);return L.createElement("div",{id:b?"".concat(b):void 0,className:$e("recharts-responsive-container",w),style:Dp(Dp({},S),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:j},I)}),Cf=function(e){return null};Cf.displayName="Cell";function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function I5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function fw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(r),!0).forEach(function(n){Ame(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ame(t,e,r){return e=Cme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cme(t){var e=Tme(t,"string");return jh(e)=="symbol"?e:e+""}function Tme(t,e){if(jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hl={widthCache:{},cacheCount:0},Pme=2e3,Ome={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},R5="recharts_measurement_span";function Ime(t){var e=fw({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Ed=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Yo.isSsr)return{width:0,height:0};var n=Ime(r),s=JSON.stringify({text:e,copyStyle:n});if(hl.widthCache[s])return hl.widthCache[s];try{var a=document.getElementById(R5);a||(a=document.createElement("span"),a.setAttribute("id",R5),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=fw(fw({},Ome),n);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return hl.widthCache[s]=c,++hl.cacheCount>Pme&&(hl.cacheCount=0,hl.widthCache={}),c}catch{return{width:0,height:0}}},Rme=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function kg(t,e){return Lme(t)||$me(t,e)||Mme(t,e)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mme(t,e){if(t){if(typeof t=="string")return D5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D5(t,e)}}function D5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $me(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Lme(t){if(Array.isArray(t))return t}function Fme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vme(n.key),n)}}function Ume(t,e,r){return e&&M5(t.prototype,e),r&&M5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vme(t){var e=Bme(t,"string");return kh(e)=="symbol"?e:e+""}function Bme(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,L5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Wme=Object.keys(lR),$l="NaN";function Hme(t,e){return t*lR[e]}var Mp=function(){function t(e,r){Fme(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!zme.test(r)&&(this.num=NaN,this.unit=""),Wme.includes(r)&&(this.num=Hme(e,r),this.unit="px")}return Ume(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=qme.exec(r))!==null&&n!==void 0?n:[],a=kg(s,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function cR(t){if(t.includes($l))return $l;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=$5.exec(e))!==null&&r!==void 0?r:[],s=kg(n,4),a=s[1],o=s[2],l=s[3],c=Mp.parse(a??""),u=Mp.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return $l;e=e.replace($5,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=L5.exec(e))!==null&&h!==void 0?h:[],g=kg(f,4),p=g[1],x=g[2],b=g[3],w=Mp.parse(p??""),y=Mp.parse(b??""),_=x==="+"?w.add(y):w.subtract(y);if(_.isNaN())return $l;e=e.replace(L5,_.toString())}return e}var F5=/\(([^()]*)\)/;function Kme(t){for(var e=t;e.includes("(");){var r=F5.exec(e),n=kg(r,2),s=n[1];e=e.replace(F5,cR(s))}return e}function Gme(t){var e=t.replace(/\s+/g,"");return e=Kme(e),e=cR(e),e}function Yme(t){try{return Gme(t)}catch{return $l}}function $x(t){var e=Yme(t.slice(5,-1));return e===$l?"":e}var Qme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Xme=["dx","dy","angle","className","breakAll"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pw.apply(this,arguments)}function U5(t,e){if(t==null)return{};var r=Jme(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function V5(t,e){return rge(t)||tge(t,e)||ege(t,e)||Zme()}function Zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ege(t,e){if(t){if(typeof t=="string")return B5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B5(t,e)}}function B5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function rge(t){if(Array.isArray(t))return t}var uR=/[ \f\n\r\t\v\u2028\u2029]+/,dR=function(e){var r=e.children,n=e.breakAll,s=e.style;try{var a=[];Re(r)||(n?a=r.toString().split(""):a=r.toString().split(uR));var o=a.map(function(c){return{word:c,width:Ed(c,s).width}}),l=n?0:Ed("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},nge=function(e,r,n,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=se(o),h=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(G,Q){var F=Q.word,H=Q.width,$=G[G.length-1];if($&&(s==null||a||$.width+H+n<Number(s)))$.words.push(F),$.width+=H+n;else{var U={words:[F],width:H};G.push(U)}return G},[])},g=f(r),p=function(z){return z.reduce(function(G,Q){return G.width>Q.width?G:Q})};if(!d)return g;for(var x="",b=function(z){var G=h.slice(0,z),Q=dR({breakAll:u,style:c,children:G+x}).wordsWithComputedWidth,F=f(Q),H=F.length>o||p(F).width>Number(s);return[H,F]},w=0,y=h.length-1,_=0,S;w<=y&&_<=h.length-1;){var j=Math.floor((w+y)/2),k=j-1,N=b(k),E=V5(N,2),A=E[0],P=E[1],O=b(j),I=V5(O,1),D=I[0];if(!A&&!D&&(w=j+1),A&&D&&(y=j-1),!A&&D){S=P;break}_++}return S||g},z5=function(e){var r=Re(e)?[]:e.toString().split(uR);return[{words:r}]},sge=function(e){var r=e.width,n=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Yo.isSsr){var c,u,d=dR({breakAll:o,children:s,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return z5(s);return nge({breakAll:o,children:s,maxLines:l,style:a},c,u,r,n)}return z5(s)},q5="#808080",$o=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,g=f===void 0?"start":f,p=e.verticalAnchor,x=p===void 0?"end":p,b=e.fill,w=b===void 0?q5:b,y=U5(e,Qme),_=T.useMemo(function(){return sge({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),S=y.dx,j=y.dy,k=y.angle,N=y.className,E=y.breakAll,A=U5(y,Xme);if(!Qt(n)||!Qt(a))return null;var P=n+(se(S)?S:0),O=a+(se(j)?j:0),I;switch(x){case"start":I=$x("calc(".concat(u,")"));break;case"middle":I=$x("calc(".concat((_.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=$x("calc(".concat(_.length-1," * -").concat(l,")"));break}var D=[];if(h){var B=_[0].width,z=y.width;D.push("scale(".concat((se(z)?z/B:1)/B,")"))}return k&&D.push("rotate(".concat(k,", ").concat(P,", ").concat(O,")")),D.length&&(A.transform=D.join(" ")),L.createElement("text",pw({},xe(A,!0),{x:P,y:O,className:$e("recharts-text",N),textAnchor:g,fill:w.includes("url")?q5:w}),_.map(function(G,Q){var F=G.words.join(E?"":" ");return L.createElement("tspan",{x:P,dy:Q===0?I:l,key:"".concat(F,"-").concat(Q)},F)}))};function mi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function age(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rj(t){let e,r,n;t.length!==2?(e=mi,r=(l,c)=>mi(t(l),c),n=(l,c)=>t(l)-c):(e=t===mi||t===age?t:ige,r=t,n=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:a}}function ige(){return 0}function hR(t){return t===null?NaN:+t}function*oge(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const lge=rj(mi),Tf=lge.right;rj(hR).center;class W5 extends Map{constructor(e,r=dge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(H5(this,e))}has(e){return super.has(H5(this,e))}set(e,r){return super.set(cge(this,e),r)}delete(e){return super.delete(uge(this,e))}}function H5({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function cge({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function uge({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function dge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function hge(t=mi){if(t===mi)return fR;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function fR(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const fge=Math.sqrt(50),pge=Math.sqrt(10),mge=Math.sqrt(2);function Ng(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),o=a>=fge?10:a>=pge?5:a>=mge?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Ng(t,e,r*2):[l,c,u]}function mw(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,a,o]=n?Ng(e,t,r):Ng(t,e,r);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function gw(t,e,r){return e=+e,t=+t,r=+r,Ng(t,e,r)[2]}function yw(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?gw(e,t,r):gw(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function K5(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function G5(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function pR(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?fR:hge(s);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(e-u*h/c+f)),p=Math.min(n,Math.floor(e+(c-u)*h/c+f));pR(t,e,g,p,s)}const a=t[e];let o=r,l=n;for(Vu(t,r,e),s(t[n],a)>0&&Vu(t,r,n);o<l;){for(Vu(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[r],a)===0?Vu(t,r,l):(++l,Vu(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Vu(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function gge(t,e,r){if(t=Float64Array.from(oge(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return G5(t);if(e>=1)return K5(t);var n,s=(n-1)*e,a=Math.floor(s),o=K5(pR(t,a).subarray(0,a+1)),l=G5(t.subarray(a+1));return o+(l-o)*(s-a)}}function yge(t,e,r=hR){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,a=Math.floor(s),o=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function vge(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(s);++n<s;)a[n]=t+n*r;return a}function Fn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ta(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vw=Symbol("implicit");function nj(){var t=new W5,e=[],r=[],n=vw;function s(a){let o=t.get(a);if(o===void 0){if(n!==vw)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new W5;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return nj(e,r).unknown(n)},Fn.apply(s,arguments),s}function Nh(){var t=nj().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,g=s<n,p=g?s:n,x=g?n:s;a=(x-p)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),p+=(x-p-a*(f-c))*d,o=a*(1-c),l&&(p=Math.round(p),o=Math.round(o));var b=vge(f).map(function(w){return p+a*w});return r(g?b.reverse():b)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},t.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return Nh(e(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Fn.apply(h(),arguments)}function mR(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return mR(e())},t}function Ad(){return mR(Nh.apply(null,arguments).paddingInner(1))}function sj(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function gR(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Pf(){}var Sh=.7,Sg=1/Sh,tc="\\s*([+-]?\\d+)\\s*",Eh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xge=/^#([0-9a-f]{3,8})$/,bge=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),wge=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),_ge=new RegExp(`^rgba\\(${tc},${tc},${tc},${Eh}\\)$`),jge=new RegExp(`^rgba\\(${Es},${Es},${Es},${Eh}\\)$`),kge=new RegExp(`^hsl\\(${Eh},${Es},${Es}\\)$`),Nge=new RegExp(`^hsla\\(${Eh},${Es},${Es},${Eh}\\)$`),Y5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sj(Pf,Ah,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Q5,formatHex:Q5,formatHex8:Sge,formatHsl:Ege,formatRgb:X5,toString:X5});function Q5(){return this.rgb().formatHex()}function Sge(){return this.rgb().formatHex8()}function Ege(){return yR(this).formatHsl()}function X5(){return this.rgb().formatRgb()}function Ah(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=xge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?J5(e):r===3?new Yr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?$p(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?$p(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bge.exec(t))?new Yr(e[1],e[2],e[3],1):(e=wge.exec(t))?new Yr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_ge.exec(t))?$p(e[1],e[2],e[3],e[4]):(e=jge.exec(t))?$p(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kge.exec(t))?tE(e[1],e[2]/100,e[3]/100,1):(e=Nge.exec(t))?tE(e[1],e[2]/100,e[3]/100,e[4]):Y5.hasOwnProperty(t)?J5(Y5[t]):t==="transparent"?new Yr(NaN,NaN,NaN,0):null}function J5(t){return new Yr(t>>16&255,t>>8&255,t&255,1)}function $p(t,e,r,n){return n<=0&&(t=e=r=NaN),new Yr(t,e,r,n)}function Age(t){return t instanceof Pf||(t=Ah(t)),t?(t=t.rgb(),new Yr(t.r,t.g,t.b,t.opacity)):new Yr}function xw(t,e,r,n){return arguments.length===1?Age(t):new Yr(t,e,r,n??1)}function Yr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}sj(Yr,xw,gR(Pf,{brighter(t){return t=t==null?Sg:Math.pow(Sg,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Sh:Math.pow(Sh,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yr(vo(this.r),vo(this.g),vo(this.b),Eg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z5,formatHex:Z5,formatHex8:Cge,formatRgb:eE,toString:eE}));function Z5(){return`#${uo(this.r)}${uo(this.g)}${uo(this.b)}`}function Cge(){return`#${uo(this.r)}${uo(this.g)}${uo(this.b)}${uo((isNaN(this.opacity)?1:this.opacity)*255)}`}function eE(){const t=Eg(this.opacity);return`${t===1?"rgb(":"rgba("}${vo(this.r)}, ${vo(this.g)}, ${vo(this.b)}${t===1?")":`, ${t})`}`}function Eg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function uo(t){return t=vo(t),(t<16?"0":"")+t.toString(16)}function tE(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Jn(t,e,r,n)}function yR(t){if(t instanceof Jn)return new Jn(t.h,t.s,t.l,t.opacity);if(t instanceof Pf||(t=Ah(t)),!t)return new Jn;if(t instanceof Jn)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new Jn(o,l,c,t.opacity)}function Tge(t,e,r,n){return arguments.length===1?yR(t):new Jn(t,e,r,n??1)}function Jn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}sj(Jn,Tge,gR(Pf,{brighter(t){return t=t==null?Sg:Math.pow(Sg,t),new Jn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Sh:Math.pow(Sh,t),new Jn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new Yr(Lx(t>=240?t-240:t+120,s,n),Lx(t,s,n),Lx(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Jn(rE(this.h),Lp(this.s),Lp(this.l),Eg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Eg(this.opacity);return`${t===1?"hsl(":"hsla("}${rE(this.h)}, ${Lp(this.s)*100}%, ${Lp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rE(t){return t=(t||0)%360,t<0?t+360:t}function Lp(t){return Math.max(0,Math.min(1,t||0))}function Lx(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const aj=t=>()=>t;function Pge(t,e){return function(r){return t+r*e}}function Oge(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Ige(t){return(t=+t)==1?vR:function(e,r){return r-e?Oge(e,r,t):aj(isNaN(e)?r:e)}}function vR(t,e){var r=e-t;return r?Pge(t,r):aj(isNaN(t)?e:t)}const nE=function t(e){var r=Ige(e);function n(s,a){var o=r((s=xw(s)).r,(a=xw(a)).r),l=r(s.g,a.g),c=r(s.b,a.b),u=vR(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=t,n}(1);function Rge(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=t[s]*(1-a)+e[s]*a;return n}}function Dge(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mge(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)s[o]=uu(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(l){for(o=0;o<n;++o)a[o]=s[o](l);return a}}function $ge(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ag(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Lge(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=uu(t[s],e[s]):n[s]=e[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fx=new RegExp(bw.source,"g");function Fge(t){return function(){return t}}function Uge(t){return function(e){return t(e)+""}}function Vge(t,e){var r=bw.lastIndex=Fx.lastIndex=0,n,s,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=bw.exec(t))&&(s=Fx.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ag(n,s)})),r=Fx.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Uge(c[0].x):Fge(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function uu(t,e){var r=typeof e,n;return e==null||r==="boolean"?aj(e):(r==="number"?Ag:r==="string"?(n=Ah(e))?(e=n,nE):Vge:e instanceof Ah?nE:e instanceof Date?$ge:Dge(e)?Rge:Array.isArray(e)?Mge:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lge:Ag)(t,e)}function ij(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Bge(t,e){e===void 0&&(e=t,t=uu);for(var r=0,n=e.length-1,s=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(s,s=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[l](o-l)}}function zge(t){return function(){return t}}function Cg(t){return+t}var sE=[0,1];function Ur(t){return t}function ww(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:zge(isNaN(e)?NaN:.5)}function qge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Wge(t,e,r){var n=t[0],s=t[1],a=e[0],o=e[1];return s<n?(n=ww(s,n),a=r(o,a)):(n=ww(n,s),a=r(a,o)),function(l){return a(n(l))}}function Hge(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=ww(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(l){var c=Tf(t,l,1,n)-1;return a[c](s[c](l))}}function Of(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ty(){var t=sE,e=sE,r=uu,n,s,a,o=Ur,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Ur&&(o=qge(t[0],t[f-1])),l=f>2?Hge:Wge,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(n),e,r)))(n(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(n),Ag)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Cg),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=ij,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Ur,d()):o!==Ur},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,g){return n=f,s=g,d()}}function oj(){return Ty()(Ur,Ur)}function Kge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Tg(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function jc(t){return t=Tg(Math.abs(t)),t?t[1]:NaN}function Gge(t,e){return function(r,n){for(var s=r.length,a=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Yge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Qge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ch(t){if(!(e=Qge.exec(t)))throw new Error("invalid format: "+t);var e;return new lj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ch.prototype=lj.prototype;function lj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}lj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xge(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Pg;function Jge(t,e){var r=Tg(t,e);if(!r)return Pg=void 0,t.toPrecision(e);var n=r[0],s=r[1],a=s-(Pg=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Tg(t,Math.max(0,e+a-1))[0]}function aE(t,e){var r=Tg(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const iE={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>aE(t*100,e),r:aE,s:Jge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oE(t){return t}var lE=Array.prototype.map,cE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zge(t){var e=t.grouping===void 0||t.thousands===void 0?oE:Gge(lE.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?oE:Yge(lE.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,f){h=Ch(h);var g=h.fill,p=h.align,x=h.sign,b=h.symbol,w=h.zero,y=h.width,_=h.comma,S=h.precision,j=h.trim,k=h.type;k==="n"?(_=!0,k="g"):iE[k]||(S===void 0&&(S=12),j=!0,k="g"),(w||g==="0"&&p==="=")&&(w=!0,g="0",p="=");var N=(f&&f.prefix!==void 0?f.prefix:"")+(b==="$"?r:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),E=(b==="$"?n:/[%p]/.test(k)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),A=iE[k],P=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(I){var D=N,B=E,z,G,Q;if(k==="c")B=A(I)+B,I="";else{I=+I;var F=I<0||1/I<0;if(I=isNaN(I)?c:A(Math.abs(I),S),j&&(I=Xge(I)),F&&+I==0&&x!=="+"&&(F=!1),D=(F?x==="("?x:l:x==="-"||x==="("?"":x)+D,B=(k==="s"&&!isNaN(I)&&Pg!==void 0?cE[8+Pg/3]:"")+B+(F&&x==="("?")":""),P){for(z=-1,G=I.length;++z<G;)if(Q=I.charCodeAt(z),48>Q||Q>57){B=(Q===46?s+I.slice(z+1):I.slice(z))+B,I=I.slice(0,z);break}}}_&&!w&&(I=e(I,1/0));var H=D.length+I.length+B.length,$=H<y?new Array(y-H+1).join(g):"";switch(_&&w&&(I=e($+I,$.length?y-B.length:1/0),$=""),p){case"<":I=D+I+B+$;break;case"=":I=D+$+I+B;break;case"^":I=$.slice(0,H=$.length>>1)+D+I+B+$.slice(H);break;default:I=$+D+I+B;break}return a(I)}return O.toString=function(){return h+""},O}function d(h,f){var g=Math.max(-8,Math.min(8,Math.floor(jc(f)/3)))*3,p=Math.pow(10,-g),x=u((h=Ch(h),h.type="f",h),{suffix:cE[8+g/3]});return function(b){return x(p*b)}}return{format:u,formatPrefix:d}}var Fp,cj,xR;e0e({thousands:",",grouping:[3],currency:["$",""]});function e0e(t){return Fp=Zge(t),cj=Fp.format,xR=Fp.formatPrefix,Fp}function t0e(t){return Math.max(0,-jc(Math.abs(t)))}function r0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jc(e)/3)))*3-jc(Math.abs(t)))}function n0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jc(e)-jc(t))+1}function bR(t,e,r,n){var s=yw(t,e,r),a;switch(n=Ch(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=r0e(s,o))&&(n.precision=a),xR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=n0e(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=t0e(s))&&(n.precision=a-(n.type==="%")*2);break}}return cj(n)}function Pi(t){var e=t.domain;return t.ticks=function(r){var n=e();return mw(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return bR(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,a=n.length-1,o=n[s],l=n[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=gw(o,l,r),u===c)return n[s]=o,n[a]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Og(){var t=oj();return t.copy=function(){return Of(t,Og())},Fn.apply(t,arguments),Pi(t)}function wR(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Cg),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return wR(t).unknown(e)},t=arguments.length?Array.from(t,Cg):[0,1],Pi(r)}function _R(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],a=t[n],o;return a<s&&(o=r,r=n,n=o,o=s,s=a,a=o),t[r]=e.floor(s),t[n]=e.ceil(a),t}function uE(t){return Math.log(t)}function dE(t){return Math.exp(t)}function s0e(t){return-Math.log(-t)}function a0e(t){return-Math.exp(-t)}function i0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function o0e(t){return t===10?i0e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function l0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function hE(t){return(e,r)=>-t(-e,r)}function uj(t){const e=t(uE,dE),r=e.domain;let n=10,s,a;function o(){return s=l0e(n),a=o0e(n),r()[0]<0?(s=hE(s),a=hE(a),t(s0e,a0e)):t(uE,dE),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),g=s(d),p,x;const b=l==null?10:+l;let w=[];if(!(n%1)&&g-f<b){if(f=Math.floor(f),g=Math.ceil(g),u>0){for(;f<=g;++f)for(p=1;p<n;++p)if(x=f<0?p/a(-f):p*a(f),!(x<u)){if(x>d)break;w.push(x)}}else for(;f<=g;++f)for(p=n-1;p>=1;--p)if(x=f>0?p/a(-f):p*a(f),!(x<u)){if(x>d)break;w.push(x)}w.length*2<b&&(w=mw(u,d,b))}else w=mw(f,g,Math.min(g-f,b)).map(a);return h?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ch(c)).precision==null&&(c.trim=!0),c=cj(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let h=d/a(Math.round(s(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},e.nice=()=>r(_R(r(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function jR(){const t=uj(Ty()).domain([1,10]);return t.copy=()=>Of(t,jR()).base(t.base()),Fn.apply(t,arguments),t}function fE(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pE(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function dj(t){var e=1,r=t(fE(e),pE(e));return r.constant=function(n){return arguments.length?t(fE(e=+n),pE(e)):e},Pi(r)}function kR(){var t=dj(Ty());return t.copy=function(){return Of(t,kR()).constant(t.constant())},Fn.apply(t,arguments)}function mE(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function c0e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function u0e(t){return t<0?-t*t:t*t}function hj(t){var e=t(Ur,Ur),r=1;function n(){return r===1?t(Ur,Ur):r===.5?t(c0e,u0e):t(mE(r),mE(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},Pi(e)}function fj(){var t=hj(Ty());return t.copy=function(){return Of(t,fj()).exponent(t.exponent())},Fn.apply(t,arguments),t}function d0e(){return fj.apply(null,arguments).exponent(.5)}function gE(t){return Math.sign(t)*t*t}function h0e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function NR(){var t=oj(),e=[0,1],r=!1,n;function s(a){var o=h0e(t(a));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(a){return t.invert(gE(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,Cg)).map(gE)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return NR(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Fn.apply(s,arguments),Pi(s)}function SR(){var t=[],e=[],r=[],n;function s(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=yge(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?n:e[Tf(r,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(mi),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return SR().domain(t).range(e).unknown(n)},Fn.apply(a,arguments)}function ER(){var t=0,e=1,r=1,n=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[Tf(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return ER().domain([t,e]).range(s).unknown(a)},Fn.apply(Pi(o),arguments)}function AR(){var t=[.5],e=[0,1],r,n=1;function s(a){return a!=null&&a<=a?e[Tf(t,a,0,n)]:r}return s.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return AR().domain(t).range(e).unknown(r)},Fn.apply(s,arguments)}const Ux=new Date,Vx=new Date;function Zt(t,e,r,n){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},s.filter=a=>Zt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),r&&(s.count=(a,o)=>(Ux.setTime(+a),Vx.setTime(+o),t(Ux),t(Vx),Math.floor(r(Ux,Vx))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?o=>n(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const Ig=Zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ig.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Ig);Ig.range;const ea=1e3,Tn=ea*60,ta=Tn*60,ba=ta*24,pj=ba*7,yE=ba*30,Bx=ba*365,ho=Zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ea)},(t,e)=>(e-t)/ea,t=>t.getUTCSeconds());ho.range;const mj=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ea)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getMinutes());mj.range;const gj=Zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getUTCMinutes());gj.range;const yj=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ea-t.getMinutes()*Tn)},(t,e)=>{t.setTime(+t+e*ta)},(t,e)=>(e-t)/ta,t=>t.getHours());yj.range;const vj=Zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ta)},(t,e)=>(e-t)/ta,t=>t.getUTCHours());vj.range;const If=Zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Tn)/ba,t=>t.getDate()-1);If.range;const Py=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ba,t=>t.getUTCDate()-1);Py.range;const CR=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ba,t=>Math.floor(t/ba));CR.range;function Qo(t){return Zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Tn)/pj)}const Oy=Qo(0),Rg=Qo(1),f0e=Qo(2),p0e=Qo(3),kc=Qo(4),m0e=Qo(5),g0e=Qo(6);Oy.range;Rg.range;f0e.range;p0e.range;kc.range;m0e.range;g0e.range;function Xo(t){return Zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/pj)}const Iy=Xo(0),Dg=Xo(1),y0e=Xo(2),v0e=Xo(3),Nc=Xo(4),x0e=Xo(5),b0e=Xo(6);Iy.range;Dg.range;y0e.range;v0e.range;Nc.range;x0e.range;b0e.range;const xj=Zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xj.range;const bj=Zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());bj.range;const wa=Zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});wa.range;const _a=Zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});_a.range;function TR(t,e,r,n,s,a){const o=[[ho,1,ea],[ho,5,5*ea],[ho,15,15*ea],[ho,30,30*ea],[a,1,Tn],[a,5,5*Tn],[a,15,15*Tn],[a,30,30*Tn],[s,1,ta],[s,3,3*ta],[s,6,6*ta],[s,12,12*ta],[n,1,ba],[n,2,2*ba],[r,1,pj],[e,1,yE],[e,3,3*yE],[t,1,Bx]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const g=h&&typeof h.range=="function"?h:c(u,d,h),p=g?g.range(u,+d+1):[];return f?p.reverse():p}function c(u,d,h){const f=Math.abs(d-u)/h,g=rj(([,,b])=>b).right(o,f);if(g===o.length)return t.every(yw(u/Bx,d/Bx,h));if(g===0)return Ig.every(Math.max(yw(u,d,h),1));const[p,x]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return p.every(x)}return[l,c]}const[w0e,_0e]=TR(_a,bj,Iy,CR,vj,gj),[j0e,k0e]=TR(wa,xj,Oy,If,yj,mj);function zx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bu(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function N0e(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=zu(s),d=qu(s),h=zu(a),f=qu(a),g=zu(o),p=qu(o),x=zu(l),b=qu(l),w=zu(c),y=qu(c),_={a:Q,A:F,b:H,B:$,c:null,d:jE,e:jE,f:G0e,g:sye,G:iye,H:W0e,I:H0e,j:K0e,L:PR,m:Y0e,M:Q0e,p:U,q:V,Q:SE,s:EE,S:X0e,u:J0e,U:Z0e,V:eye,w:tye,W:rye,x:null,X:null,y:nye,Y:aye,Z:oye,"%":NE},S={a:Z,A:ye,b:Y,B:re,c:null,d:kE,e:kE,f:dye,g:wye,G:jye,H:lye,I:cye,j:uye,L:IR,m:hye,M:fye,p:Pe,q:Ne,Q:SE,s:EE,S:pye,u:mye,U:gye,V:yye,w:vye,W:xye,x:null,X:null,y:bye,Y:_ye,Z:kye,"%":NE},j={a:P,A:O,b:I,B:D,c:B,d:wE,e:wE,f:V0e,g:bE,G:xE,H:_E,I:_E,j:$0e,L:U0e,m:M0e,M:L0e,p:A,q:D0e,Q:z0e,s:q0e,S:F0e,u:T0e,U:P0e,V:O0e,w:C0e,W:I0e,x:z,X:G,y:bE,Y:xE,Z:R0e,"%":B0e};_.x=k(r,_),_.X=k(n,_),_.c=k(e,_),S.x=k(r,S),S.X=k(n,S),S.c=k(e,S);function k(le,Se){return function(Oe){var ee=[],at=-1,Fe=0,xt=le.length,Nt,yr,ps;for(Oe instanceof Date||(Oe=new Date(+Oe));++at<xt;)le.charCodeAt(at)===37&&(ee.push(le.slice(Fe,at)),(yr=vE[Nt=le.charAt(++at)])!=null?Nt=le.charAt(++at):yr=Nt==="e"?" ":"0",(ps=Se[Nt])&&(Nt=ps(Oe,yr)),ee.push(Nt),Fe=at+1);return ee.push(le.slice(Fe,at)),ee.join("")}}function N(le,Se){return function(Oe){var ee=Bu(1900,void 0,1),at=E(ee,le,Oe+="",0),Fe,xt;if(at!=Oe.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(Se&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Fe=qx(Bu(ee.y,0,1)),xt=Fe.getUTCDay(),Fe=xt>4||xt===0?Dg.ceil(Fe):Dg(Fe),Fe=Py.offset(Fe,(ee.V-1)*7),ee.y=Fe.getUTCFullYear(),ee.m=Fe.getUTCMonth(),ee.d=Fe.getUTCDate()+(ee.w+6)%7):(Fe=zx(Bu(ee.y,0,1)),xt=Fe.getDay(),Fe=xt>4||xt===0?Rg.ceil(Fe):Rg(Fe),Fe=If.offset(Fe,(ee.V-1)*7),ee.y=Fe.getFullYear(),ee.m=Fe.getMonth(),ee.d=Fe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),xt="Z"in ee?qx(Bu(ee.y,0,1)).getUTCDay():zx(Bu(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(xt+5)%7:ee.w+ee.U*7-(xt+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,qx(ee)):zx(ee)}}function E(le,Se,Oe,ee){for(var at=0,Fe=Se.length,xt=Oe.length,Nt,yr;at<Fe;){if(ee>=xt)return-1;if(Nt=Se.charCodeAt(at++),Nt===37){if(Nt=Se.charAt(at++),yr=j[Nt in vE?Se.charAt(at++):Nt],!yr||(ee=yr(le,Oe,ee))<0)return-1}else if(Nt!=Oe.charCodeAt(ee++))return-1}return ee}function A(le,Se,Oe){var ee=u.exec(Se.slice(Oe));return ee?(le.p=d.get(ee[0].toLowerCase()),Oe+ee[0].length):-1}function P(le,Se,Oe){var ee=g.exec(Se.slice(Oe));return ee?(le.w=p.get(ee[0].toLowerCase()),Oe+ee[0].length):-1}function O(le,Se,Oe){var ee=h.exec(Se.slice(Oe));return ee?(le.w=f.get(ee[0].toLowerCase()),Oe+ee[0].length):-1}function I(le,Se,Oe){var ee=w.exec(Se.slice(Oe));return ee?(le.m=y.get(ee[0].toLowerCase()),Oe+ee[0].length):-1}function D(le,Se,Oe){var ee=x.exec(Se.slice(Oe));return ee?(le.m=b.get(ee[0].toLowerCase()),Oe+ee[0].length):-1}function B(le,Se,Oe){return E(le,e,Se,Oe)}function z(le,Se,Oe){return E(le,r,Se,Oe)}function G(le,Se,Oe){return E(le,n,Se,Oe)}function Q(le){return o[le.getDay()]}function F(le){return a[le.getDay()]}function H(le){return c[le.getMonth()]}function $(le){return l[le.getMonth()]}function U(le){return s[+(le.getHours()>=12)]}function V(le){return 1+~~(le.getMonth()/3)}function Z(le){return o[le.getUTCDay()]}function ye(le){return a[le.getUTCDay()]}function Y(le){return c[le.getUTCMonth()]}function re(le){return l[le.getUTCMonth()]}function Pe(le){return s[+(le.getUTCHours()>=12)]}function Ne(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var Se=k(le+="",_);return Se.toString=function(){return le},Se},parse:function(le){var Se=N(le+="",!1);return Se.toString=function(){return le},Se},utcFormat:function(le){var Se=k(le+="",S);return Se.toString=function(){return le},Se},utcParse:function(le){var Se=N(le+="",!0);return Se.toString=function(){return le},Se}}}var vE={"-":"",_:" ",0:"0"},ar=/^\s*\d+/,S0e=/^%/,E0e=/[\\^$*+?|[\]().{}]/g;function Ge(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(e)+s:s)}function A0e(t){return t.replace(E0e,"\\$&")}function zu(t){return new RegExp("^(?:"+t.map(A0e).join("|")+")","i")}function qu(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function C0e(t,e,r){var n=ar.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function T0e(t,e,r){var n=ar.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function P0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function O0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function I0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function xE(t,e,r){var n=ar.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function bE(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function R0e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function D0e(t,e,r){var n=ar.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function M0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function wE(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function $0e(t,e,r){var n=ar.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function _E(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function L0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function F0e(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function U0e(t,e,r){var n=ar.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function V0e(t,e,r){var n=ar.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function B0e(t,e,r){var n=S0e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function z0e(t,e,r){var n=ar.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function q0e(t,e,r){var n=ar.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function jE(t,e){return Ge(t.getDate(),e,2)}function W0e(t,e){return Ge(t.getHours(),e,2)}function H0e(t,e){return Ge(t.getHours()%12||12,e,2)}function K0e(t,e){return Ge(1+If.count(wa(t),t),e,3)}function PR(t,e){return Ge(t.getMilliseconds(),e,3)}function G0e(t,e){return PR(t,e)+"000"}function Y0e(t,e){return Ge(t.getMonth()+1,e,2)}function Q0e(t,e){return Ge(t.getMinutes(),e,2)}function X0e(t,e){return Ge(t.getSeconds(),e,2)}function J0e(t){var e=t.getDay();return e===0?7:e}function Z0e(t,e){return Ge(Oy.count(wa(t)-1,t),e,2)}function OR(t){var e=t.getDay();return e>=4||e===0?kc(t):kc.ceil(t)}function eye(t,e){return t=OR(t),Ge(kc.count(wa(t),t)+(wa(t).getDay()===4),e,2)}function tye(t){return t.getDay()}function rye(t,e){return Ge(Rg.count(wa(t)-1,t),e,2)}function nye(t,e){return Ge(t.getFullYear()%100,e,2)}function sye(t,e){return t=OR(t),Ge(t.getFullYear()%100,e,2)}function aye(t,e){return Ge(t.getFullYear()%1e4,e,4)}function iye(t,e){var r=t.getDay();return t=r>=4||r===0?kc(t):kc.ceil(t),Ge(t.getFullYear()%1e4,e,4)}function oye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ge(e/60|0,"0",2)+Ge(e%60,"0",2)}function kE(t,e){return Ge(t.getUTCDate(),e,2)}function lye(t,e){return Ge(t.getUTCHours(),e,2)}function cye(t,e){return Ge(t.getUTCHours()%12||12,e,2)}function uye(t,e){return Ge(1+Py.count(_a(t),t),e,3)}function IR(t,e){return Ge(t.getUTCMilliseconds(),e,3)}function dye(t,e){return IR(t,e)+"000"}function hye(t,e){return Ge(t.getUTCMonth()+1,e,2)}function fye(t,e){return Ge(t.getUTCMinutes(),e,2)}function pye(t,e){return Ge(t.getUTCSeconds(),e,2)}function mye(t){var e=t.getUTCDay();return e===0?7:e}function gye(t,e){return Ge(Iy.count(_a(t)-1,t),e,2)}function RR(t){var e=t.getUTCDay();return e>=4||e===0?Nc(t):Nc.ceil(t)}function yye(t,e){return t=RR(t),Ge(Nc.count(_a(t),t)+(_a(t).getUTCDay()===4),e,2)}function vye(t){return t.getUTCDay()}function xye(t,e){return Ge(Dg.count(_a(t)-1,t),e,2)}function bye(t,e){return Ge(t.getUTCFullYear()%100,e,2)}function wye(t,e){return t=RR(t),Ge(t.getUTCFullYear()%100,e,2)}function _ye(t,e){return Ge(t.getUTCFullYear()%1e4,e,4)}function jye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Nc(t):Nc.ceil(t),Ge(t.getUTCFullYear()%1e4,e,4)}function kye(){return"+0000"}function NE(){return"%"}function SE(t){return+t}function EE(t){return Math.floor(+t/1e3)}var fl,DR,MR;Nye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nye(t){return fl=N0e(t),DR=fl.format,fl.parse,MR=fl.utcFormat,fl.utcParse,fl}function Sye(t){return new Date(t)}function Eye(t){return t instanceof Date?+t:+new Date(+t)}function wj(t,e,r,n,s,a,o,l,c,u){var d=oj(),h=d.invert,f=d.domain,g=u(".%L"),p=u(":%S"),x=u("%I:%M"),b=u("%I %p"),w=u("%a %d"),y=u("%b %d"),_=u("%B"),S=u("%Y");function j(k){return(c(k)<k?g:l(k)<k?p:o(k)<k?x:a(k)<k?b:n(k)<k?s(k)<k?w:y:r(k)<k?_:S)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?f(Array.from(k,Eye)):f().map(Sye)},d.ticks=function(k){var N=f();return t(N[0],N[N.length-1],k??10)},d.tickFormat=function(k,N){return N==null?j:u(N)},d.nice=function(k){var N=f();return(!k||typeof k.range!="function")&&(k=e(N[0],N[N.length-1],k??10)),k?f(_R(N,k)):d},d.copy=function(){return Of(d,wj(t,e,r,n,s,a,o,l,c,u))},d}function Aye(){return Fn.apply(wj(j0e,k0e,wa,xj,Oy,If,yj,mj,ho,DR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cye(){return Fn.apply(wj(w0e,_0e,_a,bj,Iy,Py,vj,gj,ho,MR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ry(){var t=0,e=1,r,n,s,a,o=Ur,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(a(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,r=a(t=+t),n=a(e=+e),s=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var g,p;return arguments.length?([g,p]=f,o=h(g,p),u):[o(0),o(1)]}}return u.range=d(uu),u.rangeRound=d(ij),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,r=h(t),n=h(e),s=r===n?0:1/(n-r),u}}function Oi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $R(){var t=Pi(Ry()(Ur));return t.copy=function(){return Oi(t,$R())},Ta.apply(t,arguments)}function LR(){var t=uj(Ry()).domain([1,10]);return t.copy=function(){return Oi(t,LR()).base(t.base())},Ta.apply(t,arguments)}function FR(){var t=dj(Ry());return t.copy=function(){return Oi(t,FR()).constant(t.constant())},Ta.apply(t,arguments)}function _j(){var t=hj(Ry());return t.copy=function(){return Oi(t,_j()).exponent(t.exponent())},Ta.apply(t,arguments)}function Tye(){return _j.apply(null,arguments).exponent(.5)}function UR(){var t=[],e=Ur;function r(n){if(n!=null&&!isNaN(n=+n))return e((Tf(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(mi),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>gge(t,a/n))},r.copy=function(){return UR(e).domain(t)},Ta.apply(r,arguments)}function Dy(){var t=0,e=.5,r=1,n=1,s,a,o,l,c,u=Ur,d,h=!1,f;function g(x){return isNaN(x=+x)?f:(x=.5+((x=+d(x))-a)*(n*x<n*a?l:c),u(h?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,r]=x,s=d(t=+t),a=d(e=+e),o=d(r=+r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,g):[t,e,r]},g.clamp=function(x){return arguments.length?(h=!!x,g):h},g.interpolator=function(x){return arguments.length?(u=x,g):u};function p(x){return function(b){var w,y,_;return arguments.length?([w,y,_]=b,u=Bge(x,[w,y,_]),g):[u(0),u(.5),u(1)]}}return g.range=p(uu),g.rangeRound=p(ij),g.unknown=function(x){return arguments.length?(f=x,g):f},function(x){return d=x,s=x(t),a=x(e),o=x(r),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),n=a<s?-1:1,g}}function VR(){var t=Pi(Dy()(Ur));return t.copy=function(){return Oi(t,VR())},Ta.apply(t,arguments)}function BR(){var t=uj(Dy()).domain([.1,1,10]);return t.copy=function(){return Oi(t,BR()).base(t.base())},Ta.apply(t,arguments)}function zR(){var t=dj(Dy());return t.copy=function(){return Oi(t,zR()).constant(t.constant())},Ta.apply(t,arguments)}function jj(){var t=hj(Dy());return t.copy=function(){return Oi(t,jj()).exponent(t.exponent())},Ta.apply(t,arguments)}function Pye(){return jj.apply(null,arguments).exponent(.5)}const AE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nh,scaleDiverging:VR,scaleDivergingLog:BR,scaleDivergingPow:jj,scaleDivergingSqrt:Pye,scaleDivergingSymlog:zR,scaleIdentity:wR,scaleImplicit:vw,scaleLinear:Og,scaleLog:jR,scaleOrdinal:nj,scalePoint:Ad,scalePow:fj,scaleQuantile:SR,scaleQuantize:ER,scaleRadial:NR,scaleSequential:$R,scaleSequentialLog:LR,scaleSequentialPow:_j,scaleSequentialQuantile:UR,scaleSequentialSqrt:Tye,scaleSequentialSymlog:FR,scaleSqrt:d0e,scaleSymlog:kR,scaleThreshold:AR,scaleTime:Aye,scaleUtc:Cye,tickFormat:bR},Symbol.toStringTag,{value:"Module"}));var Oye=tu;function Iye(t,e,r){for(var n=-1,s=t.length;++n<s;){var a=t[n],o=e(a);if(o!=null&&(l===void 0?o===o&&!Oye(o):r(o,l)))var l=o,c=a}return c}var My=Iye;function Rye(t,e){return t>e}var qR=Rye,Dye=My,Mye=qR,$ye=cu;function Lye(t){return t&&t.length?Dye(t,$ye,Mye):void 0}var Fye=Lye;const $y=Ze(Fye);function Uye(t,e){return t<e}var WR=Uye,Vye=My,Bye=WR,zye=cu;function qye(t){return t&&t.length?Vye(t,zye,Bye):void 0}var Wye=qye;const Ly=Ze(Wye);var Hye=$4,Kye=Ds,Gye=eR,Yye=tn;function Qye(t,e){var r=Yye(t)?Hye:Gye;return r(t,Kye(e))}var Xye=Qye,Jye=JI,Zye=Xye;function eve(t,e){return Jye(Zye(t,e),1)}var tve=eve;const rve=Ze(tve);var nve=J4;function sve(t,e){return nve(t,e)}var ave=sve;const Rf=Ze(ave);var du=1e9,ive={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Nj,vt=!0,$n="[DecimalError] ",xo=$n+"Invalid argument: ",kj=$n+"Exponent out of range: ",hu=Math.floor,Xi=Math.pow,ove=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,dn,tr=1e7,pt=7,HR=9007199254740991,Mg=hu(HR/pt),de={};de.absoluteValue=de.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};de.comparedTo=de.cmp=function(t){var e,r,n,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,s=t.d.length,e=0,r=n<s?n:s;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};de.decimalPlaces=de.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*pt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};de.dividedBy=de.div=function(t){return ca(this,new this.constructor(t))};de.dividedToIntegerBy=de.idiv=function(t){var e=this,r=e.constructor;return st(ca(e,new r(t),0,1),r.precision)};de.equals=de.eq=function(t){return!this.cmp(t)};de.exponent=function(){return Bt(this)};de.greaterThan=de.gt=function(t){return this.cmp(t)>0};de.greaterThanOrEqualTo=de.gte=function(t){return this.cmp(t)>=0};de.isInteger=de.isint=function(){return this.e>this.d.length-2};de.isNegative=de.isneg=function(){return this.s<0};de.isPositive=de.ispos=function(){return this.s>0};de.isZero=function(){return this.s===0};de.lessThan=de.lt=function(t){return this.cmp(t)<0};de.lessThanOrEqualTo=de.lte=function(t){return this.cmp(t)<1};de.logarithm=de.log=function(t){var e,r=this,n=r.constructor,s=n.precision,a=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(dn))throw Error($n+"NaN");if(r.s<1)throw Error($n+(r.s?"NaN":"-Infinity"));return r.eq(dn)?new n(0):(vt=!1,e=ca(Th(r,a),Th(t,a),a),vt=!0,st(e,s))};de.minus=de.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?YR(e,t):KR(e,(t.s=-t.s,t))};de.modulo=de.mod=function(t){var e,r=this,n=r.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error($n+"NaN");return r.s?(vt=!1,e=ca(r,t,0,1).times(t),vt=!0,r.minus(e)):st(new n(r),s)};de.naturalExponential=de.exp=function(){return GR(this)};de.naturalLogarithm=de.ln=function(){return Th(this)};de.negated=de.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};de.plus=de.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?KR(e,t):YR(e,(t.s=-t.s,t))};de.precision=de.sd=function(t){var e,r,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xo+t);if(e=Bt(s)+1,n=s.d.length-1,r=n*pt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};de.squareRoot=de.sqrt=function(){var t,e,r,n,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error($n+"NaN")}for(t=Bt(l),vt=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=ws(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=hu((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(a=n,n=a.plus(ca(l,a,o+2)).times(.5),ws(a.d).slice(0,o)===(e=ws(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(st(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(e!="9999")break;o+=4}return vt=!0,st(n,r)};de.times=de.mul=function(t){var e,r,n,s,a,o,l,c,u,d=this,h=d.constructor,f=d.d,g=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,r=d.e+t.e,c=f.length,u=g.length,c<u&&(a=f,f=g,g=a,o=c,c=u,u=o),a=[],o=c+u,n=o;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,s=c+n;s>n;)l=a[s]+g[n]*f[s-n-1]+e,a[s--]=l%tr|0,e=l/tr|0;a[s]=(a[s]+e)%tr|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,vt?st(t,h.precision):t};de.toDecimalPlaces=de.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Ts(t,0,du),e===void 0?e=n.rounding:Ts(e,0,8),st(r,t+Bt(r)+1,e))};de.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=Lo(n,!0):(Ts(t,0,du),e===void 0?e=s.rounding:Ts(e,0,8),n=st(new s(n),t+1,e),r=Lo(n,!0,t+1)),r};de.toFixed=function(t,e){var r,n,s=this,a=s.constructor;return t===void 0?Lo(s):(Ts(t,0,du),e===void 0?e=a.rounding:Ts(e,0,8),n=st(new a(s),t+Bt(s)+1,e),r=Lo(n.abs(),!1,t+Bt(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};de.toInteger=de.toint=function(){var t=this,e=t.constructor;return st(new e(t),Bt(t)+1,e.rounding)};de.toNumber=function(){return+this};de.toPower=de.pow=function(t){var e,r,n,s,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(dn);if(l=new c(l),!l.s){if(t.s<1)throw Error($n+"Infinity");return l}if(l.eq(dn))return l;if(n=c.precision,t.eq(dn))return st(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=l.s,o){if((r=d<0?-d:d)<=HR){for(s=new c(dn),e=Math.ceil(n/pt+4),vt=!1;r%2&&(s=s.times(l),TE(s.d,e)),r=hu(r/2),r!==0;)l=l.times(l),TE(l.d,e);return vt=!0,t.s<0?new c(dn).div(s):st(s,n)}}else if(a<0)throw Error($n+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,vt=!1,s=t.times(Th(l,n+u)),vt=!0,s=GR(s),s.s=a,s};de.toPrecision=function(t,e){var r,n,s=this,a=s.constructor;return t===void 0?(r=Bt(s),n=Lo(s,r<=a.toExpNeg||r>=a.toExpPos)):(Ts(t,1,du),e===void 0?e=a.rounding:Ts(e,0,8),s=st(new a(s),t,e),r=Bt(s),n=Lo(s,t<=r||r<=a.toExpNeg,t)),n};de.toSignificantDigits=de.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Ts(t,1,du),e===void 0?e=n.rounding:Ts(e,0,8)),st(new n(r),t,e)};de.toString=de.valueOf=de.val=de.toJSON=de[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Bt(t),r=t.constructor;return Lo(t,e<=r.toExpNeg||e>=r.toExpPos)};function KR(t,e){var r,n,s,a,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),vt?st(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(n=c,a=-a,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(h/pt),l=o>l?o+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/tr|0,c[a]%=tr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,vt?st(e,h):e}function Ts(t,e,r){if(t!==~~t||t<e||t>r)throw Error(xo+t)}function ws(t){var e,r,n,s=t.length-1,a="",o=t[0];if(s>0){for(a+=o,e=1;e<s;e++)n=t[e]+"",r=pt-n.length,r&&(a+=Ba(r)),a+=n;o=t[e],n=o+"",r=pt-n.length,r&&(a+=Ba(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ca=function(){function t(n,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*s+o,n[l]=a%tr|0,o=a/tr|0;return o&&n.unshift(o),n}function e(n,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,a){for(var o=0;a--;)n[a]-=o,o=n[a]<s[a]?1:0,n[a]=o*tr+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,o){var l,c,u,d,h,f,g,p,x,b,w,y,_,S,j,k,N,E,A=n.constructor,P=n.s==s.s?1:-1,O=n.d,I=s.d;if(!n.s)return new A(n);if(!s.s)throw Error($n+"Division by zero");for(c=n.e-s.e,N=I.length,j=O.length,g=new A(P),p=g.d=[],u=0;I[u]==(O[u]||0);)++u;if(I[u]>(O[u]||0)&&--c,a==null?y=a=A.precision:o?y=a+(Bt(n)-Bt(s))+1:y=a,y<0)return new A(0);if(y=y/pt+2|0,u=0,N==1)for(d=0,I=I[0],y++;(u<j||d)&&y--;u++)_=d*tr+(O[u]||0),p[u]=_/I|0,d=_%I|0;else{for(d=tr/(I[0]+1)|0,d>1&&(I=t(I,d),O=t(O,d),N=I.length,j=O.length),S=N,x=O.slice(0,N),b=x.length;b<N;)x[b++]=0;E=I.slice(),E.unshift(0),k=I[0],I[1]>=tr/2&&++k;do d=0,l=e(I,x,N,b),l<0?(w=x[0],N!=b&&(w=w*tr+(x[1]||0)),d=w/k|0,d>1?(d>=tr&&(d=tr-1),h=t(I,d),f=h.length,b=x.length,l=e(h,x,f,b),l==1&&(d--,r(h,N<f?E:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<b&&h.unshift(0),r(x,h,b),l==-1&&(b=x.length,l=e(I,x,N,b),l<1&&(d++,r(x,N<b?E:I,b))),b=x.length):l===0&&(d++,x=[0]),p[u++]=d,l&&x[0]?x[b++]=O[S]||0:(x=[O[S]],b=1);while((S++<j||x[0]!==void 0)&&y--)}return p[0]||p.shift(),g.e=c,st(g,o?a+Bt(g)+1:a)}}();function GR(t,e){var r,n,s,a,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Bt(t)>16)throw Error(kj+Bt(t));if(!t.s)return new d(dn);for(vt=!1,l=h,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Xi(2,u))/Math.LN10*2+5|0,l+=n,r=s=a=new d(dn),d.precision=l;;){if(s=st(s.times(t),l),r=r.times(++c),o=a.plus(ca(s,r,l)),ws(o.d).slice(0,l)===ws(a.d).slice(0,l)){for(;u--;)a=st(a.times(a),l);return d.precision=h,e==null?(vt=!0,st(a,h)):a}a=o}}function Bt(t){for(var e=t.e*pt,r=t.d[0];r>=10;r/=10)e++;return e}function Wx(t,e,r){if(e>t.LN10.sd())throw vt=!0,r&&(t.precision=r),Error($n+"LN10 precision limit exceeded");return st(new t(t.LN10),e)}function Ba(t){for(var e="";t--;)e+="0";return e}function Th(t,e){var r,n,s,a,o,l,c,u,d,h=1,f=10,g=t,p=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error($n+(g.s?"NaN":"-Infinity"));if(g.eq(dn))return new x(0);if(e==null?(vt=!1,u=b):u=e,g.eq(10))return e==null&&(vt=!0),Wx(x,u);if(u+=f,x.precision=u,r=ws(p),n=r.charAt(0),a=Bt(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=ws(g.d),n=r.charAt(0),h++;a=Bt(g),n>1?(g=new x("0."+r),a++):g=new x(n+"."+r.slice(1))}else return c=Wx(x,u+2,b).times(a+""),g=Th(new x(n+"."+r.slice(1)),u-f).plus(c),x.precision=b,e==null?(vt=!0,st(g,b)):g;for(l=o=g=ca(g.minus(dn),g.plus(dn),u),d=st(g.times(g),u),s=3;;){if(o=st(o.times(d),u),c=l.plus(ca(o,new x(s),u)),ws(c.d).slice(0,u)===ws(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(Wx(x,u+2,b).times(a+""))),l=ca(l,new x(h),u),x.precision=b,e==null?(vt=!0,st(l,b)):l;l=c,s+=2}}function CE(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(n,s),e){if(s-=n,r=r-n-1,t.e=hu(r/pt),t.d=[],n=(r+1)%pt,r<0&&(n+=pt),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=pt;n<s;)t.d.push(+e.slice(n,n+=pt));e=e.slice(n),n=pt-e.length}else n-=s;for(;n--;)e+="0";if(t.d.push(+e),vt&&(t.e>Mg||t.e<-Mg))throw Error(kj+r)}else t.s=0,t.e=0,t.d=[0];return t}function st(t,e,r){var n,s,a,o,l,c,u,d,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=pt,s=e,u=h[d=0];else{if(d=Math.ceil((n+1)/pt),a=h.length,d>=a)return t;for(u=a=h[d],o=1;a>=10;a/=10)o++;n%=pt,s=n-pt+o}if(r!==void 0&&(a=Xi(10,o-s-1),l=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Xi(10,o-s):0:h[d-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(a=Bt(t),h.length=1,e=e-a-1,h[0]=Xi(10,(pt-e%pt)%pt),t.e=hu(-e/pt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=d,a=1,d--):(h.length=d+1,a=Xi(10,pt-n),h[d]=s>0?(u/Xi(10,o-s)%Xi(10,s)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==tr&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=tr)break;h[d--]=0,a=1}for(n=h.length;h[--n]===0;)h.pop();if(vt&&(t.e>Mg||t.e<-Mg))throw Error(kj+Bt(t));return t}function YR(t,e){var r,n,s,a,o,l,c,u,d,h,f=t.constructor,g=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),vt?st(e,g):e;if(c=t.d,h=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),s=Math.max(Math.ceil(g/pt),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(a=s;a&&c[--a]===0;)c[a]=tr-1;--c[a],c[s]+=tr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,vt?st(e,g):e):new f(0)}function Lo(t,e,r){var n,s=Bt(t),a=ws(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Ba(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Ba(-s-1)+a,r&&(n=r-o)>0&&(a+=Ba(n))):s>=o?(a+=Ba(s+1-o),r&&(n=r-s-1)>0&&(a=a+"."+Ba(n))):((n=s+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(a+="."),a+=Ba(n))),t.s<0?"-"+a:a}function TE(t,e){if(t.length>e)return t.length=e,!0}function QR(t){var e,r,n;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(xo+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return CE(o,a.toString())}else if(typeof a!="string")throw Error(xo+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,ove.test(a))CE(o,a);else throw Error(xo+a)}if(s.prototype=de,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=QR,s.config=s.set=lve,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}function lve(t){if(!t||typeof t!="object")throw Error($n+"Object expected");var e,r,n,s=["precision",1,du,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((n=t[r=s[e]])!==void 0)if(hu(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(xo+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xo+r+": "+n);return this}var Nj=QR(ive);dn=new Nj(1);const tt=Nj;function cve(t){return fve(t)||hve(t)||dve(t)||uve()}function uve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dve(t,e){if(t){if(typeof t=="string")return _w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _w(t,e)}}function hve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function fve(t){if(Array.isArray(t))return _w(t)}function _w(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pve=function(e){return e},XR={},JR=function(e){return e===XR},PE=function(e){return function r(){return arguments.length===0||arguments.length===1&&JR(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},mve=function t(e,r){return e===1?r:PE(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==XR}).length;return o>=e?r.apply(void 0,s):t(e-o,PE(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(h){return JR(h)?c.shift():h});return r.apply(void 0,cve(d).concat(c))}))})},Fy=function(e){return mve(e.length,e)},jw=function(e,r){for(var n=[],s=e;s<r;++s)n[s-e]=s;return n},gve=Fy(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),yve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return pve;var s=r.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},kw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},ZR=function(e){var r=null,n=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r&&a.every(function(l,c){return l===r[c]})||(r=a,n=e.apply(void 0,a)),n}};function vve(t){var e;return t===0?e=1:e=Math.floor(new tt(t).abs().log(10).toNumber())+1,e}function xve(t,e,r){for(var n=new tt(t),s=0,a=[];n.lt(e)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}var bve=Fy(function(t,e,r){var n=+t,s=+e;return n+r*(s-n)}),wve=Fy(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),_ve=Fy(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Uy={rangeStep:xve,getDigitCount:vve,interpolateNumber:bve,uninterpolateNumber:wve,uninterpolateTruncation:_ve};function Nw(t){return Nve(t)||kve(t)||eD(t)||jve()}function jve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Nve(t){if(Array.isArray(t))return Sw(t)}function Ph(t,e){return Ave(t)||Eve(t,e)||eD(t,e)||Sve()}function Sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eD(t,e){if(t){if(typeof t=="string")return Sw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sw(t,e)}}function Sw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,s=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){s=!0,a=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw a}}return r}}function Ave(t){if(Array.isArray(t))return t}function tD(t){var e=Ph(t,2),r=e[0],n=e[1],s=r,a=n;return r>n&&(s=n,a=r),[s,a]}function rD(t,e,r){if(t.lte(0))return new tt(0);var n=Uy.getDigitCount(t.toNumber()),s=new tt(10).pow(n),a=t.div(s),o=n!==1?.05:.1,l=new tt(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return e?c:new tt(Math.ceil(c))}function Cve(t,e,r){var n=1,s=new tt(t);if(!s.isint()&&r){var a=Math.abs(t);a<1?(n=new tt(10).pow(Uy.getDigitCount(t)-1),s=new tt(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new tt(Math.floor(t)))}else t===0?s=new tt(Math.floor((e-1)/2)):r||(s=new tt(Math.floor(t)));var o=Math.floor((e-1)/2),l=yve(gve(function(c){return s.add(new tt(c-o).mul(n)).toNumber()}),jw);return l(0,e)}function nD(t,e,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new tt(0),tickMin:new tt(0),tickMax:new tt(0)};var a=rD(new tt(e).sub(t).div(r-1),n,s),o;t<=0&&e>=0?o=new tt(0):(o=new tt(t).add(e).div(2),o=o.sub(new tt(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new tt(e).sub(o).div(a).toNumber()),u=l+c+1;return u>r?nD(t,e,r,n,s+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:a,tickMin:o.sub(new tt(l).mul(a)),tickMax:o.add(new tt(c).mul(a))})}function Tve(t){var e=Ph(t,2),r=e[0],n=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=tD([r,n]),c=Ph(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(Nw(jw(0,s-1).map(function(){return 1/0}))):[].concat(Nw(jw(0,s-1).map(function(){return-1/0})),[d]);return r>n?kw(h):h}if(u===d)return Cve(u,s,a);var f=nD(u,d,o,a),g=f.step,p=f.tickMin,x=f.tickMax,b=Uy.rangeStep(p,x.add(new tt(.1).mul(g)),g);return r>n?kw(b):b}function Pve(t,e){var r=Ph(t,2),n=r[0],s=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=tD([n,s]),l=Ph(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var d=Math.max(e,2),h=rD(new tt(u).sub(c).div(d-1),a,0),f=[].concat(Nw(Uy.rangeStep(new tt(c),new tt(u).sub(new tt(.99).mul(h)),h)),[u]);return n>s?kw(f):f}var Ove=ZR(Tve),Ive=ZR(Pve),Rve="Invariant failed";function Fo(t,e){throw new Error(Rve)}var Dve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$g.apply(this,arguments)}function Mve(t,e){return Uve(t)||Fve(t,e)||Lve(t,e)||$ve()}function $ve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lve(t,e){if(t){if(typeof t=="string")return OE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OE(t,e)}}function OE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Uve(t){if(Array.isArray(t))return t}function Vve(t,e){if(t==null)return{};var r=Bve(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iD(n.key),n)}}function Wve(t,e,r){return e&&qve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hve(t,e,r){return e=Lg(e),Kve(t,sD()?Reflect.construct(e,r||[],Lg(t).constructor):e.apply(t,r))}function Kve(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gve(t)}function Gve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sD=function(){return!!t})()}function Lg(t){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lg(t)}function Yve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ew(t,e)}function Ew(t,e){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ew(t,e)}function aD(t,e,r){return e=iD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iD(t){var e=Qve(t,"string");return Sc(e)=="symbol"?e:e+""}function Qve(t,e){if(Sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Df=function(t){function e(){return zve(this,e),Hve(this,e,arguments)}return Yve(e,t),Wve(e,[{key:"render",value:function(){var n=this.props,s=n.offset,a=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,h=n.yAxis,f=Vve(n,Dve),g=xe(f,!1);this.props.direction==="x"&&d.type!=="number"&&Fo();var p=c.map(function(x){var b=u(x,l),w=b.x,y=b.y,_=b.value,S=b.errorVal;if(!S)return null;var j=[],k,N;if(Array.isArray(S)){var E=Mve(S,2);k=E[0],N=E[1]}else k=N=S;if(a==="vertical"){var A=d.scale,P=y+s,O=P+o,I=P-o,D=A(_-k),B=A(_+N);j.push({x1:B,y1:O,x2:B,y2:I}),j.push({x1:D,y1:P,x2:B,y2:P}),j.push({x1:D,y1:O,x2:D,y2:I})}else if(a==="horizontal"){var z=h.scale,G=w+s,Q=G-o,F=G+o,H=z(_-k),$=z(_+N);j.push({x1:Q,y1:$,x2:F,y2:$}),j.push({x1:G,y1:H,x2:G,y2:$}),j.push({x1:Q,y1:H,x2:F,y2:H})}return L.createElement(Ke,$g({className:"recharts-errorBar",key:"bar-".concat(j.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},g),j.map(function(U){return L.createElement("line",$g({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return L.createElement(Ke,{className:"recharts-errorBars"},p)}}])}(L.Component);aD(Df,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});aD(Df,"displayName","ErrorBar");function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function IE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Bi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(r),!0).forEach(function(n){Xve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xve(t,e,r){return e=Jve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jve(t){var e=Zve(t,"string");return Oh(e)=="symbol"?e:e+""}function Zve(t,e){if(Oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oD=function(e){var r=e.children,n=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=ln(r,pi);if(!o)return null;var l=pi.defaultProps,c=l!==void 0?Bi(Bi({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(n||[]).reduce(function(d,h){var f=h.item,g=h.props,p=g.sectors||g.data||[];return d.concat(p.map(function(x){return{type:o.props.iconType||f.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(d){var h=d.item,f=h.type.defaultProps,g=f!==void 0?Bi(Bi({},f),h.props):{},p=g.dataKey,x=g.name,b=g.legendType,w=g.hide;return{inactive:w,dataKey:p,type:c.iconType||b||"square",color:Sj(h),value:x||p,payload:g}}),Bi(Bi(Bi({},c),pi.getWithHeight(o,s)),{},{payload:u,item:o})};function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function RE(t){return nxe(t)||rxe(t)||txe(t)||exe()}function exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function txe(t,e){if(t){if(typeof t=="string")return Aw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aw(t,e)}}function rxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nxe(t){if(Array.isArray(t))return Aw(t)}function Aw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function DE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DE(Object(r),!0).forEach(function(n){rc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rc(t,e,r){return e=sxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sxe(t){var e=axe(t,"string");return Ih(e)=="symbol"?e:e+""}function axe(t,e){if(Ih(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gt(t,e,r){return Re(t)||Re(e)?r:Qt(e)?gn(t,e,r):Ae(e)?e(t):r}function Cd(t,e,r,n){var s=rve(t,function(l){return Gt(l,e)});if(r==="number"){var a=s.filter(function(l){return se(l)||parseFloat(l)});return a.length?[Ly(a),$y(a)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Re(l)}):s;return o.map(function(l){return Qt(l)||l instanceof Date?l:""})}var ixe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,h=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Lr(h-d)!==Lr(f-h)){var p=[];if(Lr(f-h)===Lr(c[1]-c[0])){g=f;var x=h+c[1]-c[0];p[0]=Math.min(x,(x+d)/2),p[1]=Math.max(x,(x+d)/2)}else{g=d;var b=f+c[1]-c[0];p[0]=Math.min(h,(b+h)/2),p[1]=Math.max(h,(b+h)/2)}var w=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(e>w[0]&&e<=w[1]||e>=p[0]&&e<=p[1]){o=s[u].index;break}}else{var y=Math.min(d,f),_=Math.max(d,f);if(e>(y+h)/2&&e<=(_+h)/2){o=s[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},Sj=function(e){var r,n=e,s=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},oxe=function(e){var r=e.barSize,n=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),f=0,g=h.length;f<g;f++){var p=d[h[f]],x=p.items,b=p.cateAxisId,w=x.filter(function(N){return la(N.type).indexOf("Bar")>=0});if(w&&w.length){var y=w[0].type.defaultProps,_=y!==void 0?Ct(Ct({},y),w[0].props):w[0].props,S=_.barSize,j=_[b];o[j]||(o[j]=[]);var k=Re(S)?r:S;o[j].push({item:w[0],stackList:w.slice(1),barSize:Re(k)?void 0:Fr(k,n,0)})}}return o},lxe=function(e){var r=e.barGap,n=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Fr(r,s,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,g=s/c,p=o.reduce(function(S,j){return S+j.barSize||0},0);p+=(c-1)*u,p>=s&&(p-=(c-1)*u,u=0),p>=s&&g>0&&(f=!0,g*=.9,p=c*g);var x=(s-p)/2>>0,b={offset:x-u,size:0};d=o.reduce(function(S,j){var k={item:j.item,position:{offset:b.offset+b.size+u,size:f?g:j.barSize}},N=[].concat(RE(S),[k]);return b=N[N.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){N.push({item:E,position:b})}),N},h)}else{var w=Fr(n,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var y=(s-2*w-(c-1)*u)/c;y>1&&(y>>=0);var _=l===+l?Math.min(y,l):y;d=o.reduce(function(S,j,k){var N=[].concat(RE(S),[{item:j.item,position:{offset:w+(y+u)*k+(y-_)/2,size:_}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){N.push({item:E,position:N[N.length-1].position})}),N},h)}return d},cxe=function(e,r,n,s){var a=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=oD({children:a,legendWidth:c});if(u){var d=s||{},h=d.width,f=d.height,g=u.align,p=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&p==="middle")&&g!=="center"&&se(e[g]))return Ct(Ct({},e),{},rc({},g,e[g]+(h||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&p!=="middle"&&se(e[p]))return Ct(Ct({},e),{},rc({},p,e[p]+(f||0)))}return e},uxe=function(e,r,n){return Re(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},lD=function(e,r,n,s,a){var o=r.props.children,l=yn(o,Df).filter(function(u){return uxe(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Gt(d,n);if(Re(h))return u;var f=Array.isArray(h)?[Ly(h),$y(h)]:[h,h],g=c.reduce(function(p,x){var b=Gt(d,x,0),w=f[0]-Math.abs(Array.isArray(b)?b[0]:b),y=f[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(w,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},dxe=function(e,r,n,s,a){var o=r.map(function(l){return lD(e,l,n,a,s)}).filter(function(l){return!Re(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},cD=function(e,r,n,s,a){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&lD(e,c,u,s)||Cd(e,u,n,a)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},uD=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},dD=function(e,r,n,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===r&&(a=!0),c.coordinate===n&&(o=!0),c.coordinate});return a||l.push(r),o||l.push(n),l},ra=function(e,r,n){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Lr(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:s(f)+u,value:h,offset:u}});return d.filter(function(h){return!Ef(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+u,value:h,index:f,offset:u}}):s.ticks&&!n?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+u,value:h,offset:u}}):s.domain().map(function(h,f){return{coordinate:s(h)+u,value:a?a[h]:h,index:f,offset:u}})},Hx=new WeakMap,Up=function(e,r){if(typeof r!="function")return e;Hx.has(e)||Hx.set(e,new WeakMap);var n=Hx.get(e);if(n.has(r))return n.get(r);var s=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},hD=function(e,r,n){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Nh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Og(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ad(),realScaleType:"point"}:a==="category"?{scale:Nh(),realScaleType:"band"}:{scale:Og(),realScaleType:"linear"};if(Do(s)){var c="scale".concat(jy(s));return{scale:(AE[c]||Ad)(),realScaleType:AE[c]?c:"point"}}return Ae(s)?{scale:s}:{scale:Ad(),realScaleType:"point"}},ME=1e-4,fD=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,s=e.range(),a=Math.min(s[0],s[1])-ME,o=Math.max(s[0],s[1])+ME,l=e(r[0]),c=e(r[n-1]);(l<a||l>o||c<a||c>o)&&e.domain([r[0],r[n-1]])}},hxe=function(e,r){if(!e)return null;for(var n=0,s=e.length;n<s;n++)if(e[n].item===r)return e[n].position;return null},fxe=function(e,r){if(!r||r.length!==2||!se(r[0])||!se(r[1]))return e;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!se(e[0])||e[0]<n)&&(a[0]=n),(!se(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<n&&(a[1]=n),a},pxe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var a=0,o=0,l=0;l<r;++l){var c=Ef(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=a,e[l][n][1]=a+c,a=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},mxe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var a=0,o=0;o<r;++o){var l=Ef(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},gxe={sign:pxe,expand:Die,none:vc,silhouette:Mie,wiggle:$ie,positive:mxe},yxe=function(e,r,n){var s=r.map(function(l){return l.props.dataKey}),a=gxe[n],o=Rie().keys(s).value(function(l,c){return+Gt(l,c,0)}).order(Z1).offset(a);return o(e)},vxe=function(e,r,n,s,a,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(h,f){var g,p=(g=f.type)!==null&&g!==void 0&&g.defaultProps?Ct(Ct({},f.type.defaultProps),f.props):f.props,x=p.stackId,b=p.hide;if(b)return h;var w=p[n],y=h[w]||{hasStack:!1,stackGroups:{}};if(Qt(x)){var _=y.stackGroups[x]||{numericAxisId:n,cateAxisId:s,items:[]};_.items.push(f),y.hasStack=!0,y.stackGroups[x]=_}else y.stackGroups[iu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[f]};return Ct(Ct({},h),{},rc({},w,y))},c),d={};return Object.keys(u).reduce(function(h,f){var g=u[f];if(g.hasStack){var p={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,b){var w=g.stackGroups[b];return Ct(Ct({},x),{},rc({},b,{numericAxisId:n,cateAxisId:s,items:w.items,stackedData:yxe(e,w.items,a)}))},p)}return Ct(Ct({},h),{},rc({},f,g))},d)},pD=function(e,r){var n=r.realScaleType,s=r.type,a=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Ove(u,a,l);return e.domain([Ly(d),$y(d)]),{niceTicks:d}}if(a&&s==="number"){var h=e.domain(),f=Ive(h,a,l);return{niceTicks:f}}return null};function $E(t){var e=t.axis,r=t.ticks,n=t.bandSize,s=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Re(s[e.dataKey])){var l=ug(r,"value",s[e.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Gt(s,Re(o)?e.dataKey:o);return Re(c)?null:e.scale(c)}var LE=function(e){var r=e.axis,n=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Gt(o,r.dataKey,r.domain[l]);return Re(c)?null:r.scale(c)-a/2+s},xxe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return s<=0&&a>=0?0:a<0?a:s}return n[0]},bxe=function(e,r){var n,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(Qt(a)){var o=r[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},wxe=function(e){return e.reduce(function(r,n){return[Ly(n.concat([r[0]]).filter(se)),$y(n.concat([r[1]]).filter(se))]},[1/0,-1/0])},mD=function(e,r,n){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var h=wxe(d.slice(r,n+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},FE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,UE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cw=function(e,r,n){if(Ae(e))return e(r,n);if(!Array.isArray(e))return r;var s=[];if(se(e[0]))s[0]=n?e[0]:Math.min(e[0],r[0]);else if(FE.test(e[0])){var a=+FE.exec(e[0])[1];s[0]=r[0]-a}else Ae(e[0])?s[0]=e[0](r[0]):s[0]=r[0];if(se(e[1]))s[1]=n?e[1]:Math.max(e[1],r[1]);else if(UE.test(e[1])){var o=+UE.exec(e[1])[1];s[1]=r[1]+o}else Ae(e[1])?s[1]=e[1](r[1]):s[1]=r[1];return s},Fg=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&r&&r.length>=2){for(var a=ej(r,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},VE=function(e,r,n){return!e||!e.length||Rf(e,gn(n,"type.defaultProps.domain"))?r:e},gD=function(e,r){var n=e.type.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,s=n.dataKey,a=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ct(Ct({},xe(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:Sj(e),value:Gt(r,s),type:c,payload:r,chartType:u,hide:d})};function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function BE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BE(Object(r),!0).forEach(function(n){yD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yD(t,e,r){return e=_xe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _xe(t){var e=jxe(t,"string");return Rh(e)=="symbol"?e:e+""}function jxe(t,e){if(Rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kxe(t,e){return Axe(t)||Exe(t,e)||Sxe(t,e)||Nxe()}function Nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sxe(t,e){if(t){if(typeof t=="string")return zE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zE(t,e)}}function zE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Exe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Axe(t){if(Array.isArray(t))return t}var Ug=Math.PI/180,Cxe=function(e){return e*180/Math.PI},ut=function(e,r,n,s){return{x:e+Math.cos(-Ug*s)*n,y:r+Math.sin(-Ug*s)*n}},vD=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Txe=function(e,r,n,s,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Fr(e.cx,o,o/2),h=Fr(e.cy,l,l/2),f=vD(o,l,n),g=Fr(e.innerRadius,f,0),p=Fr(e.outerRadius,f,f*.8),x=Object.keys(r);return x.reduce(function(b,w){var y=r[w],_=y.domain,S=y.reversed,j;if(Re(y.range))s==="angleAxis"?j=[c,u]:s==="radiusAxis"&&(j=[g,p]),S&&(j=[j[1],j[0]]);else{j=y.range;var k=j,N=kxe(k,2);c=N[0],u=N[1]}var E=hD(y,a),A=E.realScaleType,P=E.scale;P.domain(_).range(j),fD(P);var O=pD(P,Ws(Ws({},y),{},{realScaleType:A})),I=Ws(Ws(Ws({},y),O),{},{range:j,radius:p,realScaleType:A,scale:P,cx:d,cy:h,innerRadius:g,outerRadius:p,startAngle:c,endAngle:u});return Ws(Ws({},b),{},yD({},w,I))},{})},Pxe=function(e,r){var n=e.x,s=e.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(s-o,2))},Oxe=function(e,r){var n=e.x,s=e.y,a=r.cx,o=r.cy,l=Pxe({x:n,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(n-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:Cxe(u),angleInRadian:u}},Ixe=function(e){var r=e.startAngle,n=e.endAngle,s=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(s,a);return{startAngle:r-o*360,endAngle:n-o*360}},Rxe=function(e,r){var n=r.startAngle,s=r.endAngle,a=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},qE=function(e,r){var n=e.x,s=e.y,a=Oxe({x:n,y:s},r),o=a.radius,l=a.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Ixe(r),h=d.startAngle,f=d.endAngle,g=l,p;if(h<=f){for(;g>f;)g-=360;for(;g<h;)g+=360;p=g>=h&&g<=f}else{for(;g>h;)g-=360;for(;g<f;)g+=360;p=g>=f&&g<=h}return p?Ws(Ws({},r),{},{radius:o,angle:Rxe(g,r)}):null},xD=function(e){return!T.isValidElement(e)&&!Ae(e)&&typeof e!="boolean"?e.className:""};function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}var Dxe=["offset"];function Mxe(t){return Uxe(t)||Fxe(t)||Lxe(t)||$xe()}function $xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lxe(t,e){if(t){if(typeof t=="string")return Tw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tw(t,e)}}function Fxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uxe(t){if(Array.isArray(t))return Tw(t)}function Tw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vxe(t,e){if(t==null)return{};var r=Bxe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function WE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(r),!0).forEach(function(n){zxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zxe(t,e,r){return e=qxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qxe(t){var e=Wxe(t,"string");return Dh(e)=="symbol"?e:e+""}function Wxe(t,e){if(Dh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mh.apply(this,arguments)}var Hxe=function(e){var r=e.value,n=e.formatter,s=Re(e.children)?r:e.children;return Ae(n)?n(s):s},Kxe=function(e,r){var n=Lr(r-e),s=Math.min(Math.abs(r-e),360);return n*s},Gxe=function(e,r,n){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,g=c.startAngle,p=c.endAngle,x=c.clockWise,b=(h+f)/2,w=Kxe(g,p),y=w>=0?1:-1,_,S;s==="insideStart"?(_=g+y*o,S=x):s==="insideEnd"?(_=p-y*o,S=!x):s==="end"&&(_=p+y*o,S=x),S=w<=0?S:!S;var j=ut(u,d,b,_),k=ut(u,d,b,_+(S?1:-1)*359),N="M".concat(j.x,",").concat(j.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),E=Re(e.id)?iu("recharts-radial-line-"):e.id;return L.createElement("text",Mh({},n,{dominantBaseline:"central",className:$e("recharts-radial-bar-label",l)}),L.createElement("defs",null,L.createElement("path",{id:E,d:N})),L.createElement("textPath",{xlinkHref:"#".concat(E)},r))},Yxe=function(e){var r=e.viewBox,n=e.offset,s=e.position,a=r,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(s==="outside"){var g=ut(o,l,u+n,f),p=g.x,x=g.y;return{x:p,y:x,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,w=ut(o,l,b,f),y=w.x,_=w.y;return{x:y,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Qxe=function(e){var r=e.viewBox,n=e.parentViewBox,s=e.offset,a=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*s,g=h>0?"end":"start",p=h>0?"start":"end",x=u>=0?1:-1,b=x*s,w=x>0?"end":"start",y=x>0?"start":"end";if(a==="top"){var _={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:g};return Wt(Wt({},_),n?{height:Math.max(c-n.y,0),width:u}:{})}if(a==="bottom"){var S={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:p};return Wt(Wt({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(a==="left"){var j={x:l-b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Wt(Wt({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(a==="right"){var k={x:l+u+b,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Wt(Wt({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:d}:{})}var N=n?{width:u,height:d}:{};return a==="insideLeft"?Wt({x:l+b,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},N):a==="insideRight"?Wt({x:l+u-b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},N):a==="insideTop"?Wt({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:p},N):a==="insideBottom"?Wt({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:g},N):a==="insideTopLeft"?Wt({x:l+b,y:c+f,textAnchor:y,verticalAnchor:p},N):a==="insideTopRight"?Wt({x:l+u-b,y:c+f,textAnchor:w,verticalAnchor:p},N):a==="insideBottomLeft"?Wt({x:l+b,y:c+d-f,textAnchor:y,verticalAnchor:g},N):a==="insideBottomRight"?Wt({x:l+u-b,y:c+d-f,textAnchor:w,verticalAnchor:g},N):ru(a)&&(se(a.x)||co(a.x))&&(se(a.y)||co(a.y))?Wt({x:l+Fr(a.x,u),y:c+Fr(a.y,d),textAnchor:"end",verticalAnchor:"end"},N):Wt({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Xxe=function(e){return"cx"in e&&se(e.cx)};function nr(t){var e=t.offset,r=e===void 0?5:e,n=Vxe(t,Dxe),s=Wt({offset:r},n),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,h=d===void 0?"":d,f=s.textBreakAll;if(!a||Re(l)&&Re(c)&&!T.isValidElement(u)&&!Ae(u))return null;if(T.isValidElement(u))return T.cloneElement(u,s);var g;if(Ae(u)){if(g=T.createElement(u,s),T.isValidElement(g))return g}else g=Hxe(s);var p=Xxe(a),x=xe(s,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Gxe(s,g,x);var b=p?Yxe(s):Qxe(s);return L.createElement($o,Mh({className:$e("recharts-label",h)},x,b,{breakAll:f}),g)}nr.displayName="Label";var bD=function(e){var r=e.cx,n=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,g=e.top,p=e.left,x=e.width,b=e.height,w=e.clockWise,y=e.labelViewBox;if(y)return y;if(se(x)&&se(b)){if(se(h)&&se(f))return{x:h,y:f,width:x,height:b};if(se(g)&&se(p))return{x:g,y:p,width:x,height:b}}return se(h)&&se(f)?{x:h,y:f,width:0,height:0}:se(r)&&se(n)?{cx:r,cy:n,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},Jxe=function(e,r){return e?e===!0?L.createElement(nr,{key:"label-implicit",viewBox:r}):Qt(e)?L.createElement(nr,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===nr?T.cloneElement(e,{key:"label-implicit",viewBox:r}):L.createElement(nr,{key:"label-implicit",content:e,viewBox:r}):Ae(e)?L.createElement(nr,{key:"label-implicit",content:e,viewBox:r}):ru(e)?L.createElement(nr,Mh({viewBox:r},e,{key:"label-implicit"})):null:null},Zxe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=bD(e),o=yn(s,nr).map(function(c,u){return T.cloneElement(c,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return o;var l=Jxe(e.label,r||a);return[l].concat(Mxe(o))};nr.parseViewBox=bD;nr.renderCallByParent=Zxe;function ebe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var tbe=ebe;const rbe=Ze(tbe);function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}var nbe=["valueAccessor"],sbe=["data","dataKey","clockWise","id","textBreakAll"];function abe(t){return cbe(t)||lbe(t)||obe(t)||ibe()}function ibe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function obe(t,e){if(t){if(typeof t=="string")return Pw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pw(t,e)}}function lbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cbe(t){if(Array.isArray(t))return Pw(t)}function Pw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vg.apply(this,arguments)}function HE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function KE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HE(Object(r),!0).forEach(function(n){ube(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ube(t,e,r){return e=dbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dbe(t){var e=hbe(t,"string");return $h(e)=="symbol"?e:e+""}function hbe(t,e){if($h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GE(t,e){if(t==null)return{};var r=fbe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var pbe=function(e){return Array.isArray(e.value)?rbe(e.value):e.value};function ua(t){var e=t.valueAccessor,r=e===void 0?pbe:e,n=GE(t,nbe),s=n.data,a=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=GE(n,sbe);return!s||!s.length?null:L.createElement(Ke,{className:"recharts-label-list"},s.map(function(d,h){var f=Re(a)?r(d,h):Gt(d&&d.payload,a),g=Re(l)?{}:{id:"".concat(l,"-").concat(h)};return L.createElement(nr,Vg({},xe(d,!0),u,g,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:nr.parseViewBox(Re(o)?d:KE(KE({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}ua.displayName="LabelList";function mbe(t,e){return t?t===!0?L.createElement(ua,{key:"labelList-implicit",data:e}):L.isValidElement(t)||Ae(t)?L.createElement(ua,{key:"labelList-implicit",data:e,content:t}):ru(t)?L.createElement(ua,Vg({data:e},t,{key:"labelList-implicit"})):null:null}function gbe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,s=yn(n,ua).map(function(o,l){return T.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return s;var a=mbe(t.label,e);return[a].concat(abe(s))}ua.renderCallByParent=gbe;function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ow.apply(this,arguments)}function YE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function QE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(r),!0).forEach(function(n){ybe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ybe(t,e,r){return e=vbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vbe(t){var e=xbe(t,"string");return Lh(e)=="symbol"?e:e+""}function xbe(t,e){if(Lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bbe=function(e,r){var n=Lr(r-e),s=Math.min(Math.abs(r-e),359.999);return n*s},Vp=function(e){var r=e.cx,n=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,h=Math.asin(c/d)/Ug,f=u?a:a+o*h,g=ut(r,n,d,f),p=ut(r,n,s,f),x=u?a-o*h:a,b=ut(r,n,d*Math.cos(h*Ug),x);return{center:g,circleTangency:p,lineTangency:b,theta:h}},wD=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=bbe(o,l),u=o+c,d=ut(r,n,a,o),h=ut(r,n,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var g=ut(r,n,s,o),p=ut(r,n,s,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},wbe=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Lr(d-u),f=Vp({cx:r,cy:n,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),g=f.circleTangency,p=f.lineTangency,x=f.theta,b=Vp({cx:r,cy:n,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),w=b.circleTangency,y=b.lineTangency,_=b.theta,S=c?Math.abs(u-d):Math.abs(u-d)-x-_;if(S<0)return l?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):wD({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var j="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var k=Vp({cx:r,cy:n,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=k.circleTangency,E=k.lineTangency,A=k.theta,P=Vp({cx:r,cy:n,radius:s,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=P.circleTangency,I=P.lineTangency,D=P.theta,B=c?Math.abs(u-d):Math.abs(u-d)-A-D;if(B<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(B>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},_be={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_D=function(e){var r=QE(QE({},_be),e),n=r.cx,s=r.cy,a=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,h=r.endAngle,f=r.className;if(o<a||d===h)return null;var g=$e("recharts-sector",f),p=o-a,x=Fr(l,p,0,!0),b;return x>0&&Math.abs(d-h)<360?b=wbe({cx:n,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(x,p/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):b=wD({cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),L.createElement("path",Ow({},xe(r,!0),{className:g,d:b,role:"img"}))};function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iw.apply(this,arguments)}function XE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function JE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XE(Object(r),!0).forEach(function(n){jbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jbe(t,e,r){return e=kbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kbe(t){var e=Nbe(t,"string");return Fh(e)=="symbol"?e:e+""}function Nbe(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZE={curveBasisClosed:jie,curveBasisOpen:kie,curveBasis:_ie,curveBumpX:lie,curveBumpY:cie,curveLinearClosed:Nie,curveLinear:Ny,curveMonotoneX:Sie,curveMonotoneY:Eie,curveNatural:Aie,curveStep:Cie,curveStepAfter:Pie,curveStepBefore:Tie},Bp=function(e){return e.x===+e.x&&e.y===+e.y},Wu=function(e){return e.x},Hu=function(e){return e.y},Sbe=function(e,r){if(Ae(e))return e;var n="curve".concat(jy(e));return(n==="curveMonotone"||n==="curveBump")&&r?ZE["".concat(n).concat(r==="vertical"?"Y":"X")]:ZE[n]||Ny},Ebe=function(e){var r=e.type,n=r===void 0?"linear":r,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=Sbe(n,l),h=u?a.filter(function(x){return Bp(x)}):a,f;if(Array.isArray(o)){var g=u?o.filter(function(x){return Bp(x)}):o,p=h.map(function(x,b){return JE(JE({},x),{},{base:g[b]})});return l==="vertical"?f=Op().y(Hu).x1(Wu).x0(function(x){return x.base.x}):f=Op().x(Wu).y1(Hu).y0(function(x){return x.base.y}),f.defined(Bp).curve(d),f(p)}return l==="vertical"&&se(o)?f=Op().y(Hu).x1(Wu).x0(o):se(o)?f=Op().x(Wu).y1(Hu).y0(o):f=yI().x(Wu).y(Hu),f.defined(Bp).curve(d),f(h)},Bg=function(e){var r=e.className,n=e.points,s=e.path,a=e.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?Ebe(e):s;return T.createElement("path",Iw({},xe(e,!1),dg(e),{className:$e("recharts-curve",r),d:o,ref:a}))},jD={exports:{}},Abe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cbe=Abe,Tbe=Cbe;function kD(){}function ND(){}ND.resetWarningCache=kD;var Pbe=function(){function t(n,s,a,o,l,c){if(c!==Tbe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ND,resetWarningCache:kD};return r.PropTypes=r,r};jD.exports=Pbe();var Obe=jD.exports;const Ye=Ze(Obe),{getOwnPropertyNames:Ibe,getOwnPropertySymbols:Rbe}=Object,{hasOwnProperty:Dbe}=Object.prototype;function Kx(t,e){return function(n,s,a){return t(n,s,a)&&e(n,s,a)}}function zp(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);const{cache:a}=s,o=a.get(r),l=a.get(n);if(o&&l)return o===n&&l===r;a.set(r,n),a.set(n,r);const c=t(r,n,s);return a.delete(r),a.delete(n),c}}function Mbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function eA(t){return Ibe(t).concat(Rbe(t))}const $be=Object.hasOwn||((t,e)=>Dbe.call(t,e));function Jo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Lbe="__v",Fbe="__o",Ube="_owner",{getOwnPropertyDescriptor:tA,keys:rA}=Object;function Vbe(t,e){return t.byteLength===e.byteLength&&zg(new Uint8Array(t),new Uint8Array(e))}function Bbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function zbe(t,e){return t.byteLength===e.byteLength&&zg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function qbe(t,e){return Jo(t.getTime(),e.getTime())}function Wbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Hbe(t,e){return t===e}function nA(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),a=t.entries();let o,l,c=0;for(;(o=a.next())&&!o.done;){const u=e.entries();let d=!1,h=0;for(;(l=u.next())&&!l.done;){if(s[h]){h++;continue}const f=o.value,g=l.value;if(r.equals(f[0],g[0],c,h,t,e,r)&&r.equals(f[1],g[1],f[0],g[0],t,e,r)){d=s[h]=!0;break}h++}if(!d)return!1;c++}return!0}const Kbe=Jo;function Gbe(t,e,r){const n=rA(t);let s=n.length;if(rA(e).length!==s)return!1;for(;s-- >0;)if(!SD(t,e,r,n[s]))return!1;return!0}function Ku(t,e,r){const n=eA(t);let s=n.length;if(eA(e).length!==s)return!1;let a,o,l;for(;s-- >0;)if(a=n[s],!SD(t,e,r,a)||(o=tA(t,a),l=tA(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Ybe(t,e){return Jo(t.valueOf(),e.valueOf())}function Qbe(t,e){return t.source===e.source&&t.flags===e.flags}function sA(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),a=t.values();let o,l;for(;(o=a.next())&&!o.done;){const c=e.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!s[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function zg(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Xbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function SD(t,e,r,n){return(n===Ube||n===Fbe||n===Lbe)&&(t.$$typeof||e.$$typeof)?!0:$be(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Jbe="[object ArrayBuffer]",Zbe="[object Arguments]",e1e="[object Boolean]",t1e="[object DataView]",r1e="[object Date]",n1e="[object Error]",s1e="[object Map]",a1e="[object Number]",i1e="[object Object]",o1e="[object RegExp]",l1e="[object Set]",c1e="[object String]",u1e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},d1e="[object URL]",h1e=Object.prototype.toString;function f1e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:a,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:g,unknownTagComparators:p}){return function(b,w,y){if(b===w)return!0;if(b==null||w==null)return!1;const _=typeof b;if(_!==typeof w)return!1;if(_!=="object")return _==="number"?l(b,w,y):_==="function"?a(b,w,y):!1;const S=b.constructor;if(S!==w.constructor)return!1;if(S===Object)return c(b,w,y);if(Array.isArray(b))return e(b,w,y);if(S===Date)return n(b,w,y);if(S===RegExp)return d(b,w,y);if(S===Map)return o(b,w,y);if(S===Set)return h(b,w,y);const j=h1e.call(b);if(j===r1e)return n(b,w,y);if(j===o1e)return d(b,w,y);if(j===s1e)return o(b,w,y);if(j===l1e)return h(b,w,y);if(j===i1e)return typeof b.then!="function"&&typeof w.then!="function"&&c(b,w,y);if(j===d1e)return g(b,w,y);if(j===n1e)return s(b,w,y);if(j===Zbe)return c(b,w,y);if(u1e[j])return f(b,w,y);if(j===Jbe)return t(b,w,y);if(j===t1e)return r(b,w,y);if(j===e1e||j===a1e||j===c1e)return u(b,w,y);if(p){let k=p[j];if(!k){const N=Mbe(b);N&&(k=p[N])}if(k)return k(b,w,y)}return!1}}function p1e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Vbe,areArraysEqual:r?Ku:Bbe,areDataViewsEqual:zbe,areDatesEqual:qbe,areErrorsEqual:Wbe,areFunctionsEqual:Hbe,areMapsEqual:r?Kx(nA,Ku):nA,areNumbersEqual:Kbe,areObjectsEqual:r?Ku:Gbe,arePrimitiveWrappersEqual:Ybe,areRegExpsEqual:Qbe,areSetsEqual:r?Kx(sA,Ku):sA,areTypedArraysEqual:r?Kx(zg,Ku):zg,areUrlsEqual:Xbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const s=zp(n.areArraysEqual),a=zp(n.areMapsEqual),o=zp(n.areObjectsEqual),l=zp(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return n}function m1e(t){return function(e,r,n,s,a,o,l){return t(e,r,l)}}function g1e({circular:t,comparator:e,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(l,c,{cache:u,equals:n,meta:d,strict:s})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const a={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return e(l,c,a)}}const y1e=Ii();Ii({strict:!0});Ii({circular:!0});Ii({circular:!0,strict:!0});Ii({createInternalComparator:()=>Jo});Ii({strict:!0,createInternalComparator:()=>Jo});Ii({circular:!0,createInternalComparator:()=>Jo});Ii({circular:!0,createInternalComparator:()=>Jo,strict:!0});function Ii(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:s=!1}=t,a=p1e(t),o=f1e(a),l=r?r(o):m1e(o);return g1e({circular:e,comparator:o,createState:n,equals:l,strict:s})}function v1e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function aA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(a){r<0&&(r=a),a-r>e?(t(a),r=-1):v1e(s)};requestAnimationFrame(n)}function Rw(t){"@babel/helpers - typeof";return Rw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rw(t)}function x1e(t){return j1e(t)||_1e(t)||w1e(t)||b1e()}function b1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w1e(t,e){if(t){if(typeof t=="string")return iA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iA(t,e)}}function iA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function j1e(t){if(Array.isArray(t))return t}function k1e(){var t={},e=function(){return null},r=!1,n=function s(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,l=x1e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){aA(s.bind(null,u),c);return}s(c),aA(s.bind(null,u));return}Rw(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function oA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function lA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oA(Object(r),!0).forEach(function(n){ED(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ED(t,e,r){return e=N1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N1e(t){var e=S1e(t,"string");return Uh(e)==="symbol"?e:String(e)}function S1e(t,e){if(Uh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E1e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,s){return n.filter(function(a){return s.includes(a)})})},A1e=function(e){return e},C1e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Td=function(e,r){return Object.keys(r).reduce(function(n,s){return lA(lA({},n),{},ED({},s,e(s,r[s])))},{})},cA=function(e,r,n){return e.map(function(s){return"".concat(C1e(s)," ").concat(r,"ms ").concat(n)}).join(",")};function T1e(t,e){return I1e(t)||O1e(t,e)||AD(t,e)||P1e()}function P1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function I1e(t){if(Array.isArray(t))return t}function R1e(t){return $1e(t)||M1e(t)||AD(t)||D1e()}function D1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AD(t,e){if(t){if(typeof t=="string")return Dw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dw(t,e)}}function M1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $1e(t){if(Array.isArray(t))return Dw(t)}function Dw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qg=1e-4,CD=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},TD=function(e,r){return e.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},uA=function(e,r){return function(n){var s=CD(e,r);return TD(s,n)}},L1e=function(e,r){return function(n){var s=CD(e,r),a=[].concat(R1e(s.map(function(o,l){return o*l}).slice(1)),[0]);return TD(a,n)}},dA=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0],a=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=T1e(u,4);s=d[0],a=d[1],o=d[2],l=d[3]}}}var h=uA(s,o),f=uA(a,l),g=L1e(s,o),p=function(w){return w>1?1:w<0?0:w},x=function(w){for(var y=w>1?1:w,_=y,S=0;S<8;++S){var j=h(_)-y,k=g(_);if(Math.abs(j-y)<qg||k<qg)return f(_);_=p(_-j/k)}return f(_)};return x.isStepper=!1,x},F1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var g=-(d-h)*n,p=f*a,x=f+(g-p)*l/1e3,b=f*l/1e3+d;return Math.abs(b-h)<qg&&Math.abs(x)<qg?[h,0]:[b,x]};return c.isStepper=!0,c.dt=l,c},U1e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dA(s);case"spring":return F1e();default:if(s.split("(")[0]==="cubic-bezier")return dA(s)}return typeof s=="function"?s:null};function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function hA(t){return z1e(t)||B1e(t)||PD(t)||V1e()}function V1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z1e(t){if(Array.isArray(t))return $w(t)}function fA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(r),!0).forEach(function(n){Mw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mw(t,e,r){return e=q1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q1e(t){var e=W1e(t,"string");return Vh(e)==="symbol"?e:String(e)}function W1e(t,e){if(Vh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H1e(t,e){return Y1e(t)||G1e(t,e)||PD(t,e)||K1e()}function K1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PD(t,e){if(t){if(typeof t=="string")return $w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $w(t,e)}}function $w(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Y1e(t){if(Array.isArray(t))return t}var Wg=function(e,r,n){return e+(r-e)*n},Lw=function(e){var r=e.from,n=e.to;return r!==n},Q1e=function t(e,r,n){var s=Td(function(a,o){if(Lw(o)){var l=e(o.from,o.to,o.velocity),c=H1e(l,2),u=c[0],d=c[1];return cr(cr({},o),{},{from:u,velocity:d})}return o},r);return n<1?Td(function(a,o){return Lw(o)?cr(cr({},o),{},{velocity:Wg(o.velocity,s[a].velocity,n),from:Wg(o.from,s[a].from,n)}):o},r):t(e,s,n-1)};const X1e=function(t,e,r,n,s){var a=E1e(t,e),o=a.reduce(function(b,w){return cr(cr({},b),{},Mw({},w,[t[w],e[w]]))},{}),l=a.reduce(function(b,w){return cr(cr({},b),{},Mw({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Td(function(w,y){return y.from},l)},g=function(){return!Object.values(l).filter(Lw).length},p=function(w){u||(u=w);var y=w-u,_=y/r.dt;l=Q1e(r,l,_),s(cr(cr(cr({},t),e),f())),u=w,g()||(c=requestAnimationFrame(h))},x=function(w){d||(d=w);var y=(w-d)/n,_=Td(function(j,k){return Wg.apply(void 0,hA(k).concat([r(y)]))},o);if(s(cr(cr(cr({},t),e),_)),y<1)c=requestAnimationFrame(h);else{var S=Td(function(j,k){return Wg.apply(void 0,hA(k).concat([r(1)]))},o);s(cr(cr(cr({},t),e),S))}};return h=r.isStepper?p:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}var J1e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Z1e(t,e){if(t==null)return{};var r=ewe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ewe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Gx(t){return swe(t)||nwe(t)||rwe(t)||twe()}function twe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rwe(t,e){if(t){if(typeof t=="string")return Fw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fw(t,e)}}function nwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function swe(t){if(Array.isArray(t))return Fw(t)}function Fw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pA(Object(r),!0).forEach(function(n){ld(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ld(t,e,r){return e=OD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function awe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OD(n.key),n)}}function owe(t,e,r){return e&&iwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OD(t){var e=lwe(t,"string");return Ec(e)==="symbol"?e:String(e)}function lwe(t,e){if(Ec(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ec(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uw(t,e)}function Uw(t,e){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Uw(t,e)}function uwe(t){var e=dwe();return function(){var n=Hg(t),s;if(e){var a=Hg(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return Vw(this,s)}}function Vw(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bw(t)}function Bw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hg(t){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hg(t)}var Ps=function(t){cwe(r,t);var e=uwe(r);function r(n,s){var a;awe(this,r),a=e.call(this,n,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,g=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(Bw(a)),a.changeStyle=a.changeStyle.bind(Bw(a)),!l||g<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),Vw(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},Vw(a);a.state={style:c?ld({},c,u):u}}else a.state={style:{}};return a}return owe(r,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(l){if(!o){var g={style:c?ld({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(g);return}if(!(y1e(s.to,d)&&s.canBegin&&s.isActive)){var p=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=p||u?h:s.to;if(this.state&&f){var b={style:c?ld({},c,x):x};(c&&f[c]!==x||!c&&f!==x)&&this.setState(b)}this.runAnimation(zn(zn({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,g=X1e(o,l,U1e(u),c,this.changeStyle),p=function(){a.stopJSAnimation=g()};this.manager.start([f,d,p,c,h])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,g=function(x,b,w){if(w===0)return x;var y=b.duration,_=b.easing,S=_===void 0?"ease":_,j=b.style,k=b.properties,N=b.onAnimationEnd,E=w>0?o[w-1]:b,A=k||Object.keys(j);if(typeof S=="function"||S==="spring")return[].concat(Gx(x),[a.runJSAnimation.bind(a,{from:E.style,to:j,duration:y,easing:S}),y]);var P=cA(A,y,S),O=zn(zn(zn({},E.style),j),{},{transition:P});return[].concat(Gx(x),[O,y,N]).filter(A1e)};return this.manager.start([c].concat(Gx(o.reduce(g,[d,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=k1e());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,g=s.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var x=l?ld({},l,c):c,b=cA(Object.keys(x),o,u);p.start([d,a,zn(zn({},x),{},{transition:b}),o,h])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Z1e(s,J1e),u=T.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(g){var p=g.props,x=p.style,b=x===void 0?{}:x,w=p.className,y=T.cloneElement(g,zn(zn({},c),{},{style:zn(zn({},b),d),className:w}));return y};return u===1?h(T.Children.only(a)):L.createElement("div",null,T.Children.map(a,function(f){return h(f)}))}}]),r}(T.PureComponent);Ps.displayName="Animate";Ps.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ps.propTypes={from:Ye.oneOfType([Ye.object,Ye.string]),to:Ye.oneOfType([Ye.object,Ye.string]),attributeName:Ye.string,duration:Ye.number,begin:Ye.number,easing:Ye.oneOfType([Ye.string,Ye.func]),steps:Ye.arrayOf(Ye.shape({duration:Ye.number.isRequired,style:Ye.object.isRequired,easing:Ye.oneOfType([Ye.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ye.func]),properties:Ye.arrayOf("string"),onAnimationEnd:Ye.func})),children:Ye.oneOfType([Ye.node,Ye.func]),isActive:Ye.bool,canBegin:Ye.bool,onAnimationEnd:Ye.func,shouldReAnimate:Ye.bool,onAnimationStart:Ye.func,onAnimationReStart:Ye.func};function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function Kg(){return Kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kg.apply(this,arguments)}function hwe(t,e){return gwe(t)||mwe(t,e)||pwe(t,e)||fwe()}function fwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pwe(t,e){if(t){if(typeof t=="string")return mA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mA(t,e)}}function mA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gwe(t){if(Array.isArray(t))return t}function gA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function yA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(r),!0).forEach(function(n){ywe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ywe(t,e,r){return e=vwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vwe(t){var e=xwe(t,"string");return Bh(e)=="symbol"?e:e+""}function xwe(t,e){if(Bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vA=function(e,r,n,s,a){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,g=4;f<g;f++)h[f]=a[f]>o?o:a[f];d="M".concat(e,",").concat(r+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(r)),d+="L ".concat(e+n-c*h[1],",").concat(r),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*h[1])),d+="L ".concat(e+n,",").concat(r+s-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-c*h[2],",").concat(r+s)),d+="L ".concat(e+c*h[3],",").concat(r+s),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+s-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var p=Math.min(o,a);d="M ".concat(e,",").concat(r+l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+c*p,",").concat(r,`
            L `).concat(e+n-c*p,",").concat(r,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*p,`
            L `).concat(e+n,",").concat(r+s-l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+n-c*p,",").concat(r+s,`
            L `).concat(e+c*p,",").concat(r+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(r+s-l*p," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return d},bwe=function(e,r){if(!e||!r)return!1;var n=e.x,s=e.y,a=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return n>=u&&n<=d&&s>=h&&s<=f}return!1},wwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ej=function(e){var r=yA(yA({},wwe),e),n=T.useRef(),s=T.useState(-1),a=hwe(s,2),o=a[0],l=a[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,d=r.width,h=r.height,f=r.radius,g=r.className,p=r.animationEasing,x=r.animationDuration,b=r.animationBegin,w=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var _=$e("recharts-rectangle",g);return y?L.createElement(Ps,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:x,animationEasing:p,isActive:y},function(S){var j=S.width,k=S.height,N=S.x,E=S.y;return L.createElement(Ps,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:w,easing:p},L.createElement("path",Kg({},xe(r,!0),{className:_,d:vA(N,E,j,k,f),ref:n})))}):L.createElement("path",Kg({},xe(r,!0),{className:_,d:vA(c,u,d,h,f)}))},_we=["points","className","baseLinePoints","connectNulls"];function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ll.apply(this,arguments)}function jwe(t,e){if(t==null)return{};var r=kwe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xA(t){return Awe(t)||Ewe(t)||Swe(t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Swe(t,e){if(t){if(typeof t=="string")return zw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zw(t,e)}}function Ewe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Awe(t){if(Array.isArray(t))return zw(t)}function zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bA=function(e){return e&&e.x===+e.x&&e.y===+e.y},Cwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){bA(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),bA(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Pd=function(e,r){var n=Cwe(e);r&&(n=[n.reduce(function(a,o){return[].concat(xA(a),xA(o))},[])]);var s=n.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Twe=function(e,r,n){var s=Pd(e,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Pd(r.reverse(),n).slice(1))},Pwe=function(e){var r=e.points,n=e.className,s=e.baseLinePoints,a=e.connectNulls,o=jwe(e,_we);if(!r||!r.length)return null;var l=$e("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=Twe(r,s,a);return L.createElement("g",{className:l},L.createElement("path",Ll({},xe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?L.createElement("path",Ll({},xe(o,!0),{fill:"none",d:Pd(r,a)})):null,c?L.createElement("path",Ll({},xe(o,!0),{fill:"none",d:Pd(s,a)})):null)}var d=Pd(r,a);return L.createElement("path",Ll({},xe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qw.apply(this,arguments)}var Vy=function(e){var r=e.cx,n=e.cy,s=e.r,a=e.className,o=$e("recharts-dot",a);return r===+r&&n===+n&&s===+s?T.createElement("circle",qw({},xe(e,!1),dg(e),{className:o,cx:r,cy:n,r:s})):null};function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}var Owe=["x","y","top","left","width","height","className"];function Ww(){return Ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ww.apply(this,arguments)}function wA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Iwe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wA(Object(r),!0).forEach(function(n){Rwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rwe(t,e,r){return e=Dwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dwe(t){var e=Mwe(t,"string");return zh(e)=="symbol"?e:e+""}function Mwe(t,e){if(zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $we(t,e){if(t==null)return{};var r=Lwe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Fwe=function(e,r,n,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},Uwe=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,g=f===void 0?0:f,p=e.className,x=$we(e,Owe),b=Iwe({x:n,y:a,top:l,left:u,width:h,height:g},x);return!se(n)||!se(a)||!se(h)||!se(g)||!se(l)||!se(u)?null:L.createElement("path",Ww({},xe(b,!0),{className:$e("recharts-cross",p),d:Fwe(n,a,h,g,l,u)}))},Vwe=My,Bwe=qR,zwe=Ds;function qwe(t,e){return t&&t.length?Vwe(t,zwe(e),Bwe):void 0}var Wwe=qwe;const Hwe=Ze(Wwe);var Kwe=My,Gwe=Ds,Ywe=WR;function Qwe(t,e){return t&&t.length?Kwe(t,Gwe(e),Ywe):void 0}var Xwe=Qwe;const Jwe=Ze(Xwe);var Zwe=["cx","cy","angle","ticks","axisLine"],e2e=["ticks","tick","angle","tickFormatter","stroke"];function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Od.apply(this,arguments)}function _A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(r),!0).forEach(function(n){By(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jA(t,e){if(t==null)return{};var r=t2e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function t2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function r2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RD(n.key),n)}}function n2e(t,e,r){return e&&kA(t.prototype,e),r&&kA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s2e(t,e,r){return e=Gg(e),a2e(t,ID()?Reflect.construct(e,r||[],Gg(t).constructor):e.apply(t,r))}function a2e(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i2e(t)}function i2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ID(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ID=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gg(t)}function o2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hw(t,e)}function Hw(t,e){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Hw(t,e)}function By(t,e,r){return e=RD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RD(t){var e=l2e(t,"string");return Ac(e)=="symbol"?e:e+""}function l2e(t,e){if(Ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zy=function(t){function e(){return r2e(this,e),s2e(this,e,arguments)}return o2e(e,t),n2e(e,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return ut(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.angle,l=n.ticks,c=Hwe(l,function(d){return d.coordinate||0}),u=Jwe(l,function(d){return d.coordinate||0});return{cx:s,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=jA(n,Zwe),d=l.reduce(function(p,x){return[Math.min(p[0],x.coordinate),Math.max(p[1],x.coordinate)]},[1/0,-1/0]),h=ut(s,a,d[0],o),f=ut(s,a,d[1],o),g=zi(zi(zi({},xe(u,!1)),{},{fill:"none"},xe(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return L.createElement("line",Od({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,a=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=jA(s,e2e),h=this.getTickTextAnchor(),f=xe(d,!1),g=xe(o,!1),p=a.map(function(x,b){var w=n.getTickValueCoord(x),y=zi(zi(zi(zi({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},f),{},{stroke:"none",fill:u},g),{},{index:b},w),{},{payload:x});return L.createElement(Ke,Od({className:$e("recharts-polar-radius-axis-tick",xD(o)),key:"tick-".concat(x.coordinate)},Mo(n.props,x,b)),e.renderTickItem(o,y,c?c(x.value,b):x.value))});return L.createElement(Ke,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,s=n.ticks,a=n.axisLine,o=n.tick;return!s||!s.length?null:L.createElement(Ke,{className:$e("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),nr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,a){var o;return L.isValidElement(n)?o=L.cloneElement(n,s):Ae(n)?o=n(s):o=L.createElement($o,Od({},s,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(T.PureComponent);By(zy,"displayName","PolarRadiusAxis");By(zy,"axisType","radiusAxis");By(zy,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},to.apply(this,arguments)}function NA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NA(Object(r),!0).forEach(function(n){qy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MD(n.key),n)}}function u2e(t,e,r){return e&&SA(t.prototype,e),r&&SA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d2e(t,e,r){return e=Yg(e),h2e(t,DD()?Reflect.construct(e,r||[],Yg(t).constructor):e.apply(t,r))}function h2e(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f2e(t)}function f2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DD=function(){return!!t})()}function Yg(t){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yg(t)}function p2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kw(t,e)}function Kw(t,e){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Kw(t,e)}function qy(t,e,r){return e=MD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MD(t){var e=m2e(t,"string");return Cc(e)=="symbol"?e:e+""}function m2e(t,e){if(Cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g2e=Math.PI/180,EA=1e-5,Wy=function(t){function e(){return c2e(this,e),d2e(this,e,arguments)}return p2e(e,t),u2e(e,[{key:"getTickLineCoord",value:function(n){var s=this.props,a=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,h=ut(a,o,l,n.coordinate),f=ut(a,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,a=Math.cos(-n.coordinate*g2e),o;return a>EA?o=s==="outer"?"start":"end":a<-EA?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,a=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=qi(qi({},xe(this.props,!1)),{},{fill:"none"},xe(l,!1));if(c==="circle")return L.createElement(Vy,to({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(f){return ut(s,a,o,f.coordinate)});return L.createElement(Pwe,to({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,a=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=xe(this.props,!1),h=xe(o,!1),f=qi(qi({},d),{},{fill:"none"},xe(l,!1)),g=a.map(function(p,x){var b=n.getTickLineCoord(p),w=n.getTickTextAnchor(p),y=qi(qi(qi({textAnchor:w},d),{},{stroke:"none",fill:u},h),{},{index:x,payload:p,x:b.x2,y:b.y2});return L.createElement(Ke,to({className:$e("recharts-polar-angle-axis-tick",xD(o)),key:"tick-".concat(p.coordinate)},Mo(n.props,p,x)),l&&L.createElement("line",to({className:"recharts-polar-angle-axis-tick-line"},f,b)),o&&e.renderTickItem(o,y,c?c(p.value,x):p.value))});return L.createElement(Ke,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,a=n.radius,o=n.axisLine;return a<=0||!s||!s.length?null:L.createElement(Ke,{className:$e("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,a){var o;return L.isValidElement(n)?o=L.cloneElement(n,s):Ae(n)?o=n(s):o=L.createElement($o,to({},s,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(T.PureComponent);qy(Wy,"displayName","PolarAngleAxis");qy(Wy,"axisType","angleAxis");qy(Wy,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var y2e=VI,v2e=y2e(Object.getPrototypeOf,Object),x2e=v2e,b2e=Aa,w2e=x2e,_2e=Ca,j2e="[object Object]",k2e=Function.prototype,N2e=Object.prototype,$D=k2e.toString,S2e=N2e.hasOwnProperty,E2e=$D.call(Object);function A2e(t){if(!_2e(t)||b2e(t)!=j2e)return!1;var e=w2e(t);if(e===null)return!0;var r=S2e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&$D.call(r)==E2e}var C2e=A2e;const T2e=Ze(C2e);var P2e=Aa,O2e=Ca,I2e="[object Boolean]";function R2e(t){return t===!0||t===!1||O2e(t)&&P2e(t)==I2e}var D2e=R2e;const M2e=Ze(D2e);function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qg.apply(this,arguments)}function $2e(t,e){return V2e(t)||U2e(t,e)||F2e(t,e)||L2e()}function L2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F2e(t,e){if(t){if(typeof t=="string")return AA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(t,e)}}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function U2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function V2e(t){if(Array.isArray(t))return t}function CA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function TA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CA(Object(r),!0).forEach(function(n){B2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B2e(t,e,r){return e=z2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z2e(t){var e=q2e(t,"string");return qh(e)=="symbol"?e:e+""}function q2e(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PA=function(e,r,n,s,a){var o=n-s,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+a),l+="L ".concat(e+n-o/2-s,",").concat(r+a),l+="L ".concat(e,",").concat(r," Z"),l},W2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},H2e=function(e){var r=TA(TA({},W2e),e),n=T.useRef(),s=T.useState(-1),a=$2e(s,2),o=a[0],l=a[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,h=r.lowerWidth,f=r.height,g=r.className,p=r.animationEasing,x=r.animationDuration,b=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var y=$e("recharts-trapezoid",g);return w?L.createElement(Ps,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:x,animationEasing:p,isActive:w},function(_){var S=_.upperWidth,j=_.lowerWidth,k=_.height,N=_.x,E=_.y;return L.createElement(Ps,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:p},L.createElement("path",Qg({},xe(r,!0),{className:y,d:PA(N,E,S,j,k),ref:n})))}):L.createElement("g",null,L.createElement("path",Qg({},xe(r,!0),{className:y,d:PA(c,u,d,h,f)})))},K2e=["option","shapeType","propTransformer","activeClassName","isActive"];function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function G2e(t,e){if(t==null)return{};var r=Y2e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Y2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function OA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Xg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(r),!0).forEach(function(n){Q2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q2e(t,e,r){return e=X2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X2e(t){var e=J2e(t,"string");return Wh(e)=="symbol"?e:e+""}function J2e(t,e){if(Wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z2e(t,e){return Xg(Xg({},e),t)}function e_e(t,e){return t==="symbols"}function IA(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return L.createElement(Ej,r);case"trapezoid":return L.createElement(H2e,r);case"sector":return L.createElement(_D,r);case"symbols":if(e_e(e))return L.createElement(H4,r);break;default:return null}}function t_e(t){return T.isValidElement(t)?t.props:t}function LD(t){var e=t.option,r=t.shapeType,n=t.propTransformer,s=n===void 0?Z2e:n,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=G2e(t,K2e),u;if(T.isValidElement(e))u=T.cloneElement(e,Xg(Xg({},c),t_e(e)));else if(Ae(e))u=e(c);else if(T2e(e)&&!M2e(e)){var d=s(e,c);u=L.createElement(IA,{shapeType:r,elementProps:d})}else{var h=c;u=L.createElement(IA,{shapeType:r,elementProps:h})}return l?L.createElement(Ke,{className:o},u):u}function Hy(t,e){return e!=null&&"trapezoids"in t.props}function Ky(t,e){return e!=null&&"sectors"in t.props}function Hh(t,e){return e!=null&&"points"in t.props}function r_e(t,e){var r,n,s=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return s&&a}function n_e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function s_e(t,e){var r=t.x===e.x,n=t.y===e.y,s=t.z===e.z;return r&&n&&s}function a_e(t,e){var r;return Hy(t,e)?r=r_e:Ky(t,e)?r=n_e:Hh(t,e)&&(r=s_e),r}function i_e(t,e){var r;return Hy(t,e)?r="trapezoids":Ky(t,e)?r="sectors":Hh(t,e)&&(r="points"),r}function o_e(t,e){if(Hy(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Ky(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Hh(t,e)?e.payload:{}}function l_e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,s=i_e(r,e),a=o_e(r,e),o=n.filter(function(c,u){var d=Rf(a,c),h=r.props[s].filter(function(p){var x=a_e(r,e);return x(p,e)}),f=r.props[s].indexOf(h[h.length-1]),g=u===f;return d&&g}),l=n.indexOf(o[o.length-1]);return l}var pm;function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fl.apply(this,arguments)}function RA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(r),!0).forEach(function(n){An(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UD(n.key),n)}}function u_e(t,e,r){return e&&DA(t.prototype,e),r&&DA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d_e(t,e,r){return e=Jg(e),h_e(t,FD()?Reflect.construct(e,r||[],Jg(t).constructor):e.apply(t,r))}function h_e(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f_e(t)}function f_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FD=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jg(t)}function p_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gw(t,e)}function Gw(t,e){return Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gw(t,e)}function An(t,e,r){return e=UD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UD(t){var e=m_e(t,"string");return Tc(e)=="symbol"?e:e+""}function m_e(t,e){if(Tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ms=function(t){function e(r){var n;return c_e(this,e),n=d_e(this,e,[r]),An(n,"pieRef",null),An(n,"sectorRefs",[]),An(n,"id",iu("recharts-pie-")),An(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ae(s)&&s()}),An(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ae(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return p_e(e,t),u_e(e,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=xe(this.props,!1),h=xe(o,!1),f=xe(l,!1),g=o&&o.offsetRadius||20,p=n.map(function(x,b){var w=(x.startAngle+x.endAngle)/2,y=ut(x.cx,x.cy,x.outerRadius+g,w),_=ot(ot(ot(ot({},d),x),{},{stroke:"none"},h),{},{index:b,textAnchor:e.getTextAnchor(y.x,x.cx)},y),S=ot(ot(ot(ot({},d),x),{},{fill:"none",stroke:x.fill},f),{},{index:b,points:[ut(x.cx,x.cy,x.outerRadius,w),y]}),j=c;return Re(c)&&Re(u)?j="value":Re(c)&&(j=u),L.createElement(Ke,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(b)},l&&e.renderLabelLineItem(l,S,"line"),e.renderLabelItem(o,_,Gt(x,j)))});return L.createElement(Ke,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(n){var s=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var h=s.isActiveIndex(d),f=c&&s.hasActiveIndex()?c:null,g=h?o:f,p=ot(ot({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return L.createElement(Ke,Fl({ref:function(b){b&&!s.sectorRefs.includes(b)&&s.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Mo(s.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),L.createElement(LD,Fl({option:g,isActive:h,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,a=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state,f=h.prevSectors,g=h.prevIsAnimationActive;return L.createElement(Ps,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var x=p.t,b=[],w=a&&a[0],y=w.startAngle;return a.forEach(function(_,S){var j=f&&f[S],k=S>0?gn(_,"paddingAngle",0):0;if(j){var N=cn(j.endAngle-j.startAngle,_.endAngle-_.startAngle),E=ot(ot({},_),{},{startAngle:y+k,endAngle:y+N(x)+k});b.push(E),y=E.endAngle}else{var A=_.endAngle,P=_.startAngle,O=cn(0,A-P),I=O(x),D=ot(ot({},_),{},{startAngle:y+k,endAngle:y+I+k});b.push(D),y=D.endAngle}}),L.createElement(Ke,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,a=n.isAnimationActive,o=this.state.prevSectors;return a&&s&&s.length&&(!o||!Rf(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,a=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,h=s.innerRadius,f=s.outerRadius,g=s.isAnimationActive,p=this.state.isAnimationFinished;if(a||!o||!o.length||!se(u)||!se(d)||!se(h)||!se(f))return null;var x=$e("recharts-pie",l);return L.createElement(Ke,{tabIndex:this.props.rootTabIndex,className:x,ref:function(w){n.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),nr.renderCallByParent(this.props,null,!1),(!g||p)&&ua.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,a){if(L.isValidElement(n))return L.cloneElement(n,s);if(Ae(n))return n(s);var o=$e("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return L.createElement(Bg,Fl({},s,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,a){if(L.isValidElement(n))return L.cloneElement(n,s);var o=a;if(Ae(n)&&(o=n(s),L.isValidElement(o)))return o;var l=$e("recharts-pie-label-text",typeof n!="boolean"&&!Ae(n)?n.className:"");return L.createElement($o,Fl({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(T.PureComponent);pm=Ms;An(Ms,"displayName","Pie");An(Ms,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Yo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});An(Ms,"parseDeltaAngle",function(t,e){var r=Lr(e-t),n=Math.min(Math.abs(e-t),360);return r*n});An(Ms,"getRealPieData",function(t){var e=t.data,r=t.children,n=xe(t,!1),s=yn(r,Cf);return e&&e.length?e.map(function(a,o){return ot(ot(ot({payload:a},n),a),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(a){return ot(ot({},n),a.props)}):[]});An(Ms,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,s=e.width,a=e.height,o=vD(s,a),l=n+Fr(t.cx,s,s/2),c=r+Fr(t.cy,a,a/2),u=Fr(t.innerRadius,o,0),d=Fr(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});An(Ms,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?ot(ot({},e.type.defaultProps),e.props):e.props,s=pm.getRealPieData(n);if(!s||!s.length)return null;var a=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,h=n.valueKey,f=n.tooltipType,g=Math.abs(n.minAngle),p=pm.parseCoordinateOfPie(n,r),x=pm.parseDeltaAngle(o,l),b=Math.abs(x),w=u;Re(u)&&Re(h)?(ss(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Re(u)&&(ss(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=h);var y=s.filter(function(E){return Gt(E,w,0)!==0}).length,_=(b>=360?y:y-1)*c,S=b-y*g-_,j=s.reduce(function(E,A){var P=Gt(A,w,0);return E+(se(P)?P:0)},0),k;if(j>0){var N;k=s.map(function(E,A){var P=Gt(E,w,0),O=Gt(E,d,A),I=(se(P)?P:0)/j,D;A?D=N.endAngle+Lr(x)*c*(P!==0?1:0):D=o;var B=D+Lr(x)*((P!==0?g:0)+I*S),z=(D+B)/2,G=(p.innerRadius+p.outerRadius)/2,Q=[{name:O,value:P,payload:E,dataKey:w,type:f}],F=ut(p.cx,p.cy,G,z);return N=ot(ot(ot({percent:I,cornerRadius:a,name:O,tooltipPayload:Q,midAngle:z,middleRadius:G,tooltipPosition:F},E),p),{},{value:Gt(E,w),startAngle:D,endAngle:B,payload:E,paddingAngle:Lr(x)*c}),N})}return ot(ot({},p),{},{sectors:k,data:s})});var g_e=Math.ceil,y_e=Math.max;function v_e(t,e,r,n){for(var s=-1,a=y_e(g_e((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++s]=t,t+=r;return o}var x_e=v_e,b_e=iR,MA=1/0,w_e=17976931348623157e292;function __e(t){if(!t)return t===0?t:0;if(t=b_e(t),t===MA||t===-MA){var e=t<0?-1:1;return e*w_e}return t===t?t:0}var VD=__e,j_e=x_e,k_e=Cy,Yx=VD;function N_e(t){return function(e,r,n){return n&&typeof n!="number"&&k_e(e,r,n)&&(r=n=void 0),e=Yx(e),r===void 0?(r=e,e=0):r=Yx(r),n=n===void 0?e<r?1:-1:Yx(n),j_e(e,r,n,t)}}var S_e=N_e,E_e=S_e,A_e=E_e(),C_e=A_e;const Zg=Ze(C_e);function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function $A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function LA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(r),!0).forEach(function(n){BD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BD(t,e,r){return e=T_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T_e(t){var e=P_e(t,"string");return Kh(e)=="symbol"?e:e+""}function P_e(t,e){if(Kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O_e=["Webkit","Moz","O","ms"],I_e=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=O_e.reduce(function(a,o){return LA(LA({},a),{},BD({},o+n,r))},{});return s[e]=r,s};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e0.apply(this,arguments)}function FA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Qx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(r),!0).forEach(function(n){an(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qD(n.key),n)}}function D_e(t,e,r){return e&&UA(t.prototype,e),r&&UA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M_e(t,e,r){return e=t0(e),$_e(t,zD()?Reflect.construct(e,r||[],t0(t).constructor):e.apply(t,r))}function $_e(t,e){if(e&&(Pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L_e(t)}function L_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zD=function(){return!!t})()}function t0(t){return t0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t0(t)}function F_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yw(t,e)}function Yw(t,e){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Yw(t,e)}function an(t,e,r){return e=qD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qD(t){var e=U_e(t,"string");return Pc(e)=="symbol"?e:e+""}function U_e(t,e){if(Pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V_e=function(e){var r=e.data,n=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Ad().domain(Zg(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:d}},VA=function(e){return e.changedTouches&&!!e.changedTouches.length},Oc=function(t){function e(r){var n;return R_e(this,e),n=M_e(this,e,[r]),an(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),an(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),an(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:a,startIndex:l})}),n.detachDragEndListener()}),an(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),an(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),an(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),an(n,"handleSlideDragStart",function(s){var a=VA(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return F_e(e,t),D_e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,a=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(s,a),f=Math.max(s,a),g=e.getIndexInRange(o,h),p=e.getIndexInRange(o,f);return{startIndex:g-g%c,endIndex:p===d?d:p-p%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=Gt(a[n],l,n);return Ae(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,g=c.endIndex,p=c.onChange,x=n.pageX-a;x>0?x=Math.min(x,u+d-h-l,u+d-h-o):x<0&&(x=Math.max(x,u-o,u-l));var b=this.getIndex({startX:o+x,endX:l+x});(b.startIndex!==f||b.endIndex!==g)&&p&&p(b),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var a=VA(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,g=d.travellerWidth,p=d.onChange,x=d.gap,b=d.data,w={startX:this.state.startX,endX:this.state.endX},y=n.pageX-a;y>0?y=Math.min(y,h+f-g-u):y<0&&(y=Math.max(y,h-u)),w[o]=u+y;var _=this.getIndex(w),S=_.startIndex,j=_.endIndex,k=function(){var E=b.length-1;return o==="startX"&&(l>c?S%x===0:j%x===0)||l<c&&j===E||o==="endX"&&(l>c?j%x===0:S%x===0)||l>c&&j===E};this.setState(an(an({},o,u+y),"brushMoveStartX",n.pageX),function(){p&&k()&&p(_)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],h=l.indexOf(d);if(h!==-1){var f=h+n;if(!(f===-1||f>=l.length)){var g=l[f];s==="startX"&&g>=u||s==="endX"&&g<=c||this.setState(an({},s,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return L.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,h=T.Children.only(u);return h?L.cloneElement(h,{x:s,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,g=c.ariaLabel,p=c.data,x=c.startIndex,b=c.endIndex,w=Math.max(n,this.props.x),y=Qx(Qx({},xe(this.props,!1)),{},{x:w,y:u,width:d,height:h}),_=g||"Min value: ".concat((a=p[x])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=p[b])===null||o===void 0?void 0:o.name);return L.createElement(Ke,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(n,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(n,s)+u,h=Math.max(Math.abs(s-n)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,a=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,h=d.startX,f=d.endX,g=5,p={pointerEvents:"none",fill:u};return L.createElement(Ke,{className:"recharts-brush-texts"},L.createElement($o,e0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-g,y:o+l/2},p),this.getTextOfTick(s)),L.createElement($o,e0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+g,y:o+l/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,s=n.data,a=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,h=n.alwaysShowText,f=this.state,g=f.startX,p=f.endX,x=f.isTextActive,b=f.isSlideMoving,w=f.isTravellerMoving,y=f.isTravellerFocused;if(!s||!s.length||!se(l)||!se(c)||!se(u)||!se(d)||u<=0||d<=0)return null;var _=$e("recharts-brush",a),S=L.Children.count(o)===1,j=I_e("userSelect","none");return L.createElement(Ke,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(g,p),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(p,"endX"),(x||b||w||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,a=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(a+l/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),L.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var a;return L.isValidElement(n)?a=L.cloneElement(n,s):Ae(n)?a=n(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(n,s){var a=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,h=n.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return Qx({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?V_e({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,s){for(var a=n.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(T.PureComponent);an(Oc,"displayName","Brush");an(Oc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var B_e=Z4;function z_e(t,e){var r;return B_e(t,function(n,s,a){return r=e(n,s,a),!r}),!!r}var q_e=z_e,W_e=II,H_e=Ds,K_e=q_e,G_e=tn,Y_e=Cy;function Q_e(t,e,r){var n=G_e(t)?W_e:K_e;return r&&Y_e(t,e,r)&&(e=void 0),n(t,H_e(e))}var X_e=Q_e;const J_e=Ze(X_e);var As=function(e,r){var n=e.alwaysShow,s=e.ifOverflow;return n&&(s="extendDomain"),s===r},BA=tR;function Z_e(t,e,r){e=="__proto__"&&BA?BA(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var e4e=Z_e,t4e=e4e,r4e=ZI,n4e=Ds;function s4e(t,e){var r={};return e=n4e(e),r4e(t,function(n,s,a){t4e(r,s,e(n,s,a))}),r}var a4e=s4e;const i4e=Ze(a4e);function o4e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var l4e=o4e,c4e=Z4;function u4e(t,e){var r=!0;return c4e(t,function(n,s,a){return r=!!e(n,s,a),r}),r}var d4e=u4e,h4e=l4e,f4e=d4e,p4e=Ds,m4e=tn,g4e=Cy;function y4e(t,e,r){var n=m4e(t)?h4e:f4e;return r&&g4e(t,e,r)&&(e=void 0),n(t,p4e(e))}var v4e=y4e;const WD=Ze(v4e);var x4e=["x","y"];function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qw.apply(this,arguments)}function zA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Gu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zA(Object(r),!0).forEach(function(n){b4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b4e(t,e,r){return e=w4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w4e(t){var e=_4e(t,"string");return Gh(e)=="symbol"?e:e+""}function _4e(t,e){if(Gh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j4e(t,e){if(t==null)return{};var r=k4e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function N4e(t,e){var r=t.x,n=t.y,s=j4e(t,x4e),a="".concat(r),o=parseInt(a,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return Gu(Gu(Gu(Gu(Gu({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function qA(t){return L.createElement(LD,Qw({shapeType:"rectangle",propTransformer:N4e,activeClassName:"recharts-active-bar"},t))}var S4e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof e=="number")return e;var a=se(n)||Kse(n);return a?e(n,s):(a||Fo(),r)}},E4e=["value","background"],HD;function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function A4e(t,e){if(t==null)return{};var r=C4e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r0.apply(this,arguments)}function WA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WA(Object(r),!0).forEach(function(n){ri(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GD(n.key),n)}}function P4e(t,e,r){return e&&HA(t.prototype,e),r&&HA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O4e(t,e,r){return e=n0(e),I4e(t,KD()?Reflect.construct(e,r||[],n0(t).constructor):e.apply(t,r))}function I4e(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R4e(t)}function R4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KD=function(){return!!t})()}function n0(t){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n0(t)}function D4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xw(t,e)}function Xw(t,e){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xw(t,e)}function ri(t,e,r){return e=GD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GD(t){var e=M4e(t,"string");return Ic(e)=="symbol"?e:e+""}function M4e(t,e){if(Ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wi=function(t){function e(){var r;T4e(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=O4e(this,e,[].concat(s)),ri(r,"state",{isAnimationFinished:!1}),ri(r,"id",iu("recharts-bar-")),ri(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ri(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return D4e(e,t),P4e(e,[{key:"renderRectanglesStatically",value:function(n){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=xe(this.props,!1);return n&&n.map(function(h,f){var g=f===c,p=g?u:o,x=Lt(Lt(Lt({},d),h),{},{isActive:g,option:p,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return L.createElement(Ke,r0({className:"recharts-bar-rectangle"},Mo(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),L.createElement(qA,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,h=s.animationId,f=this.state.prevData;return L.createElement(Ps,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var p=g.t,x=a.map(function(b,w){var y=f&&f[w];if(y){var _=cn(y.x,b.x),S=cn(y.y,b.y),j=cn(y.width,b.width),k=cn(y.height,b.height);return Lt(Lt({},b),{},{x:_(p),y:S(p),width:j(p),height:k(p)})}if(o==="horizontal"){var N=cn(0,b.height),E=N(p);return Lt(Lt({},b),{},{y:b.y+b.height-E,height:E})}var A=cn(0,b.width),P=A(p);return Lt(Lt({},b),{},{width:P})});return L.createElement(Ke,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,a=n.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!Rf(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=xe(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=A4e(u,E4e);if(!h)return null;var g=Lt(Lt(Lt(Lt(Lt({},f),{},{fill:"#eee"},h),c),Mo(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(qA,r0({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=yn(d,Df);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,g=function(b,w){var y=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:y,errorVal:Gt(b,w)}},p={clipPath:n?"url(#clipPath-".concat(s,")"):null};return L.createElement(Ke,p,h.map(function(x){return L.cloneElement(x,{key:"error-bar-".concat(s,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,a=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,h=n.width,f=n.height,g=n.isAnimationActive,p=n.background,x=n.id;if(s||!a||!a.length)return null;var b=this.state.isAnimationFinished,w=$e("recharts-bar",o),y=l&&l.allowDataOverflow,_=c&&c.allowDataOverflow,S=y||_,j=Re(x)?this.id:x;return L.createElement(Ke,{className:w},y||_?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(j)},L.createElement("rect",{x:y?u:u-h/2,y:_?d:d-f/2,width:y?h:h*2,height:_?f:f*2}))):null,L.createElement(Ke,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(j,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,j),(!g||b)&&ua.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(T.PureComponent);HD=wi;ri(wi,"displayName","Bar");ri(wi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Yo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ri(wi,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,s=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,g=hxe(n,r);if(!g)return null;var p=e.layout,x=r.type.defaultProps,b=x!==void 0?Lt(Lt({},x),r.props):r.props,w=b.dataKey,y=b.children,_=b.minPointSize,S=p==="horizontal"?o:a,j=u?S.scale.domain():null,k=xxe({numericAxis:S}),N=yn(y,Cf),E=h.map(function(A,P){var O,I,D,B,z,G;u?O=fxe(u[d+P],j):(O=Gt(A,w),Array.isArray(O)||(O=[k,O]));var Q=S4e(_,HD.defaultProps.minPointSize)(O[1],P);if(p==="horizontal"){var F,H=[o.scale(O[0]),o.scale(O[1])],$=H[0],U=H[1];I=LE({axis:a,ticks:l,bandSize:s,offset:g.offset,entry:A,index:P}),D=(F=U??$)!==null&&F!==void 0?F:void 0,B=g.size;var V=$-U;if(z=Number.isNaN(V)?0:V,G={x:I,y:o.y,width:B,height:o.height},Math.abs(Q)>0&&Math.abs(z)<Math.abs(Q)){var Z=Lr(z||Q)*(Math.abs(Q)-Math.abs(z));D-=Z,z+=Z}}else{var ye=[a.scale(O[0]),a.scale(O[1])],Y=ye[0],re=ye[1];if(I=Y,D=LE({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:A,index:P}),B=re-Y,z=g.size,G={x:a.x,y:D,width:a.width,height:z},Math.abs(Q)>0&&Math.abs(B)<Math.abs(Q)){var Pe=Lr(B||Q)*(Math.abs(Q)-Math.abs(B));B+=Pe}}return Lt(Lt(Lt({},A),{},{x:I,y:D,width:B,height:z,value:u?O:O[1],payload:A,background:G},N&&N[P]&&N[P].props),{},{tooltipPayload:[gD(r,A)],tooltipPosition:{x:I+B/2,y:D+z/2}})});return Lt({data:E,layout:p},f)});function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function $4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YD(n.key),n)}}function L4e(t,e,r){return e&&KA(t.prototype,e),r&&KA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Yn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GA(Object(r),!0).forEach(function(n){Gy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gy(t,e,r){return e=YD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YD(t){var e=F4e(t,"string");return Yh(e)=="symbol"?e:e+""}function F4e(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QD=function(e,r,n,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),h={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!ln(u,wi);return d.reduce(function(g,p){var x=r[p],b=x.orientation,w=x.domain,y=x.padding,_=y===void 0?{}:y,S=x.mirror,j=x.reversed,k="".concat(b).concat(S?"Mirror":""),N,E,A,P,O;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var I=w[1]-w[0],D=1/0,B=x.categoricalDomain.sort(Qse);if(B.forEach(function(ye,Y){Y>0&&(D=Math.min((ye||0)-(B[Y-1]||0),D))}),Number.isFinite(D)){var z=D/I,G=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(N=z*G/2),x.padding==="no-gap"){var Q=Fr(e.barCategoryGap,z*G),F=z*G/2;N=F-Q-(F-Q)/G*Q}}}s==="xAxis"?E=[n.left+(_.left||0)+(N||0),n.left+n.width-(_.right||0)-(N||0)]:s==="yAxis"?E=c==="horizontal"?[n.top+n.height-(_.bottom||0),n.top+(_.top||0)]:[n.top+(_.top||0)+(N||0),n.top+n.height-(_.bottom||0)-(N||0)]:E=x.range,j&&(E=[E[1],E[0]]);var H=hD(x,a,f),$=H.scale,U=H.realScaleType;$.domain(w).range(E),fD($);var V=pD($,Yn(Yn({},x),{},{realScaleType:U}));s==="xAxis"?(O=b==="top"&&!S||b==="bottom"&&S,A=n.left,P=h[k]-O*x.height):s==="yAxis"&&(O=b==="left"&&!S||b==="right"&&S,A=h[k]-O*x.width,P=n.top);var Z=Yn(Yn(Yn({},x),V),{},{realScaleType:U,x:A,y:P,scale:$,width:s==="xAxis"?n.width:x.width,height:s==="yAxis"?n.height:x.height});return Z.bandSize=Fg(Z,V),!x.hide&&s==="xAxis"?h[k]+=(O?-1:1)*Z.height:x.hide||(h[k]+=(O?-1:1)*Z.width),Yn(Yn({},g),{},Gy({},p,Z))},{})},XD=function(e,r){var n=e.x,s=e.y,a=r.x,o=r.y;return{x:Math.min(n,a),y:Math.min(s,o),width:Math.abs(a-n),height:Math.abs(o-s)}},U4e=function(e){var r=e.x1,n=e.y1,s=e.x2,a=e.y2;return XD({x:r,y:n},{x:s,y:a})},JD=function(){function t(e){$4e(this,t),this.scale=e}return L4e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],a=n[n.length-1];return s<=a?r>=s&&r<=a:r>=a&&r<=s}}],[{key:"create",value:function(r){return new t(r)}}])}();Gy(JD,"EPS",1e-4);var Aj=function(e){var r=Object.keys(e).reduce(function(n,s){return Yn(Yn({},n),{},Gy({},s,JD.create(e[s])))},{});return Yn(Yn({},r),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return i4e(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return WD(s,function(a,o){return r[o].isInRange(a)})}})};function V4e(t){return(t%180+180)%180}var B4e=function(e){var r=e.width,n=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=V4e(s),o=a*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},z4e=Ds,q4e=Af,W4e=Ey;function H4e(t){return function(e,r,n){var s=Object(e);if(!q4e(e)){var a=z4e(r);e=W4e(e),r=function(l){return a(s[l],l,s)}}var o=t(e,r,n);return o>-1?s[a?e[o]:o]:void 0}}var K4e=H4e,G4e=VD;function Y4e(t){var e=G4e(t),r=e%1;return e===e?r?e-r:e:0}var Q4e=Y4e,X4e=KI,J4e=Ds,Z4e=Q4e,eje=Math.max;function tje(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var s=r==null?0:Z4e(r);return s<0&&(s=eje(n+s,0)),X4e(t,J4e(e),s)}var rje=tje,nje=K4e,sje=rje,aje=nje(sje),ije=aje;const oje=Ze(ije);var lje=Zne(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Cj=T.createContext(void 0),Tj=T.createContext(void 0),ZD=T.createContext(void 0),eM=T.createContext({}),tM=T.createContext(void 0),rM=T.createContext(0),nM=T.createContext(0),YA=function(e){var r=e.state,n=r.xAxisMap,s=r.yAxisMap,a=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=lje(a);return L.createElement(Cj.Provider,{value:n},L.createElement(Tj.Provider,{value:s},L.createElement(eM.Provider,{value:a},L.createElement(ZD.Provider,{value:d},L.createElement(tM.Provider,{value:o},L.createElement(rM.Provider,{value:u},L.createElement(nM.Provider,{value:c},l)))))))},cje=function(){return T.useContext(tM)},sM=function(e){var r=T.useContext(Cj);r==null&&Fo();var n=r[e];return n==null&&Fo(),n},uje=function(){var e=T.useContext(Cj);return Xa(e)},dje=function(){var e=T.useContext(Tj),r=oje(e,function(n){return WD(n.domain,Number.isFinite)});return r||Xa(e)},aM=function(e){var r=T.useContext(Tj);r==null&&Fo();var n=r[e];return n==null&&Fo(),n},hje=function(){var e=T.useContext(ZD);return e},fje=function(){return T.useContext(eM)},Pj=function(){return T.useContext(nM)},Oj=function(){return T.useContext(rM)};function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function pje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mje(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oM(n.key),n)}}function gje(t,e,r){return e&&mje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yje(t,e,r){return e=s0(e),vje(t,iM()?Reflect.construct(e,r||[],s0(t).constructor):e.apply(t,r))}function vje(t,e){if(e&&(Rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xje(t)}function xje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iM=function(){return!!t})()}function s0(t){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s0(t)}function bje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jw(t,e)}function Jw(t,e){return Jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jw(t,e)}function QA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function XA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QA(Object(r),!0).forEach(function(n){Ij(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ij(t,e,r){return e=oM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oM(t){var e=wje(t,"string");return Rc(e)=="symbol"?e:e+""}function wje(t,e){if(Rc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _je(t,e){return Sje(t)||Nje(t,e)||kje(t,e)||jje()}function jje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kje(t,e){if(t){if(typeof t=="string")return JA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JA(t,e)}}function JA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Sje(t){if(Array.isArray(t))return t}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zw.apply(this,arguments)}var Eje=function(e,r){var n;return L.isValidElement(e)?n=L.cloneElement(e,r):Ae(e)?n=e(r):n=L.createElement("line",Zw({},r,{className:"recharts-reference-line-line"})),n},Aje=function(e,r,n,s,a,o,l,c,u){var d=a.x,h=a.y,f=a.width,g=a.height;if(n){var p=u.y,x=e.y.apply(p,{position:o});if(As(u,"discard")&&!e.y.isInRange(x))return null;var b=[{x:d+f,y:x},{x:d,y:x}];return c==="left"?b.reverse():b}if(r){var w=u.x,y=e.x.apply(w,{position:o});if(As(u,"discard")&&!e.x.isInRange(y))return null;var _=[{x:y,y:h+g},{x:y,y:h}];return l==="top"?_.reverse():_}if(s){var S=u.segment,j=S.map(function(k){return e.apply(k,{position:o})});return As(u,"discard")&&J_e(j,function(k){return!e.isInRange(k)})?null:j}return null};function Cje(t){var e=t.x,r=t.y,n=t.segment,s=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=cje(),d=sM(s),h=aM(a),f=hje();if(!u||!f)return null;ss(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Aj({x:d.scale,y:h.scale}),p=Qt(e),x=Qt(r),b=n&&n.length===2,w=Aje(g,p,x,b,f,t.position,d.orientation,h.orientation,t);if(!w)return null;var y=_je(w,2),_=y[0],S=_.x,j=_.y,k=y[1],N=k.x,E=k.y,A=As(t,"hidden")?"url(#".concat(u,")"):void 0,P=XA(XA({clipPath:A},xe(t,!0)),{},{x1:S,y1:j,x2:N,y2:E});return L.createElement(Ke,{className:$e("recharts-reference-line",l)},Eje(o,P),nr.renderCallByParent(t,U4e({x1:S,y1:j,x2:N,y2:E})))}var Rj=function(t){function e(){return pje(this,e),yje(this,e,arguments)}return bje(e,t),gje(e,[{key:"render",value:function(){return L.createElement(Cje,this.props)}}])}(L.Component);Ij(Rj,"displayName","ReferenceLine");Ij(Rj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e2.apply(this,arguments)}function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function ZA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function eC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZA(Object(r),!0).forEach(function(n){Yy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pje(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cM(n.key),n)}}function Oje(t,e,r){return e&&Pje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ije(t,e,r){return e=a0(e),Rje(t,lM()?Reflect.construct(e,r||[],a0(t).constructor):e.apply(t,r))}function Rje(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dje(t)}function Dje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lM=function(){return!!t})()}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a0(t)}function Mje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t2(t,e)}function t2(t,e){return t2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},t2(t,e)}function Yy(t,e,r){return e=cM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cM(t){var e=$je(t,"string");return Dc(e)=="symbol"?e:e+""}function $je(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lje=function(e){var r=e.x,n=e.y,s=e.xAxis,a=e.yAxis,o=Aj({x:s.scale,y:a.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return As(e,"discard")&&!o.isInRange(l)?null:l},Qy=function(t){function e(){return Tje(this,e),Ije(this,e,arguments)}return Mje(e,t),Oje(e,[{key:"render",value:function(){var n=this.props,s=n.x,a=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Qt(s),d=Qt(a);if(ss(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Lje(this.props);if(!h)return null;var f=h.x,g=h.y,p=this.props,x=p.shape,b=p.className,w=As(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=eC(eC({clipPath:w},xe(this.props,!0)),{},{cx:f,cy:g});return L.createElement(Ke,{className:$e("recharts-reference-dot",b)},e.renderDot(x,y),nr.renderCallByParent(this.props,{x:f-o,y:g-o,width:2*o,height:2*o}))}}])}(L.Component);Yy(Qy,"displayName","ReferenceDot");Yy(Qy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Yy(Qy,"renderDot",function(t,e){var r;return L.isValidElement(t)?r=L.cloneElement(t,e):Ae(t)?r=t(e):r=L.createElement(Vy,e2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function r2(){return r2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r2.apply(this,arguments)}function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function tC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function rC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tC(Object(r),!0).forEach(function(n){Xy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uje(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dM(n.key),n)}}function Vje(t,e,r){return e&&Uje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bje(t,e,r){return e=i0(e),zje(t,uM()?Reflect.construct(e,r||[],i0(t).constructor):e.apply(t,r))}function zje(t,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qje(t)}function qje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uM=function(){return!!t})()}function i0(t){return i0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i0(t)}function Wje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n2(t,e)}function n2(t,e){return n2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},n2(t,e)}function Xy(t,e,r){return e=dM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dM(t){var e=Hje(t,"string");return Mc(e)=="symbol"?e:e+""}function Hje(t,e){if(Mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kje=function(e,r,n,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=Aj({x:d.scale,y:h.scale}),g={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},p={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return As(a,"discard")&&(!f.isInRange(g)||!f.isInRange(p))?null:XD(g,p)},Jy=function(t){function e(){return Fje(this,e),Bje(this,e,arguments)}return Wje(e,t),Vje(e,[{key:"render",value:function(){var n=this.props,s=n.x1,a=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;ss(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Qt(s),f=Qt(a),g=Qt(o),p=Qt(l),x=this.props.shape;if(!h&&!f&&!g&&!p&&!x)return null;var b=Kje(h,f,g,p,this.props);if(!b&&!x)return null;var w=As(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(Ke,{className:$e("recharts-reference-area",c)},e.renderRect(x,rC(rC({clipPath:w},xe(this.props,!0)),b)),nr.renderCallByParent(this.props,b))}}])}(L.Component);Xy(Jy,"displayName","ReferenceArea");Xy(Jy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Xy(Jy,"renderRect",function(t,e){var r;return L.isValidElement(t)?r=L.cloneElement(t,e):Ae(t)?r=t(e):r=L.createElement(Ej,r2({},e,{className:"recharts-reference-area-rect"})),r});function hM(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],s=0;s<t.length;s+=e)n.push(t[s]);return n}function Gje(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return B4e(n,r)}function Yje(t,e,r){var n=r==="width",s=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:n?s:a,end:n?s+o:a+l}:{start:n?s+o:a+l,end:n?s:a}}function o0(t,e,r,n,s){if(t*e<t*n||t*e>t*s)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-s)<=0}function Qje(t,e){return hM(t,e+1)}function Xje(t,e,r,n,s){for(var a=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:hM(n,u)};var x=c,b,w=function(){return b===void 0&&(b=r(p,x)),b},y=p.coordinate,_=c===0||o0(t,y,w,d,l);_||(c=0,d=o,u+=1),_&&(d=y+t*(w()/2+s),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function nC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function kr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nC(Object(r),!0).forEach(function(n){Jje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jje(t,e,r){return e=Zje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zje(t){var e=e3e(t,"string");return Qh(e)=="symbol"?e:e+""}function e3e(t,e){if(Qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t3e(t,e,r,n,s){for(var a=(n||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var g=a[f],p,x=function(){return p===void 0&&(p=r(g,f)),p};if(f===o-1){var b=t*(g.coordinate+t*x()/2-c);a[f]=g=kr(kr({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else a[f]=g=kr(kr({},g),{},{tickCoord:g.coordinate});var w=o0(t,g.tickCoord,x,l,c);w&&(c=g.tickCoord-t*(x()/2+s),a[f]=kr(kr({},g),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function r3e(t,e,r,n,s,a){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=n[l-1],h=r(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=kr(kr({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var g=o0(t,d.tickCoord,function(){return h},c,u);g&&(u=d.tickCoord-t*(h/2+s),o[l-1]=kr(kr({},d),{},{isShow:!0}))}for(var p=a?l-1:l,x=function(y){var _=o[y],S,j=function(){return S===void 0&&(S=r(_,y)),S};if(y===0){var k=t*(_.coordinate-t*j()/2-c);o[y]=_=kr(kr({},_),{},{tickCoord:k<0?_.coordinate-k*t:_.coordinate})}else o[y]=_=kr(kr({},_),{},{tickCoord:_.coordinate});var N=o0(t,_.tickCoord,j,c,u);N&&(c=_.tickCoord+t*(j()/2+s),o[y]=kr(kr({},_),{},{isShow:!0}))},b=0;b<p;b++)x(b);return o}function Dj(t,e,r){var n=t.tick,s=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!s||!s.length||!n)return[];if(se(c)||Yo.isSsr)return Qje(s,typeof c=="number"&&se(c)?c:0);var f=[],g=l==="top"||l==="bottom"?"width":"height",p=d&&g==="width"?Ed(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=function(_,S){var j=Ae(u)?u(_.value,S):_.value;return g==="width"?Gje(Ed(j,{fontSize:e,letterSpacing:r}),p,h):Ed(j,{fontSize:e,letterSpacing:r})[g]},b=s.length>=2?Lr(s[1].coordinate-s[0].coordinate):1,w=Yje(a,b,g);return c==="equidistantPreserveStart"?Xje(b,w,x,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=r3e(b,w,x,s,o,c==="preserveStartEnd"):f=t3e(b,w,x,s,o),f.filter(function(y){return y.isShow}))}var n3e=["viewBox"],s3e=["viewBox"],a3e=["ticks"];function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ul.apply(this,arguments)}function sC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sC(Object(r),!0).forEach(function(n){Mj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xx(t,e){if(t==null)return{};var r=i3e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function o3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pM(n.key),n)}}function l3e(t,e,r){return e&&aC(t.prototype,e),r&&aC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c3e(t,e,r){return e=l0(e),u3e(t,fM()?Reflect.construct(e,r||[],l0(t).constructor):e.apply(t,r))}function u3e(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d3e(t)}function d3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fM=function(){return!!t})()}function l0(t){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l0(t)}function h3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s2(t,e)}function s2(t,e){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},s2(t,e)}function Mj(t,e,r){return e=pM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pM(t){var e=f3e(t,"string");return $c(e)=="symbol"?e:e+""}function f3e(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fu=function(t){function e(r){var n;return o3e(this,e),n=c3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return h3e(e,t),l3e(e,[{key:"shouldComponentUpdate",value:function(n,s){var a=n.viewBox,o=Xx(n,n3e),l=this.props,c=l.viewBox,u=Xx(l,s3e);return!Zl(a,c)||!Zl(o,u)||!Zl(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,h=s.mirror,f=s.tickMargin,g,p,x,b,w,y,_=h?-1:1,S=n.tickSize||d,j=se(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":g=p=n.coordinate,b=o+ +!h*c,x=b-_*S,y=x-_*f,w=j;break;case"left":x=b=n.coordinate,p=a+ +!h*l,g=p-_*S,w=g-_*f,y=j;break;case"right":x=b=n.coordinate,p=a+ +h*l,g=p+_*S,w=g+_*f,y=j;break;default:g=p=n.coordinate,b=o+ +h*c,x=b+_*S,y=x+_*f,w=j;break}return{line:{x1:g,y1:x,x2:p,y2:b},tick:{x:w,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,a=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,h=qt(qt(qt({},xe(this.props,!1)),xe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=qt(qt({},h),{},{x1:s,y1:a+f*l,x2:s+o,y2:a+f*l})}else{var g=+(c==="left"&&!u||c==="right"&&u);h=qt(qt({},h),{},{x1:s+g*o,y1:a,x2:s+g*o,y2:a+l})}return L.createElement("line",Ul({},h,{className:$e("recharts-cartesian-axis-line",gn(d,"className"))}))}},{key:"renderTicks",value:function(n,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,g=Dj(qt(qt({},this.props),{},{ticks:n}),s,a),p=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=xe(this.props,!1),w=xe(d,!1),y=qt(qt({},b),{},{fill:"none"},xe(c,!1)),_=g.map(function(S,j){var k=o.getTickLineCoord(S),N=k.line,E=k.tick,A=qt(qt(qt(qt({textAnchor:p,verticalAnchor:x},b),{},{stroke:"none",fill:u},w),E),{},{index:j,payload:S,visibleTicksCount:g.length,tickFormatter:h});return L.createElement(Ke,Ul({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Mo(o.props,S,j)),c&&L.createElement("line",Ul({},y,N,{className:$e("recharts-cartesian-axis-tick-line",gn(c,"className"))})),d&&e.renderTickItem(d,A,"".concat(Ae(h)?h(S.value,j):S.value).concat(f||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var n=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var h=this.props,f=h.ticks,g=Xx(h,a3e),p=f;return Ae(c)&&(p=f&&f.length>0?c(this.props):c(g)),o<=0||l<=0||!p||!p.length?null:L.createElement(Ke,{className:$e("recharts-cartesian-axis",u),ref:function(b){n.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),nr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,a){var o,l=$e(s.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(n)?o=L.cloneElement(n,qt(qt({},s),{},{className:l})):Ae(n)?o=n(qt(qt({},s),{},{className:l})):o=L.createElement($o,Ul({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(T.Component);Mj(fu,"displayName","CartesianAxis");Mj(fu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var p3e=["x1","y1","x2","y2","key"],m3e=["offset"];function Uo(t){"@babel/helpers - typeof";return Uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(t)}function iC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iC(Object(r),!0).forEach(function(n){g3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g3e(t,e,r){return e=y3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y3e(t){var e=v3e(t,"string");return Uo(e)=="symbol"?e:e+""}function v3e(t,e){if(Uo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fo(){return fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fo.apply(this,arguments)}function oC(t,e){if(t==null)return{};var r=x3e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var b3e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return L.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function mM(t,e){var r;if(L.isValidElement(t))r=L.cloneElement(t,e);else if(Ae(t))r=t(e);else{var n=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=oC(e,p3e),u=xe(c,!1);u.offset;var d=oC(u,m3e);r=L.createElement("line",fo({},d,{x1:n,y1:s,x2:a,y2:o,fill:"none",key:l}))}return r}function w3e(t){var e=t.x,r=t.width,n=t.horizontal,s=n===void 0?!0:n,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Ar(Ar({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return mM(s,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function _3e(t){var e=t.y,r=t.height,n=t.vertical,s=n===void 0?!0:n,a=t.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Ar(Ar({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return mM(s,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function j3e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,s=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,g){return f-g});s!==d[0]&&d.unshift(0);var h=d.map(function(f,g){var p=!d[g+1],x=p?s+o-f:d[g+1]-f;if(x<=0)return null;var b=g%e.length;return L.createElement("rect",{key:"react-".concat(g),y:f,x:n,height:x,width:a,stroke:"none",fill:e[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function k3e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,s=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,g){return f-g});a!==d[0]&&d.unshift(0);var h=d.map(function(f,g){var p=!d[g+1],x=p?a+l-f:d[g+1]-f;if(x<=0)return null;var b=g%n.length;return L.createElement("rect",{key:"react-".concat(g),x:f,y:o,width:x,height:c,stroke:"none",fill:n[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var N3e=function(e,r){var n=e.xAxis,s=e.width,a=e.height,o=e.offset;return dD(Dj(Ar(Ar(Ar({},fu.defaultProps),n),{},{ticks:ra(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,r)},S3e=function(e,r){var n=e.yAxis,s=e.width,a=e.height,o=e.offset;return dD(Dj(Ar(Ar(Ar({},fu.defaultProps),n),{},{ticks:ra(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,r)},pl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Xh(t){var e,r,n,s,a,o,l=Pj(),c=Oj(),u=fje(),d=Ar(Ar({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:pl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:pl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:pl.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:pl.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:pl.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:pl.verticalFill,x:se(t.x)?t.x:u.left,y:se(t.y)?t.y:u.top,width:se(t.width)?t.width:u.width,height:se(t.height)?t.height:u.height}),h=d.x,f=d.y,g=d.width,p=d.height,x=d.syncWithTicks,b=d.horizontalValues,w=d.verticalValues,y=uje(),_=dje();if(!se(g)||g<=0||!se(p)||p<=0||!se(h)||h!==+h||!se(f)||f!==+f)return null;var S=d.verticalCoordinatesGenerator||N3e,j=d.horizontalCoordinatesGenerator||S3e,k=d.horizontalPoints,N=d.verticalPoints;if((!k||!k.length)&&Ae(j)){var E=b&&b.length,A=j({yAxis:_?Ar(Ar({},_),{},{ticks:E?b:_.ticks}):void 0,width:l,height:c,offset:u},E?!0:x);ss(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Uo(A),"]")),Array.isArray(A)&&(k=A)}if((!N||!N.length)&&Ae(S)){var P=w&&w.length,O=S({xAxis:y?Ar(Ar({},y),{},{ticks:P?w:y.ticks}):void 0,width:l,height:c,offset:u},P?!0:x);ss(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Uo(O),"]")),Array.isArray(O)&&(N=O)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(b3e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(w3e,fo({},d,{offset:u,horizontalPoints:k,xAxis:y,yAxis:_})),L.createElement(_3e,fo({},d,{offset:u,verticalPoints:N,xAxis:y,yAxis:_})),L.createElement(j3e,fo({},d,{horizontalPoints:k})),L.createElement(k3e,fo({},d,{verticalPoints:N})))}Xh.displayName="CartesianGrid";var E3e=["type","layout","connectNulls","ref"],A3e=["key"];function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function lC(t,e){if(t==null)return{};var r=C3e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Id.apply(this,arguments)}function cC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cC(Object(r),!0).forEach(function(n){Qn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ml(t){return I3e(t)||O3e(t)||P3e(t)||T3e()}function T3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P3e(t,e){if(t){if(typeof t=="string")return a2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(t,e)}}function O3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I3e(t){if(Array.isArray(t))return a2(t)}function a2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yM(n.key),n)}}function D3e(t,e,r){return e&&uC(t.prototype,e),r&&uC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M3e(t,e,r){return e=c0(e),$3e(t,gM()?Reflect.construct(e,r||[],c0(t).constructor):e.apply(t,r))}function $3e(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L3e(t)}function L3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gM=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c0(t)}function F3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i2(t,e)}function i2(t,e){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},i2(t,e)}function Qn(t,e,r){return e=yM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yM(t){var e=U3e(t,"string");return Lc(e)=="symbol"?e:e+""}function U3e(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zo=function(t){function e(){var r;R3e(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=M3e(this,e,[].concat(s)),Qn(r,"state",{isAnimationFinished:!0,totalLength:0}),Qn(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Qn(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(w,y){return w+y});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,f=l-o,g=[],p=0,x=0;p<c.length;x+=c[p],++p)if(x+c[p]>h){g=[].concat(ml(c.slice(0,p)),[h-x]);break}var b=g.length%2===0?[0,f]:[f];return[].concat(ml(e.repeat(c,d)),ml(g),b).map(function(w){return"".concat(w,"px")}).join(", ")}),Qn(r,"id",iu("recharts-line-")),Qn(r,"pathRef",function(o){r.mainCurve=o}),Qn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Qn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return F3e(e,t),D3e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=yn(d,Df);if(!h)return null;var f=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:Gt(x.payload,b)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return L.createElement(Ke,g,h.map(function(p){return L.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,s,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=xe(this.props,!1),f=xe(c,!0),g=u.map(function(x,b){var w=sn(sn(sn({key:"dot-".concat(b),r:3},h),f),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:d,payload:x.payload,points:u});return e.renderDotItem(c,w)}),p={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return L.createElement(Ke,Id({className:"recharts-line-dots",key:"dots"},p),g)}},{key:"renderCurveStatically",value:function(n,s,a,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=lC(l,E3e),f=sn(sn(sn({},xe(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(a,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return L.createElement(Bg,Id({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,g=o.animationId,p=o.animateNewValues,x=o.width,b=o.height,w=this.state,y=w.prevPoints,_=w.totalLength;return L.createElement(Ps,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var j=S.t;if(y){var k=y.length/l.length,N=l.map(function(I,D){var B=Math.floor(D*k);if(y[B]){var z=y[B],G=cn(z.x,I.x),Q=cn(z.y,I.y);return sn(sn({},I),{},{x:G(j),y:Q(j)})}if(p){var F=cn(x*2,I.x),H=cn(b/2,I.y);return sn(sn({},I),{},{x:F(j),y:H(j)})}return sn(sn({},I),{},{x:I.x,y:I.y})});return a.renderCurveStatically(N,n,s)}var E=cn(0,_),A=E(j),P;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});P=a.getStrokeDasharray(A,_,O)}else P=a.generateSimpleStrokeDasharray(_,A);return a.renderCurveStatically(l,n,s,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,s){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Rf(u,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,d=s.yAxis,h=s.top,f=s.left,g=s.width,p=s.height,x=s.isAnimationActive,b=s.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,y=l.length===1,_=$e("recharts-line",c),S=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,k=S||j,N=Re(b)?this.id:b,E=(n=xe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=E.r,P=A===void 0?3:A,O=E.strokeWidth,I=O===void 0?2:O,D=aae(o)?o:{},B=D.clipDot,z=B===void 0?!0:B,G=P*2+I;return L.createElement(Ke,{className:_},S||j?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(N)},L.createElement("rect",{x:S?f:f-g/2,y:j?h:h-p/2,width:S?g:g*2,height:j?p:p*2})),!z&&L.createElement("clipPath",{id:"clipPath-dots-".concat(N)},L.createElement("rect",{x:f-G/2,y:h-G/2,width:g+G,height:p+G}))):null,!y&&this.renderCurve(k,N),this.renderErrorBar(k,N),(y||o)&&this.renderDots(k,z,N),(!x||w)&&ua.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var a=n.length%2!==0?[].concat(ml(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(ml(o),ml(a));return o}},{key:"renderDotItem",value:function(n,s){var a;if(L.isValidElement(n))a=L.cloneElement(n,s);else if(Ae(n))a=n(s);else{var o=s.key,l=lC(s,A3e),c=$e("recharts-line-dot",typeof n!="boolean"?n.className:"");a=L.createElement(Vy,Id({key:o},l,{className:c}))}return a}}])}(T.PureComponent);Qn(Zo,"displayName","Line");Qn(Zo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Yo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qn(Zo,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,h=c.map(function(f,g){var p=Gt(f,o);return d==="horizontal"?{x:$E({axis:r,ticks:s,bandSize:l,entry:f,index:g}),y:Re(p)?null:n.scale(p),value:p,payload:f}:{x:Re(p)?null:r.scale(p),y:$E({axis:n,ticks:a,bandSize:l,entry:f,index:g}),value:p,payload:f}});return sn({points:h,layout:d},u)});function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function V3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bM(n.key),n)}}function z3e(t,e,r){return e&&B3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q3e(t,e,r){return e=u0(e),W3e(t,vM()?Reflect.construct(e,r||[],u0(t).constructor):e.apply(t,r))}function W3e(t,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3e(t)}function H3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vM=function(){return!!t})()}function u0(t){return u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u0(t)}function K3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o2(t,e)}function o2(t,e){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},o2(t,e)}function xM(t,e,r){return e=bM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bM(t){var e=G3e(t,"string");return Fc(e)=="symbol"?e:e+""}function G3e(t,e){if(Fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function l2(){return l2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l2.apply(this,arguments)}function Y3e(t){var e=t.xAxisId,r=Pj(),n=Oj(),s=sM(e);return s==null?null:T.createElement(fu,l2({},s,{className:$e("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ra(o,!0)}}))}var _i=function(t){function e(){return V3e(this,e),q3e(this,e,arguments)}return K3e(e,t),z3e(e,[{key:"render",value:function(){return T.createElement(Y3e,this.props)}}])}(T.Component);xM(_i,"displayName","XAxis");xM(_i,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function Q3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jM(n.key),n)}}function J3e(t,e,r){return e&&X3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z3e(t,e,r){return e=d0(e),eke(t,wM()?Reflect.construct(e,r||[],d0(t).constructor):e.apply(t,r))}function eke(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tke(t)}function tke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wM=function(){return!!t})()}function d0(t){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d0(t)}function rke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c2(t,e)}function c2(t,e){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},c2(t,e)}function _M(t,e,r){return e=jM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jM(t){var e=nke(t,"string");return Uc(e)=="symbol"?e:e+""}function nke(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u2.apply(this,arguments)}var ske=function(e){var r=e.yAxisId,n=Pj(),s=Oj(),a=aM(r);return a==null?null:T.createElement(fu,u2({},a,{className:$e("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ra(l,!0)}}))},ji=function(t){function e(){return Q3e(this,e),Z3e(this,e,arguments)}return rke(e,t),J3e(e,[{key:"render",value:function(){return T.createElement(ske,this.props)}}])}(T.Component);_M(ji,"displayName","YAxis");_M(ji,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function dC(t){return lke(t)||oke(t)||ike(t)||ake()}function ake(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ike(t,e){if(t){if(typeof t=="string")return d2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d2(t,e)}}function oke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lke(t){if(Array.isArray(t))return d2(t)}function d2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h2=function(e,r,n,s,a){var o=yn(e,Rj),l=yn(e,Qy),c=[].concat(dC(o),dC(l)),u=yn(e,Jy),d="".concat(s,"Id"),h=s[0],f=r;if(c.length&&(f=c.reduce(function(x,b){if(b.props[d]===n&&As(b.props,"extendDomain")&&se(b.props[h])){var w=b.props[h];return[Math.min(x[0],w),Math.max(x[1],w)]}return x},f)),u.length){var g="".concat(h,"1"),p="".concat(h,"2");f=u.reduce(function(x,b){if(b.props[d]===n&&As(b.props,"extendDomain")&&se(b.props[g])&&se(b.props[p])){var w=b.props[g],y=b.props[p];return[Math.min(x[0],w,y),Math.max(x[1],w,y)]}return x},f)}return a&&a.length&&(f=a.reduce(function(x,b){return se(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},f)),f},kM={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,h||c,f),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],g]:c._events[p].push(g):(c._events[p]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,p=new Array(g);f<g;f++)p[f]=h[f].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,g,p){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,y,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,f),!0;case 5:return b.fn.call(b.context,d,h,f,g),!0;case 6:return b.fn.call(b.context,d,h,f,g,p),!0}for(_=1,y=new Array(w-1);_<w;_++)y[_-1]=arguments[_];b.fn.apply(b.context,y)}else{var S=b.length,j;for(_=0;_<S;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),w){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,h);break;case 4:b[_].fn.call(b[_].context,d,h,f);break;default:if(!y)for(j=1,y=new Array(w-1);j<w;j++)y[j-1]=arguments[j];b[_].fn.apply(b[_].context,y)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var p=this._events[g];if(p.fn)p.fn===d&&(!f||p.once)&&(!h||p.context===h)&&o(this,g);else{for(var x=0,b=[],w=p.length;x<w;x++)(p[x].fn!==d||f&&!p[x].once||h&&p[x].context!==h)&&b.push(p[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(kM);var cke=kM.exports;const uke=Ze(cke);var Jx=new uke,Zx="recharts.syncMouseEvents";function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function dke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NM(n.key),n)}}function fke(t,e,r){return e&&hke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eb(t,e,r){return e=NM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NM(t){var e=pke(t,"string");return Jh(e)=="symbol"?e:e+""}function pke(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mke=function(){function t(){dke(this,t),eb(this,"activeIndex",0),eb(this,"coordinateList",[]),eb(this,"layout","horizontal")}return fke(t,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,a=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,h=d===void 0?null:d,f=r.mouseHandlerCallback,g=f===void 0?null:f;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,h=a+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function gke(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],s=t==null?void 0:t[1];if(n&&s&&se(n)&&se(s))return!0}return!1}function yke(t,e,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-s,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function SM(t){var e=t.cx,r=t.cy,n=t.radius,s=t.startAngle,a=t.endAngle,o=ut(e,r,n,s),l=ut(e,r,n,a);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:s,endAngle:a}}function vke(t,e,r){var n,s,a,o;if(t==="horizontal")n=e.x,a=n,s=r.top,o=r.top+r.height;else if(t==="vertical")s=e.y,o=s,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=ut(l,c,u,h),g=ut(l,c,d,h);n=f.x,s=f.y,a=g.x,o=g.y}else return SM(e);return[{x:n,y:s},{x:a,y:o}]}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function hC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hC(Object(r),!0).forEach(function(n){xke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xke(t,e,r){return e=bke(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bke(t){var e=wke(t,"string");return Zh(e)=="symbol"?e:e+""}function wke(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ke(t){var e,r,n=t.element,s=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,g=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!a||!o||f!=="ScatterChart"&&s!=="axis")return null;var p,x=Bg;if(f==="ScatterChart")p=o,x=Uwe;else if(f==="BarChart")p=yke(h,o,c,d),x=Ej;else if(h==="radial"){var b=SM(o),w=b.cx,y=b.cy,_=b.radius,S=b.startAngle,j=b.endAngle;p={cx:w,cy:y,startAngle:S,endAngle:j,innerRadius:_,outerRadius:_},x=_D}else p={points:vke(h,o,c)},x=Bg;var k=qp(qp(qp(qp({stroke:"#ccc",pointerEvents:"none"},c),p),xe(g,!1)),{},{payload:l,payloadIndex:u,className:$e("recharts-tooltip-cursor",g.className)});return T.isValidElement(g)?T.cloneElement(g,k):T.createElement(x,k)}var jke=["item"],kke=["children","className","width","height","style","compact","title","desc"];function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vl.apply(this,arguments)}function fC(t,e){return Eke(t)||Ske(t,e)||AM(t,e)||Nke()}function Nke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ske(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Eke(t){if(Array.isArray(t))return t}function pC(t,e){if(t==null)return{};var r=Ake(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ake(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CM(n.key),n)}}function Pke(t,e,r){return e&&Tke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oke(t,e,r){return e=h0(e),Ike(t,EM()?Reflect.construct(e,r||[],h0(t).constructor):e.apply(t,r))}function Ike(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rke(t)}function Rke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EM=function(){return!!t})()}function h0(t){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h0(t)}function Dke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f2(t,e)}function f2(t,e){return f2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},f2(t,e)}function Bc(t){return Lke(t)||$ke(t)||AM(t)||Mke()}function Mke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AM(t,e){if(t){if(typeof t=="string")return p2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p2(t,e)}}function $ke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lke(t){if(Array.isArray(t))return p2(t)}function p2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mC(Object(r),!0).forEach(function(n){we(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function we(t,e,r){return e=CM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CM(t){var e=Fke(t,"string");return Vc(e)=="symbol"?e:e+""}function Fke(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uke={xAxis:["bottom","top"],yAxis:["left","right"]},Vke={width:"100%",height:"100%"},TM={x:0,y:0};function Wp(t){return t}var Bke=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},zke=function(e,r,n,s){var a=r.find(function(d){return d&&d.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return X(X(X({},s),ut(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return X(X(X({},s),ut(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return TM},Zy=function(e,r){var n=r.graphicalItems,s=r.dataStartIndex,a=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Bc(l),Bc(u)):l},[]);return o.length>0?o:e&&e.length&&se(s)&&se(a)?e.slice(s,a+1):[]};function PM(t){return t==="number"?[0,"auto"]:void 0}var m2=function(e,r,n,s){var a=e.graphicalItems,o=e.tooltipAxis,l=Zy(r,e);return n<0||!a||!a.length||n>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var g=h===void 0?l:h;f=ug(g,o.dataKey,s)}else f=h&&h[n]||l[n];return f?[].concat(Bc(c),[gD(u,f)]):c},[])},gC=function(e,r,n,s){var a=s||{x:e.chartX,y:e.chartY},o=Bke(a,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=ixe(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=m2(e,r,d,h),g=zke(n,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:g}}return null},qke=function(e,r){var n=r.axes,s=r.graphicalItems,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,g=uD(d,a);return n.reduce(function(p,x){var b,w=x.type.defaultProps!==void 0?X(X({},x.type.defaultProps),x.props):x.props,y=w.type,_=w.dataKey,S=w.allowDataOverflow,j=w.allowDuplicatedCategory,k=w.scale,N=w.ticks,E=w.includeHidden,A=w[o];if(p[A])return p;var P=Zy(e.data,{graphicalItems:s.filter(function(V){var Z,ye=o in V.props?V.props[o]:(Z=V.type.defaultProps)===null||Z===void 0?void 0:Z[o];return ye===A}),dataStartIndex:c,dataEndIndex:u}),O=P.length,I,D,B;gke(w.domain,S,y)&&(I=Cw(w.domain,null,S),g&&(y==="number"||k!=="auto")&&(B=Cd(P,_,"category")));var z=PM(y);if(!I||I.length===0){var G,Q=(G=w.domain)!==null&&G!==void 0?G:z;if(_){if(I=Cd(P,_,y),y==="category"&&g){var F=Yse(I);j&&F?(D=I,I=Zg(0,O)):j||(I=VE(Q,I,x).reduce(function(V,Z){return V.indexOf(Z)>=0?V:[].concat(Bc(V),[Z])},[]))}else if(y==="category")j?I=I.filter(function(V){return V!==""&&!Re(V)}):I=VE(Q,I,x).reduce(function(V,Z){return V.indexOf(Z)>=0||Z===""||Re(Z)?V:[].concat(Bc(V),[Z])},[]);else if(y==="number"){var H=dxe(P,s.filter(function(V){var Z,ye,Y=o in V.props?V.props[o]:(Z=V.type.defaultProps)===null||Z===void 0?void 0:Z[o],re="hide"in V.props?V.props.hide:(ye=V.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Y===A&&(E||!re)}),_,a,d);H&&(I=H)}g&&(y==="number"||k!=="auto")&&(B=Cd(P,_,"category"))}else g?I=Zg(0,O):l&&l[A]&&l[A].hasStack&&y==="number"?I=f==="expand"?[0,1]:mD(l[A].stackGroups,c,u):I=cD(P,s.filter(function(V){var Z=o in V.props?V.props[o]:V.type.defaultProps[o],ye="hide"in V.props?V.props.hide:V.type.defaultProps.hide;return Z===A&&(E||!ye)}),y,d,!0);if(y==="number")I=h2(h,I,A,a,N),Q&&(I=Cw(Q,I,S));else if(y==="category"&&Q){var $=Q,U=I.every(function(V){return $.indexOf(V)>=0});U&&(I=$)}}return X(X({},p),{},we({},A,X(X({},w),{},{axisType:a,domain:I,categoricalDomain:B,duplicateDomain:D,originalDomain:(b=w.domain)!==null&&b!==void 0?b:z,isCategorical:g,layout:d})))},{})},Wke=function(e,r){var n=r.graphicalItems,s=r.Axis,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,h=e.children,f=Zy(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),g=f.length,p=uD(d,a),x=-1;return n.reduce(function(b,w){var y=w.type.defaultProps!==void 0?X(X({},w.type.defaultProps),w.props):w.props,_=y[o],S=PM("number");if(!b[_]){x++;var j;return p?j=Zg(0,g):l&&l[_]&&l[_].hasStack?(j=mD(l[_].stackGroups,c,u),j=h2(h,j,_,a)):(j=Cw(S,cD(f,n.filter(function(k){var N,E,A=o in k.props?k.props[o]:(N=k.type.defaultProps)===null||N===void 0?void 0:N[o],P="hide"in k.props?k.props.hide:(E=k.type.defaultProps)===null||E===void 0?void 0:E.hide;return A===_&&!P}),"number",d),s.defaultProps.allowDataOverflow),j=h2(h,j,_,a)),X(X({},b),{},we({},_,X(X({axisType:a},s.defaultProps),{},{hide:!0,orientation:gn(Uke,"".concat(a,".").concat(x%2),null),domain:j,originalDomain:S,isCategorical:p,layout:d})))}return b},{})},Hke=function(e,r){var n=r.axisType,s=n===void 0?"xAxis":n,a=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,h="".concat(s,"Id"),f=yn(d,a),g={};return f&&f.length?g=qke(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(g=Wke(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),g},Kke=function(e){var r=Xa(e),n=ra(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:ej(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Fg(r,n)}},yC=function(e){var r=e.children,n=e.defaultShowTooltip,s=ln(r,Oc),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Gke=function(e){return!e||!e.length?!1:e.some(function(r){var n=la(r&&r.type);return n&&n.indexOf("Bar")>=0})},vC=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Yke=function(e,r){var n=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,h=n.children,f=n.margin||{},g=ln(h,Oc),p=ln(h,pi),x=Object.keys(c).reduce(function(j,k){var N=c[k],E=N.orientation;return!N.mirror&&!N.hide?X(X({},j),{},we({},E,j[E]+N.width)):j},{left:f.left||0,right:f.right||0}),b=Object.keys(o).reduce(function(j,k){var N=o[k],E=N.orientation;return!N.mirror&&!N.hide?X(X({},j),{},we({},E,gn(j,"".concat(E))+N.height)):j},{top:f.top||0,bottom:f.bottom||0}),w=X(X({},b),x),y=w.bottom;g&&(w.bottom+=g.props.height||Oc.defaultProps.height),p&&r&&(w=cxe(w,s,n,r));var _=u-w.left-w.right,S=d-w.top-w.bottom;return X(X({brushBottom:y},w),{},{width:Math.max(_,0),height:Math.max(S,0)})},Qke=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},$j=function(e){var r=e.chartName,n=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(w,y){var _=y.graphicalItems,S=y.stackGroups,j=y.offset,k=y.updateId,N=y.dataStartIndex,E=y.dataEndIndex,A=w.barSize,P=w.layout,O=w.barGap,I=w.barCategoryGap,D=w.maxBarSize,B=vC(P),z=B.numericAxisName,G=B.cateAxisName,Q=Gke(_),F=[];return _.forEach(function(H,$){var U=Zy(w.data,{graphicalItems:[H],dataStartIndex:N,dataEndIndex:E}),V=H.type.defaultProps!==void 0?X(X({},H.type.defaultProps),H.props):H.props,Z=V.dataKey,ye=V.maxBarSize,Y=V["".concat(z,"Id")],re=V["".concat(G,"Id")],Pe={},Ne=c.reduce(function(ms,Ls){var Ri=y["".concat(Ls.axisType,"Map")],el=V["".concat(Ls.axisType,"Id")];Ri&&Ri[el]||Ls.axisType==="zAxis"||Fo();var pu=Ri[el];return X(X({},ms),{},we(we({},Ls.axisType,pu),"".concat(Ls.axisType,"Ticks"),ra(pu)))},Pe),le=Ne[G],Se=Ne["".concat(G,"Ticks")],Oe=S&&S[Y]&&S[Y].hasStack&&bxe(H,S[Y].stackGroups),ee=la(H.type).indexOf("Bar")>=0,at=Fg(le,Se),Fe=[],xt=Q&&oxe({barSize:A,stackGroups:S,totalSize:Qke(Ne,G)});if(ee){var Nt,yr,ps=Re(ye)?D:ye,$s=(Nt=(yr=Fg(le,Se,!0))!==null&&yr!==void 0?yr:ps)!==null&&Nt!==void 0?Nt:0;Fe=lxe({barGap:O,barCategoryGap:I,bandSize:$s!==at?$s:at,sizeList:xt[re],maxBarSize:ps}),$s!==at&&(Fe=Fe.map(function(ms){return X(X({},ms),{},{position:X(X({},ms.position),{},{offset:ms.position.offset-$s/2})})}))}var Pa=H&&H.type&&H.type.getComposedData;Pa&&F.push({props:X(X({},Pa(X(X({},Ne),{},{displayedData:U,props:w,dataKey:Z,item:H,bandSize:at,barPosition:Fe,offset:j,stackedData:Oe,layout:P,dataStartIndex:N,dataEndIndex:E}))),{},we(we(we({key:H.key||"item-".concat($)},z,Ne[z]),G,Ne[G]),"animationId",k)),childIndex:lae(H,w.children),item:H})}),F},g=function(w,y){var _=w.props,S=w.dataStartIndex,j=w.dataEndIndex,k=w.updateId;if(!RS({props:_}))return null;var N=_.children,E=_.layout,A=_.stackOffset,P=_.data,O=_.reverseStackOrder,I=vC(E),D=I.numericAxisName,B=I.cateAxisName,z=yn(N,n),G=vxe(P,z,"".concat(D,"Id"),"".concat(B,"Id"),A,O),Q=c.reduce(function(V,Z){var ye="".concat(Z.axisType,"Map");return X(X({},V),{},we({},ye,Hke(_,X(X({},Z),{},{graphicalItems:z,stackGroups:Z.axisType===D&&G,dataStartIndex:S,dataEndIndex:j}))))},{}),F=Yke(X(X({},Q),{},{props:_,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(Q).forEach(function(V){Q[V]=d(_,Q[V],F,V.replace("Map",""),r)});var H=Q["".concat(B,"Map")],$=Kke(H),U=f(_,X(X({},Q),{},{dataStartIndex:S,dataEndIndex:j,updateId:k,graphicalItems:z,stackGroups:G,offset:F}));return X(X({formattedGraphicalItems:U,graphicalItems:z,offset:F,stackGroups:G},$),Q)},p=function(b){function w(y){var _,S,j;return Cke(this,w),j=Oke(this,w,[y]),we(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),we(j,"accessibilityManager",new mke),we(j,"handleLegendBBoxUpdate",function(k){if(k){var N=j.state,E=N.dataStartIndex,A=N.dataEndIndex,P=N.updateId;j.setState(X({legendBBox:k},g({props:j.props,dataStartIndex:E,dataEndIndex:A,updateId:P},X(X({},j.state),{},{legendBBox:k}))))}}),we(j,"handleReceiveSyncEvent",function(k,N,E){if(j.props.syncId===k){if(E===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(N)}}),we(j,"handleBrushChange",function(k){var N=k.startIndex,E=k.endIndex;if(N!==j.state.dataStartIndex||E!==j.state.dataEndIndex){var A=j.state.updateId;j.setState(function(){return X({dataStartIndex:N,dataEndIndex:E},g({props:j.props,dataStartIndex:N,dataEndIndex:E,updateId:A},j.state))}),j.triggerSyncEvent({dataStartIndex:N,dataEndIndex:E})}}),we(j,"handleMouseEnter",function(k){var N=j.getMouseInfo(k);if(N){var E=X(X({},N),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var A=j.props.onMouseEnter;Ae(A)&&A(E,k)}}),we(j,"triggeredAfterMouseMove",function(k){var N=j.getMouseInfo(k),E=N?X(X({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(E),j.triggerSyncEvent(E);var A=j.props.onMouseMove;Ae(A)&&A(E,k)}),we(j,"handleItemMouseEnter",function(k){j.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),we(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),we(j,"handleMouseMove",function(k){k.persist(),j.throttleTriggeredAfterMouseMove(k)}),we(j,"handleMouseLeave",function(k){j.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};j.setState(N),j.triggerSyncEvent(N);var E=j.props.onMouseLeave;Ae(E)&&E(N,k)}),we(j,"handleOuterEvent",function(k){var N=oae(k),E=gn(j.props,"".concat(N));if(N&&Ae(E)){var A,P;/.*touch.*/i.test(N)?P=j.getMouseInfo(k.changedTouches[0]):P=j.getMouseInfo(k),E((A=P)!==null&&A!==void 0?A:{},k)}}),we(j,"handleClick",function(k){var N=j.getMouseInfo(k);if(N){var E=X(X({},N),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var A=j.props.onClick;Ae(A)&&A(E,k)}}),we(j,"handleMouseDown",function(k){var N=j.props.onMouseDown;if(Ae(N)){var E=j.getMouseInfo(k);N(E,k)}}),we(j,"handleMouseUp",function(k){var N=j.props.onMouseUp;if(Ae(N)){var E=j.getMouseInfo(k);N(E,k)}}),we(j,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),we(j,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.handleMouseDown(k.changedTouches[0])}),we(j,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.handleMouseUp(k.changedTouches[0])}),we(j,"handleDoubleClick",function(k){var N=j.props.onDoubleClick;if(Ae(N)){var E=j.getMouseInfo(k);N(E,k)}}),we(j,"handleContextMenu",function(k){var N=j.props.onContextMenu;if(Ae(N)){var E=j.getMouseInfo(k);N(E,k)}}),we(j,"triggerSyncEvent",function(k){j.props.syncId!==void 0&&Jx.emit(Zx,j.props.syncId,k,j.eventEmitterSymbol)}),we(j,"applySyncEvent",function(k){var N=j.props,E=N.layout,A=N.syncMethod,P=j.state.updateId,O=k.dataStartIndex,I=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)j.setState(X({dataStartIndex:O,dataEndIndex:I},g({props:j.props,dataStartIndex:O,dataEndIndex:I,updateId:P},j.state)));else if(k.activeTooltipIndex!==void 0){var D=k.chartX,B=k.chartY,z=k.activeTooltipIndex,G=j.state,Q=G.offset,F=G.tooltipTicks;if(!Q)return;if(typeof A=="function")z=A(F,k);else if(A==="value"){z=-1;for(var H=0;H<F.length;H++)if(F[H].value===k.activeLabel){z=H;break}}var $=X(X({},Q),{},{x:Q.left,y:Q.top}),U=Math.min(D,$.x+$.width),V=Math.min(B,$.y+$.height),Z=F[z]&&F[z].value,ye=m2(j.state,j.props.data,z),Y=F[z]?{x:E==="horizontal"?F[z].coordinate:U,y:E==="horizontal"?V:F[z].coordinate}:TM;j.setState(X(X({},k),{},{activeLabel:Z,activeCoordinate:Y,activePayload:ye,activeTooltipIndex:z}))}else j.setState(k)}),we(j,"renderCursor",function(k){var N,E=j.state,A=E.isTooltipActive,P=E.activeCoordinate,O=E.activePayload,I=E.offset,D=E.activeTooltipIndex,B=E.tooltipAxisBandSize,z=j.getTooltipEventType(),G=(N=k.props.active)!==null&&N!==void 0?N:A,Q=j.props.layout,F=k.key||"_recharts-cursor";return L.createElement(_ke,{key:F,activeCoordinate:P,activePayload:O,activeTooltipIndex:D,chartName:r,element:k,isActive:G,layout:Q,offset:I,tooltipAxisBandSize:B,tooltipEventType:z})}),we(j,"renderPolarAxis",function(k,N,E){var A=gn(k,"type.axisType"),P=gn(j.state,"".concat(A,"Map")),O=k.type.defaultProps,I=O!==void 0?X(X({},O),k.props):k.props,D=P&&P[I["".concat(A,"Id")]];return T.cloneElement(k,X(X({},D),{},{className:$e(A,D.className),key:k.key||"".concat(N,"-").concat(E),ticks:ra(D,!0)}))}),we(j,"renderPolarGrid",function(k){var N=k.props,E=N.radialLines,A=N.polarAngles,P=N.polarRadius,O=j.state,I=O.radiusAxisMap,D=O.angleAxisMap,B=Xa(I),z=Xa(D),G=z.cx,Q=z.cy,F=z.innerRadius,H=z.outerRadius;return T.cloneElement(k,{polarAngles:Array.isArray(A)?A:ra(z,!0).map(function($){return $.coordinate}),polarRadius:Array.isArray(P)?P:ra(B,!0).map(function($){return $.coordinate}),cx:G,cy:Q,innerRadius:F,outerRadius:H,key:k.key||"polar-grid",radialLines:E})}),we(j,"renderLegend",function(){var k=j.state.formattedGraphicalItems,N=j.props,E=N.children,A=N.width,P=N.height,O=j.props.margin||{},I=A-(O.left||0)-(O.right||0),D=oD({children:E,formattedGraphicalItems:k,legendWidth:I,legendContent:u});if(!D)return null;var B=D.item,z=pC(D,jke);return T.cloneElement(B,X(X({},z),{},{chartWidth:A,chartHeight:P,margin:O,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),we(j,"renderTooltip",function(){var k,N=j.props,E=N.children,A=N.accessibilityLayer,P=ln(E,$r);if(!P)return null;var O=j.state,I=O.isTooltipActive,D=O.activeCoordinate,B=O.activePayload,z=O.activeLabel,G=O.offset,Q=(k=P.props.active)!==null&&k!==void 0?k:I;return T.cloneElement(P,{viewBox:X(X({},G),{},{x:G.left,y:G.top}),active:Q,label:z,payload:Q?B:[],coordinate:D,accessibilityLayer:A})}),we(j,"renderBrush",function(k){var N=j.props,E=N.margin,A=N.data,P=j.state,O=P.offset,I=P.dataStartIndex,D=P.dataEndIndex,B=P.updateId;return T.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Up(j.handleBrushChange,k.props.onChange),data:A,x:se(k.props.x)?k.props.x:O.left,y:se(k.props.y)?k.props.y:O.top+O.height+O.brushBottom-(E.bottom||0),width:se(k.props.width)?k.props.width:O.width,startIndex:I,endIndex:D,updateId:"brush-".concat(B)})}),we(j,"renderReferenceElement",function(k,N,E){if(!k)return null;var A=j,P=A.clipPathId,O=j.state,I=O.xAxisMap,D=O.yAxisMap,B=O.offset,z=k.type.defaultProps||{},G=k.props,Q=G.xAxisId,F=Q===void 0?z.xAxisId:Q,H=G.yAxisId,$=H===void 0?z.yAxisId:H;return T.cloneElement(k,{key:k.key||"".concat(N,"-").concat(E),xAxis:I[F],yAxis:D[$],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:P})}),we(j,"renderActivePoints",function(k){var N=k.item,E=k.activePoint,A=k.basePoint,P=k.childIndex,O=k.isRange,I=[],D=N.props.key,B=N.item.type.defaultProps!==void 0?X(X({},N.item.type.defaultProps),N.item.props):N.item.props,z=B.activeDot,G=B.dataKey,Q=X(X({index:P,dataKey:G,cx:E.x,cy:E.y,r:4,fill:Sj(N.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},xe(z,!1)),dg(z));return I.push(w.renderActiveDot(z,Q,"".concat(D,"-activePoint-").concat(P))),A?I.push(w.renderActiveDot(z,X(X({},Q),{},{cx:A.x,cy:A.y}),"".concat(D,"-basePoint-").concat(P))):O&&I.push(null),I}),we(j,"renderGraphicChild",function(k,N,E){var A=j.filterFormatItem(k,N,E);if(!A)return null;var P=j.getTooltipEventType(),O=j.state,I=O.isTooltipActive,D=O.tooltipAxis,B=O.activeTooltipIndex,z=O.activeLabel,G=j.props.children,Q=ln(G,$r),F=A.props,H=F.points,$=F.isRange,U=F.baseLine,V=A.item.type.defaultProps!==void 0?X(X({},A.item.type.defaultProps),A.item.props):A.item.props,Z=V.activeDot,ye=V.hide,Y=V.activeBar,re=V.activeShape,Pe=!!(!ye&&I&&Q&&(Z||Y||re)),Ne={};P!=="axis"&&Q&&Q.props.trigger==="click"?Ne={onClick:Up(j.handleItemMouseEnter,k.props.onClick)}:P!=="axis"&&(Ne={onMouseLeave:Up(j.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Up(j.handleItemMouseEnter,k.props.onMouseEnter)});var le=T.cloneElement(k,X(X({},A.props),Ne));function Se(Ls){return typeof D.dataKey=="function"?D.dataKey(Ls.payload):null}if(Pe)if(B>=0){var Oe,ee;if(D.dataKey&&!D.allowDuplicatedCategory){var at=typeof D.dataKey=="function"?Se:"payload.".concat(D.dataKey.toString());Oe=ug(H,at,z),ee=$&&U&&ug(U,at,z)}else Oe=H==null?void 0:H[B],ee=$&&U&&U[B];if(re||Y){var Fe=k.props.activeIndex!==void 0?k.props.activeIndex:B;return[T.cloneElement(k,X(X(X({},A.props),Ne),{},{activeIndex:Fe})),null,null]}if(!Re(Oe))return[le].concat(Bc(j.renderActivePoints({item:A,activePoint:Oe,basePoint:ee,childIndex:B,isRange:$})))}else{var xt,Nt=(xt=j.getItemByXY(j.state.activeCoordinate))!==null&&xt!==void 0?xt:{graphicalItem:le},yr=Nt.graphicalItem,ps=yr.item,$s=ps===void 0?k:ps,Pa=yr.childIndex,ms=X(X(X({},A.props),Ne),{},{activeIndex:Pa});return[T.cloneElement($s,ms),null,null]}return $?[le,null,null]:[le,null]}),we(j,"renderCustomized",function(k,N,E){return T.cloneElement(k,X(X({key:"recharts-customized-".concat(E)},j.props),j.state))}),we(j,"renderMap",{CartesianGrid:{handler:Wp,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Wp},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Wp},YAxis:{handler:Wp},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((_=y.id)!==null&&_!==void 0?_:iu("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=oR(j.triggeredAfterMouseMove,(S=y.throttleDelay)!==null&&S!==void 0?S:1e3/60),j.state={},j}return Dke(w,b),Pke(w,[{key:"componentDidMount",value:function(){var _,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,S=_.children,j=_.data,k=_.height,N=_.layout,E=ln(S,$r);if(E){var A=E.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,O=m2(this.state,j,A,P),I=this.state.tooltipTicks[A].coordinate,D=(this.state.offset.top+k)/2,B=N==="horizontal",z=B?{x:I,y:D}:{y:I,x:D},G=this.state.formattedGraphicalItems.find(function(F){var H=F.item;return H.type.name==="Scatter"});G&&(z=X(X({},z),G.props.points[A].tooltipPosition),O=G.props.points[A].tooltipPayload);var Q={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:P,activePayload:O,activeCoordinate:z};this.setState(Q),this.renderCursor(E),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var j,k;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(_){q1([ln(_.children,$r)],[ln(this.props.children,$r)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=ln(this.props.children,$r);if(_&&typeof _.props.shared=="boolean"){var S=_.props.shared?"axis":"item";return l.indexOf(S)>=0?S:a}return a}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var S=this.container,j=S.getBoundingClientRect(),k=Rme(j),N={chartX:Math.round(_.pageX-k.left),chartY:Math.round(_.pageY-k.top)},E=j.width/S.offsetWidth||1,A=this.inRange(N.chartX,N.chartY,E);if(!A)return null;var P=this.state,O=P.xAxisMap,I=P.yAxisMap,D=this.getTooltipEventType(),B=gC(this.state,this.props.data,this.props.layout,A);if(D!=="axis"&&O&&I){var z=Xa(O).scale,G=Xa(I).scale,Q=z&&z.invert?z.invert(N.chartX):null,F=G&&G.invert?G.invert(N.chartY):null;return X(X({},N),{},{xValue:Q,yValue:F},B)}return B?X(X({},N),B):null}},{key:"inRange",value:function(_,S){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,N=_/j,E=S/j;if(k==="horizontal"||k==="vertical"){var A=this.state.offset,P=N>=A.left&&N<=A.left+A.width&&E>=A.top&&E<=A.top+A.height;return P?{x:N,y:E}:null}var O=this.state,I=O.angleAxisMap,D=O.radiusAxisMap;if(I&&D){var B=Xa(I);return qE({x:N,y:E},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,S=this.getTooltipEventType(),j=ln(_,$r),k={};j&&S==="axis"&&(j.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=dg(this.props,this.handleOuterEvent);return X(X({},N),k)}},{key:"addListener",value:function(){Jx.on(Zx,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Jx.removeListener(Zx,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,S,j){for(var k=this.state.formattedGraphicalItems,N=0,E=k.length;N<E;N++){var A=k[N];if(A.item===_||A.props.key===_.key||S===la(A.item.type)&&j===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,S=this.state.offset,j=S.left,k=S.top,N=S.height,E=S.width;return L.createElement("defs",null,L.createElement("clipPath",{id:_},L.createElement("rect",{x:j,y:k,height:N,width:E})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(S,j){var k=fC(j,2),N=k[0],E=k[1];return X(X({},S),{},we({},N,E.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(S,j){var k=fC(j,2),N=k[0],E=k[1];return X(X({},S),{},we({},N,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[_])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(_){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[_])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(_){var S=this.state,j=S.formattedGraphicalItems,k=S.activeItem;if(j&&j.length)for(var N=0,E=j.length;N<E;N++){var A=j[N],P=A.props,O=A.item,I=O.type.defaultProps!==void 0?X(X({},O.type.defaultProps),O.props):O.props,D=la(O.type);if(D==="Bar"){var B=(P.data||[]).find(function(F){return bwe(_,F)});if(B)return{graphicalItem:A,payload:B}}else if(D==="RadialBar"){var z=(P.data||[]).find(function(F){return qE(_,F)});if(z)return{graphicalItem:A,payload:z}}else if(Hy(A,k)||Ky(A,k)||Hh(A,k)){var G=l_e({graphicalItem:A,activeTooltipItem:k,itemData:I.data}),Q=I.activeIndex===void 0?G:I.activeIndex;return{graphicalItem:X(X({},A),{},{childIndex:Q}),payload:Hh(A,k)?I.data[G]:A.props.data[G]}}}return null}},{key:"render",value:function(){var _=this;if(!RS(this))return null;var S=this.props,j=S.children,k=S.className,N=S.width,E=S.height,A=S.style,P=S.compact,O=S.title,I=S.desc,D=pC(S,kke),B=xe(D,!1);if(P)return L.createElement(YA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(H1,Vl({},B,{width:N,height:E,title:O,desc:I}),this.renderClipPath(),MS(j,this.renderMap)));if(this.props.accessibilityLayer){var z,G;B.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,B.role=(G=this.props.role)!==null&&G!==void 0?G:"application",B.onKeyDown=function(F){_.accessibilityManager.keyboardEvent(F)},B.onFocus=function(){_.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return L.createElement(YA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Vl({className:$e("recharts-wrapper",k),style:X({position:"relative",cursor:"default",width:N,height:E},A)},Q,{ref:function(H){_.container=H}}),L.createElement(H1,Vl({},B,{width:N,height:E,title:O,desc:I,style:Vke}),this.renderClipPath(),MS(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(T.Component);we(p,"displayName",r),we(p,"defaultProps",X({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),we(p,"getDerivedStateFromProps",function(b,w){var y=b.dataKey,_=b.data,S=b.children,j=b.width,k=b.height,N=b.layout,E=b.stackOffset,A=b.margin,P=w.dataStartIndex,O=w.dataEndIndex;if(w.updateId===void 0){var I=yC(b);return X(X(X({},I),{},{updateId:0},g(X(X({props:b},I),{},{updateId:0}),w)),{},{prevDataKey:y,prevData:_,prevWidth:j,prevHeight:k,prevLayout:N,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(y!==w.prevDataKey||_!==w.prevData||j!==w.prevWidth||k!==w.prevHeight||N!==w.prevLayout||E!==w.prevStackOffset||!Zl(A,w.prevMargin)){var D=yC(b),B={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},z=X(X({},gC(w,_,N)),{},{updateId:w.updateId+1}),G=X(X(X({},D),B),z);return X(X(X({},G),g(X({props:b},G),w)),{},{prevDataKey:y,prevData:_,prevWidth:j,prevHeight:k,prevLayout:N,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(!q1(S,w.prevChildren)){var Q,F,H,$,U=ln(S,Oc),V=U&&(Q=(F=U.props)===null||F===void 0?void 0:F.startIndex)!==null&&Q!==void 0?Q:P,Z=U&&(H=($=U.props)===null||$===void 0?void 0:$.endIndex)!==null&&H!==void 0?H:O,ye=V!==P||Z!==O,Y=!Re(_),re=Y&&!ye?w.updateId:w.updateId+1;return X(X({updateId:re},g(X(X({props:b},w),{},{updateId:re,dataStartIndex:V,dataEndIndex:Z}),w)),{},{prevChildren:S,dataStartIndex:V,dataEndIndex:Z})}return null}),we(p,"renderActiveDot",function(b,w,y){var _;return T.isValidElement(b)?_=T.cloneElement(b,w):Ae(b)?_=b(w):_=L.createElement(Vy,w),L.createElement(Ke,{className:"recharts-active-dot",key:y},_)});var x=T.forwardRef(function(w,y){return L.createElement(p,Vl({},w,{ref:y}))});return x.displayName=p.displayName,x},Lj=$j({chartName:"LineChart",GraphicalChild:Zo,axisComponents:[{axisType:"xAxis",AxisComp:_i},{axisType:"yAxis",AxisComp:ji}],formatAxisMap:QD}),Xke=$j({chartName:"BarChart",GraphicalChild:wi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:_i},{axisType:"yAxis",AxisComp:ji}],formatAxisMap:QD}),OM=$j({chartName:"PieChart",GraphicalChild:Ms,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Wy},{axisType:"radiusAxis",AxisComp:zy}],formatAxisMap:Txe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Jke=()=>{const[t,e]=T.useState(!0),[r,n]=T.useState({totalRevenue:0,platformCommission:0,vendorEarnings:0,pendingPayouts:0,completedPayouts:0,totalOrders:0}),[s,a]=T.useState([]),[o,l]=T.useState([]),c=["#10b981","#f59e0b","#3b82f6","#ef4444"],u=.1;T.useEffect(()=>{d()},[]);const d=async()=>{try{const f=(await me(ae(q,"orders"))).docs.map(k=>k.data()),p=(await me(ae(q,"vendorPayouts"))).docs.map(k=>k.data()),x=f.reduce((k,N)=>k+(N.total||0),0),b=x*u,w=x-b,y=p.filter(k=>k.status==="pending").reduce((k,N)=>k+(N.amount||0),0),_=p.filter(k=>k.status==="completed").reduce((k,N)=>k+(N.amount||0),0);n({totalRevenue:x,platformCommission:b,vendorEarnings:w,pendingPayouts:y,completedPayouts:_,totalOrders:f.length});const S={};f.forEach(k=>{const N=new Date(k.createdAt).toLocaleDateString("en-US",{month:"short"});S[N]=(S[N]||0)+k.total}),a(Object.entries(S).map(([k,N])=>({month:k,revenue:N})));const j={pending:p.filter(k=>k.status==="pending").length,processing:p.filter(k=>k.status==="processing").length,completed:p.filter(k=>k.status==="completed").length,rejected:p.filter(k=>k.status==="rejected").length};l(Object.entries(j).map(([k,N])=>({name:k.charAt(0).toUpperCase()+k.slice(1),value:N})))}catch(h){console.error("Error fetching financial data:",h)}finally{e(!1)}};return t?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Financial Overview"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Platform Revenue"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",r.totalRevenue.toLocaleString()]}),i.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[r.totalOrders," orders"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Platform Commission (10%)"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",r.platformCommission.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Your earnings"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Vendor Earnings"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",r.vendorEarnings.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"90% to vendors"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mb-1",children:"Pending Payouts"}),i.jsxs("p",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:["",r.pendingPayouts.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg shadow p-6",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Completed Payouts"}),i.jsxs("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:["",r.completedPayouts.toLocaleString()]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Revenue Trend"}),i.jsx(ec,{width:"100%",height:300,children:i.jsxs(Lj,{data:s,children:[i.jsx(Xh,{strokeDasharray:"3 3"}),i.jsx(_i,{dataKey:"month"}),i.jsx(ji,{}),i.jsx($r,{}),i.jsx(Zo,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payout Status"}),i.jsx(ec,{width:"100%",height:300,children:i.jsxs(OM,{children:[i.jsx(Ms,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:h,percent:f})=>`${h}: ${(f*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:o.map((h,f)=>i.jsx(Cf,{fill:c[f%c.length]},`cell-${f}`))}),i.jsx($r,{})]})})]})]})]})},Zke=()=>{const[t,e]=T.useState("banners"),[r,n]=T.useState([]),[s,a]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!0),[d,h]=T.useState(!1),[f,g]=T.useState(null),[p,x]=T.useState({title:"",subtitle:"",imageUrl:"",link:"",active:!0,order:0}),[b,w]=T.useState({title:"",slug:"",content:"",published:!0}),[y,_]=T.useState({question:"",answer:"",category:"general",order:0});T.useEffect(()=>{S()},[]);const S=async()=>{try{const O=await me(ae(q,"banners"));n(O.docs.map(B=>({id:B.id,...B.data()})));const I=await me(ae(q,"pages"));a(I.docs.map(B=>({id:B.id,...B.data()})));const D=await me(ae(q,"faqs"));l(D.docs.map(B=>({id:B.id,...B.data()})))}catch(O){console.error("Error fetching content:",O)}finally{u(!1)}},j=async()=>{try{f?(await ke(ie(q,"banners",f.id),{...p,updatedAt:new Date().toISOString()}),alert("Banner updated successfully")):(await Mt(ae(q,"banners"),{...p,createdAt:new Date().toISOString()}),alert("Banner created successfully")),h(!1),x({title:"",subtitle:"",imageUrl:"",link:"",active:!0,order:0}),g(null),S()}catch{alert("Failed to save banner")}},k=async O=>{if(window.confirm("Delete this banner?"))try{await ns(ie(q,"banners",O)),alert("Banner deleted"),S()}catch{alert("Failed to delete banner")}},N=async()=>{try{f?(await ke(ie(q,"pages",f.id),{...b,updatedAt:new Date().toISOString()}),alert("Page updated successfully")):(await Mt(ae(q,"pages"),{...b,createdAt:new Date().toISOString()}),alert("Page created successfully")),h(!1),w({title:"",slug:"",content:"",published:!0}),g(null),S()}catch{alert("Failed to save page")}},E=async O=>{if(window.confirm("Delete this page?"))try{await ns(ie(q,"pages",O)),alert("Page deleted"),S()}catch{alert("Failed to delete page")}},A=async()=>{try{f?(await ke(ie(q,"faqs",f.id),{...y,updatedAt:new Date().toISOString()}),alert("FAQ updated successfully")):(await Mt(ae(q,"faqs"),{...y,createdAt:new Date().toISOString()}),alert("FAQ created successfully")),h(!1),_({question:"",answer:"",category:"general",order:0}),g(null),S()}catch{alert("Failed to save FAQ")}},P=async O=>{if(window.confirm("Delete this FAQ?"))try{await ns(ie(q,"faqs",O)),alert("FAQ deleted"),S()}catch{alert("Failed to delete FAQ")}};return c?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Content Management"}),i.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[i.jsxs("button",{onClick:()=>e("banners"),className:`px-6 py-3 font-medium ${t==="banners"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Banners (",r.length,")"]}),i.jsxs("button",{onClick:()=>e("pages"),className:`px-6 py-3 font-medium ${t==="pages"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Pages (",s.length,")"]}),i.jsxs("button",{onClick:()=>e("faqs"),className:`px-6 py-3 font-medium ${t==="faqs"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["FAQs (",o.length,")"]})]}),t==="banners"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>{g(null),x({title:"",subtitle:"",imageUrl:"",link:"",active:!0,order:0}),h(!0)},className:"mb-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add New Banner"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(O=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[O.imageUrl&&i.jsx("img",{src:O.imageUrl,alt:O.title,className:"w-full h-32 object-cover rounded mb-3"}),i.jsx("h3",{className:"font-bold mb-1",children:O.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.subtitle}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded ${O.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.active?"Active":"Inactive"}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Order: ",O.order]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{g(O),x(O),h(!0)},className:"flex-1 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),i.jsx("button",{onClick:()=>k(O.id),className:"flex-1 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]},O.id))})]}),t==="pages"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>{g(null),w({title:"",slug:"",content:"",published:!0}),h(!0)},className:"mb-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add New Page"}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Title"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Slug"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:s.map(O=>i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4 font-medium",children:O.title}),i.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:["/pages/",O.slug]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs ${O.published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.published?"Published":"Draft"})}),i.jsxs("td",{className:"py-3 px-4 space-x-2",children:[i.jsx("button",{onClick:()=>{g(O),w(O),h(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),i.jsx("button",{onClick:()=>E(O.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]},O.id))})]})})]}),t==="faqs"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>{g(null),_({question:"",answer:"",category:"general",order:0}),h(!0)},className:"mb-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add New FAQ"}),i.jsx("div",{className:"space-y-4",children:o.map(O=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800 mr-2",children:O.category}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Order: ",O.order]})]}),i.jsxs("div",{className:"space-x-2",children:[i.jsx("button",{onClick:()=>{g(O),_(O),h(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),i.jsx("button",{onClick:()=>P(O.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]}),i.jsx("h3",{className:"font-bold mb-2",children:O.question}),i.jsx("p",{className:"text-sm text-gray-600",children:O.answer})]},O.id))})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:[f?"Edit":"Add New"," ",t.slice(0,-1)]}),i.jsx("button",{onClick:()=>h(!1),className:"text-2xl",children:""})]}),t==="banners"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),i.jsx("input",{type:"text",value:p.title,onChange:O=>x({...p,title:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subtitle"}),i.jsx("input",{type:"text",value:p.subtitle,onChange:O=>x({...p,subtitle:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Image URL"}),i.jsx("input",{type:"text",value:p.imageUrl,onChange:O=>x({...p,imageUrl:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Link"}),i.jsx("input",{type:"text",value:p.link,onChange:O=>x({...p,link:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order"}),i.jsx("input",{type:"number",value:p.order,onChange:O=>x({...p,order:parseInt(O.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:p.active,onChange:O=>x({...p,active:O.target.checked})}),i.jsx("label",{className:"text-sm font-medium",children:"Active"})]}),i.jsx("button",{onClick:j,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Banner"})]}),t==="pages"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),i.jsx("input",{type:"text",value:b.title,onChange:O=>w({...b,title:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slug (URL)"}),i.jsx("input",{type:"text",value:b.slug,onChange:O=>w({...b,slug:O.target.value}),placeholder:"about-us",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content"}),i.jsx("textarea",{value:b.content,onChange:O=>w({...b,content:O.target.value}),rows:"10",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:b.published,onChange:O=>w({...b,published:O.target.checked})}),i.jsx("label",{className:"text-sm font-medium",children:"Published"})]}),i.jsx("button",{onClick:N,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Page"})]}),t==="faqs"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Question"}),i.jsx("input",{type:"text",value:y.question,onChange:O=>_({...y,question:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Answer"}),i.jsx("textarea",{value:y.answer,onChange:O=>_({...y,answer:O.target.value}),rows:"5",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),i.jsxs("select",{value:y.category,onChange:O=>_({...y,category:O.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"general",children:"General"}),i.jsx("option",{value:"orders",children:"Orders"}),i.jsx("option",{value:"payments",children:"Payments"}),i.jsx("option",{value:"shipping",children:"Shipping"}),i.jsx("option",{value:"returns",children:"Returns"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order"}),i.jsx("input",{type:"number",value:y.order,onChange:O=>_({...y,order:parseInt(O.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsx("button",{onClick:A,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save FAQ"})]})]})})]})},IM=({size:t="md",fullScreen:e=!1,text:r="Loading..."})=>{const n={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-24 w-24"},s=i.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[i.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${n[t]}`}),r&&i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:r})]});return e?i.jsx("div",{className:"fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50",children:s}):s},eNe=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all");T.useEffect(()=>{o()},[]);const o=async()=>{try{const c=Ce(ae(q,"auditLogs"),en("timestamp","desc"),yc(100)),d=(await me(c)).docs.map(h=>({id:h.id,...h.data()}));e(d)}catch(c){console.error("Error fetching logs:",c)}finally{n(!1)}},l=s==="all"?t:t.filter(c=>c.action===s);return r?i.jsx(IM,{}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Audit Logs"}),i.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["all","user_created","product_approved","order_updated","vendor_approved","settings_changed"].map(c=>i.jsx("button",{onClick:()=>a(c),className:`px-4 py-2 rounded-lg ${s===c?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:c.replace("_"," ").toUpperCase()},c))}),l.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"No audit logs found"}):i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Timestamp"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Details"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(c=>{var u;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(u=c.timestamp)==null?void 0:u.toDate().toLocaleString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:c.action})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.userName||c.userId}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.details})]},c.id)})})]})})]})},tNe=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all"),[o,l]=T.useState(null),[c,u]=T.useState(!1),[d,h]=T.useState("");T.useEffect(()=>{f()},[]);const f=async()=>{try{const y=await me(ae(q,"reviews")),_=await Promise.all(y.docs.map(async S=>{const j={id:S.id,...S.data()},k=await me(Ce(ae(q,"products"),je("__name__","==",j.productId)));return k.empty||(j.productName=k.docs[0].data().name),j}));_.sort((S,j)=>new Date(j.createdAt)-new Date(S.createdAt)),e(_)}catch(y){console.error("Error fetching reviews:",y)}finally{n(!1)}},g=async(y,_)=>{try{await uee(y,_,d),alert(`Review ${_} successfully!`),u(!1),h(""),f()}catch{alert("Failed to moderate review")}},p=async(y,_)=>{if(window.confirm("Are you sure you want to delete this review permanently?"))try{await dee(y,_),alert("Review deleted successfully!"),f()}catch{alert("Failed to delete review")}},x=t.filter(y=>s==="all"?!0:s==="reported"?y.reported:y.status===s),b={total:t.length,pending:t.filter(y=>y.status==="pending").length,approved:t.filter(y=>y.status==="approved").length,rejected:t.filter(y=>y.status==="rejected").length,reported:t.filter(y=>y.reported).length},w=y=>i.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(_=>i.jsx("span",{className:`text-lg ${_<=y?"text-yellow-400":"text-gray-300"}`,children:""},_))});return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Review Moderation"}),i.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Reviews"}),i.jsx("p",{className:"text-2xl font-bold",children:b.total})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-yellow-700",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:b.pending})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700",children:"Approved"}),i.jsx("p",{className:"text-2xl font-bold text-green-800",children:b.approved})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-red-700",children:"Rejected"}),i.jsx("p",{className:"text-2xl font-bold text-red-800",children:b.rejected})]}),i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-orange-700",children:"Reported"}),i.jsx("p",{className:"text-2xl font-bold text-orange-800",children:b.reported})]})]}),i.jsxs("select",{value:s,onChange:y=>a(y.target.value),className:"mb-6 px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Reviews"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"}),i.jsx("option",{value:"reported",children:"Reported"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Product"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Reviewer"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Rating"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Review"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:x.map(y=>i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("p",{className:"font-medium",children:y.productName||"Unknown"})}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:y.userName}),y.verified&&i.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Verified"})]}),i.jsx("td",{className:"py-3 px-4",children:w(y.rating)}),i.jsxs("td",{className:"py-3 px-4 max-w-xs",children:[i.jsx("p",{className:"font-semibold text-sm",children:y.title}),i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:y.comment})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(y.createdAt).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs block w-fit ${y.status==="approved"?"bg-green-100 text-green-800":y.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:y.status}),y.reported&&i.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs block w-fit",children:"Reported"})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(y),u(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:"Review"}),i.jsx("button",{onClick:()=>p(y.id,y.productId),className:"px-3 py-1 bg-red-600 text-white rounded text-sm",children:"Delete"})]})})]},y.id))})]}),x.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600",children:"No reviews found"})})]}),c&&o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Review Details"}),i.jsx("button",{onClick:()=>u(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Product"}),i.jsx("p",{className:"font-semibold",children:o.productName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Reviewer"}),i.jsx("p",{className:"font-semibold",children:o.userName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Rating"}),w(o.rating)]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Title"}),i.jsx("p",{className:"font-semibold",children:o.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Review"}),i.jsx("p",{children:o.comment})]}),o.images&&o.images.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Images"}),i.jsx("div",{className:"flex gap-2",children:o.images.map((y,_)=>i.jsx("img",{src:y,alt:`Review ${_+1}`,className:"w-24 h-24 object-cover rounded cursor-pointer",onClick:()=>window.open(y,"_blank")},_))})]}),o.reported&&i.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[i.jsx("p",{className:"text-sm font-semibold text-orange-700",children:"Report Reason:"}),i.jsx("p",{className:"text-sm",children:o.reportReason})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Moderator Notes"}),i.jsx("textarea",{value:d,onChange:y=>h(y.target.value),rows:"3",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"Add notes about your decision..."})]}),o.status!=="approved"&&i.jsx("button",{onClick:()=>g(o.id,"approved"),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg mb-2",children:"Approve Review"}),o.status!=="rejected"&&i.jsx("button",{onClick:()=>g(o.id,"rejected"),className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg",children:"Reject Review"})]})]})})]})},rNe=()=>{const[t,e]=T.useState("general"),[r,n]=T.useState(!0),[s,a]=T.useState(!1),[o,l]=T.useState({siteName:"Abu Mafhal Marketplace",siteEmail:"info@abumafhal.com",sitePhone:"+234 XXX XXX XXXX",currency:"NGN",timezone:"Africa/Lagos",maintenanceMode:!1}),[c,u]=T.useState({platformCommission:10,minimumPayout:5e3,payoutSchedule:"weekly",taxRate:0,enableCOD:!0,enableCardPayment:!0,enableBankTransfer:!0}),[d,h]=T.useState({defaultShippingFee:1e3,freeShippingThreshold:1e4,enableLocalPickup:!0,maxDeliveryDays:7}),[f,g]=T.useState({emailNotifications:!0,smsNotifications:!1,orderNotifications:!0,productNotifications:!0,paymentNotifications:!0,adminEmail:"admin@abumafhal.com"}),[p,x]=T.useState({requireEmailVerification:!0,requirePhoneVerification:!1,enableTwoFactor:!1,sessionTimeout:3600,maxLoginAttempts:5});T.useEffect(()=>{b()},[]);const b=async()=>{try{const y=await Pt(ie(q,"settings","platform"));if(y.exists()){const _=y.data();_.general&&l(_.general),_.payment&&u(_.payment),_.shipping&&h(_.shipping),_.notification&&g(_.notification),_.security&&x(_.security)}}catch(y){console.error("Error fetching settings:",y)}finally{n(!1)}},w=async(y,_)=>{a(!0);try{await ke(ie(q,"settings","platform"),{[y]:_,updatedAt:new Date().toISOString()}),alert("Settings saved successfully")}catch(S){console.error("Error saving settings:",S),alert("Failed to save settings. Creating new settings document...");try{await ke(ie(q,"settings","platform"),{[y]:_,createdAt:new Date().toISOString()}),alert("Settings saved successfully")}catch{alert("Failed to save settings")}}finally{a(!1)}};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Platform Settings"}),i.jsx("div",{className:"flex gap-2 mb-6 border-b overflow-x-auto",children:["general","payment","shipping","notifications","security"].map(y=>i.jsx("button",{onClick:()=>e(y),className:`px-6 py-3 font-medium capitalize whitespace-nowrap ${t===y?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:y},y))}),t==="general"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"General Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site Name"}),i.jsx("input",{type:"text",value:o.siteName,onChange:y=>l({...o,siteName:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Email"}),i.jsx("input",{type:"email",value:o.siteEmail,onChange:y=>l({...o,siteEmail:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Phone"}),i.jsx("input",{type:"text",value:o.sitePhone,onChange:y=>l({...o,sitePhone:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),i.jsxs("select",{value:o.currency,onChange:y=>l({...o,currency:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"NGN",children:"Nigerian Naira ()"}),i.jsx("option",{value:"USD",children:"US Dollar ($)"}),i.jsx("option",{value:"EUR",children:"Euro ()"}),i.jsx("option",{value:"GBP",children:"British Pound ()"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),i.jsxs("select",{value:o.timezone,onChange:y=>l({...o,timezone:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"Africa/Lagos",children:"Africa/Lagos (WAT)"}),i.jsx("option",{value:"UTC",children:"UTC"}),i.jsx("option",{value:"America/New_York",children:"America/New York (EST)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[i.jsx("input",{type:"checkbox",checked:o.maintenanceMode,onChange:y=>l({...o,maintenanceMode:y.target.checked}),className:"w-5 h-5"}),i.jsxs("div",{children:[i.jsx("label",{className:"font-medium",children:"Maintenance Mode"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Enable to temporarily disable the site for maintenance"})]})]}),i.jsx("button",{onClick:()=>w("general",o),disabled:s,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save General Settings"})]})]}),t==="payment"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Platform Commission (%)"}),i.jsx("input",{type:"number",value:c.platformCommission,onChange:y=>u({...c,platformCommission:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0",max:"100"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Percentage taken from each sale"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Payout Amount ()"}),i.jsx("input",{type:"number",value:c.minimumPayout,onChange:y=>u({...c,minimumPayout:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payout Schedule"}),i.jsxs("select",{value:c.payoutSchedule,onChange:y=>u({...c,payoutSchedule:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"biweekly",children:"Bi-weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Rate (%)"}),i.jsx("input",{type:"number",value:c.taxRate,onChange:y=>u({...c,taxRate:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0",max:"100"})]}),i.jsxs("div",{className:"space-y-3 border-t pt-4",children:[i.jsx("p",{className:"font-medium",children:"Payment Methods"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:c.enableCOD,onChange:y=>u({...c,enableCOD:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Enable Cash on Delivery"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:c.enableCardPayment,onChange:y=>u({...c,enableCardPayment:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Enable Card Payment"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:c.enableBankTransfer,onChange:y=>u({...c,enableBankTransfer:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Enable Bank Transfer"})]})]}),i.jsx("button",{onClick:()=>w("payment",c),disabled:s,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Payment Settings"})]})]}),t==="shipping"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Shipping Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Shipping Fee ()"}),i.jsx("input",{type:"number",value:d.defaultShippingFee,onChange:y=>h({...d,defaultShippingFee:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Free Shipping Threshold ()"}),i.jsx("input",{type:"number",value:d.freeShippingThreshold,onChange:y=>h({...d,freeShippingThreshold:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Orders above this amount get free shipping"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Maximum Delivery Days"}),i.jsx("input",{type:"number",value:d.maxDeliveryDays,onChange:y=>h({...d,maxDeliveryDays:parseInt(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:d.enableLocalPickup,onChange:y=>h({...d,enableLocalPickup:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Enable Local Pickup Option"})]}),i.jsx("button",{onClick:()=>w("shipping",d),disabled:s,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Shipping Settings"})]})]}),t==="notifications"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Admin Email"}),i.jsx("input",{type:"email",value:f.adminEmail,onChange:y=>g({...f,adminEmail:y.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"space-y-3 border-t pt-4",children:[i.jsx("p",{className:"font-medium",children:"Notification Channels"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.emailNotifications,onChange:y=>g({...f,emailNotifications:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Email Notifications"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.smsNotifications,onChange:y=>g({...f,smsNotifications:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"SMS Notifications"})]})]}),i.jsxs("div",{className:"space-y-3 border-t pt-4",children:[i.jsx("p",{className:"font-medium",children:"Notification Types"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.orderNotifications,onChange:y=>g({...f,orderNotifications:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Order Notifications"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.productNotifications,onChange:y=>g({...f,productNotifications:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Product Notifications"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.paymentNotifications,onChange:y=>g({...f,paymentNotifications:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Payment Notifications"})]})]}),i.jsx("button",{onClick:()=>w("notification",f),disabled:s,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Notification Settings"})]})]}),t==="security"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Security Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Timeout (seconds)"}),i.jsx("input",{type:"number",value:p.sessionTimeout,onChange:y=>x({...p,sessionTimeout:parseInt(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Login Attempts"}),i.jsx("input",{type:"number",value:p.maxLoginAttempts,onChange:y=>x({...p,maxLoginAttempts:parseInt(y.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"space-y-3 border-t pt-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:p.requireEmailVerification,onChange:y=>x({...p,requireEmailVerification:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Require Email Verification"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:p.requirePhoneVerification,onChange:y=>x({...p,requirePhoneVerification:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Require Phone Verification"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:p.enableTwoFactor,onChange:y=>x({...p,enableTwoFactor:y.target.checked}),className:"w-5 h-5"}),i.jsx("label",{children:"Enable Two-Factor Authentication"})]})]}),i.jsx("button",{onClick:()=>w("security",p),disabled:s,className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Security Settings"})]})]})]})},nNe=async(t,e,r,n)=>{try{if(e.length===0)return;const s=e.reduce((l,c)=>l+c.price*c.quantity,0),a=Ce(ae(q,"abandonedCarts"),je("userId","==",t),je("recovered","==",!1)),o=await me(a);o.empty?await Mt(ae(q,"abandonedCarts"),{userId:t,userEmail:r,userName:n,items:e,total:s,recovered:!1,remindersSent:0,createdAt:new Date().toISOString(),lastReminderSent:null}):await ke(ie(q,"abandonedCarts",o.docs[0].id),{items:e,total:s,updatedAt:new Date().toISOString()})}catch(s){console.error("Error saving abandoned cart:",s)}},sNe=async t=>{try{const e=Ce(ae(q,"abandonedCarts"),je("userId","==",t));(await me(e)).docs.forEach(async n=>{await ns(ie(q,"abandonedCarts",n.id))})}catch(e){console.error("Error deleting abandoned cart:",e)}},aNe=async()=>{try{return(await me(ae(q,"abandonedCarts"))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("Error getting abandoned carts:",t),[]}},iNe=async t=>{try{const r=(await me(ie(q,"abandonedCarts",t))).data();await ke(ie(q,"abandonedCarts",t),{remindersSent:(r.remindersSent||0)+1,lastReminderSent:new Date().toISOString()}),await Mt(ae(q,"emailQueue"),{to:r.userEmail,template:"cart-reminder",data:{userName:r.userName,items:r.items,total:r.total,cartUrl:`${window.location.origin}/cart`},status:"pending",createdAt:new Date().toISOString()})}catch(e){console.error("Error sending cart reminder:",e)}},oNe=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(!0),[s,a]=T.useState("all");T.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await aNe();e(d)}catch(d){console.error("Error fetching carts:",d)}finally{n(!1)}},l=async d=>{try{await iNe(d),alert("Reminder sent successfully!"),o()}catch{alert("Failed to send reminder")}},c=t.filter(d=>s==="recovered"?d.recovered:s==="active"?!d.recovered:!0),u={total:t.length,active:t.filter(d=>!d.recovered).length,recovered:t.filter(d=>d.recovered).length,totalValue:t.reduce((d,h)=>d+(h.total||0),0),activeValue:t.filter(d=>!d.recovered).reduce((d,h)=>d+(h.total||0),0),recoveredValue:t.filter(d=>d.recovered).reduce((d,h)=>d+(h.total||0),0)};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Abandoned Cart Recovery"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Active Abandoned Carts"}),i.jsx("p",{className:"text-3xl font-bold",children:u.active}),i.jsxs("p",{className:"text-sm text-orange-600 mt-2",children:["Value: ",u.activeValue.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Recovered Carts"}),i.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-300",children:u.recovered}),i.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Value: ",u.recoveredValue.toLocaleString()]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-1",children:"Recovery Rate"}),i.jsxs("p",{className:"text-3xl font-bold text-blue-800 dark:text-blue-300",children:[u.total>0?(u.recovered/u.total*100).toFixed(1):0,"%"]})]})]}),i.jsxs("select",{value:s,onChange:d=>a(d.target.value),className:"mb-6 px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Carts"}),i.jsx("option",{value:"active",children:"Active Only"}),i.jsx("option",{value:"recovered",children:"Recovered Only"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Items"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Total Value"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Created"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Reminders"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:c.map(d=>{var h,f,g,p,x;return i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:d.userName}),i.jsx("p",{className:"text-sm text-gray-600",children:d.userEmail})]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsxs("p",{className:"font-medium",children:[((h=d.items)==null?void 0:h.length)||0," items"]}),i.jsxs("p",{className:"text-sm text-gray-600 line-clamp-1",children:[(g=(f=d.items)==null?void 0:f[0])==null?void 0:g.name,((p=d.items)==null?void 0:p.length)>1&&` +${d.items.length-1} more`]})]}),i.jsxs("td",{className:"py-3 px-4 font-bold text-lg",children:["",(x=d.total)==null?void 0:x.toLocaleString()]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(d.createdAt).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:d.remindersSent||0}),d.lastReminderSent&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Last: ",new Date(d.lastReminderSent).toLocaleDateString()]})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${d.recovered?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:d.recovered?"Recovered":"Active"})}),i.jsx("td",{className:"py-3 px-4",children:!d.recovered&&i.jsx("button",{onClick:()=>l(d.id),disabled:d.remindersSent>=3,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:bg-gray-400",children:d.remindersSent>=3?"Max Sent":"Send Reminder"})})]},d.id)})})]}),c.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No abandoned carts found"})})]})]})},RM=6048e5,lNe=864e5,xC=Symbol.for("constructDateFrom");function Os(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&xC in t?t[xC](e):t instanceof Date?new t.constructor(e):new Date(e)}function Un(t,e){return Os(e||t,t)}function cNe(t,e,r){const n=Un(t,r==null?void 0:r.in);if(isNaN(e))return Os(t,NaN);if(!e)return n;const s=n.getDate(),a=Os(t,n.getTime());a.setMonth(n.getMonth()+e+1,0);const o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}let uNe={};function ev(){return uNe}function ef(t,e){var l,c,u,d;const r=ev(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Un(t,e==null?void 0:e.in),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function f0(t,e){return ef(t,{...e,weekStartsOn:1})}function DM(t,e){const r=Un(t,e==null?void 0:e.in),n=r.getFullYear(),s=Os(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=f0(s),o=Os(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=f0(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function bC(t){const e=Un(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function dNe(t,...e){const r=Os.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function wC(t,e){const r=Un(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function hNe(t,e,r){const[n,s]=dNe(r==null?void 0:r.in,t,e),a=wC(n),o=wC(s),l=+a-bC(a),c=+o-bC(o);return Math.round((l-c)/lNe)}function fNe(t,e){const r=DM(t,e),n=Os(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),f0(n)}function pNe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mNe(t){return!(!pNe(t)&&typeof t!="number"||isNaN(+Un(t)))}function gNe(t,e){const r=Un(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const yNe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vNe=(t,e,r)=>{let n;const s=yNe[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function tb(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const xNe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bNe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wNe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_Ne={date:tb({formats:xNe,defaultWidth:"full"}),time:tb({formats:bNe,defaultWidth:"full"}),dateTime:tb({formats:wNe,defaultWidth:"full"})},jNe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kNe=(t,e,r,n)=>jNe[t];function Yu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const NNe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SNe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ENe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ANe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},PNe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ONe={ordinalNumber:PNe,era:Yu({values:NNe,defaultWidth:"wide"}),quarter:Yu({values:SNe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yu({values:ENe,defaultWidth:"wide"}),day:Yu({values:ANe,defaultWidth:"wide"}),dayPeriod:Yu({values:CNe,defaultWidth:"wide",formattingValues:TNe,defaultFormattingWidth:"wide"})};function Qu(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?RNe(l,h=>h.test(o)):INe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function INe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function RNe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function DNe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const MNe=/^(\d+)(th|st|nd|rd)?/i,$Ne=/\d+/i,LNe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FNe={any:[/^b/i,/^(a|c)/i]},UNe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VNe={any:[/1/i,/2/i,/3/i,/4/i]},BNe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zNe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qNe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WNe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HNe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},GNe={ordinalNumber:DNe({matchPattern:MNe,parsePattern:$Ne,valueCallback:t=>parseInt(t,10)}),era:Qu({matchPatterns:LNe,defaultMatchWidth:"wide",parsePatterns:FNe,defaultParseWidth:"any"}),quarter:Qu({matchPatterns:UNe,defaultMatchWidth:"wide",parsePatterns:VNe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qu({matchPatterns:BNe,defaultMatchWidth:"wide",parsePatterns:zNe,defaultParseWidth:"any"}),day:Qu({matchPatterns:qNe,defaultMatchWidth:"wide",parsePatterns:WNe,defaultParseWidth:"any"}),dayPeriod:Qu({matchPatterns:HNe,defaultMatchWidth:"any",parsePatterns:KNe,defaultParseWidth:"any"})},YNe={code:"en-US",formatDistance:vNe,formatLong:_Ne,formatRelative:kNe,localize:ONe,match:GNe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QNe(t,e){const r=Un(t,e==null?void 0:e.in);return hNe(r,gNe(r))+1}function XNe(t,e){const r=Un(t,e==null?void 0:e.in),n=+f0(r)-+fNe(r);return Math.round(n/RM)+1}function MM(t,e){var d,h,f,g;const r=Un(t,e==null?void 0:e.in),n=r.getFullYear(),s=ev(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(f=s.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=Os((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=ef(o,e),c=Os((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=ef(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function JNe(t,e){var l,c,u,d;const r=ev(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=MM(t,e),a=Os((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),ef(a,e)}function ZNe(t,e){const r=Un(t,e==null?void 0:e.in),n=+ef(r,e)-+JNe(r,e);return Math.round(n/RM)+1}function Qe(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const $a={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Qe(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Qe(r+1,2)},d(t,e){return Qe(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Qe(t.getHours()%12||12,e.length)},H(t,e){return Qe(t.getHours(),e.length)},m(t,e){return Qe(t.getMinutes(),e.length)},s(t,e){return Qe(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Qe(s,e.length)}},gl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_C={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return $a.y(t,e)},Y:function(t,e,r,n){const s=MM(t,n),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return Qe(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Qe(a,e.length)},R:function(t,e){const r=DM(t);return Qe(r,e.length)},u:function(t,e){const r=t.getFullYear();return Qe(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Qe(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Qe(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return $a.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Qe(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=ZNe(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Qe(s,e.length)},I:function(t,e,r){const n=XNe(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Qe(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):$a.d(t,e)},D:function(t,e,r){const n=QNe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Qe(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Qe(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Qe(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Qe(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=gl.noon:n===0?s=gl.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=gl.evening:n>=12?s=gl.afternoon:n>=4?s=gl.morning:s=gl.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return $a.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):$a.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Qe(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Qe(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):$a.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):$a.s(t,e)},S:function(t,e){return $a.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return kC(n);case"XXXX":case"XX":return Ji(n);case"XXXXX":case"XXX":default:return Ji(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return kC(n);case"xxxx":case"xx":return Ji(n);case"xxxxx":case"xxx":default:return Ji(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jC(n,":");case"OOOO":default:return"GMT"+Ji(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jC(n,":");case"zzzz":default:return"GMT"+Ji(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Qe(n,e.length)},T:function(t,e,r){return Qe(+t,e.length)}};function jC(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+Qe(a,2)}function kC(t,e){return t%60===0?(t>0?"-":"+")+Qe(Math.abs(t)/60,2):Ji(t,e)}function Ji(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Qe(Math.trunc(n/60),2),a=Qe(n%60,2);return r+s+e+a}const NC=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$M=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},e6e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return NC(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",NC(n,e)).replace("{{time}}",$M(s,e))},t6e={p:$M,P:e6e},r6e=/^D+$/,n6e=/^Y+$/,s6e=["D","DD","YY","YYYY"];function a6e(t){return r6e.test(t)}function i6e(t){return n6e.test(t)}function o6e(t,e,r){const n=l6e(t,e,r);if(console.warn(n),s6e.includes(t))throw new RangeError(n)}function l6e(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const c6e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u6e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d6e=/^'([^]*?)'?$/,h6e=/''/g,f6e=/[a-zA-Z]/;function p6e(t,e,r){var d,h,f,g;const n=ev(),s=n.locale??YNe,a=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=Un(t,r==null?void 0:r.in);if(!mNe(l))throw new RangeError("Invalid time value");let c=e.match(u6e).map(p=>{const x=p[0];if(x==="p"||x==="P"){const b=t6e[x];return b(p,s.formatLong)}return p}).join("").match(c6e).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const x=p[0];if(x==="'")return{isToken:!1,value:m6e(p)};if(_C[x])return{isToken:!0,value:p};if(x.match(f6e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:p}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(p=>{if(!p.isToken)return p.value;const x=p.value;(i6e(x)||a6e(x))&&o6e(x,e,String(t));const b=_C[x[0]];return b(l,x,s.localize,u)}).join("")}function m6e(t){const e=t.match(d6e);return e?e[1].replace(h6e,"'"):t}function g6e(t,e,r){return cNe(t,-e,r)}const y6e=async(t,e=6)=>{try{const r=g6e(new Date,e),n=Ce(ae(q,"vendorOrders"),je("vendorId","==",t),je("createdAt",">=",r.toISOString())),a=(await me(n)).docs.map(y=>({id:y.id,...y.data()})),o=Ce(ae(q,"products"),je("vendorId","==",t)),c=(await me(o)).docs.map(y=>({id:y.id,...y.data()})),u=a.reduce((y,_)=>y+(_.total||0),0),d=a.length,h=d>0?u/d:0,f={};a.forEach(y=>{const _=p6e(new Date(y.createdAt),"MMM yyyy");f[_]=(f[_]||0)+y.total});const g={};a.forEach(y=>{var _;(_=y.items)==null||_.forEach(S=>{g[S.productId]||(g[S.productId]={id:S.productId,name:S.productName,quantity:0,revenue:0}),g[S.productId].quantity+=S.quantity,g[S.productId].revenue+=S.price*S.quantity})});const p=Object.values(g).sort((y,_)=>_.revenue-y.revenue).slice(0,10),x=a.reduce((y,_)=>(y[_.status]=(y[_.status]||0)+1,y),{}),b=c.filter(y=>y.stock<10).sort((y,_)=>y.stock-_.stock).slice(0,10),w=new Set(a.map(y=>y.userId)).size;return{overview:{totalRevenue:u,totalOrders:d,averageOrderValue:h,uniqueCustomers:w,totalProducts:c.length,activeProducts:c.filter(y=>y.status==="approved").length},revenueByMonth:Object.entries(f).map(([y,_])=>({month:y,revenue:_})),topProducts:p,statusDistribution:Object.entries(x).map(([y,_])=>({status:y,count:_})),lowStockProducts:b,recentOrders:a.slice(0,10)}}catch(r){throw console.error("Error getting vendor analytics:",r),r}},v6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState(null),[n,s]=T.useState(!0),[a,o]=T.useState(6);T.useEffect(()=>{l()},[t,a]);const l=async()=>{try{const u=await y6e(t.uid,a);r(u)}catch(u){console.error("Error fetching analytics:",u)}finally{s(!1)}},c=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),i.jsxs("select",{value:a,onChange:u=>o(parseInt(u.target.value)),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:1,children:"Last Month"}),i.jsx("option",{value:3,children:"Last 3 Months"}),i.jsx("option",{value:6,children:"Last 6 Months"}),i.jsx("option",{value:12,children:"Last Year"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Revenue"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",e.overview.totalRevenue.toLocaleString()]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Orders"}),i.jsx("p",{className:"text-3xl font-bold",children:e.overview.totalOrders})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Avg Order Value"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",Math.round(e.overview.averageOrderValue).toLocaleString()]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-lg p-6 shadow",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Unique Customers"}),i.jsx("p",{className:"text-3xl font-bold",children:e.overview.uniqueCustomers})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Revenue Trend"}),i.jsx(ec,{width:"100%",height:300,children:i.jsxs(Lj,{data:e.revenueByMonth,children:[i.jsx(Xh,{strokeDasharray:"3 3"}),i.jsx(_i,{dataKey:"month"}),i.jsx(ji,{}),i.jsx($r,{}),i.jsx(pi,{}),i.jsx(Zo,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Order Status"}),i.jsx(ec,{width:"100%",height:300,children:i.jsxs(OM,{children:[i.jsx(Ms,{data:e.statusDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({status:u,count:d})=>`${u}: ${d}`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:e.statusDistribution.map((u,d)=>i.jsx(Cf,{fill:c[d%c.length]},`cell-${d}`))}),i.jsx($r,{})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow mb-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Top Selling Products"}),i.jsx(ec,{width:"100%",height:400,children:i.jsxs(Xke,{data:e.topProducts,children:[i.jsx(Xh,{strokeDasharray:"3 3"}),i.jsx(_i,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),i.jsx(ji,{}),i.jsx($r,{}),i.jsx(pi,{}),i.jsx(wi,{dataKey:"revenue",fill:"#10b981",name:"Revenue ()"}),i.jsx(wi,{dataKey:"quantity",fill:"#3b82f6",name:"Units Sold"})]})})]}),e.lowStockProducts.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"text-red-500",children:""}),"Low Stock Alert"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"Product"}),i.jsx("th",{className:"text-left py-2",children:"Stock"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:e.lowStockProducts.map(u=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:u.name}),i.jsx("td",{className:"py-2 font-bold",children:u.stock}),i.jsx("td",{className:"py-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${u.stock===0?"bg-red-100 text-red-800":u.stock<5?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:u.stock===0?"Out of Stock":u.stock<5?"Critical":"Low"})})]},u.id))})]})})]})]}):i.jsx("div",{className:"p-6",children:"No analytics data available"})},x6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(!0),[a,o]=T.useState("all");T.useEffect(()=>{l()},[t]);const l=async()=>{try{const d=Ce(ae(q,"products"),je("vendorId","==",t.uid)),f=(await me(d)).docs.map(g=>({id:g.id,...g.data()}));r(f)}catch(d){console.error("Error fetching products:",d)}finally{s(!1)}},c=async d=>{if(window.confirm("Are you sure you want to delete this product?"))try{await ns(ie(q,"products",d)),r(e.filter(h=>h.id!==d)),alert("Product deleted successfully")}catch(h){console.error("Error deleting product:",h),alert("Failed to delete product")}},u=e.filter(d=>a==="all"||d.status===a);return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Products"}),i.jsxs(he,{to:"/vendor/products/add",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition flex items-center gap-2",children:[i.jsx("span",{children:""})," Add Product"]})]}),i.jsxs("div",{className:"mb-6 flex gap-2",children:[i.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg ${a==="all"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:["All (",e.length,")"]}),i.jsx("button",{onClick:()=>o("approved"),className:`px-4 py-2 rounded-lg ${a==="approved"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Approved"}),i.jsx("button",{onClick:()=>o("pending"),className:`px-4 py-2 rounded-lg ${a==="pending"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Pending"}),i.jsx("button",{onClick:()=>o("rejected"),className:`px-4 py-2 rounded-lg ${a==="rejected"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Rejected"})]}),u.length===0?i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"No products found"}),i.jsx(he,{to:"/vendor/products/add",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:"Add Your First Product"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(d=>{var h,f;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[i.jsx("img",{src:((h=d.images)==null?void 0:h[0])||"https://via.placeholder.com/300",alt:d.name,className:"w-full h-48 object-cover"}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-2 line-clamp-2",children:d.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:d.description}),i.jsxs("p",{className:"text-xl font-bold text-orange-600 mb-2",children:["",(f=d.price)==null?void 0:f.toLocaleString()]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",d.stock||0]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(he,{to:`/vendor/products/edit/${d.id}`,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm text-center",children:"Edit"}),i.jsx("button",{onClick:()=>c(d.id),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm",children:"Delete"})]})]})]},d.id)})})]})},b6e=()=>{const{currentUser:t}=Le(),e=Jt(),[r,n]=T.useState(!1),[s,a]=T.useState(""),[o,l]=T.useState(0),[c,u]=T.useState({description:!1,category:!1,price:!1}),[d,h]=T.useState({name:"",description:"",category:"",price:"",originalPrice:"",stock:"",sku:"",brand:"",weight:"",dimensions:"",discount:"",keywords:"",shippingInfo:"",returnPolicy:"",affiliateLink:""}),[f,g]=T.useState([]),[p,x]=T.useState({type:"",values:""}),[b,w]=T.useState([]),[y,_]=T.useState([]),[S,j]=T.useState(null),[k,N]=T.useState(null),E=["Electronics","Fashion","Home","Sports","Books","Beauty","Toys","Food","Other"],A=U=>{const{name:V,value:Z}=U.target;if(h({...d,[V]:Z}),V==="originalPrice"||V==="price"){const ye=parseFloat(V==="originalPrice"?Z:d.originalPrice),Y=parseFloat(V==="price"?Z:d.price);if(ye&&Y&&ye>Y){const re=Math.round((ye-Y)/ye*100);h(Pe=>({...Pe,discount:re.toString()}))}}},P=async()=>{if(!d.name){a("Please enter a product name first");return}u({...c,description:!0}),a("");try{const U=d.keywords||d.name,V=`Generate a compelling and professional e-commerce product description.

Product Name: ${d.name}
Keywords: ${U}
Category: ${d.category||"general product"}

Create a description that:
- Highlights key features and benefits
- Is SEO-friendly and persuasive
- 2-3 paragraphs long
- Professional and engaging tone
- Focuses on value to customer

Write only the description, no extra commentary:`,ye=await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:500,messages:[{role:"user",content:V}]})})).json();h(Y=>({...Y,description:ye.content[0].text.trim()}))}catch(U){console.error("AI Error:",U),a("Failed to generate description. Please try again.")}finally{u({...c,description:!1})}},O=async U=>{u({...c,category:!0});try{const V=await new Promise((re,Pe)=>{const Ne=new FileReader;Ne.onload=()=>re(Ne.result.split(",")[1]),Ne.onerror=Pe,Ne.readAsDataURL(U)}),Y=(await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:50,messages:[{role:"user",content:[{type:"image",source:{type:"base64",media_type:U.type,data:V}},{type:"text",text:`Analyze this product image and suggest the most appropriate category from: ${E.join(", ")}. Respond with ONLY the category name.`}]}]})})).json()).content[0].text.trim();E.includes(Y)&&h(re=>({...re,category:Y}))}catch(V){console.error("AI Category Error:",V)}finally{u({...c,category:!1})}},I=async()=>{if(!d.name||!d.category){a("Please enter product name and category first");return}u({...c,price:!0}),a("");try{const U=`Suggest a competitive price in Nigerian Naira () for this product.

Product: ${d.name}
Category: ${d.category}
Keywords: ${d.keywords||"N/A"}

Consider:
- Typical market prices for similar products in Nigeria
- Product category pricing standards
- Competitive pricing strategy

Respond with ONLY a single number (the suggested price in Naira), nothing else:`,ye=(await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:100,messages:[{role:"user",content:U}]})})).json()).content[0].text.trim().replace(/[^0-9.]/g,"");ye&&!isNaN(parseFloat(ye))&&h(Y=>({...Y,price:ye}))}catch(U){console.error("AI Price Error:",U),a("Failed to optimize price. Please try again.")}finally{u({...c,price:!1})}},D=async U=>{const V=Array.from(U.target.files);if(V.length+b.length>5){a("Maximum 5 images allowed");return}if(V.filter(Y=>Y.size>5*1024*1024).length>0){a("Some images are too large. Maximum 5MB per image.");return}b.length===0&&V.length>0&&!d.category&&await O(V[0]),w([...b,...V]);const ye=V.map(Y=>URL.createObjectURL(Y));_([...y,...ye]),a("")},B=U=>{const V=U.target.files[0];if(V){if(V.size>50*1024*1024){a("Video too large. Maximum 50MB.");return}j(V),N(URL.createObjectURL(V)),a("")}},z=U=>{w(b.filter((V,Z)=>Z!==U)),_(y.filter((V,Z)=>Z!==U))},G=()=>{j(null),N(null)},Q=()=>{if(!p.type||!p.values){a("Fill in variation type and values");return}const U=p.values.split(",").map(V=>V.trim()).filter(V=>V);g([...f,{type:p.type,values:U}]),x({type:"",values:""}),a("")},F=U=>{g(f.filter((V,Z)=>Z!==U))},H=async()=>{const U=[],V=b.length+(S?1:0);let Z=0;for(let Y=0;Y<b.length;Y++){const re=b[Y],Pe=Date.now(),Ne=cs(us,`products/${t.uid}/${Pe}_${re.name}`);await os(Ne,re);const le=await ls(Ne);U.push(le),Z++,l(Math.round(Z/V*50))}let ye=null;if(S){const Y=Date.now(),re=cs(us,`products/${t.uid}/videos/${Y}_${S.name}`);await os(re,S),ye=await ls(re),Z++,l(Math.round(Z/V*50))}return{imageUrls:U,videoUrl:ye}},$=async U=>{U.preventDefault(),n(!0),a(""),l(0);try{if(b.length===0){a("Add at least one product image"),n(!1);return}if(!d.name||!d.description||!d.category||!d.price||!d.stock){a("Fill in all required fields"),n(!1);return}const{imageUrls:V,videoUrl:Z}=await H();l(60);const ye={...d,price:parseFloat(d.price),originalPrice:d.originalPrice?parseFloat(d.originalPrice):parseFloat(d.price),stock:parseInt(d.stock),discount:d.discount?parseInt(d.discount):0,images:V,video:Z,variations:f,keywords:d.keywords?d.keywords.split(",").map(Y=>Y.trim()):[],vendorId:t.uid,vendorName:t.name||t.email,status:"pending",views:0,sales:0,rating:0,reviews:0,isAffiliate:!!d.affiliateLink,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l(80),await Mt(ae(q,"products"),ye),l(100),alert("Product added successfully! Pending admin approval."),e("/vendor/products")}catch(V){console.error("Error:",V),a(V.message||"Failed to add product.")}finally{n(!1)}};return i.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Add New Product"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"AI-powered product creation with smart suggestions"})]}),s&&i.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400",children:s})}),o>0&&o<100&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Uploading..."}),i.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[o,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${o}%`}})})]}),i.jsxs("form",{onSubmit:$,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Media"}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Upload Images (Max 5) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:D,disabled:b.length>=5||c.category,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-blue-50 file:text-blue-700"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.category?"AI analyzing image...":"AI will auto-suggest category from first image"})]}),y.length>0&&i.jsx("div",{className:"grid grid-cols-5 gap-4 mb-4",children:y.map((U,V)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:U,alt:`Preview ${V+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>z(V),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 hover:bg-red-600",children:""}),V===0&&i.jsx("span",{className:"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"Main"})]},V))}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload Video (Optional)"}),i.jsx("input",{type:"file",accept:"video/*",onChange:B,disabled:S!==null,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 50MB. MP4, MOV, AVI formats"})]}),k&&i.jsxs("div",{className:"mt-4 relative",children:[i.jsx("video",{src:k,controls:!0,className:"w-full h-64 rounded-lg"}),i.jsx("button",{type:"button",onClick:G,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full px-3 py-1 text-sm hover:bg-red-600",children:"Remove Video"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Basic Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Product Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"name",value:d.name,onChange:A,required:!0,placeholder:"e.g., Samsung Galaxy S21",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Keywords (comma separated)"}),i.jsx("input",{type:"text",name:"keywords",value:d.keywords,onChange:A,placeholder:"e.g., stylish, high-quality, comfortable",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for AI description generation"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("label",{className:"block text-sm font-medium",children:["Description ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("button",{type:"button",onClick:P,disabled:c.description||!d.name,className:"flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white text-sm rounded-lg disabled:opacity-50",children:c.description?" Generating...":" AI Generate"})]}),i.jsx("textarea",{name:"description",value:d.description,onChange:A,required:!0,rows:"5",placeholder:"AI will generate based on name and keywords...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Category ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{name:"category",value:d.category,onChange:A,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"AI suggests from image"}),E.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brand"}),i.jsx("input",{type:"text",name:"brand",value:d.brand,onChange:A,placeholder:"e.g., Samsung",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),i.jsx("input",{type:"text",name:"sku",value:d.sku,onChange:A,placeholder:"e.g., SKU-12345",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg shadow-md p-6 border border-green-200 dark:border-green-800",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2 flex items-center gap-2",children:" Affiliate Link (Optional)"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:'Add external partner link. Button will change to "View Deal" instead of "Add to Cart"'}),i.jsx("input",{type:"url",name:"affiliateLink",value:d.affiliateLink,onChange:A,placeholder:"https://partner-site.com/product",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-green-500"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Variations (Optional)"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Add variations like size, color, material"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Type (e.g., Size)",value:p.type,onChange:U=>x({...p,type:U.target.value}),className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsx("input",{type:"text",placeholder:"Values (S, M, L)",value:p.values,onChange:U=>x({...p,values:U.target.value}),className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Add"})]}),f.length>0&&i.jsx("div",{className:"space-y-2",children:f.map((U,V)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-semibold",children:[U.type,":"]})," ",U.values.join(", ")]}),i.jsx("button",{type:"button",onClick:()=>F(V),className:"text-red-600 hover:text-red-800",children:"Remove"})]},V))})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pricing & Inventory"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("label",{className:"block text-sm font-medium",children:["Price () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("button",{type:"button",onClick:I,disabled:c.price||!d.name||!d.category,className:"text-purple-600 hover:text-purple-700 text-sm disabled:opacity-50",children:c.price?"":" AI"})]}),i.jsx("input",{type:"number",name:"price",value:d.price,onChange:A,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Original Price ()"}),i.jsx("input",{type:"number",name:"originalPrice",value:d.originalPrice,onChange:A,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%)"}),i.jsx("input",{type:"number",name:"discount",value:d.discount,onChange:A,min:"0",max:"100",placeholder:"Auto",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stock ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",name:"stock",value:d.stock,onChange:A,required:!0,min:"0",placeholder:"0",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Physical Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight (kg)"}),i.jsx("input",{type:"text",name:"weight",value:d.weight,onChange:A,placeholder:"0.5",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Dimensions (LWH cm)"}),i.jsx("input",{type:"text",name:"dimensions",value:d.dimensions,onChange:A,placeholder:"15105",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Shipping & Returns"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Info"}),i.jsx("textarea",{name:"shippingInfo",value:d.shippingInfo,onChange:A,rows:"2",placeholder:"Ships in 2-3 days",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Return Policy"}),i.jsx("textarea",{name:"returnPolicy",value:d.returnPolicy,onChange:A,rows:"2",placeholder:"7-day return policy",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400 transition",children:r?" Adding...":"Add Product"}),i.jsx("button",{type:"button",onClick:()=>e("/vendor/products"),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 text-gray-900 dark:text-white rounded-lg font-medium",children:"Cancel"})]})]})]})},w6e=()=>{const{currentUser:t}=Le(),{id:e}=P0(),r=Jt(),[n,s]=T.useState(!1),[a,o]=T.useState(!0),[l,c]=T.useState(""),[u,d]=T.useState({name:"",description:"",category:"",price:"",originalPrice:"",stock:"",sku:"",brand:"",weight:"",dimensions:"",discount:"",keywords:"",shippingInfo:"",returnPolicy:"",affiliateLink:""}),[h,f]=T.useState([]),[g,p]=T.useState([]),[x,b]=T.useState([]),w=["Electronics","Fashion","Home","Sports","Books","Beauty","Toys","Food","Other"];T.useEffect(()=>{y()},[e]);const y=async()=>{var A,P,O,I,D;try{const B=await Pt(ie(q,"products",e));if(B.exists()){const z=B.data();d({name:z.name||"",description:z.description||"",category:z.category||"",price:((A=z.price)==null?void 0:A.toString())||"",originalPrice:((P=z.originalPrice)==null?void 0:P.toString())||"",stock:((O=z.stock)==null?void 0:O.toString())||"",sku:z.sku||"",brand:z.brand||"",weight:z.weight||"",dimensions:z.dimensions||"",discount:((I=z.discount)==null?void 0:I.toString())||"",keywords:((D=z.keywords)==null?void 0:D.join(", "))||"",shippingInfo:z.shippingInfo||"",returnPolicy:z.returnPolicy||"",affiliateLink:z.affiliateLink||""}),f(z.images||[])}}catch(B){console.error("Error fetching product:",B),c("Failed to load product")}finally{o(!1)}},_=A=>{const{name:P,value:O}=A.target;d({...u,[P]:O})},S=A=>{const P=Array.from(A.target.files);if(h.length+g.length+P.length>5){c("Maximum 5 images allowed");return}p([...g,...P]);const O=P.map(I=>URL.createObjectURL(I));b([...x,...O])},j=A=>{f(h.filter((P,O)=>O!==A))},k=A=>{p(g.filter((P,O)=>O!==A)),b(x.filter((P,O)=>O!==A))},N=async()=>{const A=[];for(let P=0;P<g.length;P++){const O=g[P],I=Date.now(),D=cs(us,`products/${t.uid}/${I}_${O.name}`);await os(D,O);const B=await ls(D);A.push(B)}return A},E=async A=>{A.preventDefault(),s(!0),c("");try{const P=await N(),O=[...h,...P],I={...u,price:parseFloat(u.price),originalPrice:u.originalPrice?parseFloat(u.originalPrice):parseFloat(u.price),stock:parseInt(u.stock),discount:u.discount?parseInt(u.discount):0,images:O,keywords:u.keywords?u.keywords.split(",").map(D=>D.trim()):[],updatedAt:new Date().toISOString()};await ke(ie(q,"products",e),I),alert("Product updated successfully!"),r("/vendor/products")}catch(P){console.error("Error:",P),c(P.message||"Failed to update product")}finally{s(!1)}};return a?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Edit Product"}),l&&i.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-800 rounded-lg",children:l}),i.jsxs("form",{onSubmit:E,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Images"}),h.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Current Images:"}),i.jsx("div",{className:"grid grid-cols-5 gap-4",children:h.map((A,P)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:A,alt:`Current ${P+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>j(P),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6",children:""})]},P))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Add New Images"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:S,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),x.length>0&&i.jsx("div",{className:"mt-4 grid grid-cols-5 gap-4",children:x.map((A,P)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:A,alt:`New ${P+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>k(P),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6",children:""})]},P))})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),i.jsx("input",{type:"text",name:"name",value:u.name,onChange:_,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),i.jsx("textarea",{name:"description",value:u.description,onChange:_,required:!0,rows:"5",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),i.jsxs("select",{name:"category",value:u.category,onChange:_,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"",children:"Select Category"}),w.map(A=>i.jsx("option",{value:A,children:A},A))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brand"}),i.jsx("input",{type:"text",name:"brand",value:u.brand,onChange:_,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price ()"}),i.jsx("input",{type:"number",name:"price",value:u.price,onChange:_,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stock"}),i.jsx("input",{type:"number",name:"stock",value:u.stock,onChange:_,required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"submit",disabled:n,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:n?"Updating...":"Update Product"}),i.jsx("button",{type:"button",onClick:()=>r("/vendor/products"),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 rounded-lg",children:"Cancel"})]})]})]})},_6e=()=>{var w,y;const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(!0),[a,o]=T.useState("all"),[l,c]=T.useState(null),[u,d]=T.useState(!1);T.useEffect(()=>{h()},[t]);const h=async()=>{try{const _=Ce(ae(q,"vendorOrders"),je("vendorId","==",t.uid)),j=(await me(_)).docs.map(k=>({id:k.id,...k.data()}));j.sort((k,N)=>new Date(N.createdAt)-new Date(k.createdAt)),r(j)}catch(_){console.error("Error fetching orders:",_)}finally{s(!1)}},f=async(_,S)=>{if(window.confirm(`Are you sure you want to mark this order as ${S}?`)){s(!0);try{await ke(ie(q,"vendorOrders",_),{status:S,updatedAt:new Date().toISOString(),...S==="shipped"&&{shippedAt:new Date().toISOString()},...S==="delivered"&&{deliveredAt:new Date().toISOString()},...S==="cancelled"&&{cancelledAt:new Date().toISOString()}});const k=(await Pt(ie(q,"vendorOrders",_))).data(),N=k.orderId,E=Ce(ae(q,"vendorOrders"),je("orderId","==",N));if((await me(E)).docs.every(O=>O.data().status===S||O.id===_)&&N&&await ke(ie(q,"orders",N),{status:S,updatedAt:new Date().toISOString()}),await wX(N||_,k.userId,"buyer",S,{total:k.total,orderNumber:_.substring(0,8),vendorName:t.name}),S==="shipped"||S==="delivered")for(const O of k.items)try{const I=await Pt(ie(q,"products",O.productId));if(I.exists()){const D=I.data();D.stock<10&&await _X(O.productId,t.uid,D.name,D.stock)}}catch(I){console.error("Error checking stock:",I)}alert(`Order successfully marked as ${S}!`),d(!1),h()}catch(j){console.error("Error updating order status:",j),alert("Failed to update order status. Please try again.")}finally{s(!1)}}},g=_=>{c(_),d(!0)},p=_=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[_]||"bg-gray-100 text-gray-800",x=e.filter(_=>a==="all"?!0:_.status===a),b={total:e.length,pending:e.filter(_=>_.status==="pending").length,processing:e.filter(_=>_.status==="processing").length,shipped:e.filter(_=>_.status==="shipped").length,delivered:e.filter(_=>_.status==="delivered").length,cancelled:e.filter(_=>_.status==="cancelled").length,totalRevenue:e.filter(_=>_.status==="delivered").reduce((_,S)=>_+(S.total||0),0)};return n&&e.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Orders Management"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),i.jsx("p",{className:"text-2xl font-bold",children:b.total})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:b.pending})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Processing"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:b.processing})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Shipped"}),i.jsx("p",{className:"text-2xl font-bold text-purple-800 dark:text-purple-300",children:b.shipped})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Delivered"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:b.delivered})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"Cancelled"}),i.jsx("p",{className:"text-2xl font-bold text-red-800 dark:text-red-300",children:b.cancelled})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Revenue"}),i.jsxs("p",{className:"text-xl font-bold",children:["",b.totalRevenue.toLocaleString()]})]})]}),i.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:"mb-6 px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Orders"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"shipped",children:"Shipped"}),i.jsx("option",{value:"delivered",children:"Delivered"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Order ID"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Items"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Total"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),i.jsx("tbody",{children:x.map(_=>{var S,j,k,N,E;return i.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900",children:[i.jsxs("td",{className:"py-3 px-4 font-mono text-sm",children:["#",_.id.substring(0,8)]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("p",{className:"font-medium",children:_.userName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.userEmail||"N/A"})]}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsxs("p",{className:"font-medium",children:[((S=_.items)==null?void 0:S.length)||0," items"]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:[(k=(j=_.items)==null?void 0:j[0])==null?void 0:k.productName,((N=_.items)==null?void 0:N.length)>1&&` +${_.items.length-1}`]})]}),i.jsxs("td",{className:"py-3 px-4 font-bold text-lg",children:["",(E=_.total)==null?void 0:E.toLocaleString()]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(_.createdAt).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(_.status)}`,children:_.status})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("button",{onClick:()=>g(_),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Details"})})]},_.id)})})]}),x.length===0&&i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No orders found"})})]}),u&&l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),i.jsx("button",{onClick:()=>d(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order ID"}),i.jsxs("p",{className:"font-mono font-bold",children:["#",l.id.substring(0,8)]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${p(l.status)}`,children:l.status})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order Date"}),i.jsx("p",{className:"font-medium",children:new Date(l.createdAt).toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Amount"}),i.jsxs("p",{className:"font-bold text-lg",children:["",(w=l.total)==null?void 0:w.toLocaleString()]})]})]}),i.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Customer Information"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",l.userName]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",l.userEmail||"N/A"]}),l.shippingAddress&&i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"mt-2",children:i.jsx("strong",{children:"Shipping Address:"})}),i.jsx("p",{children:l.shippingAddress.address}),i.jsxs("p",{children:[l.shippingAddress.city,", ",l.shippingAddress.state," ",l.shippingAddress.zipCode]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Phone:"})," ",l.shippingAddress.phone]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Order Items"}),i.jsx("div",{className:"space-y-3",children:(y=l.items)==null?void 0:y.map((_,S)=>{var j,k;return i.jsxs("div",{className:"flex gap-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsx("img",{src:((j=_.images)==null?void 0:j[0])||"https://via.placeholder.com/80",alt:_.productName,className:"w-20 h-20 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:_.productName}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",_.quantity]}),i.jsxs("p",{className:"text-sm font-bold",children:["",(k=_.price)==null?void 0:k.toLocaleString()," each"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold",children:["",(_.price*_.quantity).toLocaleString()]})})]},S)})})]}),i.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Update Order Status"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.status==="pending"&&i.jsx("button",{onClick:()=>f(l.id,"processing"),disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:"Mark as Processing"}),(l.status==="pending"||l.status==="processing")&&i.jsx("button",{onClick:()=>f(l.id,"shipped"),disabled:n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400",children:"Mark as Shipped"}),l.status==="shipped"&&i.jsx("button",{onClick:()=>f(l.id,"delivered"),disabled:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Mark as Delivered"}),l.status!=="delivered"&&l.status!=="cancelled"&&i.jsx("button",{onClick:()=>f(l.id,"cancelled"),disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400",children:"Cancel Order"})]})]})]})})]})},j6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState(!1),[n,s]=T.useState({type:"",text:""}),[a,o]=T.useState("personal"),[l,c]=T.useState({name:"",email:"",phone:"",avatar:"",businessName:"",businessDescription:"",businessAddress:"",businessLocation:"",businessPhone:"",businessEmail:"",businessWebsite:"",taxId:"",businessLicense:"",socialMedia:{facebook:"",instagram:"",twitter:"",linkedin:""},bankDetails:{bankName:"",accountNumber:"",accountName:"",routingNumber:""},shippingInfo:{returnAddress:"",warehouseLocation:"",shippingMethods:[]},operatingHours:{monday:{open:"09:00",close:"17:00",closed:!1},tuesday:{open:"09:00",close:"17:00",closed:!1},wednesday:{open:"09:00",close:"17:00",closed:!1},thursday:{open:"09:00",close:"17:00",closed:!1},friday:{open:"09:00",close:"17:00",closed:!1},saturday:{open:"10:00",close:"14:00",closed:!1},sunday:{open:"",close:"",closed:!0}},policies:{returnPolicy:"",shippingPolicy:"",privacyPolicy:""}}),[u,d]=T.useState(null),[h,f]=T.useState(null);T.useEffect(()=>{g()},[t]);const g=async()=>{try{const j=await Pt(ie(q,"users",t.uid));if(j.exists()){const k=j.data();c({...l,...k,socialMedia:k.socialMedia||l.socialMedia,bankDetails:k.bankDetails||l.bankDetails,shippingInfo:k.shippingInfo||l.shippingInfo,operatingHours:k.operatingHours||l.operatingHours,policies:k.policies||l.policies})}}catch(j){console.error("Error fetching profile:",j)}},p=j=>{const{name:k,value:N}=j.target;c({...l,[k]:N})},x=(j,k,N)=>{c({...l,[j]:{...l[j],[k]:N}})},b=(j,k,N)=>{c({...l,operatingHours:{...l.operatingHours,[j]:{...l.operatingHours[j],[k]:N}}})},w=async j=>{const k=j.target.files[0];if(k)try{const N=cs(us,`avatars/${t.uid}/${k.name}`);await os(N,k);const E=await ls(N);c({...l,avatar:E}),s({type:"success",text:"Avatar uploaded!"})}catch{s({type:"error",text:"Failed to upload avatar"})}},y=async j=>{const k=j.target.files[0];k&&(d(k),f(URL.createObjectURL(k)))},_=async j=>{j.preventDefault(),r(!0),s({type:"",text:""});try{let k=l.bannerImage;if(u){const N=cs(us,`banners/${t.uid}/${u.name}`);await os(N,u),k=await ls(N)}await ke(ie(q,"users",t.uid),{...l,bannerImage:k,updatedAt:new Date().toISOString()}),s({type:"success",text:"Profile updated successfully!"})}catch(k){console.error("Error:",k),s({type:"error",text:"Failed to update profile"})}finally{r(!1)}},S=[{id:"personal",label:"Personal Info",icon:""},{id:"business",label:"Business Info",icon:""},{id:"banking",label:"Banking",icon:""},{id:"shipping",label:"Shipping",icon:""},{id:"social",label:"Social Media",icon:""},{id:"hours",label:"Operating Hours",icon:""},{id:"policies",label:"Policies",icon:""}];return i.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Vendor Profile"}),n.text&&i.jsx("div",{className:`mb-6 p-4 rounded-lg ${n.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.text}),i.jsxs("div",{className:"mb-6 relative h-48 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg overflow-hidden",children:[(h||l.bannerImage)&&i.jsx("img",{src:h||l.bannerImage,alt:"Banner",className:"w-full h-full object-cover"}),i.jsxs("label",{className:"absolute bottom-4 right-4 px-4 py-2 bg-white hover:bg-gray-100 text-gray-800 rounded-lg cursor-pointer shadow-lg",children:["Change Banner",i.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 -mt-20",children:i.jsxs("div",{className:"flex items-end gap-6",children:[i.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden border-4 border-white shadow-lg",children:l.avatar?i.jsx("img",{src:l.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:""})}),i.jsxs("div",{className:"flex-1 mt-20",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.name||"Vendor Name"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.businessName||"Business Name"}),i.jsxs("label",{className:"inline-block mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg cursor-pointer",children:["Change Avatar",i.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden"})]})]})]})}),i.jsx("div",{className:"mb-6 overflow-x-auto",children:i.jsx("div",{className:"flex gap-2 min-w-max",children:S.map(j=>i.jsxs("button",{onClick:()=>o(j.id),className:`px-4 py-2 rounded-lg font-medium transition ${a===j.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[j.icon," ",j.label]},j.id))})}),i.jsxs("form",{onSubmit:_,children:[a==="personal"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),i.jsx("input",{type:"text",name:"name",value:l.name,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:l.email,disabled:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-100 dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),i.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),a==="business"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Business Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Name"}),i.jsx("input",{type:"text",name:"businessName",value:l.businessName,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Phone"}),i.jsx("input",{type:"tel",name:"businessPhone",value:l.businessPhone,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Email"}),i.jsx("input",{type:"email",name:"businessEmail",value:l.businessEmail,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Website"}),i.jsx("input",{type:"url",name:"businessWebsite",value:l.businessWebsite,onChange:p,placeholder:"https://",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Description"}),i.jsx("textarea",{name:"businessDescription",value:l.businessDescription,onChange:p,rows:"3",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business Address"}),i.jsx("input",{type:"text",name:"businessAddress",value:l.businessAddress,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax ID / TIN"}),i.jsx("input",{type:"text",name:"taxId",value:l.taxId,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Business License #"}),i.jsx("input",{type:"text",name:"businessLicense",value:l.businessLicense,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),a==="banking"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Banking Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bank Name"}),i.jsx("input",{type:"text",value:l.bankDetails.bankName,onChange:j=>x("bankDetails","bankName",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Name"}),i.jsx("input",{type:"text",value:l.bankDetails.accountName,onChange:j=>x("bankDetails","accountName",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Number"}),i.jsx("input",{type:"text",value:l.bankDetails.accountNumber,onChange:j=>x("bankDetails","accountNumber",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Routing Number"}),i.jsx("input",{type:"text",value:l.bankDetails.routingNumber,onChange:j=>x("bankDetails","routingNumber",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),a==="shipping"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Shipping Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Return Address"}),i.jsx("input",{type:"text",value:l.shippingInfo.returnAddress,onChange:j=>x("shippingInfo","returnAddress",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Warehouse Location"}),i.jsx("input",{type:"text",value:l.shippingInfo.warehouseLocation,onChange:j=>x("shippingInfo","warehouseLocation",j.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),a==="social"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Social Media Links"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Facebook"}),i.jsx("input",{type:"url",value:l.socialMedia.facebook,onChange:j=>x("socialMedia","facebook",j.target.value),placeholder:"https://facebook.com/...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Instagram"}),i.jsx("input",{type:"url",value:l.socialMedia.instagram,onChange:j=>x("socialMedia","instagram",j.target.value),placeholder:"https://instagram.com/...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Twitter"}),i.jsx("input",{type:"url",value:l.socialMedia.twitter,onChange:j=>x("socialMedia","twitter",j.target.value),placeholder:"https://twitter.com/...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"LinkedIn"}),i.jsx("input",{type:"url",value:l.socialMedia.linkedin,onChange:j=>x("socialMedia","linkedin",j.target.value),placeholder:"https://linkedin.com/...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]})]}),a==="hours"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Operating Hours"}),Object.keys(l.operatingHours).map(j=>i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-32 capitalize font-medium",children:j}),i.jsx("input",{type:"checkbox",checked:!l.operatingHours[j].closed,onChange:k=>b(j,"closed",!k.target.checked),className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Open"}),!l.operatingHours[j].closed&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"time",value:l.operatingHours[j].open,onChange:k=>b(j,"open",k.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700"}),i.jsx("span",{children:"to"}),i.jsx("input",{type:"time",value:l.operatingHours[j].close,onChange:k=>b(j,"close",k.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700"})]})]},j))]}),a==="policies"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Store Policies"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Return Policy"}),i.jsx("textarea",{value:l.policies.returnPolicy,onChange:j=>x("policies","returnPolicy",j.target.value),rows:"4",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Policy"}),i.jsx("textarea",{value:l.policies.shippingPolicy,onChange:j=>x("policies","shippingPolicy",j.target.value),rows:"4",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Privacy Policy"}),i.jsx("textarea",{value:l.policies.privacyPolicy,onChange:j=>x("policies","privacyPolicy",j.target.value),rows:"4",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]})]}),i.jsx("button",{type:"submit",disabled:e,className:"w-full mt-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:bg-gray-400",children:e?"Saving...":"Save Changes"})]})]})},k6e=()=>{var E;const{currentUser:t}=Le(),[e,r]=T.useState(!1),[n,s]=T.useState({type:"",text:""}),[a,o]=T.useState("security"),[l,c]=T.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,d]=T.useState({emailNotifications:!0,orderUpdates:!0,newMessages:!0,productReviews:!0,lowStock:!0,paymentReceived:!0,promotionalEmails:!1,weeklyReport:!0,monthlyReport:!0,pushNotifications:!0,smsNotifications:!1}),[h,f]=T.useState({showEmail:!1,showPhone:!1,showAddress:!1,allowMessages:!0,showOnline:!0,showLastSeen:!1,profileVisibility:"public",searchEngineIndexing:!0}),[g,p]=T.useState({storeName:"",storeSlug:"",storeDescription:"",autoApproveOrders:!1,allowReviews:!0,requireLogin:!1,maintenanceMode:!1,vacationMode:!1,vacationMessage:"",currency:"NGN",taxRate:0,shippingFee:0,freeShippingThreshold:0,minimumOrder:0}),[x,b]=T.useState({theme:"light",language:"en",timezone:"Africa/Lagos",dateFormat:"DD/MM/YYYY",productsPerPage:12,showOutOfStock:!0,showPrices:!0}),[w,y]=T.useState({enabled:!1,method:"email",backupCodes:[]});T.useEffect(()=>{_()},[t]);const _=async()=>{try{const A=await Pt(ie(q,"vendorSettings",t.uid));if(A.exists()){const P=A.data();d(P.notifications||u),f(P.privacy||h),p(P.storeSettings||g),b(P.displaySettings||x),y(P.twoFactor||w)}}catch(A){console.error("Error fetching settings:",A)}},S=async A=>{if(A.preventDefault(),l.newPassword!==l.confirmPassword){s({type:"error",text:"Passwords do not match"});return}if(l.newPassword.length<6){s({type:"error",text:"Password must be at least 6 characters"});return}r(!0);try{await R8(vs.currentUser,l.newPassword),s({type:"success",text:"Password changed successfully!"}),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(P){s({type:"error",text:P.message||"Failed to change password"})}finally{r(!1)}},j=async(A,P)=>{r(!0);try{await ke(ie(q,"vendorSettings",t.uid),{[A]:P,updatedAt:new Date().toISOString()}),s({type:"success",text:"Settings saved successfully!"})}catch(O){console.error("Error saving settings:",O),s({type:"error",text:"Failed to save settings"})}finally{r(!1)}},k=()=>{const A=Array.from({length:10},()=>Math.random().toString(36).substring(2,10).toUpperCase());y({...w,backupCodes:A})},N=[{id:"security",label:"Security",icon:""},{id:"notifications",label:"Notifications",icon:""},{id:"privacy",label:"Privacy",icon:""},{id:"store",label:"Store Settings",icon:""},{id:"display",label:"Display",icon:""},{id:"account",label:"Account",icon:""}];return i.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Settings"}),n.text&&i.jsx("div",{className:`mb-6 p-4 rounded-lg ${n.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.text}),i.jsx("div",{className:"mb-6 overflow-x-auto",children:i.jsx("div",{className:"flex gap-2 min-w-max",children:N.map(A=>i.jsxs("button",{onClick:()=>o(A.id),className:`px-4 py-2 rounded-lg font-medium transition ${a===A.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[A.icon," ",A.label]},A.id))})}),a==="security"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Change Password"}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Password"}),i.jsx("input",{type:"password",value:l.currentPassword,onChange:A=>c({...l,currentPassword:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"New Password"}),i.jsx("input",{type:"password",value:l.newPassword,onChange:A=>c({...l,newPassword:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm New Password"}),i.jsx("input",{type:"password",value:l.confirmPassword,onChange:A=>c({...l,confirmPassword:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsx("button",{type:"submit",disabled:e,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:bg-gray-400",children:e?"Changing...":"Change Password"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Two-Factor Authentication"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Enable 2FA"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add an extra layer of security"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:w.enabled,onChange:A=>y({...w,enabled:A.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),w.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Authentication Method"}),i.jsxs("select",{value:w.method,onChange:A=>y({...w,method:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"sms",children:"SMS"}),i.jsx("option",{value:"app",children:"Authenticator App"})]})]}),i.jsxs("div",{children:[i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg",children:"Generate Backup Codes"}),w.backupCodes.length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[i.jsx("p",{className:"font-medium mb-2",children:"Save these backup codes:"}),i.jsx("div",{className:"grid grid-cols-2 gap-2 font-mono text-sm",children:w.backupCodes.map((A,P)=>i.jsx("div",{children:A},P))})]})]})]})]}),i.jsx("button",{onClick:()=>j("twoFactor",w),className:"mt-4 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save 2FA Settings"})]})]}),a==="notifications"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Notification Preferences"}),i.jsx("div",{className:"space-y-4",children:Object.entries(u).map(([A,P])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"font-medium capitalize",children:A.replace(/([A-Z])/g," $1").trim()})}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:P,onChange:O=>d({...u,[A]:O.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},A))}),i.jsx("button",{onClick:()=>j("notifications",u),className:"mt-6 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Notification Settings"})]}),a==="privacy"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Privacy Settings"}),i.jsx("div",{className:"space-y-4",children:Object.entries(h).map(([A,P])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"font-medium capitalize",children:A.replace(/([A-Z])/g," $1").trim()})}),typeof P=="boolean"?i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:P,onChange:O=>f({...h,[A]:O.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):i.jsxs("select",{value:P,onChange:O=>f({...h,[A]:O.target.value}),className:"px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"public",children:"Public"}),i.jsx("option",{value:"private",children:"Private"}),i.jsx("option",{value:"friends",children:"Friends Only"})]})]},A))}),i.jsx("button",{onClick:()=>j("privacy",h),className:"mt-6 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Privacy Settings"})]}),a==="store"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Store Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Store Name"}),i.jsx("input",{type:"text",value:g.storeName,onChange:A=>p({...g,storeName:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Store URL Slug"}),i.jsx("input",{type:"text",value:g.storeSlug,onChange:A=>p({...g,storeSlug:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"my-store"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),i.jsxs("select",{value:g.currency,onChange:A=>p({...g,currency:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"NGN",children:"Nigerian Naira (NGN)"}),i.jsx("option",{value:"USD",children:"US Dollar (USD)"}),i.jsx("option",{value:"EUR",children:"Euro (EUR)"}),i.jsx("option",{value:"GBP",children:"British Pound (GBP)"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Rate (%)"}),i.jsx("input",{type:"number",value:g.taxRate,onChange:A=>p({...g,taxRate:parseFloat(A.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0",max:"100",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Fee"}),i.jsx("input",{type:"number",value:g.shippingFee,onChange:A=>p({...g,shippingFee:parseFloat(A.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Free Shipping Threshold"}),i.jsx("input",{type:"number",value:g.freeShippingThreshold,onChange:A=>p({...g,freeShippingThreshold:parseFloat(A.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Order Amount"}),i.jsx("input",{type:"number",value:g.minimumOrder,onChange:A=>p({...g,minimumOrder:parseFloat(A.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"0"})]})]}),i.jsx("div",{className:"space-y-2",children:["autoApproveOrders","allowReviews","requireLogin","maintenanceMode","vacationMode"].map(A=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium capitalize",children:A.replace(/([A-Z])/g," $1").trim()}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:g[A],onChange:P=>p({...g,[A]:P.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},A))}),g.vacationMode&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Vacation Message"}),i.jsx("textarea",{value:g.vacationMessage,onChange:A=>p({...g,vacationMessage:A.target.value}),rows:"3",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"We're on vacation. Back on..."})]})]}),i.jsx("button",{onClick:()=>j("storeSettings",g),className:"mt-6 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Store Settings"})]}),a==="display"&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Display Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Theme"}),i.jsxs("select",{value:x.theme,onChange:A=>b({...x,theme:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"dark",children:"Dark"}),i.jsx("option",{value:"auto",children:"Auto"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Language"}),i.jsxs("select",{value:x.language,onChange:A=>b({...x,language:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"fr",children:"French"}),i.jsx("option",{value:"es",children:"Spanish"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),i.jsxs("select",{value:x.timezone,onChange:A=>b({...x,timezone:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"Africa/Lagos",children:"Africa/Lagos (WAT)"}),i.jsx("option",{value:"America/New_York",children:"America/New York (EST)"}),i.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Format"}),i.jsxs("select",{value:x.dateFormat,onChange:A=>b({...x,dateFormat:A.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),i.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),i.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Products Per Page"}),i.jsx("input",{type:"number",value:x.productsPerPage,onChange:A=>b({...x,productsPerPage:parseInt(A.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",min:"6",max:"48"})]}),["showOutOfStock","showPrices"].map(A=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium capitalize",children:A.replace(/([A-Z])/g," $1").trim()}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x[A],onChange:P=>b({...x,[A]:P.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},A))]}),i.jsx("button",{onClick:()=>j("displaySettings",x),className:"mt-6 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Display Settings"})]}),a==="account"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Account Information"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Account Type:"}),i.jsx("span",{className:"font-semibold",children:"Vendor"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Account Status:"}),i.jsx("span",{className:"font-semibold text-green-600",children:"Active"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Member Since:"}),i.jsx("span",{className:"font-semibold",children:new Date((E=t==null?void 0:t.metadata)==null?void 0:E.creationTime).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg shadow-md p-6 border border-red-200 dark:border-red-800",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-800 dark:text-red-400 mb-4",children:"Danger Zone"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Deactivate Account"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Temporarily disable your store. You can reactivate anytime."}),i.jsx("button",{className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg",children:"Deactivate Account"})]}),i.jsxs("div",{className:"border-t border-red-200 dark:border-red-800 pt-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Delete Account"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Permanently delete your account and all data. This action cannot be undone."}),i.jsx("button",{className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Delete Account"})]})]})]})]})]})},N6e=()=>{var N,E,A,P,O;const{currentUser:t}=Le(),[e,r]=T.useState(!0),[n,s]=T.useState({balance:0,totalEarnings:0,pendingPayouts:0,totalPayouts:0}),[a,o]=T.useState([]),[l,c]=T.useState([]),[u,d]=T.useState(!1),[h,f]=T.useState(""),[g,p]=T.useState("bank"),[x,b]=T.useState({accountName:"",accountNumber:"",bankName:"",accountType:"savings"}),[w,y]=T.useState([]);T.useEffect(()=>{_()},[t]);const _=async()=>{try{const I=await Pt(ie(q,"vendorWallets",t.uid));I.exists()&&s(I.data());const D=Ce(ae(q,"walletTransactions"),je("vendorId","==",t.uid),en("createdAt","desc")),z=(await me(D)).docs.map(U=>({id:U.id,...U.data()}));o(z);const G=Ce(ae(q,"vendorPayouts"),je("vendorId","==",t.uid),en("createdAt","desc")),F=(await me(G)).docs.map(U=>({id:U.id,...U.data()}));c(F);const H={};z.filter(U=>U.type==="sale").forEach(U=>{const V=new Date(U.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"});H[V]=(H[V]||0)+U.amount});const $=Object.entries(H).map(([U,V])=>({date:U,amount:V})).slice(-7);y($)}catch(I){console.error("Error fetching wallet data:",I)}finally{r(!1)}},S=async I=>{I.preventDefault();const D=parseFloat(h);if(D<5e3){alert("Minimum payout amount is 5,000");return}if(D>n.balance){alert("Insufficient balance");return}r(!0);try{await Mt(ae(q,"vendorPayouts"),{vendorId:t.uid,vendorName:t.name,vendorEmail:t.email,amount:D,method:g,bankDetails:g==="bank"?x:null,status:"pending",createdAt:new Date().toISOString(),processedAt:null}),alert("Payout request submitted successfully! It will be processed within 1-3 business days."),d(!1),f(""),_()}catch(B){console.error("Error requesting payout:",B),alert("Failed to submit payout request")}finally{r(!1)}},j=I=>({sale:"",payout:"",refund:"",commission:""})[I]||"",k=I=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-300",processing:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300"})[I]||"bg-gray-100 text-gray-800 border-gray-300";return e?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Vendor Wallet"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Available Balance"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",(N=n.balance)==null?void 0:N.toLocaleString()]}),i.jsx("button",{onClick:()=>d(!0),className:"mt-3 text-sm bg-white/20 hover:bg-white/30 px-4 py-1 rounded-full transition",children:"Request Payout"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Earnings"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",(E=n.totalEarnings)==null?void 0:E.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"All-time revenue"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Pending Payouts"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",(A=n.pendingPayouts)==null?void 0:A.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Being processed"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg p-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Withdrawn"}),i.jsxs("p",{className:"text-3xl font-bold",children:["",(P=n.totalPayouts)==null?void 0:P.toLocaleString()]}),i.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Successfully paid out"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Earnings Overview (Last 7 Days)"}),i.jsx(ec,{width:"100%",height:300,children:i.jsxs(Lj,{data:w,children:[i.jsx(Xh,{strokeDasharray:"3 3"}),i.jsx(_i,{dataKey:"date"}),i.jsx(ji,{}),i.jsx($r,{}),i.jsx(Zo,{type:"monotone",dataKey:"amount",stroke:"#10b981",strokeWidth:2})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payout History"}),l.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No payout requests yet"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Method"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Processed"})]})}),i.jsx("tbody",{children:l.map(I=>{var D;return i.jsxs("tr",{className:"border-b dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4",children:new Date(I.createdAt).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4 font-semibold",children:["",(D=I.amount)==null?void 0:D.toLocaleString()]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:I.method}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${k(I.status)}`,children:I.status})}),i.jsx("td",{className:"py-3 px-4 text-sm",children:I.processedAt?new Date(I.processedAt).toLocaleDateString():"-"})]},I.id)})})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Transaction History"}),a.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No transactions yet"})]}):i.jsx("div",{className:"space-y-3",children:a.map(I=>{var D;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-3xl",children:j(I.type)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium capitalize",children:I.type}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.description}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(I.createdAt).toLocaleString()})]})]}),i.jsxs("p",{className:`text-lg font-bold ${I.type==="payout"||I.type==="commission"?"text-red-600":"text-green-600"}`,children:[I.type==="payout"||I.type==="commission"?"-":"+","",(D=I.amount)==null?void 0:D.toLocaleString()]})]},I.id)})})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Request Payout"}),i.jsx("button",{onClick:()=>d(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-400",children:["Available Balance: ",i.jsxs("span",{className:"font-bold",children:["",(O=n.balance)==null?void 0:O.toLocaleString()]})]}),i.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-500 mt-1",children:"Minimum payout: 5,000  Processing time: 1-3 business days"})]}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payout Amount"}),i.jsx("input",{type:"number",value:h,onChange:I=>f(I.target.value),required:!0,min:"5000",max:n.balance,step:"100",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",placeholder:"Enter amount"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payout Method"}),i.jsxs("select",{value:g,onChange:I=>p(I.target.value),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"bank",children:"Bank Transfer"}),i.jsx("option",{value:"paystack",children:"Paystack"}),i.jsx("option",{value:"mobile",children:"Mobile Money"})]})]}),g==="bank"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Name"}),i.jsx("input",{type:"text",value:x.accountName,onChange:I=>b({...x,accountName:I.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Number"}),i.jsx("input",{type:"text",value:x.accountNumber,onChange:I=>b({...x,accountNumber:I.target.value}),required:!0,maxLength:"10",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bank Name"}),i.jsxs("select",{value:x.bankName,onChange:I=>b({...x,bankName:I.target.value}),required:!0,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"",children:"Select Bank"}),i.jsx("option",{value:"Access Bank",children:"Access Bank"}),i.jsx("option",{value:"GTBank",children:"GTBank"}),i.jsx("option",{value:"First Bank",children:"First Bank"}),i.jsx("option",{value:"UBA",children:"UBA"}),i.jsx("option",{value:"Zenith Bank",children:"Zenith Bank"}),i.jsx("option",{value:"Stanbic IBTC",children:"Stanbic IBTC"}),i.jsx("option",{value:"Sterling Bank",children:"Sterling Bank"}),i.jsx("option",{value:"Fidelity Bank",children:"Fidelity Bank"}),i.jsx("option",{value:"Union Bank",children:"Union Bank"}),i.jsx("option",{value:"Polaris Bank",children:"Polaris Bank"}),i.jsx("option",{value:"Ecobank",children:"Ecobank"}),i.jsx("option",{value:"FCMB",children:"FCMB"}),i.jsx("option",{value:"Wema Bank",children:"Wema Bank"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Type"}),i.jsxs("select",{value:x.accountType,onChange:I=>b({...x,accountType:I.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"savings",children:"Savings"}),i.jsx("option",{value:"current",children:"Current"})]})]})]}),i.jsx("button",{type:"submit",disabled:e,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:e?"Processing...":"Request Payout"})]})]})})]})},S6e=()=>{var y,_,S,j;const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(!0),[a,o]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState(""),[h,f]=T.useState("all");T.useEffect(()=>{g()},[t]);const g=async()=>{try{const k=Ce(ae(q,"disputes"),je("vendorId","==",t.uid)),E=(await me(k)).docs.map(A=>({id:A.id,...A.data()}));E.sort((A,P)=>new Date(P.createdAt)-new Date(A.createdAt)),r(E)}catch(k){console.error("Error fetching disputes:",k)}finally{s(!1)}},p=async()=>{if(a)try{const k=await Pt(ie(q,"disputes",a.id));k.exists()&&o({id:k.id,...k.data()})}catch(k){console.error("Error refreshing dispute:",k)}},x=async()=>{if(u.trim())try{await WO(a.id,u,t.uid,"vendor"),d(""),await p(),g()}catch(k){console.error("Error sending message:",k)}},b=e.filter(k=>h==="all"?!0:k.status===h),w=k=>({open:"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/20 dark:text-yellow-400",investigating:"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900/20 dark:text-blue-400",resolved:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/20 dark:text-green-400",rejected:"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/20 dark:text-red-400"})[k]||"bg-gray-100 text-gray-800";return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Disputes Against Your Products"}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"Open"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:e.filter(k=>k.status==="open").length})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Investigating"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:e.filter(k=>k.status==="investigating").length})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 shadow",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Resolved"}),i.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:e.filter(k=>k.status==="resolved").length})]})]}),i.jsxs("select",{value:h,onChange:k=>f(k.target.value),className:"mb-6 px-4 py-2 border rounded-lg dark:bg-gray-700",children:[i.jsx("option",{value:"all",children:"All Disputes"}),i.jsx("option",{value:"open",children:"Open"}),i.jsx("option",{value:"investigating",children:"Investigating"}),i.jsx("option",{value:"resolved",children:"Resolved"})]}),b.length===0?i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No disputes"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Keep providing excellent service!"})]}):i.jsx("div",{className:"space-y-4",children:b.map(k=>{var N,E,A;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:k.subject}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Dispute #",k.id.substring(0,8),"  Order #",(N=k.orderId)==null?void 0:N.substring(0,8)]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Category: ",i.jsx("span",{className:"capitalize",children:(E=k.category)==null?void 0:E.replace("_"," ")})]})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${w(k.status)}`,children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:[i.jsx("span",{className:"font-medium",children:"Issue:"})," ",k.description]}),i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Buyer wants:"})," ",k.desiredResolution]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm text-gray-500",children:["Filed on ",new Date(k.createdAt).toLocaleDateString()," by ",k.buyerName]}),i.jsx("button",{onClick:()=>{o(k),c(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:"Respond"})]}),k.resolution&&i.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border-l-4 border-green-500",children:[i.jsx("p",{className:"text-sm font-medium mb-1",children:"Resolution:"}),i.jsxs("p",{className:"text-sm capitalize",children:["Decided in favor of: ",(A=k.resolution.decision)==null?void 0:A.replace("_"," ")]}),k.resolution.notes&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:k.resolution.notes})]})]},k.id)})}),l&&a&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-auto",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b p-6 flex justify-between items-center z-10",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Dispute Response"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["#",a.id.substring(0,8)]})]}),i.jsx("button",{onClick:()=>{c(!1),d("")},className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Dispute Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subject:"})," ",i.jsx("span",{className:"font-medium",children:a.subject})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category:"})," ",i.jsx("span",{className:"font-medium capitalize",children:(y=a.category)==null?void 0:y.replace("_"," ")})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Order Value:"})," ",i.jsxs("span",{className:"font-medium",children:["",(_=a.orderTotal)==null?void 0:_.toLocaleString()]})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"})," ",i.jsx("span",{className:"font-medium",children:new Date(a.createdAt).toLocaleString()})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Issue Description"}),i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:i.jsx("p",{className:"text-sm",children:a.description})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Desired Resolution"}),i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:i.jsx("p",{className:"text-sm",children:a.desiredResolution})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Communication"}),i.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-3",children:a.messages&&a.messages.length>0?a.messages.map(k=>i.jsxs("div",{className:`p-3 rounded-lg ${k.senderRole==="admin"?"bg-blue-50 dark:bg-blue-900/20":k.senderRole==="vendor"?"bg-green-50 dark:bg-green-900/20 ml-4":"bg-gray-50 dark:bg-gray-900 mr-4"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-xs font-medium capitalize",children:k.senderRole}),i.jsx("span",{className:"text-xs text-gray-500",children:new Date(k.timestamp).toLocaleString()})]}),i.jsx("p",{className:"text-sm",children:k.message})]},k.id)):i.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No messages yet"})}),a.status!=="resolved"&&a.status!=="rejected"&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg mb-3 border border-yellow-200 dark:border-yellow-800",children:i.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-400",children:" Tip: Provide detailed explanations and any evidence that supports your case. Be professional and factual."})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Type your response...",className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700",onKeyPress:k=>k.key==="Enter"&&x()}),i.jsx("button",{onClick:x,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Send"})]})]})]}),a.resolution&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"font-semibold mb-4",children:"Final Resolution"}),i.jsxs("div",{className:`p-4 rounded-lg ${a.resolution.decision==="vendor_favor"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[i.jsxs("p",{className:"text-sm mb-2",children:[i.jsx("span",{className:"font-medium",children:"Decision:"}),i.jsx("span",{className:"ml-2 capitalize font-bold",children:(S=a.resolution.decision)==null?void 0:S.replace("_"," ")})]}),a.resolution.refundAmount>0&&i.jsxs("p",{className:"text-sm mb-2",children:[i.jsx("span",{className:"font-medium",children:"Refund Amount:"}),i.jsxs("span",{className:"ml-2",children:["",(j=a.resolution.refundAmount)==null?void 0:j.toLocaleString()]})]}),i.jsxs("p",{className:"text-sm mb-2",children:[i.jsx("span",{className:"font-medium",children:"Admin Notes:"}),i.jsx("span",{className:"ml-2",children:a.resolution.notes})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Resolved on ",new Date(a.resolution.resolvedAt).toLocaleString()]})]})]})]})]})})]})},E6e=()=>{const{currentUser:t}=useAuth(),[e]=useSearchParams(),[r,n]=useState([]),[s,a]=useState(!0),[o,l]=useState("all"),[c,u]=useState("");useEffect(()=>{d();const p=oa.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders",filter:`buyer_id=eq.${(t==null?void 0:t.uid)||(t==null?void 0:t.id)}`},x=>{console.log("Real-time order change:",x),d()}).subscribe();return()=>{oa.removeChannel(p)}},[t]);const d=async()=>{try{const{data:p,error:x}=await oa.from("orders").select(`
          *,
          items:order_items(*)
        `).eq("buyer_id",(t==null?void 0:t.uid)||(t==null?void 0:t.id)).order("created_at",{ascending:!1});if(x)throw x;n(p||[])}catch(p){console.error("Error fetching orders from Supabase:",p)}finally{a(!1)}},h=p=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-300",confirmed:"bg-blue-100 text-blue-800 border-blue-300",processing:"bg-purple-100 text-purple-800 border-purple-300",shipped:"bg-indigo-100 text-indigo-800 border-indigo-300",delivered:"bg-green-100 text-green-800 border-green-300",completed:"bg-green-100 text-green-800 border-green-300",cancelled:"bg-red-100 text-red-800 border-red-300"})[p]||"bg-gray-100 text-gray-800 border-gray-300",f=p=>({pending:"",confirmed:"",processing:"",shipped:"",delivered:"",completed:"",cancelled:""})[p]||"",g=r.filter(p=>{var x;if(o!=="all"&&p.status!==o)return!1;if(c){const b=c.toLowerCase();return p.id.toLowerCase().includes(b)||((x=p.items)==null?void 0:x.some(w=>w.productName.toLowerCase().includes(b)))}return!0});return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"My Orders"}),i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[i.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),placeholder:"Search orders by ID or product name...",className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),i.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[i.jsx("option",{value:"all",children:"All Orders"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"confirmed",children:"Confirmed"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"shipped",children:"Shipped"}),i.jsx("option",{value:"delivered",children:"Delivered"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),g.length===0?i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c||o!=="all"?"No orders found":"No orders yet"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c||o!=="all"?"Try adjusting your filters":"Start shopping to see your orders here"}),i.jsx(Link,{to:"/shop",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Continue Shopping"})]}):i.jsx("div",{className:"space-y-4",children:g.map(p=>{var x,b,w,y;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 border-b dark:border-gray-700",children:i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order ID"}),i.jsxs("p",{className:"font-mono font-bold text-gray-900 dark:text-white",children:["#",p.id.substring(0,8).toUpperCase()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Order Date"}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(p.createdAt).toLocaleDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),i.jsxs("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["",(x=p.total)==null?void 0:x.toLocaleString()]})]}),i.jsx("div",{children:i.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-medium border inline-flex items-center gap-2 ${h(p.status)}`,children:[i.jsx("span",{children:f(p.status)}),i.jsx("span",{children:((b=p.status)==null?void 0:b.charAt(0).toUpperCase())+((w=p.status)==null?void 0:w.slice(1))})]})})]})}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"space-y-3 mb-4",children:(y=p.items)==null?void 0:y.map((_,S)=>i.jsxs("div",{className:"flex gap-4",children:[i.jsx("img",{src:_.image||"https://via.placeholder.com/100",alt:_.productName,className:"w-20 h-20 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:_.productName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Quantity: ",_.quantity]}),_.selectedVariation&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Object.entries(_.selectedVariation).map(([j,k])=>`${j}: ${k}`).join(", ")}),i.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",(_.price*_.quantity).toLocaleString()]})]})]},S))}),p.trackingNumber&&i.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-400 mb-1",children:"Tracking Number"}),i.jsx("p",{className:"font-mono font-bold text-blue-900 dark:text-blue-300",children:p.trackingNumber}),p.carrier&&i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 mt-1",children:["Carrier: ",p.carrier]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsx(Link,{to:`/buyer/orders/track/${p.id}`,className:"flex-1 min-w-[150px] px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-center rounded-lg font-medium transition-colors",children:"Track Order"}),p.status==="delivered"&&i.jsxs(i.Fragment,{children:[i.jsx(Link,{to:`/buyer/reviews?orderId=${p.id}`,className:"flex-1 min-w-[150px] px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-center rounded-lg font-medium transition-colors",children:"Write Review"}),i.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-medium transition-colors",children:"Report Issue"})]}),p.status==="pending"&&i.jsx("button",{className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",onClick:()=>{window.confirm("Are you sure you want to cancel this order?")&&alert("Cancel order feature coming soon")},children:"Cancel Order"}),i.jsx(Link,{to:`/messages?orderId=${p.id}`,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-medium transition-colors",children:"Contact Vendor"})]})]})]},p.id)})}),r.length>0&&i.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Orders"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(p=>p.status==="pending").length})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"In Progress"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.filter(p=>["confirmed","processing","shipped"].includes(p.status)).length})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(p=>p.status==="delivered"||p.status==="completed").length})]})]})]})},A6e=()=>{var h,f,g,p,x,b,w,y,_,S,j;const{orderId:t}=P0(),[e,r]=T.useState(null),[n,s]=T.useState([]),[a,o]=T.useState(!0),l=[{key:"pending",label:"Order Placed",icon:"",description:"Your order has been received"},{key:"confirmed",label:"Confirmed",icon:"",description:"Vendor confirmed your order"},{key:"processing",label:"Processing",icon:"",description:"Your order is being prepared"},{key:"shipped",label:"Shipped",icon:"",description:"Your order is on the way"},{key:"delivered",label:"Delivered",icon:"",description:"Order delivered successfully"}];T.useEffect(()=>{c()},[t]);const c=async()=>{try{const k=await Pt(ie(q,"orders",t));if(k.exists()){const N={id:k.id,...k.data()};r(N);const E=Ce(ae(q,"orderTracking",t,"history"),en("timestamp","desc")),P=(await me(E)).docs.map(O=>({id:O.id,...O.data()}));s(P)}}catch(k){console.error("Error fetching order:",k)}finally{o(!1)}},u=()=>{const k=(e==null?void 0:e.status)||"pending";return{pending:0,confirmed:1,processing:2,shipped:3,delivered:4,completed:4}[k]||0};if(a)return i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e)return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center py-20",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Order Not Found"}),i.jsx(he,{to:"/buyer/orders",className:"text-blue-600 hover:underline",children:"Back to Orders"})]})});const d=u();return i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"mb-6",children:i.jsx(he,{to:"/buyer/orders",className:"text-blue-600 hover:underline flex items-center gap-2",children:" Back to Orders"})}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:["Order #",e.id.substring(0,8).toUpperCase()]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Placed on ",new Date(e.createdAt).toLocaleDateString()]})]}),i.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${e.status==="delivered"||e.status==="completed"?"bg-green-100 text-green-800":e.status==="shipped"?"bg-blue-100 text-blue-800":e.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:((h=e.status)==null?void 0:h.charAt(0).toUpperCase())+((f=e.status)==null?void 0:f.slice(1))})]}),e.trackingNumber&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-400 mb-1",children:"Tracking Number"}),i.jsx("p",{className:"font-mono font-bold text-blue-900 dark:text-blue-300",children:e.trackingNumber})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Order Progress"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-700",children:i.jsx("div",{className:"h-full bg-blue-600 transition-all duration-500",style:{width:`${d/(l.length-1)*100}%`}})}),i.jsx("div",{className:"relative flex justify-between",children:l.map((k,N)=>{const E=N<=d,A=N===d;return i.jsxs("div",{className:"flex flex-col items-center",style:{width:"20%"},children:[i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl mb-3 transition-all ${E?"bg-blue-600 text-white shadow-lg scale-110":"bg-gray-200 dark:bg-gray-700 text-gray-500"} ${A?"ring-4 ring-blue-300":""}`,children:k.icon}),i.jsx("p",{className:`text-sm font-medium text-center mb-1 ${E?"text-gray-900 dark:text-white":"text-gray-500"}`,children:k.label}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:k.description})]},k.key)})})]}),e.estimatedDelivery&&e.status!=="delivered"&&i.jsx("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-400",children:["Estimated Delivery: ",i.jsx("span",{className:"font-semibold",children:new Date(e.estimatedDelivery).toLocaleDateString()})]})})]}),n.length>0&&i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Tracking History"}),i.jsx("div",{className:"space-y-4",children:n.map((k,N)=>i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${N===0?"bg-blue-600":"bg-gray-300"}`}),N!==n.length-1&&i.jsx("div",{className:"w-0.5 h-full bg-gray-300 dark:bg-gray-600 mt-2"})]}),i.jsxs("div",{className:"flex-1 pb-4",children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:k.status}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.description}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(k.timestamp).toLocaleString()}),k.location&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Location: ",k.location]})]})]},k.id))})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Items"}),i.jsx("div",{className:"space-y-4",children:(g=e.items)==null?void 0:g.map((k,N)=>i.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-b-0",children:[i.jsx("img",{src:k.image||"https://via.placeholder.com/100",alt:k.productName,className:"w-20 h-20 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:k.productName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Quantity: ",k.quantity]}),k.selectedVariation&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Object.entries(k.selectedVariation).map(([E,A])=>`${E}: ${A}`).join(", ")})]}),i.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["",(k.price*k.quantity).toLocaleString()]})]},N))}),i.jsxs("div",{className:"mt-6 pt-4 border-t space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",(p=e.subtotal)==null?void 0:p.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[i.jsx("span",{children:"Shipping"}),i.jsxs("span",{children:["",(x=e.shippingFee)==null?void 0:x.toLocaleString()]})]}),e.discount>0&&i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Discount"}),i.jsxs("span",{children:["-",(b=e.discount)==null?void 0:b.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 dark:text-white pt-2 border-t",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{children:["",(w=e.total)==null?void 0:w.toLocaleString()]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Shipping Address"}),i.jsxs("div",{className:"text-gray-700 dark:text-gray-300",children:[i.jsx("p",{className:"font-medium",children:e.customerName}),i.jsx("p",{children:(y=e.shippingAddress)==null?void 0:y.address}),i.jsxs("p",{children:[(_=e.shippingAddress)==null?void 0:_.city,", ",(S=e.shippingAddress)==null?void 0:S.state]}),((j=e.shippingAddress)==null?void 0:j.zipCode)&&i.jsx("p",{children:e.shippingAddress.zipCode}),i.jsx("p",{className:"mt-2",children:e.customerPhone}),i.jsx("p",{children:e.customerEmail})]})]}),e.status==="delivered"&&i.jsxs("div",{className:"mt-6 flex gap-4",children:[i.jsx(he,{to:`/buyer/reviews?orderId=${e.id}`,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-3 rounded-lg font-medium",children:"Write a Review"}),i.jsx("button",{className:"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-lg font-medium",children:"Report Issue"})]})]})})},C6e=()=>{const{currentUser:t}=useAuth(),{addToCart:e}=useCart(),[r,n]=useState([]),[s,a]=useState(!0),[o,l]=useState([]),[c,u]=useState(!1);useEffect(()=>{d()},[t]);const d=async()=>{try{const{data:x,error:b}=await oa.from("wishlists").select(`
          id,
          product_id,
          created_at,
          product:products(*)
        `).eq("user_id",(t==null?void 0:t.uid)||(t==null?void 0:t.id));if(b)throw b;const w=(x||[]).map(y=>({wishlistId:y.id,productId:y.product_id,createdAt:y.created_at,product:y.product})).filter(y=>y.product!==null);n(w)}catch(x){console.error("Error fetching wishlist from Supabase:",x)}finally{a(!1)}},h=async x=>{try{const{error:b}=await oa.from("wishlists").delete().eq("id",x);if(b)throw b;n(r.filter(w=>w.wishlistId!==x)),l(o.filter(w=>w!==x))}catch(b){console.error("Error removing from wishlist on Supabase:",b),alert("Failed to remove item")}},f=x=>{e(x.product,1),h(x.wishlistId),alert("Item moved to cart!")},g=x=>{if(o.includes(x))l(o.filter(b=>b!==x));else{if(o.length>=4){alert("You can compare up to 4 products at a time");return}l([...o,x])}},p=()=>r.filter(x=>o.includes(x.wishlistId)).map(x=>x.product);return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Wishlist"}),o.length>1&&i.jsxs("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:["Compare (",o.length,")"]})]}),r.length===0?i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your wishlist is empty"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add items you love to save them for later"}),i.jsx(Link,{to:"/shop",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Start Shopping"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:[r.length," ",r.length===1?"item":"items"," in your wishlist"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(x=>{var b,w,y;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group relative",children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsxs("label",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 px-2 py-1 rounded-lg shadow cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.includes(x.wishlistId),onChange:()=>g(x.wishlistId),className:"w-4 h-4"}),i.jsx("span",{className:"text-xs font-medium",children:"Compare"})]})}),i.jsx("button",{onClick:()=>h(x.wishlistId),className:"absolute top-2 right-2 z-10 bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-lg",children:""}),i.jsx(Link,{to:`/product/${x.product.id}`,children:i.jsxs("div",{className:"relative overflow-hidden aspect-square",children:[i.jsx("img",{src:((b=x.product.images)==null?void 0:b[0])||"https://via.placeholder.com/300",alt:x.product.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),x.product.discount&&i.jsxs("span",{className:"absolute bottom-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:["-",x.product.discount,"%"]})]})}),i.jsxs("div",{className:"p-4",children:[i.jsx(Link,{to:`/product/${x.product.id}`,children:i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white line-clamp-2 mb-2 hover:text-blue-600 min-h-[3rem]",children:x.product.name})}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsxs("p",{className:"text-orange-600 dark:text-orange-400 font-bold text-xl",children:["",(w=x.product.price)==null?void 0:w.toLocaleString()]}),x.product.originalPrice&&x.product.originalPrice>x.product.price&&i.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",(y=x.product.originalPrice)==null?void 0:y.toLocaleString()]})]}),x.product.stock!==void 0&&i.jsx("p",{className:`text-xs mb-3 ${x.product.stock>10?"text-green-600":x.product.stock>0?"text-yellow-600":"text-red-600"}`,children:x.product.stock>10?"In Stock":x.product.stock>0?`Only ${x.product.stock} left`:"Out of Stock"}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:["Added ",new Date(x.createdAt).toLocaleDateString()]}),i.jsx("button",{onClick:()=>f(x),disabled:x.product.stock===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-medium transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:x.product.stock===0?"Out of Stock":"Move to Cart"})]})]},x.wishlistId)})})]}),c&&i.jsx(T6e,{products:p(),onClose:()=>u(!1)})]})},T6e=({products:t,onClose:e})=>{const{addToCart:r}=useCart(),n=[{key:"price",label:"Price"},{key:"originalPrice",label:"Original Price"},{key:"discount",label:"Discount"},{key:"stock",label:"Stock"},{key:"category",label:"Category"},{key:"brand",label:"Brand"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"weight",label:"Weight"},{key:"dimensions",label:"Dimensions"}],s=(a,o)=>o==="price"||o==="originalPrice"?a[o]?`${a[o].toLocaleString()}`:"N/A":o==="discount"?a[o]?`${a[o]}%`:"None":o==="stock"?a[o]!==void 0?a[o]:"N/A":o==="rating"?a[o]?`${a[o]} `:"No rating":a[o]||"N/A";return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-auto",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b p-6 flex justify-between items-center z-10",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Compare Products"}),i.jsx("button",{onClick:e,className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-4 border-b sticky left-0 bg-white dark:bg-gray-800 min-w-[150px]",children:"Feature"}),t.map(a=>{var o;return i.jsx("th",{className:"p-4 border-b min-w-[200px]",children:i.jsxs("div",{children:[i.jsx("img",{src:((o=a.images)==null?void 0:o[0])||"https://via.placeholder.com/150",alt:a.name,className:"w-32 h-32 object-cover rounded-lg mx-auto mb-2"}),i.jsx("p",{className:"font-semibold text-sm line-clamp-2",children:a.name})]})},a.id)})]})}),i.jsxs("tbody",{children:[n.map(a=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-4 font-medium sticky left-0 bg-white dark:bg-gray-800",children:a.label}),t.map(o=>i.jsx("td",{className:"p-4 text-center",children:s(o,a.key)},o.id))]},a.key)),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-4 font-medium sticky left-0 bg-white dark:bg-gray-800",children:"Description"}),t.map(a=>i.jsx("td",{className:"p-4 text-sm",children:i.jsx("p",{className:"line-clamp-3",children:a.description||"No description"})},a.id))]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-4 font-medium sticky left-0 bg-white dark:bg-gray-800",children:"Actions"}),t.map(a=>i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:()=>{r(a,1),alert("Added to cart!")},disabled:a.stock===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-sm disabled:bg-gray-400",children:"Add to Cart"}),i.jsx(Link,{to:`/product/${a.id}`,className:"block w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-center py-2 rounded-lg text-sm",children:"View Details"})]})},a.id))]})]})]})})})]})})},P6e=async(t,e)=>{await ke(ie(q,"users",t),{...e,updatedAt:ag()})},O6e=async(t,e,r)=>{try{const n=e.name.split(".").pop(),s=`${t}_${Date.now()}.${n}`,a=cs(us,`profiles/${t}/${s}`);if(!r)return await os(a,e),await ls(a)}catch(n){throw console.error("Error uploading profile image:",n),n}},I6e=t=>{const e={};return(!t.name||t.name.trim().length<2)&&(e.name="Name must be at least 2 characters"),t.email&&!R6e(t.email)&&(e.email="Invalid email address"),t.phone&&!D6e(t.phone)&&(e.phone="Invalid phone number"),{isValid:Object.keys(e).length===0,errors:e}},R6e=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),D6e=t=>/^(\+234|0)[789][01]\d{8}$/.test(t),SC=(t,e="")=>t==null?`${e}0`:`${e}${Number(t).toLocaleString("en-NG",{minimumFractionDigits:0,maximumFractionDigits:2})}`,M6e=t=>t?(t instanceof Date?t:new Date(t.seconds?t.seconds*1e3:t)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",$6e=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara","FCT"],L6e=()=>{const{currentUser:t,getUserData:e}=Le(),[r,n]=T.useState({name:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:""}}),[s,a]=T.useState(null),[o,l]=T.useState(""),[c,u]=T.useState(!1),[d,h]=T.useState(!1),[f,g]=T.useState(""),[p,x]=T.useState({});T.useEffect(()=>{b()},[t]);const b=async()=>{if(t){const S=await e(t.uid);n({name:S.name||"",email:S.email||"",phone:S.phone||"",address:S.address||{street:"",city:"",state:"",zipCode:""}}),l(S.avatar||"")}},w=S=>{const{name:j,value:k}=S.target;if(j.includes(".")){const[N,E]=j.split(".");n(A=>({...A,[N]:{...A[N],[E]:k}}))}else n(N=>({...N,[j]:k}))},y=S=>{const j=S.target.files[0];j&&(a(j),l(URL.createObjectURL(j)))},_=async S=>{S.preventDefault(),x({}),g("");const j=I6e(r);if(!j.isValid){x(j.errors);return}u(!0);try{let k=o;s&&(h(!0),k=await O6e(t.uid,s)),await P6e(t.uid,{...r,avatar:k,updatedAt:new Date().toISOString()}),g("Profile updated successfully!"),a(null),await b()}catch(k){x({submit:k.message||"Failed to update profile"})}finally{u(!1),h(!1)}};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account information"})]}),f&&i.jsx("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 rounded-lg",children:i.jsx("p",{className:"text-green-700 dark:text-green-400",children:f})}),p.submit&&i.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 rounded-lg",children:i.jsx("p",{className:"text-red-700 dark:text-red-400",children:p.submit})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Profile Picture"}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative",children:[o?i.jsx("img",{src:o,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-500"}):i.jsx("div",{className:"w-32 h-32 rounded-full bg-blue-500 flex items-center justify-center text-white text-4xl font-bold",children:r.name.charAt(0).toUpperCase()}),d&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),i.jsx("input",{type:"file",id:"avatar",accept:"image/*",onChange:y,className:"hidden"}),i.jsx("label",{htmlFor:"avatar",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700 transition-colors",children:"Change Photo"}),i.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"JPG, PNG or GIF (Max 5MB)"})]}),i.jsx("div",{className:"mt-6 pt-6 border-t dark:border-gray-700",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Type"}),i.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-white capitalize",children:t==null?void 0:t.role})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),i.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:new Date(t==null?void 0:t.createdAt).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),i.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[(t==null?void 0:t.loyaltyPoints)||0," pts"]})]})]})})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("form",{onSubmit:_,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-6",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",name:"name",value:r.name,onChange:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),p.name&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),i.jsx("input",{type:"email",name:"email",value:r.email,onChange:w,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-white cursor-not-allowed"}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:w,placeholder:"+234 800 000 0000",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),p.phone&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.phone})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-white mb-4",children:"Shipping Address"}),i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),i.jsx("input",{type:"text",name:"address.street",value:r.address.street,onChange:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),i.jsx("input",{type:"text",name:"address.city",value:r.address.city,onChange:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"State"}),i.jsxs("select",{name:"address.state",value:r.address.state,onChange:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"Select State"}),$6e.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Zip Code"}),i.jsx("input",{type:"text",name:"address.zipCode",value:r.address.zipCode,onChange:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]})]})]}),i.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[i.jsx("button",{type:"button",onClick:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"Saving...":"Save Changes"})]})]})})]})]})},F6e=()=>{const{currentUser:t,logout:e}=Le(),[r,n]=T.useState(!1),[s,a]=T.useState({type:"",text:""}),[o,l]=T.useState({notifications:{email:!0,sms:!1,orderUpdates:!0,promotions:!0,newsletter:!1},privacy:{profileVisible:!0,showPurchaseHistory:!1,allowReviews:!0},preferences:{language:"en",currency:"NGN",theme:"light"}}),[c,u]=T.useState({currentPassword:"",newPassword:"",confirmPassword:""});T.useEffect(()=>{d()},[]);const d=async()=>{try{const p=await Pt(ie(q,"users",t.uid));p.exists()&&p.data().settings&&l(p.data().settings)}catch(p){console.error("Error fetching settings:",p)}},h=async()=>{n(!0),a({type:"",text:""});try{await ke(ie(q,"users",t.uid),{settings:o,updatedAt:new Date().toISOString()}),a({type:"success",text:"Settings saved successfully!"})}catch{a({type:"error",text:"Failed to save settings"})}finally{n(!1)}},f=async p=>{if(p.preventDefault(),c.newPassword!==c.confirmPassword){a({type:"error",text:"Passwords do not match"});return}if(c.newPassword.length<6){a({type:"error",text:"Password must be at least 6 characters"});return}n(!0);try{await R8(vs.currentUser,c.newPassword),a({type:"success",text:"Password changed successfully!"}),u({currentPassword:"",newPassword:"",confirmPassword:""})}catch(x){a({type:"error",text:x.message||"Failed to change password"})}finally{n(!1)}},g=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone."))try{await ke(ie(q,"users",t.uid),{status:"deleted",deletedAt:new Date().toISOString()}),await e()}catch{a({type:"error",text:"Failed to delete account"})}};return i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Account Settings"}),s.text&&i.jsx("div",{className:`mb-6 p-4 rounded-lg ${s.type==="success"?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:s.text}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Notification Preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Email Notifications"}),i.jsx("input",{type:"checkbox",checked:o.notifications.email,onChange:p=>l({...o,notifications:{...o.notifications,email:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"SMS Notifications"}),i.jsx("input",{type:"checkbox",checked:o.notifications.sms,onChange:p=>l({...o,notifications:{...o.notifications,sms:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Order Updates"}),i.jsx("input",{type:"checkbox",checked:o.notifications.orderUpdates,onChange:p=>l({...o,notifications:{...o.notifications,orderUpdates:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Promotional Offers"}),i.jsx("input",{type:"checkbox",checked:o.notifications.promotions,onChange:p=>l({...o,notifications:{...o.notifications,promotions:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Newsletter"}),i.jsx("input",{type:"checkbox",checked:o.notifications.newsletter,onChange:p=>l({...o,notifications:{...o.notifications,newsletter:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Privacy Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Public Profile"}),i.jsx("input",{type:"checkbox",checked:o.privacy.profileVisible,onChange:p=>l({...o,privacy:{...o.privacy,profileVisible:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Show Purchase History"}),i.jsx("input",{type:"checkbox",checked:o.privacy.showPurchaseHistory,onChange:p=>l({...o,privacy:{...o.privacy,showPurchaseHistory:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("label",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Allow Product Reviews"}),i.jsx("input",{type:"checkbox",checked:o.privacy.allowReviews,onChange:p=>l({...o,privacy:{...o.privacy,allowReviews:p.target.checked}}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),i.jsxs("select",{value:o.preferences.language,onChange:p=>l({...o,preferences:{...o.preferences,language:p.target.value}}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"yo",children:"Yoruba"}),i.jsx("option",{value:"ha",children:"Hausa"}),i.jsx("option",{value:"ig",children:"Igbo"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),i.jsxs("select",{value:o.preferences.currency,onChange:p=>l({...o,preferences:{...o.preferences,currency:p.target.value}}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[i.jsx("option",{value:"NGN",children:"NGN ()"}),i.jsx("option",{value:"USD",children:"USD ($)"}),i.jsx("option",{value:"EUR",children:"EUR ()"}),i.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Theme"}),i.jsxs("select",{value:o.preferences.theme,onChange:p=>l({...o,preferences:{...o.preferences,theme:p.target.value}}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"dark",children:"Dark"}),i.jsx("option",{value:"auto",children:"Auto"})]})]})]})]}),i.jsx("button",{onClick:h,disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg mb-6 disabled:bg-gray-400",children:r?"Saving...":"Save Settings"}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Change Password"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsx("input",{type:"password",placeholder:"Current Password",value:c.currentPassword,onChange:p=>u({...c,currentPassword:p.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("input",{type:"password",placeholder:"New Password",value:c.newPassword,onChange:p=>u({...c,newPassword:p.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("input",{type:"password",placeholder:"Confirm New Password",value:c.confirmPassword,onChange:p=>u({...c,confirmPassword:p.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),i.jsx("button",{type:"submit",disabled:r,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:r?"Changing...":"Change Password"})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-600 dark:text-red-400 mb-4",children:"Danger Zone"}),i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),i.jsx("button",{onClick:g,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg",children:"Delete Account"})]})]})},U6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState({orderUpdates:!0,promotions:!0,newProducts:!1,flashSales:!0,newsletter:!0,reviews:!0}),[n,s]=T.useState(!1),[a,o]=T.useState("");T.useEffect(()=>{l()},[t]);const l=async()=>{try{const u=await Pt(ie(q,"users",t.uid));u.exists()&&u.data().emailPreferences&&r(u.data().emailPreferences)}catch(u){console.error("Error fetching preferences:",u)}},c=async u=>{u.preventDefault(),s(!0);try{await ke(ie(q,"users",t.uid),{emailPreferences:e,updatedAt:new Date().toISOString()}),o("Email preferences saved successfully!"),setTimeout(()=>o(""),3e3)}catch(d){console.error("Error saving preferences:",d),o("Failed to save preferences")}finally{s(!1)}};return i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Email Preferences"}),a&&i.jsx("div",{className:`mb-6 p-4 rounded-lg ${a.includes("success")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Order Updates"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications about your order status"})]}),i.jsx("input",{type:"checkbox",checked:e.orderUpdates,onChange:u=>r({...e,orderUpdates:u.target.checked}),className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Promotions & Deals"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get exclusive deals and coupon codes"})]}),i.jsx("input",{type:"checkbox",checked:e.promotions,onChange:u=>r({...e,promotions:u.target.checked}),className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"New Products"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Be the first to know about new arrivals"})]}),i.jsx("input",{type:"checkbox",checked:e.newProducts,onChange:u=>r({...e,newProducts:u.target.checked}),className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Flash Sales"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified about limited-time flash sales"})]}),i.jsx("input",{type:"checkbox",checked:e.flashSales,onChange:u=>r({...e,flashSales:u.target.checked}),className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Newsletter"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive our weekly newsletter with tips and trends"})]}),i.jsx("input",{type:"checkbox",checked:e.newsletter,onChange:u=>r({...e,newsletter:u.target.checked}),className:"w-5 h-5"})]}),i.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Review Reminders"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get reminded to review your purchases"})]}),i.jsx("input",{type:"checkbox",checked:e.reviews,onChange:u=>r({...e,reviews:u.target.checked}),className:"w-5 h-5"})]})]}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:n?"Saving...":"Save Preferences"})]})})]})},rb={bronze:0,silver:1e3,gold:5e3,platinum:15e3},EC={bronze:{discount:0,pointsMultiplier:1,freeShipping:!1},silver:{discount:5,pointsMultiplier:1.25,freeShipping:!1},gold:{discount:10,pointsMultiplier:1.5,freeShipping:!0},platinum:{discount:15,pointsMultiplier:2,freeShipping:!0}},V6e=async(t,e,r)=>{try{const n=Ce(ae(q,"loyalty"),je("userId","==",t)),s=await me(n);if(s.empty)throw new Error("Loyalty account not found");const a=s.docs[0],o=a.data();if(o.points<e)throw new Error("Insufficient points");const l=o.points-e;return await ke(ie(q,"loyalty",a.id),{points:l,updatedAt:new Date().toISOString()}),await Mt(ae(q,"loyaltyTransactions"),{userId:t,points:-e,type:"redeem",reason:r,createdAt:new Date().toISOString()}),l}catch(n){throw console.error("Error redeeming points:",n),n}},B6e=t=>EC[t]||EC.bronze,LM=async t=>{try{const e=Ce(ae(q,"loyalty"),je("userId","==",t)),r=await me(e);return r.empty?null:{id:r.docs[0].id,...r.docs[0].data()}}catch(e){return console.error("Error getting loyalty account:",e),null}},z6e=async t=>{try{const e=Ce(ae(q,"loyaltyTransactions"),je("userId","==",t));return(await me(e)).docs.map(n=>({id:n.id,...n.data()})).sort((n,s)=>new Date(s.createdAt)-new Date(n.createdAt))}catch(e){return console.error("Error getting transactions:",e),[]}},q6e=()=>{const t=Jt(),{currentUser:e}=Le(),{cartItems:r,removeFromCart:n,updateQuantity:s,clearCart:a}=wf(),[o,l]=T.useState([]),[c,u]=T.useState(""),[d,h]=T.useState(null),[f,g]=T.useState(null),[p,x]=T.useState(!1),[b,w]=T.useState(0),[y,_]=T.useState(!1);T.useEffect(()=>{e&&(S(),j())},[e]),T.useEffect(()=>{let $;return e&&r.length>0&&($=setTimeout(()=>{nNe(e.uid,r,e.email,e.name)},5*60*1e3)),()=>{$&&clearTimeout($)}},[r,e]);const S=async()=>{try{const $=await LM(e.uid);g($)}catch($){console.error("Error fetching loyalty account:",$)}},j=async()=>{try{const $=Ce(ae(q,"coupons"),je("active","==",!0)),V=(await me($)).docs.map(Z=>({id:Z.id,...Z.data()}));l(V)}catch($){console.error("Error fetching coupons:",$)}},k=()=>{if(!c.trim()){alert("Please enter a coupon code");return}const $=o.find(U=>U.code.toUpperCase()===c.toUpperCase()&&U.active&&new Date(U.expiryDate)>new Date&&(!U.usageLimit||U.usedCount<U.usageLimit));if(!$){alert("Invalid or expired coupon code");return}if($.minPurchase>B){alert(`Minimum purchase of ${$.minPurchase.toLocaleString()} required`);return}h($),alert(`Coupon applied! You saved ${E($).toLocaleString()}`)},N=()=>{h(null),u("")},E=$=>{if(!$)return 0;let U=0;return $.type==="percentage"?(U=B*$.value/100,$.maxDiscount>0&&(U=Math.min(U,$.maxDiscount))):U=$.value,Math.min(U,B)},A=$=>{const U=parseInt($.target.value)||0,V=Math.min((f==null?void 0:f.points)||0,B);w(Math.min(U,V))},P=$=>{n($)},O=($,U)=>{if(U<1){P($);return}const V=r.find(Z=>Z.id===$);if(U>V.stock){alert(`Only ${V.stock} items available in stock`);return}s($,U)},I=()=>{window.confirm("Are you sure you want to clear your cart?")&&(a(),h(null),x(!1),w(0))},D=()=>{if(!e){alert("Please login to checkout"),t("/login");return}for(const U of r)if(U.quantity>U.stock){alert(`${U.name} has only ${U.stock} items in stock`);return}e&&sNe(e.uid),t("/checkout",{state:{appliedCoupon:d,pointsUsed:p?b:0,loyaltyDiscount:p?b:0}})},B=r.reduce(($,U)=>$+U.price*U.quantity,0),z=E(d),G=p?b:0,Q=z+G,F=B>0?B>=5e4?0:2e3:0,H=Math.max(0,B-Q+F);return r.length===0?i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-10 px-4",children:i.jsx("div",{className:"max-w-4xl mx-auto text-center",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-10",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Your Cart is Empty"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Looks like you haven't added anything to your cart yet"}),i.jsx(he,{to:"/shop",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-lg",children:"Continue Shopping"})]})})}):i.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Shopping Cart"}),i.jsx("button",{onClick:I,className:"text-red-600 hover:text-red-700 font-medium",children:"Clear Cart"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.map($=>{var U;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("img",{src:((U=$.images)==null?void 0:U[0])||"https://via.placeholder.com/150",alt:$.name,className:"w-24 h-24 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(he,{to:`/product/${$.id}`,className:"text-lg font-semibold hover:text-blue-600 dark:text-white",children:$.name}),$.variation&&Object.keys($.variation).length>0&&i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:Object.entries($.variation).map(([V,Z])=>i.jsxs("span",{className:"mr-3",children:[V,": ",i.jsx("strong",{children:Z})]},V))}),i.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[i.jsxs("div",{className:"flex items-center border rounded-lg",children:[i.jsx("button",{onClick:()=>O($.id,$.quantity-1),className:"px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-700",children:"-"}),i.jsx("input",{type:"number",value:$.quantity,onChange:V=>O($.id,parseInt(V.target.value)||1),className:"w-16 text-center border-x dark:bg-gray-800",min:"1",max:$.stock}),i.jsx("button",{onClick:()=>O($.id,$.quantity+1),className:"px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-700",children:"+"})]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Stock: ",$.stock]})]}),$.flashSale&&i.jsx("div",{className:"mt-2",children:i.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:[" Flash Sale: ",$.flashSale.discount,"% OFF"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["",($.price*$.quantity).toLocaleString()]}),$.originalPrice&&$.originalPrice>$.price&&i.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",($.originalPrice*$.quantity).toLocaleString()]}),i.jsx("button",{onClick:()=>P($.id),className:"mt-4 text-red-600 hover:text-red-700 text-sm",children:"Remove"})]})]})},$.id)}),i.jsx(he,{to:"/shop",className:"inline-block text-blue-600 hover:underline font-medium",children:" Continue Shopping"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 sticky top-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),i.jsxs("div",{className:"mb-4 pb-4 border-b dark:border-gray-700",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coupon Code"}),d?i.jsxs("div",{className:"flex items-center justify-between bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-800 dark:text-green-300",children:d.code}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["-",d.type==="percentage"?`${d.value}%`:`${d.value}`]})]}),i.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:c,onChange:$=>u($.target.value.toUpperCase()),placeholder:"Enter code",className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 text-sm"}),i.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Apply"})]})]}),e&&f&&f.points>0&&i.jsxs("div",{className:"mb-4 pb-4 border-b dark:border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Use Loyalty Points"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:p,onChange:$=>{x($.target.checked),$.target.checked||w(0)},className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),p&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:["Available: ",f.points.toLocaleString()," points (",f.points.toLocaleString(),")"]}),i.jsx("input",{type:"number",value:b,onChange:A,max:Math.min(f.points,B),min:"0",className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 text-sm",placeholder:"Points to use"}),b>0&&i.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Saving: ",b.toLocaleString()]})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal"}),i.jsxs("span",{className:"font-medium",children:["",B.toLocaleString()]})]}),z>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-green-600",children:"Coupon Discount"}),i.jsxs("span",{className:"text-green-600 font-medium",children:["-",z.toLocaleString()]})]}),G>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-purple-600",children:"Loyalty Points"}),i.jsxs("span",{className:"text-purple-600 font-medium",children:["-",G.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Shipping"}),i.jsx("span",{className:"font-medium",children:F===0?i.jsx("span",{className:"text-green-600",children:"FREE"}):`${F.toLocaleString()}`})]}),F>0&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Add ",(5e4-B).toLocaleString()," more for free shipping"]}),Q>0&&i.jsx("div",{className:"pt-3 border-t dark:border-gray-700",children:i.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[i.jsx("span",{children:"Total Savings"}),i.jsxs("span",{children:["",Q.toLocaleString()]})]})})]}),i.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mb-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-semibold",children:"Total"}),i.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["",H.toLocaleString()]})]})}),i.jsx("button",{onClick:D,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition",children:"Proceed to Checkout"}),i.jsx("div",{className:"mt-4 text-center text-xs text-gray-500",children:i.jsx("p",{children:" Secure Checkout"})}),i.jsxs("div",{className:"mt-6 space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Free returns within 7 days"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Secure payment options"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Earn loyalty points on purchase"})]})]})]})})]}),i.jsxs("div",{className:"mt-10",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"You May Also Like"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Based on items in your cart..."})]})]})})},W6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState(0),[n,s]=T.useState([]),[a,o]=T.useState(!0);T.useEffect(()=>{l()},[t]);const l=async()=>{try{const c=await me(Ce(ae(q,"wallets"),je("userId","==",t.uid),yc(1)));c.empty||r(c.docs[0].data().balance||0);const u=Ce(ae(q,"wallets",t.uid,"transactions"),en("createdAt","desc"),yc(20)),d=await me(u);s(d.docs.map(h=>({id:h.id,...h.data()})))}catch(c){console.error("Error fetching wallet data:",c)}finally{o(!1)}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"My Wallet"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your wallet and transactions"})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-8 text-white mb-6",children:[i.jsx("p",{className:"text-sm opacity-90 mb-2",children:"Available Balance"}),i.jsx("p",{className:"text-4xl font-bold mb-6",children:SC(e)}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{className:"px-6 py-2 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100",children:"Add Money"}),i.jsx("button",{className:"px-6 py-2 bg-transparent border-2 border-white rounded-lg font-semibold hover:bg-white hover:text-blue-600",children:"Withdraw"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Transaction History"}),n.length===0?i.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8",children:"No transactions yet"}):i.jsx("div",{className:"space-y-4",children:n.map(c=>i.jsxs("div",{className:"flex items-center justify-between py-4 border-b dark:border-gray-700 last:border-0",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${c.type==="credit"?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"}`,children:i.jsx("span",{className:"text-2xl",children:c.type==="credit"?"":""})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:c.description||c.type}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:M6e(c.createdAt)})]})]}),i.jsxs("p",{className:`text-lg font-bold ${c.type==="credit"?"text-green-600":"text-red-600"}`,children:[c.type==="credit"?"+":"-",SC(c.amount)]})]},c.id))})]})]})},H6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState([]),[a,o]=T.useState(!0),[l,c]=T.useState(!1),[u,d]=T.useState(null);T.useEffect(()=>{h(),f()},[t]);const h=async()=>{try{const p=Ce(ae(q,"reviews"),je("userId","==",t.uid)),b=(await me(p)).docs.map(w=>({id:w.id,...w.data()}));r(b)}catch(p){console.error("Error fetching reviews:",p)}},f=async()=>{try{const p=Ce(ae(q,"orders"),je("userId","==",t.uid),je("status","==","completed")),x=await me(p),b=Ce(ae(q,"reviews"),je("userId","==",t.uid)),y=(await me(b)).docs.map(S=>S.data().productId),_=[];x.docs.forEach(S=>{var k;(k=S.data().items)==null||k.forEach(N=>{y.includes(N.productId)||_.push({orderId:S.id,...N})})}),s(_)}catch(p){console.error("Error fetching pending reviews:",p)}finally{o(!1)}},g=p=>{d(p),c(!0)};return a?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"My Reviews"}),n.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Products to Review"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((p,x)=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[i.jsx("img",{src:p.image||"https://via.placeholder.com/150",alt:p.productName,className:"w-full h-32 object-cover rounded-lg mb-3"}),i.jsx("h3",{className:"font-semibold mb-2",children:p.productName}),i.jsx("button",{onClick:()=>g(p),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg",children:"Write Review"})]},x))})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["My Reviews (",e.length,")"]}),e.length===0?i.jsx("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't written any reviews yet"})}):i.jsx("div",{className:"space-y-4",children:e.map(p=>{var x;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("img",{src:p.productImage,alt:p.productName,className:"w-20 h-20 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold mb-1",children:p.productName}),i.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[1,2,3,4,5].map(b=>i.jsx("span",{className:b<=p.rating?"text-yellow-500":"text-gray-300",children:""},b)),i.jsx("span",{className:"text-sm text-gray-600 ml-2",children:new Date(p.createdAt).toLocaleDateString()})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:p.comment}),((x=p.images)==null?void 0:x.length)>0&&i.jsx("div",{className:"flex gap-2",children:p.images.map((b,w)=>i.jsx("img",{src:b,alt:`Review ${w+1}`,className:"w-16 h-16 object-cover rounded"},w))}),p.helpful>0&&i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[p.helpful," people found this helpful"]})]})]})},p.id)})})]}),l&&i.jsx(K6e,{order:u,onClose:()=>c(!1),onSuccess:()=>{h(),f()}})]})},K6e=({order:t,onClose:e,onSuccess:r})=>{const{currentUser:n}=Le(),[s,a]=T.useState(0),[o,l]=T.useState(""),[c,u]=T.useState([]),[d,h]=T.useState([]),[f,g]=T.useState(!1),p=y=>{const _=Array.from(y.target.files);if(c.length+_.length>5){alert("Maximum 5 images allowed");return}u([...c,..._]);const S=_.map(j=>URL.createObjectURL(j));h([...d,...S])},x=y=>{u(c.filter((_,S)=>S!==y)),h(d.filter((_,S)=>S!==y))},b=async()=>{const y=[];for(let _=0;_<c.length;_++){const S=cs(us,`reviews/${n.uid}/${Date.now()}_${c[_].name}`);await os(S,c[_]);const j=await ls(S);y.push(j)}return y},w=async y=>{if(y.preventDefault(),s===0){alert("Please select a rating");return}g(!0);try{const _=await b();await Mt(ae(q,"reviews"),{userId:n.uid,userName:n.name||"Anonymous",userAvatar:n.avatar||null,productId:t.productId,productName:t.productName,productImage:t.image,vendorId:t.vendorId,orderId:t.orderId,rating:s,comment:o,images:_,helpful:0,verified:!0,createdAt:new Date().toISOString()}),alert("Review submitted successfully!"),r(),e()}catch(_){console.error("Error submitting review:",_),alert("Failed to submit review")}finally{g(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Write a Review"}),i.jsx("button",{onClick:e,className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("img",{src:t.image,alt:t.productName,className:"w-20 h-20 object-cover rounded-lg mb-2"}),i.jsx("h3",{className:"font-semibold",children:t.productName})]}),i.jsxs("form",{onSubmit:w,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(y=>i.jsx("button",{type:"button",onClick:()=>a(y),className:"text-3xl transition hover:scale-110",children:i.jsx("span",{className:y<=s?"text-yellow-500":"text-gray-300",children:""})},y))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Review"}),i.jsx("textarea",{value:o,onChange:y=>l(y.target.value),required:!0,rows:"4",placeholder:"Share your experience with this product...",className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Add Photos (Optional)"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:p,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"}),d.length>0&&i.jsx("div",{className:"mt-3 grid grid-cols-5 gap-2",children:d.map((y,_)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:y,alt:`Preview ${_+1}`,className:"w-full h-20 object-cover rounded"}),i.jsx("button",{type:"button",onClick:()=>x(_),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs",children:""})]},_))})]}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg disabled:bg-gray-400",children:f?"Submitting...":"Submit Review"})]})]})})},G6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(!0);T.useEffect(()=>{a()},[t]);const a=async()=>{try{const o=Ce(ae(q,"disputes"),je("buyerId","==",t.uid)),c=(await me(o)).docs.map(u=>({id:u.id,...u.data()}));r(c)}catch(o){console.error("Error fetching disputes:",o)}finally{s(!1)}};return n?i.jsx(IM,{}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"My Disputes"}),e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"No disputes found"}):i.jsx("div",{className:"space-y-4",children:e.map(o=>{var l;return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",o.orderId]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:o.reason}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Created: ",(l=o.createdAt)==null?void 0:l.toDate().toLocaleDateString()]})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${o.status==="resolved"?"bg-green-100 text-green-800":o.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:o.status})]})},o.id)})})]})},Y6e=()=>{const{currentUser:t}=Le(),[e,r]=T.useState(null),[n,s]=T.useState([]),[a,o]=T.useState(!0),[l,c]=T.useState(!1),[u,d]=T.useState("");T.useEffect(()=>{h()},[t]);const h=async()=>{try{const _=await LM(t.uid),S=await z6e(t.uid);r(_),s(S)}catch(_){console.error("Error fetching loyalty data:",_)}finally{o(!1)}},f=async()=>{const _=parseInt(u);if(!_||_<100){alert("Minimum redemption is 100 points");return}if(_>e.points){alert("Insufficient points");return}try{await V6e(t.uid,_,"Manual redemption for discount code"),alert(`Successfully redeemed ${_} points! Check your email for the discount code.`),c(!1),d(""),h()}catch{alert("Failed to redeem points")}},g=()=>{const _=["bronze","silver","gold","platinum"],S=_.indexOf(e.tier);return S===_.length-1?null:_[S+1]},p=()=>{const _=g();if(!_)return 100;const S=rb[e.tier],j=rb[_],k=(e.lifetimePoints-S)/(j-S)*100;return Math.min(100,Math.max(0,k))},x={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-purple-400 to-purple-600"},b={bronze:"",silver:"",gold:"",platinum:""};if(a)return i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e)return i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 text-center",children:i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loyalty account not found. Contact support."})})});const w=B6e(e.tier),y=g();return i.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Loyalty & Rewards"}),i.jsxs("div",{className:`bg-gradient-to-br ${x[e.tier]} text-white rounded-lg p-8 mb-6 shadow-xl`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-90",children:"Your Tier"}),i.jsxs("h2",{className:"text-4xl font-bold capitalize flex items-center gap-3",children:[b[e.tier]," ",e.tier]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm opacity-90",children:"Available Points"}),i.jsx("p",{className:"text-4xl font-bold",children:e.points.toLocaleString()})]})]}),y&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsxs("span",{children:["Progress to ",y]}),i.jsxs("span",{children:[e.lifetimePoints.toLocaleString()," / ",rb[y].toLocaleString()," points"]})]}),i.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:i.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${p()}%`}})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Benefits"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:[w.discount,"% Member Discount"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"On all purchases"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:[w.pointsMultiplier,"x Points Multiplier"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Earn more points faster"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:w.freeShipping?"Free Shipping":"Standard Shipping"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.freeShipping?"On all orders":"Regular rates apply"})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>c(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium",children:"Redeem Points"}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm font-semibold mb-1",children:"Points Value"}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Your ",e.points.toLocaleString()," points = ",e.points.toLocaleString()," discount"]})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow mb-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"How to Earn Points"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"font-semibold",children:"Shop"}),i.jsx("p",{className:"text-sm text-gray-600",children:"1 point per 100"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"font-semibold",children:"Review Products"}),i.jsx("p",{className:"text-sm text-gray-600",children:"50 points each"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"font-semibold",children:"Refer Friends"}),i.jsx("p",{className:"text-sm text-gray-600",children:"200 points each"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"font-semibold",children:"Birthday Bonus"}),i.jsx("p",{className:"text-sm text-gray-600",children:"1000 points"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Points History"}),i.jsx("div",{className:"space-y-3",children:n.length===0?i.jsx("p",{className:"text-center text-gray-500 py-10",children:"No transactions yet"}):n.map(_=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:_.reason}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(_.createdAt).toLocaleDateString()})]}),i.jsxs("p",{className:`text-lg font-bold ${_.type==="earn"?"text-green-600":"text-red-600"}`,children:[_.type==="earn"?"+":"-",Math.abs(_.points)]})]},_.id))})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Redeem Points"}),i.jsx("button",{onClick:()=>c(!1),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-8 h-8 rounded-full",children:""})]}),i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("p",{className:"text-sm mb-1",children:"Available Points"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.points.toLocaleString()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Points to Redeem (min 100)"}),i.jsx("input",{type:"number",value:u,onChange:_=>d(_.target.value),min:"100",max:e.points,className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700"}),u&&i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["= ",parseInt(u||0).toLocaleString()," discount"]})]}),i.jsx("button",{onClick:f,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-medium",children:"Redeem Points"})]})})]})},Q6e=async(t,e,r,n,s=null)=>{try{await Mt(ae(q,"messages"),{conversationId:t,senderId:e,senderRole:r,message:n,productId:s,read:!1,createdAt:new Date().toISOString()});const a=ie(q,"conversations",t),l=(await Pt(a)).data();await ke(a,{lastMessage:n.substring(0,100),lastMessageAt:ag(),buyerUnread:r==="vendor"?(l.buyerUnread||0)+1:0,vendorUnread:r==="buyer"?(l.vendorUnread||0)+1:0});const c=r==="buyer"?l.vendorId:l.buyerId;return await _f({userId:c,title:" New Message",message:n.substring(0,100),type:Gs.NEW_MESSAGE,actionUrl:`/messages/${t}`,metadata:{conversationId:t}}),!0}catch(a){throw console.error("Error sending message:",a),a}},X6e=async(t,e)=>{try{const r=Ce(ae(q,"conversations"),je(e==="buyer"?"buyerId":"vendorId","==",t),en("lastMessageAt","desc"));return(await me(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error getting conversations:",r),[]}},J6e=async(t,e)=>{try{const r=ie(q,"conversations",t);return await ke(r,{[e==="buyer"?"buyerUnread":"vendorUnread"]:0}),!0}catch(r){throw console.error("Error marking messages as read:",r),r}},Z6e=(t,e)=>{const r=Ce(ae(q,"messages"),je("conversationId","==",t),en("createdAt","asc"));return p4(r,n=>{const s=n.docs.map(a=>({id:a.id,...a.data()}));e(s)})},eSe=()=>{var _;const{currentUser:t}=Le(),[e,r]=T.useState([]),[n,s]=T.useState(null),[a,o]=T.useState([]),[l,c]=T.useState(""),[u,d]=T.useState(!0),[h,f]=T.useState(null),g=T.useRef(null);T.useEffect(()=>{x()},[t]),T.useEffect(()=>{if(n){b(),J6e(n.id,t.role);const S=Z6e(n.id,j=>{o(j),p()});return()=>S()}},[n]);const p=()=>{var S;(S=g.current)==null||S.scrollIntoView({behavior:"smooth"})},x=async()=>{try{const S=await X6e(t.uid,t.role);r(S)}catch(S){console.error("Error fetching conversations:",S)}finally{d(!1)}},b=async()=>{try{const S=t.role==="buyer"?n.vendorId:n.buyerId,j=await Pt(ie(q,"users",S));f({id:j.id,...j.data()})}catch(S){console.error("Error fetching user:",S)}},w=async S=>{if(S.preventDefault(),!!l.trim())try{await Q6e(n.id,t.uid,t.role,l),c(""),x()}catch(j){console.error("Error sending message:",j),alert("Failed to send message")}},y=S=>{const j=new Date(S),N=Math.floor((new Date-j)/1e3);return N<60?"just now":N<3600?`${Math.floor(N/60)}m ago`:N<86400?`${Math.floor(N/3600)}h ago`:j.toLocaleDateString()};return u?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex",children:[i.jsxs("div",{className:"w-full md:w-1/3 bg-white dark:bg-gray-800 border-r dark:border-gray-700 overflow-y-auto",children:[i.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:i.jsx("h2",{className:"text-xl font-bold",children:"Messages"})}),e.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No conversations yet"})]}):i.jsx("div",{children:e.map(S=>{var k,N;const j=t.role==="buyer"?S.buyerUnread:S.vendorUnread;return i.jsxs("button",{onClick:()=>s(S),className:`w-full p-4 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition text-left ${(n==null?void 0:n.id)===S.id?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"font-semibold",children:t.role==="buyer"?"Vendor":"Customer"}),j>0&&i.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:j})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:S.lastMessage||"Start a conversation"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S.lastMessageAt&&y(((N=(k=S.lastMessageAt).toDate)==null?void 0:N.call(k))||S.lastMessageAt)})]},S.id)})})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:n?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 border-b dark:border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold",children:((_=h==null?void 0:h.name)==null?void 0:_.charAt(0).toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:(h==null?void 0:h.name)||"Loading..."}),i.jsx("p",{className:"text-xs text-gray-500",children:h==null?void 0:h.email})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[a.map(S=>i.jsx("div",{className:`flex ${S.senderId===t.uid?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs md:max-w-md px-4 py-2 rounded-lg ${S.senderId===t.uid?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[i.jsx("p",{children:S.message}),i.jsx("p",{className:`text-xs mt-1 ${S.senderId===t.uid?"text-blue-100":"text-gray-500"}`,children:y(S.createdAt)})]})},S.id)),i.jsx("div",{ref:g})]}),i.jsx("form",{onSubmit:w,className:"bg-white dark:bg-gray-800 p-4 border-t dark:border-gray-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send"})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-6xl mb-4",children:""}),i.jsx("p",{children:"Select a conversation to start messaging"})]})})})]})},FM=T.createContext(),tSe=()=>{const t=T.useContext(FM);if(!t)throw new Error("useChat must be used within ChatProvider");return t},rSe=({children:t})=>{const{currentUser:e}=Le(),[r,n]=T.useState([]),[s,a]=T.useState(0);T.useEffect(()=>{if(!e)return;const u=Ce(ae(q,"conversations"),je("participants","array-contains",e.uid),en("lastMessageAt","desc")),d=p4(u,h=>{const f=h.docs.map(p=>({id:p.id,...p.data()}));n(f);const g=f.reduce((p,x)=>{var b;return p+(((b=x.unreadCount)==null?void 0:b[e.uid])||0)},0);a(g)});return()=>d()},[e]);const o=async(u,d,h)=>{try{return(await Mt(ae(q,"conversations"),{participants:[e.uid,u],participantDetails:{[e.uid]:{name:e.name,avatar:e.avatar},[u]:{name:d,avatar:h}},lastMessage:"",lastMessageAt:new Date().toISOString(),unreadCount:{[e.uid]:0,[u]:0},createdAt:new Date().toISOString()})).id}catch(f){throw console.error("Error creating conversation:",f),f}},l=async(u,d,h=[])=>{var f;try{await Mt(ae(q,"conversations",u,"messages"),{senderId:e.uid,senderName:e.name,message:d,attachments:h,read:!1,createdAt:new Date().toISOString()});const g=r.find(x=>x.id===u),p=g.participants.find(x=>x!==e.uid);await ke(ie(q,"conversations",u),{lastMessage:d,lastMessageAt:new Date().toISOString(),[`unreadCount.${p}`]:(((f=g.unreadCount)==null?void 0:f[p])||0)+1})}catch(g){throw console.error("Error sending message:",g),g}},c=async u=>{try{await ke(ie(q,"conversations",u),{[`unreadCount.${e.uid}`]:0})}catch(d){console.error("Error marking as read:",d)}};return i.jsx(FM.Provider,{value:{conversations:r,unreadCount:s,createConversation:o,sendMessage:l,markAsRead:c},children:t})},nSe=({conversationId:t,otherUser:e})=>{const{currentUser:r}=Le(),{sendMessage:n,markAsRead:s}=tSe(),[a,o]=T.useState([]),[l,c]=T.useState(""),[u,d]=T.useState([]),[h,f]=T.useState(!1),g=T.useRef(null);T.useEffect(()=>{if(!t)return;const w=Ce(ae(q,"conversations",t,"messages"),en("createdAt","asc"),yc(100)),y=p4(w,_=>{const S=_.docs.map(j=>({id:j.id,...j.data()}));o(S),p()});return s(t),()=>y()},[t]);const p=()=>{var w;(w=g.current)==null||w.scrollIntoView({behavior:"smooth"})},x=async w=>{const y=Array.from(w.target.files),_=[];for(const S of y){const j=cs(us,`chat/${t}/${Date.now()}_${S.name}`);await os(j,S);const k=await ls(j);_.push({url:k,type:S.type,name:S.name})}d([...u,..._])},b=async w=>{if(w.preventDefault(),!(!l.trim()&&u.length===0))try{await n(t,l,u),c(""),d([])}catch(y){console.error("Error sending message:",y)}};return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border-b flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full overflow-hidden",children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e==null?void 0:e.name}),h&&i.jsx("p",{className:"text-xs text-gray-500",children:"typing..."})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(w=>{var y;return i.jsx("div",{className:`flex ${w.senderId===r.uid?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${w.senderId===r.uid?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[w.message&&i.jsx("p",{children:w.message}),((y=w.attachments)==null?void 0:y.length)>0&&i.jsx("div",{className:"mt-2 space-y-2",children:w.attachments.map((_,S)=>i.jsx("div",{children:_.type.startsWith("image/")?i.jsx("img",{src:_.url,alt:"Attachment",className:"rounded max-w-full"}):i.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:_.name})},S))}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(w.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id)}),i.jsx("div",{ref:g})]}),u.length>0&&i.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 flex gap-2",children:u.map((w,y)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:w.url,alt:"Preview",className:"w-16 h-16 object-cover rounded"}),i.jsx("button",{onClick:()=>d(u.filter((_,S)=>S!==y)),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs",children:""})]},y))}),i.jsx("form",{onSubmit:b,className:"p-4 bg-white dark:bg-gray-800 border-t",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("label",{className:"cursor-pointer p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:["",i.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:x,className:"hidden"})]}),i.jsx("input",{type:"text",value:l,onChange:w=>c(w.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Send"})]})})]})},sSe=()=>{const{conversationId:t}=P0(),{currentUser:e}=Le(),r=Jt(),[n,s]=T.useState(null),[a,o]=T.useState(!0);T.useEffect(()=>{l()},[t]);const l=async()=>{try{const c=await Pt(ie(q,"conversations",t));if(c.exists()){const u=c.data(),d=u.participants.find(h=>h!==e.uid);s(u.participantDetails[d])}}catch(c){console.error("Error fetching conversation:",c)}finally{o(!1)}};return a?i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex flex-col",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b p-4 flex items-center gap-4",children:[i.jsx("button",{onClick:()=>r("/messages"),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-700 w-10 h-10 rounded-full flex items-center justify-center",children:""}),i.jsxs("h1",{className:"text-xl font-bold",children:["Chat with ",n==null?void 0:n.name]})]}),i.jsx("div",{className:"flex-1 overflow-hidden",children:i.jsx(nSe,{conversationId:t,otherUser:n})})]})},aSe=()=>{const[t,e]=T.useState("Initializing Abu Mafhal..."),[r,n]=T.useState(!1),s=["Initializing engine...","Connecting to secure servers...","Synchronizing your profile...","Fetching marketplace updates...","Preparing the experience..."];return T.useEffect(()=>{let a=0;const o=setInterval(()=>{a=(a+1)%s.length,e(s[a])},2e3),l=setTimeout(()=>{n(!0)},5e3);return()=>{clearInterval(o),clearTimeout(l)}},[]),i.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-blue-400 opacity-20"}),i.jsx("img",{src:"/logo.png",alt:"Logo",className:"relative w-32 h-32 object-contain animate-pulse shadow-xl rounded-full",onError:a=>{a.target.src="https://via.placeholder.com/150?text=Abu+Mafhal"}})]}),i.jsxs("div",{className:"mt-8 text-center",children:[i.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:t}),i.jsx("div",{className:"w-48 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mx-auto",children:i.jsx("div",{className:"h-full bg-blue-600 animate-progress origin-left"})}),r&&i.jsx("p",{className:"mt-4 text-orange-500 animate-bounce text-sm font-medium",children:"Connection seems slow. Hang in there!"})]}),i.jsx("style",{children:`
                @keyframes progress {
                    0% { transform: scaleX(0); }
                    50% { transform: scaleX(0.7); }
                    100% { transform: scaleX(1); }
                }
                .animate-progress {
                    animation: progress 2s infinite ease-in-out;
                }
            `})]})},La=({children:t,allowedRoles:e})=>{const{currentUser:r,loading:n}=Le();return n?i.jsx(aSe,{}):r?e&&!e.includes(r.role)?r.role==="admin"?i.jsx(Wa,{to:"/admin",replace:!0}):r.role==="vendor"?i.jsx(Wa,{to:"/vendor",replace:!0}):r.role==="buyer"?i.jsx(Wa,{to:"/buyer",replace:!0}):i.jsx(Wa,{to:"/",replace:!0}):t:i.jsx(Wa,{to:"/login",replace:!0})};function iSe(){return i.jsx(tO,{children:i.jsx(nO,{children:i.jsx(sO,{children:i.jsx(MQ,{children:i.jsxs(VU,{children:[i.jsxs(IU,{children:[i.jsx(fe,{path:"/",element:i.jsx(SX,{})}),i.jsx(fe,{path:"/shop",element:i.jsx(nee,{})}),i.jsx(fe,{path:"/product/:id",element:i.jsx(hee,{})}),i.jsx(fe,{path:"/about",element:i.jsx(fee,{})}),i.jsx(fe,{path:"/contact",element:i.jsx(pee,{})}),i.jsx(fe,{path:"/terms",element:i.jsx(mee,{})}),i.jsx(fe,{path:"/privacy",element:i.jsx(gee,{})}),i.jsx(fe,{path:"/ai-test",element:i.jsx(bee,{})}),i.jsx(fe,{path:"/checkout",element:i.jsx(Jee,{})}),i.jsx(fe,{path:"/notifications",element:i.jsx(La,{children:i.jsx(vee,{})})}),i.jsx(fe,{path:"/login",element:i.jsx(mX,{})}),i.jsx(fe,{path:"/register",element:i.jsx(xX,{})}),i.jsx(fe,{path:"/forgot-password",element:i.jsx(bX,{})}),i.jsx(fe,{path:"/vendor-application",element:i.jsx(La,{allowedRoles:["buyer"],children:i.jsx(yee,{})})}),i.jsx(fe,{path:"/cart",element:i.jsx(La,{children:i.jsx(q6e,{})})}),i.jsx(fe,{path:"/messages",element:i.jsx(La,{children:i.jsx(eSe,{})})}),i.jsx(fe,{path:"/messages/:conversationId",element:i.jsx(La,{children:i.jsx(sSe,{})})}),i.jsxs(fe,{path:"/admin",element:i.jsx(La,{allowedRoles:["admin"],children:i.jsx(Zee,{})}),children:[i.jsx(fe,{index:!0,element:i.jsx(Wa,{to:"/admin/analytics",replace:!0})}),i.jsx(fe,{path:"analytics",element:i.jsx(rte,{})}),i.jsx(fe,{path:"users",element:i.jsx(nte,{})}),i.jsx(fe,{path:"vendors",element:i.jsx(ste,{})}),i.jsx(fe,{path:"vendor-approvals",element:i.jsx(ate,{})}),i.jsx(fe,{path:"products",element:i.jsx(ite,{})}),i.jsx(fe,{path:"products/add",element:i.jsx(lte,{})}),i.jsx(fe,{path:"orders",element:i.jsx(cte,{})}),i.jsx(fe,{path:"disputes",element:i.jsx(hte,{})}),i.jsx(fe,{path:"payments",element:i.jsx(fte,{})}),i.jsx(fe,{path:"payouts",element:i.jsx(gte,{})}),i.jsx(fe,{path:"coupons",element:i.jsx(pte,{})}),i.jsx(fe,{path:"flash-sales",element:i.jsx(mte,{})}),i.jsx(fe,{path:"financials",element:i.jsx(Jke,{})}),i.jsx(fe,{path:"cms",element:i.jsx(Zke,{})}),i.jsx(fe,{path:"audit-logs",element:i.jsx(eNe,{})}),i.jsx(fe,{path:"abandoned-carts",element:i.jsx(oNe,{})}),i.jsx(fe,{path:"reviews",element:i.jsx(tNe,{})}),i.jsx(fe,{path:"settings",element:i.jsx(rNe,{})})]}),i.jsxs(fe,{path:"/vendor",element:i.jsx(La,{allowedRoles:["vendor"],children:i.jsx(ete,{})}),children:[i.jsx(fe,{index:!0,element:i.jsx(Wa,{to:"/vendor/analytics",replace:!0})}),i.jsx(fe,{path:"analytics",element:i.jsx(v6e,{})}),i.jsx(fe,{path:"products",element:i.jsx(x6e,{})}),i.jsx(fe,{path:"products/add",element:i.jsx(b6e,{})}),i.jsx(fe,{path:"products/edit/:id",element:i.jsx(w6e,{})}),i.jsx(fe,{path:"orders",element:i.jsx(_6e,{})}),i.jsx(fe,{path:"profile",element:i.jsx(j6e,{})}),i.jsx(fe,{path:"wallet",element:i.jsx(N6e,{})}),i.jsx(fe,{path:"disputes",element:i.jsx(S6e,{})}),i.jsx(fe,{path:"settings",element:i.jsx(k6e,{})})]}),i.jsxs(fe,{path:"/buyer",element:i.jsx(La,{allowedRoles:["buyer"],children:i.jsx(tte,{})}),children:[i.jsx(fe,{index:!0,element:i.jsx(Wa,{to:"/buyer/orders",replace:!0})}),i.jsx(fe,{path:"orders",element:i.jsx(E6e,{})}),i.jsx(fe,{path:"orders/track/:id",element:i.jsx(A6e,{})}),i.jsx(fe,{path:"wishlist",element:i.jsx(C6e,{})}),i.jsx(fe,{path:"profile",element:i.jsx(L6e,{})}),i.jsx(fe,{path:"wallet",element:i.jsx(W6e,{})}),i.jsx(fe,{path:"reviews",element:i.jsx(H6e,{})}),i.jsx(fe,{path:"disputes",element:i.jsx(G6e,{})}),i.jsx(fe,{path:"settings",element:i.jsx(F6e,{})}),i.jsx(fe,{path:"email-preferences",element:i.jsx(U6e,{})}),i.jsx(fe,{path:"loyalty",element:i.jsx(Y6e,{})})]}),i.jsx(fe,{path:"*",element:i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-9xl font-bold text-gray-900 dark:text-white mb-4",children:"404"}),i.jsx("p",{className:"text-2xl text-gray-600 dark:text-gray-400 mb-2",children:"Page Not Found"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-500 mb-8",children:"The page you're looking for doesn't exist."}),i.jsxs("a",{href:"/",className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2 font-medium shadow-lg",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Go to Home"})]})]})})})]}),i.jsx(pX,{})]})})})})})}const oSe=()=>(T.useEffect(()=>{const t=()=>{const r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.location.search.indexOf("force=web")!==-1;r&&!n&&(console.log("MobileLoader: Redirecting to /mobile..."),window.location.replace("/mobile"))},e=setInterval(t,1e3);return t(),()=>clearInterval(e)},[]),i.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#fff",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999},children:[i.jsx("div",{style:{width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("h2",{style:{fontFamily:"sans-serif",marginTop:"20px"},children:"Loading Mobile Experience..."}),i.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `})]})),AC=nb.createRoot(document.getElementById("root")),lSe=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),cSe=window.location.search.indexOf("force=web")!==-1;lSe&&!cSe?AC.render(i.jsx(L.StrictMode,{children:i.jsx(oSe,{})})):AC.render(i.jsx(L.StrictMode,{children:i.jsx(tO,{children:i.jsx(nO,{children:i.jsx(rSe,{children:i.jsx(sO,{children:i.jsx(iSe,{})})})})})}));
