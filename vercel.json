{
    "buildCommand": "npm install && npm run build && cd mobile && npm install && npx expo export --platform web && cd .. && mkdir -p dist/mobile && cp -R mobile/dist/* dist/mobile/",
    "outputDirectory": "dist",
    "framework": "vite",
    "headers": [
        {
            "source": "/",
            "headers": [
                {
                    "key": "Vary",
                    "value": "User-Agent"
                }
            ]
        }
    ],
    "redirects": [
        {
            "source": "/",
            "has": [
                {
                    "type": "header",
                    "key": "User-Agent",
                    "value": "(?i).*(android|iphone|ipad|ipod|opera mini|iemobile|mobile).*"
                }
            ],
            "destination": "/mobile",
            "permanent": false
        },
        {
            "source": "/mobile",
            "destination": "/mobile/"
        }
    ],
    "rewrites": [
        {
            "source": "/_expo/(.*)",
            "destination": "/mobile/_expo/$1"
        },
        {
            "source": "/assets/(.*)",
            "destination": "/mobile/assets/$1"
        },
        {
            "source": "/mobile/(.*)",
            "destination": "/mobile/index.html"
        },
        {
            "source": "/(.*)",
            "destination": "/index.html"
        }
    ]
}